function AC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lT={exports:{}},Oh={},uT={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),xC=Symbol.for("react.portal"),bC=Symbol.for("react.fragment"),PC=Symbol.for("react.strict_mode"),CC=Symbol.for("react.profiler"),RC=Symbol.for("react.provider"),kC=Symbol.for("react.context"),NC=Symbol.for("react.forward_ref"),DC=Symbol.for("react.suspense"),OC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),e_=Symbol.iterator;function LC(t){return t===null||typeof t!="object"?null:(t=e_&&t[e_]||t["@@iterator"],typeof t=="function"?t:null)}var cT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hT=Object.assign,dT={};function No(t,e,n){this.props=t,this.context=e,this.refs=dT,this.updater=n||cT}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fT(){}fT.prototype=No.prototype;function Wm(t,e,n){this.props=t,this.context=e,this.refs=dT,this.updater=n||cT}var Hm=Wm.prototype=new fT;Hm.constructor=Wm;hT(Hm,No.prototype);Hm.isPureReactComponent=!0;var t_=Array.isArray,pT=Object.prototype.hasOwnProperty,qm={current:null},mT={key:!0,ref:!0,__self:!0,__source:!0};function gT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)pT.call(e,r)&&!mT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ol,type:t,key:s,ref:o,props:i,_owner:qm.current}}function MC(t,e){return{$$typeof:Ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ol}function jC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n_=/\/+/g;function Kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jC(""+t.key):e.toString(36)}function ac(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ol:case xC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Kd(o,0):r,t_(i)?(n="",t!=null&&(n=t.replace(n_,"$&/")+"/"),ac(i,e,n,"",function(c){return c})):i!=null&&(Gm(i)&&(i=MC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(n_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",t_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Kd(s,a);o+=ac(s,e,n,l,i)}else if(l=LC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Kd(s,a++),o+=ac(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nu(t,e,n){if(t==null)return t;var r=[],i=0;return ac(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},lc={transition:null},UC={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:lc,ReactCurrentOwner:qm};function yT(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!Gm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=No;ue.Fragment=bC;ue.Profiler=CC;ue.PureComponent=Wm;ue.StrictMode=PC;ue.Suspense=DC;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UC;ue.act=yT;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pT.call(e,l)&&!mT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ol,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:kC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RC,_context:t},t.Consumer=t};ue.createElement=gT;ue.createFactory=function(t){var e=gT.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:NC,render:t}};ue.isValidElement=Gm;ue.lazy=function(t){return{$$typeof:VC,_payload:{_status:-1,_result:t},_init:FC}};ue.memo=function(t,e){return{$$typeof:OC,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=lc.transition;lc.transition={};try{t()}finally{lc.transition=e}};ue.unstable_act=yT;ue.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ue.useContext=function(t){return Bt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ue.useId=function(){return Bt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};ue.useRef=function(t){return Bt.current.useRef(t)};ue.useState=function(t){return Bt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Bt.current.useTransition()};ue.version="18.3.1";uT.exports=ue;var R=uT.exports;const X=Dh(R),BC=AC({__proto__:null,default:X},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=R,zC=Symbol.for("react.element"),WC=Symbol.for("react.fragment"),HC=Object.prototype.hasOwnProperty,qC=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GC={key:!0,ref:!0,__self:!0,__source:!0};function vT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HC.call(e,r)&&!GC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zC,type:t,key:s,ref:o,props:i,_owner:qC.current}}Oh.Fragment=WC;Oh.jsx=vT;Oh.jsxs=vT;lT.exports=Oh;var y=lT.exports,Xf={},_T={exports:{}},ln={},wT={exports:{}},ET={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var H=B.length;B.push(W);e:for(;0<H;){var K=H-1>>>1,J=B[K];if(0<i(J,W))B[K]=W,B[H]=J,H=K;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],H=B.pop();if(H!==W){B[0]=H;e:for(var K=0,J=B.length,de=J>>>1;K<de;){var ht=2*(K+1)-1,Et=B[ht],Ge=ht+1,rt=B[Ge];if(0>i(Et,H))Ge<J&&0>i(rt,Et)?(B[K]=rt,B[Ge]=H,K=Ge):(B[K]=Et,B[ht]=H,K=ht);else if(Ge<J&&0>i(rt,H))B[K]=rt,B[Ge]=H,K=Ge;else break e}}return W}function i(B,W){var H=B.sortIndex-W.sortIndex;return H!==0?H:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,v=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=B)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function k(B){if(_=!1,S(B),!v)if(n(l)!==null)v=!0,oe(V);else{var W=n(c);W!==null&&Y(k,W.startTime-B)}}function V(B,W){v=!1,_&&(_=!1,T(E),E=-1),g=!0;var H=p;try{for(S(W),d=n(l);d!==null&&(!(d.expirationTime>W)||B&&!N());){var K=d.callback;if(typeof K=="function"){d.callback=null,p=d.priorityLevel;var J=K(d.expirationTime<=W);W=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),S(W)}else r(l);d=n(l)}if(d!==null)var de=!0;else{var ht=n(c);ht!==null&&Y(k,ht.startTime-W),de=!1}return de}finally{d=null,p=H,g=!1}}var M=!1,x=null,E=-1,b=5,P=-1;function N(){return!(t.unstable_now()-P<b)}function D(){if(x!==null){var B=t.unstable_now();P=B;var W=!0;try{W=x(!0,B)}finally{W?C():(M=!1,x=null)}}else M=!1}var C;if(typeof w=="function")C=function(){w(D)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Re=ae.port2;ae.port1.onmessage=D,C=function(){Re.postMessage(null)}}else C=function(){I(D,0)};function oe(B){x=B,M||(M=!0,C())}function Y(B,W){E=I(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,oe(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var H=p;p=W;try{return B()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=p;p=B;try{return W()}finally{p=H}},t.unstable_scheduleCallback=function(B,W,H){var K=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,B={id:h++,callback:W,priorityLevel:B,startTime:H,expirationTime:J,sortIndex:-1},H>K?(B.sortIndex=H,e(c,B),n(l)===null&&B===n(c)&&(_?(T(E),E=-1):_=!0,Y(k,H-K))):(B.sortIndex=J,e(l,B),v||g||(v=!0,oe(V))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var W=p;return function(){var H=p;p=W;try{return B.apply(this,arguments)}finally{p=H}}}})(ET);wT.exports=ET;var KC=wT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC=R,on=KC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TT=new Set,Xa={};function ds(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(Xa[t]=e,t=0;t<e.length;t++)TT.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jf=Object.prototype.hasOwnProperty,YC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r_={},i_={};function XC(t){return Jf.call(i_,t)?!0:Jf.call(r_,t)?!1:YC.test(t)?i_[t]=!0:(r_[t]=!0,!1)}function JC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZC(t,e,n,r){if(e===null||typeof e>"u"||JC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Km=/[\-:]([a-z])/g;function Qm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Km,Qm);_t[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Km,Qm);_t[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Km,Qm);_t[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ym(t,e,n,r){var i=_t.hasOwnProperty(e)?_t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZC(e,n,i,r)&&(n=null),r||i===null?XC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xr=QC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Du=Symbol.for("react.element"),js=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),Xm=Symbol.for("react.strict_mode"),Zf=Symbol.for("react.profiler"),ST=Symbol.for("react.provider"),IT=Symbol.for("react.context"),Jm=Symbol.for("react.forward_ref"),ep=Symbol.for("react.suspense"),tp=Symbol.for("react.suspense_list"),Zm=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),AT=Symbol.for("react.offscreen"),s_=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=s_&&t[s_]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Qd;function Ea(t){if(Qd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qd=e&&e[1]||""}return`
`+Qd+t}var Yd=!1;function Xd(t,e){if(!t||Yd)return"";Yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ea(t):""}function eR(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=Xd(t.type,!1),t;case 11:return t=Xd(t.type.render,!1),t;case 1:return t=Xd(t.type,!0),t;default:return""}}function np(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fs:return"Fragment";case js:return"Portal";case Zf:return"Profiler";case Xm:return"StrictMode";case ep:return"Suspense";case tp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IT:return(t.displayName||"Context")+".Consumer";case ST:return(t._context.displayName||"Context")+".Provider";case Jm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zm:return e=t.displayName||null,e!==null?e:np(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return np(t(e))}catch{}}return null}function tR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return np(e);case 8:return e===Xm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nR(t){var e=xT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=nR(t))}function bT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rp(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function o_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PT(t,e){e=e.checked,e!=null&&Ym(t,"checked",e,!1)}function ip(t,e){PT(t,e);var n=oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sp(t,e.type,n):e.hasOwnProperty("defaultValue")&&sp(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sp(t,e,n){(e!=="number"||Rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ta=Array.isArray;function io(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function op(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ta(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function CT(t,e){var n=oi(e.value),r=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function u_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ap(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,kT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rR=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(t){rR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Da[e]=Da[t]})});function NT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Da.hasOwnProperty(t)&&Da[t]?(""+e).trim():e+"px"}function DT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iR=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lp(t,e){if(e){if(iR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=null;function eg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hp=null,so=null,oo=null;function c_(t){if(t=Ml(t)){if(typeof hp!="function")throw Error($(280));var e=t.stateNode;e&&(e=Fh(e),hp(t.stateNode,t.type,e))}}function OT(t){so?oo?oo.push(t):oo=[t]:so=t}function VT(){if(so){var t=so,e=oo;if(oo=so=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function LT(t,e){return t(e)}function MT(){}var Jd=!1;function jT(t,e,n){if(Jd)return t(e,n);Jd=!0;try{return LT(t,e,n)}finally{Jd=!1,(so!==null||oo!==null)&&(MT(),VT())}}function Za(t,e){var n=t.stateNode;if(n===null)return null;var r=Fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var dp=!1;if(gr)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){dp=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{dp=!1}function sR(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Oa=!1,kc=null,Nc=!1,fp=null,oR={onError:function(t){Oa=!0,kc=t}};function aR(t,e,n,r,i,s,o,a,l){Oa=!1,kc=null,sR.apply(oR,arguments)}function lR(t,e,n,r,i,s,o,a,l){if(aR.apply(this,arguments),Oa){if(Oa){var c=kc;Oa=!1,kc=null}else throw Error($(198));Nc||(Nc=!0,fp=c)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function FT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function h_(t){if(fs(t)!==t)throw Error($(188))}function uR(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return h_(i),t;if(s===r)return h_(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function UT(t){return t=uR(t),t!==null?BT(t):null}function BT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=BT(t);if(e!==null)return e;t=t.sibling}return null}var $T=on.unstable_scheduleCallback,d_=on.unstable_cancelCallback,cR=on.unstable_shouldYield,hR=on.unstable_requestPaint,He=on.unstable_now,dR=on.unstable_getCurrentPriorityLevel,tg=on.unstable_ImmediatePriority,zT=on.unstable_UserBlockingPriority,Dc=on.unstable_NormalPriority,fR=on.unstable_LowPriority,WT=on.unstable_IdlePriority,Vh=null,Fn=null;function pR(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Vh,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:yR,mR=Math.log,gR=Math.LN2;function yR(t){return t>>>=0,t===0?32:31-(mR(t)/gR|0)|0}var Lu=64,Mu=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Sa(a):(s&=o,s!==0&&(r=Sa(s)))}else o=n&~i,o!==0?r=Sa(o):s!==0&&(r=Sa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),i=1<<n,r|=t[n],e&=~i;return r}function vR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _R(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=vR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function pp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HT(){var t=Lu;return Lu<<=1,!(Lu&4194240)&&(Lu=64),t}function Zd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function wR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ng(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function qT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GT,rg,KT,QT,YT,mp=!1,ju=[],qr=null,Gr=null,Kr=null,el=new Map,tl=new Map,Lr=[],ER="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f_(t,e){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":el.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(e.pointerId)}}function ha(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ml(e),e!==null&&rg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function TR(t,e,n,r,i){switch(e){case"focusin":return qr=ha(qr,t,e,n,r,i),!0;case"dragenter":return Gr=ha(Gr,t,e,n,r,i),!0;case"mouseover":return Kr=ha(Kr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return el.set(s,ha(el.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,tl.set(s,ha(tl.get(s)||null,t,e,n,r,i)),!0}return!1}function XT(t){var e=Hi(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=FT(n),e!==null){t.blockedOn=e,YT(t.priority,function(){KT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cp=r,n.target.dispatchEvent(r),cp=null}else return e=Ml(n),e!==null&&rg(e),t.blockedOn=n,!1;e.shift()}return!0}function p_(t,e,n){uc(t)&&n.delete(e)}function SR(){mp=!1,qr!==null&&uc(qr)&&(qr=null),Gr!==null&&uc(Gr)&&(Gr=null),Kr!==null&&uc(Kr)&&(Kr=null),el.forEach(p_),tl.forEach(p_)}function da(t,e){t.blockedOn===e&&(t.blockedOn=null,mp||(mp=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,SR)))}function nl(t){function e(i){return da(i,t)}if(0<ju.length){da(ju[0],t);for(var n=1;n<ju.length;n++){var r=ju[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qr!==null&&da(qr,t),Gr!==null&&da(Gr,t),Kr!==null&&da(Kr,t),el.forEach(e),tl.forEach(e),n=0;n<Lr.length;n++)r=Lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)XT(n),n.blockedOn===null&&Lr.shift()}var ao=xr.ReactCurrentBatchConfig,Vc=!0;function IR(t,e,n,r){var i=_e,s=ao.transition;ao.transition=null;try{_e=1,ig(t,e,n,r)}finally{_e=i,ao.transition=s}}function AR(t,e,n,r){var i=_e,s=ao.transition;ao.transition=null;try{_e=4,ig(t,e,n,r)}finally{_e=i,ao.transition=s}}function ig(t,e,n,r){if(Vc){var i=gp(t,e,n,r);if(i===null)cf(t,e,r,Lc,n),f_(t,r);else if(TR(i,t,e,n,r))r.stopPropagation();else if(f_(t,r),e&4&&-1<ER.indexOf(t)){for(;i!==null;){var s=Ml(i);if(s!==null&&GT(s),s=gp(t,e,n,r),s===null&&cf(t,e,r,Lc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else cf(t,e,r,null,n)}}var Lc=null;function gp(t,e,n,r){if(Lc=null,t=eg(r),t=Hi(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=FT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lc=t,null}function JT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dR()){case tg:return 1;case zT:return 4;case Dc:case fR:return 16;case WT:return 536870912;default:return 16}default:return 16}}var $r=null,sg=null,cc=null;function ZT(){if(cc)return cc;var t,e=sg,n=e.length,r,i="value"in $r?$r.value:$r.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return cc=i.slice(t,1<r?1-r:void 0)}function hc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fu(){return!0}function m_(){return!1}function un(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fu:m_,this.isPropagationStopped=m_,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fu)},persist:function(){},isPersistent:Fu}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},og=un(Do),Ll=Fe({},Do,{view:0,detail:0}),xR=un(Ll),ef,tf,fa,Lh=Fe({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fa&&(fa&&t.type==="mousemove"?(ef=t.screenX-fa.screenX,tf=t.screenY-fa.screenY):tf=ef=0,fa=t),ef)},movementY:function(t){return"movementY"in t?t.movementY:tf}}),g_=un(Lh),bR=Fe({},Lh,{dataTransfer:0}),PR=un(bR),CR=Fe({},Ll,{relatedTarget:0}),nf=un(CR),RR=Fe({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),kR=un(RR),NR=Fe({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DR=un(NR),OR=Fe({},Do,{data:0}),y_=un(OR),VR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MR[t])?!!e[t]:!1}function ag(){return jR}var FR=Fe({},Ll,{key:function(t){if(t.key){var e=VR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ag,charCode:function(t){return t.type==="keypress"?hc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UR=un(FR),BR=Fe({},Lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v_=un(BR),$R=Fe({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ag}),zR=un($R),WR=Fe({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),HR=un(WR),qR=Fe({},Lh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GR=un(qR),KR=[9,13,27,32],lg=gr&&"CompositionEvent"in window,Va=null;gr&&"documentMode"in document&&(Va=document.documentMode);var QR=gr&&"TextEvent"in window&&!Va,eS=gr&&(!lg||Va&&8<Va&&11>=Va),__=" ",w_=!1;function tS(t,e){switch(t){case"keyup":return KR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function YR(t,e){switch(t){case"compositionend":return nS(e);case"keypress":return e.which!==32?null:(w_=!0,__);case"textInput":return t=e.data,t===__&&w_?null:t;default:return null}}function XR(t,e){if(Us)return t==="compositionend"||!lg&&tS(t,e)?(t=ZT(),cc=sg=$r=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eS&&e.locale!=="ko"?null:e.data;default:return null}}var JR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JR[t.type]:e==="textarea"}function rS(t,e,n,r){OT(r),e=Mc(e,"onChange"),0<e.length&&(n=new og("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var La=null,rl=null;function ZR(t){pS(t,0)}function Mh(t){var e=zs(t);if(bT(e))return t}function ek(t,e){if(t==="change")return e}var iS=!1;if(gr){var rf;if(gr){var sf="oninput"in document;if(!sf){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),sf=typeof T_.oninput=="function"}rf=sf}else rf=!1;iS=rf&&(!document.documentMode||9<document.documentMode)}function S_(){La&&(La.detachEvent("onpropertychange",sS),rl=La=null)}function sS(t){if(t.propertyName==="value"&&Mh(rl)){var e=[];rS(e,rl,t,eg(t)),jT(ZR,e)}}function tk(t,e,n){t==="focusin"?(S_(),La=e,rl=n,La.attachEvent("onpropertychange",sS)):t==="focusout"&&S_()}function nk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mh(rl)}function rk(t,e){if(t==="click")return Mh(e)}function ik(t,e){if(t==="input"||t==="change")return Mh(e)}function sk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:sk;function il(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jf.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function I_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var n=I_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I_(n)}}function oS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aS(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rc(t.document)}return e}function ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ok(t){var e=aS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oS(n.ownerDocument.documentElement,n)){if(r!==null&&ug(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=A_(n,s);var o=A_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ak=gr&&"documentMode"in document&&11>=document.documentMode,Bs=null,yp=null,Ma=null,vp=!1;function x_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vp||Bs==null||Bs!==Rc(r)||(r=Bs,"selectionStart"in r&&ug(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ma&&il(Ma,r)||(Ma=r,r=Mc(yp,"onSelect"),0<r.length&&(e=new og("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bs)))}function Uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $s={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionend:Uu("Transition","TransitionEnd")},of={},lS={};gr&&(lS=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function jh(t){if(of[t])return of[t];if(!$s[t])return t;var e=$s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lS)return of[t]=e[n];return t}var uS=jh("animationend"),cS=jh("animationiteration"),hS=jh("animationstart"),dS=jh("transitionend"),fS=new Map,b_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){fS.set(t,e),ds(e,[t])}for(var af=0;af<b_.length;af++){var lf=b_[af],lk=lf.toLowerCase(),uk=lf[0].toUpperCase()+lf.slice(1);gi(lk,"on"+uk)}gi(uS,"onAnimationEnd");gi(cS,"onAnimationIteration");gi(hS,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(dS,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function P_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lR(r,e,void 0,t),t.currentTarget=null}function pS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;P_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;P_(i,a,c),s=l}}}if(Nc)throw t=fp,Nc=!1,fp=null,t}function Ae(t,e){var n=e[Sp];n===void 0&&(n=e[Sp]=new Set);var r=t+"__bubble";n.has(r)||(mS(e,t,2,!1),n.add(r))}function uf(t,e,n){var r=0;e&&(r|=4),mS(n,t,r,e)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function sl(t){if(!t[Bu]){t[Bu]=!0,TT.forEach(function(n){n!=="selectionchange"&&(ck.has(n)||uf(n,!1,t),uf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bu]||(e[Bu]=!0,uf("selectionchange",!1,e))}}function mS(t,e,n,r){switch(JT(e)){case 1:var i=IR;break;case 4:i=AR;break;default:i=ig}n=i.bind(null,e,n,t),i=void 0,!dp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jT(function(){var c=s,h=eg(n),d=[];e:{var p=fS.get(t);if(p!==void 0){var g=og,v=t;switch(t){case"keypress":if(hc(n)===0)break e;case"keydown":case"keyup":g=UR;break;case"focusin":v="focus",g=nf;break;case"focusout":v="blur",g=nf;break;case"beforeblur":case"afterblur":g=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=g_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=PR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zR;break;case uS:case cS:case hS:g=kR;break;case dS:g=HR;break;case"scroll":g=xR;break;case"wheel":g=GR;break;case"copy":case"cut":case"paste":g=DR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=v_}var _=(e&4)!==0,I=!_&&t==="scroll",T=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,T!==null&&(k=Za(w,T),k!=null&&_.push(ol(w,k,S)))),I)break;w=w.return}0<_.length&&(p=new g(p,v,null,n,h),d.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==cp&&(v=n.relatedTarget||n.fromElement)&&(Hi(v)||v[yr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?Hi(v):null,v!==null&&(I=fs(v),v!==I||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(_=g_,k="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=v_,k="onPointerLeave",T="onPointerEnter",w="pointer"),I=g==null?p:zs(g),S=v==null?p:zs(v),p=new _(k,w+"leave",g,n,h),p.target=I,p.relatedTarget=S,k=null,Hi(h)===c&&(_=new _(T,w+"enter",v,n,h),_.target=S,_.relatedTarget=I,k=_),I=k,g&&v)t:{for(_=g,T=v,w=0,S=_;S;S=Ds(S))w++;for(S=0,k=T;k;k=Ds(k))S++;for(;0<w-S;)_=Ds(_),w--;for(;0<S-w;)T=Ds(T),S--;for(;w--;){if(_===T||T!==null&&_===T.alternate)break t;_=Ds(_),T=Ds(T)}_=null}else _=null;g!==null&&C_(d,p,g,_,!1),v!==null&&I!==null&&C_(d,I,v,_,!0)}}e:{if(p=c?zs(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=ek;else if(E_(p))if(iS)V=ik;else{V=nk;var M=tk}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=rk);if(V&&(V=V(t,c))){rS(d,V,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&sp(p,"number",p.value)}switch(M=c?zs(c):window,t){case"focusin":(E_(M)||M.contentEditable==="true")&&(Bs=M,yp=c,Ma=null);break;case"focusout":Ma=yp=Bs=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,x_(d,n,h);break;case"selectionchange":if(ak)break;case"keydown":case"keyup":x_(d,n,h)}var x;if(lg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Us?tS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(eS&&n.locale!=="ko"&&(Us||E!=="onCompositionStart"?E==="onCompositionEnd"&&Us&&(x=ZT()):($r=h,sg="value"in $r?$r.value:$r.textContent,Us=!0)),M=Mc(c,E),0<M.length&&(E=new y_(E,t,null,n,h),d.push({event:E,listeners:M}),x?E.data=x:(x=nS(n),x!==null&&(E.data=x)))),(x=QR?YR(t,n):XR(t,n))&&(c=Mc(c,"onBeforeInput"),0<c.length&&(h=new y_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=x))}pS(d,e)})}function ol(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Za(t,n),s!=null&&r.unshift(ol(t,s,i)),s=Za(t,e),s!=null&&r.push(ol(t,s,i))),t=t.return}return r}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Za(n,s),l!=null&&o.unshift(ol(n,l,a))):i||(l=Za(n,s),l!=null&&o.push(ol(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hk=/\r\n?/g,dk=/\u0000|\uFFFD/g;function R_(t){return(typeof t=="string"?t:""+t).replace(hk,`
`).replace(dk,"")}function $u(t,e,n){if(e=R_(e),R_(t)!==e&&n)throw Error($(425))}function jc(){}var _p=null,wp=null;function Ep(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tp=typeof setTimeout=="function"?setTimeout:void 0,fk=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,pk=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(t){return k_.resolve(null).then(t).catch(mk)}:Tp;function mk(t){setTimeout(function(){throw t})}function hf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);nl(e)}function Qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Oo,al="__reactProps$"+Oo,yr="__reactContainer$"+Oo,Sp="__reactEvents$"+Oo,gk="__reactListeners$"+Oo,yk="__reactHandles$"+Oo;function Hi(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N_(t);t!==null;){if(n=t[Mn])return n;t=N_(t)}return e}t=n,n=t.parentNode}return null}function Ml(t){return t=t[Mn]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Fh(t){return t[al]||null}var Ip=[],Ws=-1;function yi(t){return{current:t}}function Pe(t){0>Ws||(t.current=Ip[Ws],Ip[Ws]=null,Ws--)}function Se(t,e){Ws++,Ip[Ws]=t.current,t.current=e}var ai={},Nt=yi(ai),Kt=yi(!1),ts=ai;function yo(t,e){var n=t.type.contextTypes;if(!n)return ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qt(t){return t=t.childContextTypes,t!=null}function Fc(){Pe(Kt),Pe(Nt)}function D_(t,e,n){if(Nt.current!==ai)throw Error($(168));Se(Nt,e),Se(Kt,n)}function gS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,tR(t)||"Unknown",i));return Fe({},n,r)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,ts=Nt.current,Se(Nt,t),Se(Kt,Kt.current),!0}function O_(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=gS(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,Pe(Kt),Pe(Nt),Se(Nt,t)):Pe(Kt),Se(Kt,n)}var ir=null,Uh=!1,df=!1;function yS(t){ir===null?ir=[t]:ir.push(t)}function vk(t){Uh=!0,yS(t)}function vi(){if(!df&&ir!==null){df=!0;var t=0,e=_e;try{var n=ir;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ir=null,Uh=!1}catch(i){throw ir!==null&&(ir=ir.slice(t+1)),$T(tg,vi),i}finally{_e=e,df=!1}}return null}var Hs=[],qs=0,Bc=null,$c=0,dn=[],fn=0,ns=null,sr=1,or="";function Ui(t,e){Hs[qs++]=$c,Hs[qs++]=Bc,Bc=t,$c=e}function vS(t,e,n){dn[fn++]=sr,dn[fn++]=or,dn[fn++]=ns,ns=t;var r=sr;t=or;var i=32-xn(r)-1;r&=~(1<<i),n+=1;var s=32-xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,sr=1<<32-xn(e)+i|n<<i|r,or=s+t}else sr=1<<s|n<<i|r,or=t}function cg(t){t.return!==null&&(Ui(t,1),vS(t,1,0))}function hg(t){for(;t===Bc;)Bc=Hs[--qs],Hs[qs]=null,$c=Hs[--qs],Hs[qs]=null;for(;t===ns;)ns=dn[--fn],dn[fn]=null,or=dn[--fn],dn[fn]=null,sr=dn[--fn],dn[fn]=null}var sn=null,nn=null,ke=!1,In=null;function _S(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function V_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sn=t,nn=Qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sn=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sn=t,nn=null,!0):!1;default:return!1}}function Ap(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xp(t){if(ke){var e=nn;if(e){var n=e;if(!V_(t,e)){if(Ap(t))throw Error($(418));e=Qr(n.nextSibling);var r=sn;e&&V_(t,e)?_S(r,n):(t.flags=t.flags&-4097|2,ke=!1,sn=t)}}else{if(Ap(t))throw Error($(418));t.flags=t.flags&-4097|2,ke=!1,sn=t}}}function L_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function zu(t){if(t!==sn)return!1;if(!ke)return L_(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ep(t.type,t.memoizedProps)),e&&(e=nn)){if(Ap(t))throw wS(),Error($(418));for(;e;)_S(t,e),e=Qr(e.nextSibling)}if(L_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=Qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=sn?Qr(t.stateNode.nextSibling):null;return!0}function wS(){for(var t=nn;t;)t=Qr(t.nextSibling)}function vo(){nn=sn=null,ke=!1}function dg(t){In===null?In=[t]:In.push(t)}var _k=xr.ReactCurrentBatchConfig;function pa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function M_(t){var e=t._init;return e(t._payload)}function ES(t){function e(T,w){if(t){var S=T.deletions;S===null?(T.deletions=[w],T.flags|=16):S.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function i(T,w){return T=Zr(T,w),T.index=0,T.sibling=null,T}function s(T,w,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<w?(T.flags|=2,w):S):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,w,S,k){return w===null||w.tag!==6?(w=_f(S,T.mode,k),w.return=T,w):(w=i(w,S),w.return=T,w)}function l(T,w,S,k){var V=S.type;return V===Fs?h(T,w,S.props.children,k,S.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Dr&&M_(V)===w.type)?(k=i(w,S.props),k.ref=pa(T,w,S),k.return=T,k):(k=vc(S.type,S.key,S.props,null,T.mode,k),k.ref=pa(T,w,S),k.return=T,k)}function c(T,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=wf(S,T.mode,k),w.return=T,w):(w=i(w,S.children||[]),w.return=T,w)}function h(T,w,S,k,V){return w===null||w.tag!==7?(w=Xi(S,T.mode,k,V),w.return=T,w):(w=i(w,S),w.return=T,w)}function d(T,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_f(""+w,T.mode,S),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Du:return S=vc(w.type,w.key,w.props,null,T.mode,S),S.ref=pa(T,null,w),S.return=T,S;case js:return w=wf(w,T.mode,S),w.return=T,w;case Dr:var k=w._init;return d(T,k(w._payload),S)}if(Ta(w)||ua(w))return w=Xi(w,T.mode,S,null),w.return=T,w;Wu(T,w)}return null}function p(T,w,S,k){var V=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:a(T,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Du:return S.key===V?l(T,w,S,k):null;case js:return S.key===V?c(T,w,S,k):null;case Dr:return V=S._init,p(T,w,V(S._payload),k)}if(Ta(S)||ua(S))return V!==null?null:h(T,w,S,k,null);Wu(T,S)}return null}function g(T,w,S,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return T=T.get(S)||null,a(w,T,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Du:return T=T.get(k.key===null?S:k.key)||null,l(w,T,k,V);case js:return T=T.get(k.key===null?S:k.key)||null,c(w,T,k,V);case Dr:var M=k._init;return g(T,w,S,M(k._payload),V)}if(Ta(k)||ua(k))return T=T.get(S)||null,h(w,T,k,V,null);Wu(w,k)}return null}function v(T,w,S,k){for(var V=null,M=null,x=w,E=w=0,b=null;x!==null&&E<S.length;E++){x.index>E?(b=x,x=null):b=x.sibling;var P=p(T,x,S[E],k);if(P===null){x===null&&(x=b);break}t&&x&&P.alternate===null&&e(T,x),w=s(P,w,E),M===null?V=P:M.sibling=P,M=P,x=b}if(E===S.length)return n(T,x),ke&&Ui(T,E),V;if(x===null){for(;E<S.length;E++)x=d(T,S[E],k),x!==null&&(w=s(x,w,E),M===null?V=x:M.sibling=x,M=x);return ke&&Ui(T,E),V}for(x=r(T,x);E<S.length;E++)b=g(x,T,E,S[E],k),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?E:b.key),w=s(b,w,E),M===null?V=b:M.sibling=b,M=b);return t&&x.forEach(function(N){return e(T,N)}),ke&&Ui(T,E),V}function _(T,w,S,k){var V=ua(S);if(typeof V!="function")throw Error($(150));if(S=V.call(S),S==null)throw Error($(151));for(var M=V=null,x=w,E=w=0,b=null,P=S.next();x!==null&&!P.done;E++,P=S.next()){x.index>E?(b=x,x=null):b=x.sibling;var N=p(T,x,P.value,k);if(N===null){x===null&&(x=b);break}t&&x&&N.alternate===null&&e(T,x),w=s(N,w,E),M===null?V=N:M.sibling=N,M=N,x=b}if(P.done)return n(T,x),ke&&Ui(T,E),V;if(x===null){for(;!P.done;E++,P=S.next())P=d(T,P.value,k),P!==null&&(w=s(P,w,E),M===null?V=P:M.sibling=P,M=P);return ke&&Ui(T,E),V}for(x=r(T,x);!P.done;E++,P=S.next())P=g(x,T,E,P.value,k),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?E:P.key),w=s(P,w,E),M===null?V=P:M.sibling=P,M=P);return t&&x.forEach(function(D){return e(T,D)}),ke&&Ui(T,E),V}function I(T,w,S,k){if(typeof S=="object"&&S!==null&&S.type===Fs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Du:e:{for(var V=S.key,M=w;M!==null;){if(M.key===V){if(V=S.type,V===Fs){if(M.tag===7){n(T,M.sibling),w=i(M,S.props.children),w.return=T,T=w;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Dr&&M_(V)===M.type){n(T,M.sibling),w=i(M,S.props),w.ref=pa(T,M,S),w.return=T,T=w;break e}n(T,M);break}else e(T,M);M=M.sibling}S.type===Fs?(w=Xi(S.props.children,T.mode,k,S.key),w.return=T,T=w):(k=vc(S.type,S.key,S.props,null,T.mode,k),k.ref=pa(T,w,S),k.return=T,T=k)}return o(T);case js:e:{for(M=S.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(T,w.sibling),w=i(w,S.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=wf(S,T.mode,k),w.return=T,T=w}return o(T);case Dr:return M=S._init,I(T,w,M(S._payload),k)}if(Ta(S))return v(T,w,S,k);if(ua(S))return _(T,w,S,k);Wu(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(T,w.sibling),w=i(w,S),w.return=T,T=w):(n(T,w),w=_f(S,T.mode,k),w.return=T,T=w),o(T)):n(T,w)}return I}var _o=ES(!0),TS=ES(!1),zc=yi(null),Wc=null,Gs=null,fg=null;function pg(){fg=Gs=Wc=null}function mg(t){var e=zc.current;Pe(zc),t._currentValue=e}function bp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lo(t,e){Wc=t,fg=Gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function yn(t){var e=t._currentValue;if(fg!==t)if(t={context:t,memoizedValue:e,next:null},Gs===null){if(Wc===null)throw Error($(308));Gs=t,Wc.dependencies={lanes:0,firstContext:t}}else Gs=Gs.next=t;return e}var qi=null;function gg(t){qi===null?qi=[t]:qi.push(t)}function SS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gg(e)):(n.next=i.next,i.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Or=!1;function yg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vr(t,n)}return i=r.interleaved,i===null?(e.next=e,gg(r)):(e.next=i.next,i.next=e),r.interleaved=e,vr(t,n)}function dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ng(t,n)}}function j_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hc(t,e,n,r){var i=t.updateQueue;Or=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,_=a;switch(p=e,g=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=Fe({},d,p);break e;case 2:Or=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);is|=o,t.lanes=o,t.memoizedState=d}}function F_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var jl={},Un=yi(jl),ll=yi(jl),ul=yi(jl);function Gi(t){if(t===jl)throw Error($(174));return t}function vg(t,e){switch(Se(ul,e),Se(ll,t),Se(Un,jl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ap(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ap(e,t)}Pe(Un),Se(Un,e)}function wo(){Pe(Un),Pe(ll),Pe(ul)}function AS(t){Gi(ul.current);var e=Gi(Un.current),n=ap(e,t.type);e!==n&&(Se(ll,t),Se(Un,n))}function _g(t){ll.current===t&&(Pe(Un),Pe(ll))}var Le=yi(0);function qc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ff=[];function wg(){for(var t=0;t<ff.length;t++)ff[t]._workInProgressVersionPrimary=null;ff.length=0}var fc=xr.ReactCurrentDispatcher,pf=xr.ReactCurrentBatchConfig,rs=0,je=null,et=null,lt=null,Gc=!1,ja=!1,cl=0,wk=0;function At(){throw Error($(321))}function Eg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Tg(t,e,n,r,i,s){if(rs=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fc.current=t===null||t.memoizedState===null?Ik:Ak,t=n(r,i),ja){s=0;do{if(ja=!1,cl=0,25<=s)throw Error($(301));s+=1,lt=et=null,e.updateQueue=null,fc.current=xk,t=n(r,i)}while(ja)}if(fc.current=Kc,e=et!==null&&et.next!==null,rs=0,lt=et=je=null,Gc=!1,e)throw Error($(300));return t}function Sg(){var t=cl!==0;return cl=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?je.memoizedState=lt=t:lt=lt.next=t,lt}function vn(){if(et===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=lt===null?je.memoizedState:lt.next;if(e!==null)lt=e,et=t;else{if(t===null)throw Error($(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},lt===null?je.memoizedState=lt=t:lt=lt.next=t}return lt}function hl(t,e){return typeof e=="function"?e(t):e}function mf(t){var e=vn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((rs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,je.lanes|=h,is|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Cn(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,is|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gf(t){var e=vn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xS(){}function bS(t,e){var n=je,r=vn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Gt=!0),r=r.queue,Ig(RS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,dl(9,CS.bind(null,n,r,i,e),void 0,null),ct===null)throw Error($(349));rs&30||PS(n,e,i)}return i}function PS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CS(t,e,n,r){e.value=n,e.getSnapshot=r,kS(e)&&NS(t)}function RS(t,e,n){return n(function(){kS(e)&&NS(t)})}function kS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function NS(t){var e=vr(t,1);e!==null&&bn(e,t,1,-1)}function U_(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:t},e.queue=t,t=t.dispatch=Sk.bind(null,je,t),[e.memoizedState,t]}function dl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DS(){return vn().memoizedState}function pc(t,e,n,r){var i=Ln();je.flags|=t,i.memoizedState=dl(1|e,n,void 0,r===void 0?null:r)}function Bh(t,e,n,r){var i=vn();r=r===void 0?null:r;var s=void 0;if(et!==null){var o=et.memoizedState;if(s=o.destroy,r!==null&&Eg(r,o.deps)){i.memoizedState=dl(e,n,s,r);return}}je.flags|=t,i.memoizedState=dl(1|e,n,s,r)}function B_(t,e){return pc(8390656,8,t,e)}function Ig(t,e){return Bh(2048,8,t,e)}function OS(t,e){return Bh(4,2,t,e)}function VS(t,e){return Bh(4,4,t,e)}function LS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MS(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4,4,LS.bind(null,e,t),n)}function Ag(){}function jS(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FS(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function US(t,e,n){return rs&21?(Cn(n,e)||(n=HT(),je.lanes|=n,is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function Ek(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=pf.transition;pf.transition={};try{t(!1),e()}finally{_e=n,pf.transition=r}}function BS(){return vn().memoizedState}function Tk(t,e,n){var r=Jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$S(t))zS(e,n);else if(n=SS(t,e,n,r),n!==null){var i=Ft();bn(n,t,r,i),WS(n,e,r)}}function Sk(t,e,n){var r=Jr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($S(t))zS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(i.next=i,gg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=SS(t,e,i,r),n!==null&&(i=Ft(),bn(n,t,r,i),WS(n,e,r))}}function $S(t){var e=t.alternate;return t===je||e!==null&&e===je}function zS(t,e){ja=Gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ng(t,n)}}var Kc={readContext:yn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},Ik={readContext:yn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:yn,useEffect:B_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pc(4194308,4,LS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pc(4194308,4,t,e)},useInsertionEffect:function(t,e){return pc(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Tk.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:U_,useDebugValue:Ag,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=U_(!1),e=t[0];return t=Ek.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=Ln();if(ke){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ct===null)throw Error($(349));rs&30||PS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,B_(RS.bind(null,r,s,t),[t]),r.flags|=2048,dl(9,CS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=ct.identifierPrefix;if(ke){var n=or,r=sr;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ak={readContext:yn,useCallback:jS,useContext:yn,useEffect:Ig,useImperativeHandle:MS,useInsertionEffect:OS,useLayoutEffect:VS,useMemo:FS,useReducer:mf,useRef:DS,useState:function(){return mf(hl)},useDebugValue:Ag,useDeferredValue:function(t){var e=vn();return US(e,et.memoizedState,t)},useTransition:function(){var t=mf(hl)[0],e=vn().memoizedState;return[t,e]},useMutableSource:xS,useSyncExternalStore:bS,useId:BS,unstable_isNewReconciler:!1},xk={readContext:yn,useCallback:jS,useContext:yn,useEffect:Ig,useImperativeHandle:MS,useInsertionEffect:OS,useLayoutEffect:VS,useMemo:FS,useReducer:gf,useRef:DS,useState:function(){return gf(hl)},useDebugValue:Ag,useDeferredValue:function(t){var e=vn();return et===null?e.memoizedState=t:US(e,et.memoizedState,t)},useTransition:function(){var t=gf(hl)[0],e=vn().memoizedState;return[t,e]},useMutableSource:xS,useSyncExternalStore:bS,useId:BS,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $h={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=Jr(t),s=hr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,i),e!==null&&(bn(e,t,i,r),dc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=Jr(t),s=hr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,i),e!==null&&(bn(e,t,i,r),dc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=Jr(t),i=hr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yr(t,i,r),e!==null&&(bn(e,t,r,n),dc(e,t,r))}};function $_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!il(n,r)||!il(i,s):!0}function HS(t,e,n){var r=!1,i=ai,s=e.contextType;return typeof s=="object"&&s!==null?s=yn(s):(i=Qt(e)?ts:Nt.current,r=e.contextTypes,s=(r=r!=null)?yo(t,i):ai),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function z_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function Cp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yn(s):(s=Qt(e)?ts:Nt.current,i.context=yo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Pp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$h.enqueueReplaceState(i,i.state,null),Hc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",r=e;do n+=eR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bk=typeof WeakMap=="function"?WeakMap:Map;function qS(t,e,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yc||(Yc=!0,Up=r),Rp(t,e)},n}function GS(t,e,n){n=hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Rp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rp(t,e),typeof r!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function W_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Bk.bind(null,t,e,n),e.then(t,t))}function H_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function q_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hr(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var Pk=xr.ReactCurrentOwner,Gt=!1;function Mt(t,e,n,r){e.child=t===null?TS(e,null,n,r):_o(e,t.child,n,r)}function G_(t,e,n,r,i){n=n.render;var s=e.ref;return lo(e,i),r=Tg(t,e,n,r,s,i),n=Sg(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(ke&&n&&cg(e),e.flags|=1,Mt(t,e,r,i),e.child)}function K_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KS(t,e,s,r,i)):(t=vc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:il,n(o,r)&&t.ref===e.ref)return _r(t,e,i)}return e.flags|=1,t=Zr(s,r),t.ref=e.ref,t.return=e,e.child=t}function KS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(il(s,r)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,_r(t,e,i)}return kp(t,e,n,r,i)}function QS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Qs,tn),tn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Qs,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(Qs,tn),tn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(Qs,tn),tn|=r;return Mt(t,e,i,n),e.child}function YS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kp(t,e,n,r,i){var s=Qt(n)?ts:Nt.current;return s=yo(e,s),lo(e,i),n=Tg(t,e,n,r,s,i),r=Sg(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(ke&&r&&cg(e),e.flags|=1,Mt(t,e,n,i),e.child)}function Q_(t,e,n,r,i){if(Qt(n)){var s=!0;Uc(e)}else s=!1;if(lo(e,i),e.stateNode===null)mc(t,e),HS(e,n,r),Cp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yn(c):(c=Qt(n)?ts:Nt.current,c=yo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&z_(e,o,r,c),Or=!1;var p=e.memoizedState;o.state=p,Hc(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Kt.current||Or?(typeof h=="function"&&(Pp(e,n,h,r),l=e.memoizedState),(a=Or||$_(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yn(l):(l=Qt(n)?ts:Nt.current,l=yo(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&z_(e,o,r,l),Or=!1,p=e.memoizedState,o.state=p,Hc(e,r,o,i);var v=e.memoizedState;a!==d||p!==v||Kt.current||Or?(typeof g=="function"&&(Pp(e,n,g,r),v=e.memoizedState),(c=Or||$_(e,n,c,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Np(t,e,n,r,s,i)}function Np(t,e,n,r,i,s){YS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&O_(e,n,!1),_r(t,e,s);r=e.stateNode,Pk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_o(e,t.child,null,s),e.child=_o(e,null,a,s)):Mt(t,e,a,s),e.memoizedState=r.state,i&&O_(e,n,!0),e.child}function XS(t){var e=t.stateNode;e.pendingContext?D_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D_(t,e.context,!1),vg(t,e.containerInfo)}function Y_(t,e,n,r,i){return vo(),dg(i),e.flags|=256,Mt(t,e,n,r),e.child}var Dp={dehydrated:null,treeContext:null,retryLane:0};function Op(t){return{baseLanes:t,cachePool:null,transitions:null}}function JS(t,e,n){var r=e.pendingProps,i=Le.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Le,i&1),t===null)return xp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hh(o,r,0,null),t=Xi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Op(n),e.memoizedState=Dp,t):xg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ck(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zr(a,s):(s=Xi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Op(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Dp,r}return s=t.child,t=s.sibling,r=Zr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xg(t,e){return e=Hh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hu(t,e,n,r){return r!==null&&dg(r),_o(e,t.child,null,n),t=xg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ck(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=yf(Error($(422))),Hu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hh({mode:"visible",children:r.children},i,0,null),s=Xi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_o(e,t.child,null,o),e.child.memoizedState=Op(o),e.memoizedState=Dp,s);if(!(e.mode&1))return Hu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=yf(s,r,void 0),Hu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Gt||a){if(r=ct,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vr(t,i),bn(r,t,i,-1))}return Ng(),r=yf(Error($(421))),Hu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$k.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,nn=Qr(i.nextSibling),sn=e,ke=!0,In=null,t!==null&&(dn[fn++]=sr,dn[fn++]=or,dn[fn++]=ns,sr=t.id,or=t.overflow,ns=e),e=xg(e,r.children),e.flags|=4096,e)}function X_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bp(t.return,e,n)}function vf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ZS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&X_(t,n,e);else if(t.tag===19)X_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vf(e,!0,n,null,s);break;case"together":vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rk(t,e,n){switch(e.tag){case 3:XS(e),vo();break;case 5:AS(e);break;case 1:Qt(e.type)&&Uc(e);break;case 4:vg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(zc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?JS(t,e,n):(Se(Le,Le.current&1),t=_r(t,e,n),t!==null?t.sibling:null);Se(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,QS(t,e,n)}return _r(t,e,n)}var eI,Vp,tI,nI;eI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vp=function(){};tI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Gi(Un.current);var s=null;switch(n){case"input":i=rp(t,i),r=rp(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=op(t,i),r=op(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jc)}lp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};nI=function(t,e,n,r){n!==r&&(e.flags|=4)};function ma(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kk(t,e,n){var r=e.pendingProps;switch(hg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Qt(e.type)&&Fc(),xt(e),null;case 3:return r=e.stateNode,wo(),Pe(Kt),Pe(Nt),wg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,In!==null&&(zp(In),In=null))),Vp(t,e),xt(e),null;case 5:_g(e);var i=Gi(ul.current);if(n=e.type,t!==null&&e.stateNode!=null)tI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return xt(e),null}if(t=Gi(Un.current),zu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[al]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<Ia.length;i++)Ae(Ia[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":o_(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":l_(r,s),Ae("invalid",r)}lp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$u(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$u(r.textContent,a,t),i=["children",""+a]):Xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Ou(r),a_(r,s,!0);break;case"textarea":Ou(r),u_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[al]=r,eI(t,e,!1,!1),e.stateNode=t;e:{switch(o=up(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ia.length;i++)Ae(Ia[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":o_(t,r),i=rp(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":l_(t,r),i=op(t,r),Ae("invalid",t);break;default:i=r}lp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ja(t,l):typeof l=="number"&&Ja(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&Ym(t,s,l,o))}switch(n){case"input":Ou(t),a_(t,r,!1);break;case"textarea":Ou(t),u_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?io(t,!!r.multiple,s,!1):r.defaultValue!=null&&io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)nI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Gi(ul.current),Gi(Un.current),zu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=sn,t!==null))switch(t.tag){case 3:$u(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$u(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return xt(e),null;case 13:if(Pe(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&nn!==null&&e.mode&1&&!(e.flags&128))wS(),vo(),e.flags|=98560,s=!1;else if(s=zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Mn]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),s=!1}else In!==null&&(zp(In),In=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?tt===0&&(tt=3):Ng())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return wo(),Vp(t,e),t===null&&sl(e.stateNode.containerInfo),xt(e),null;case 10:return mg(e.type._context),xt(e),null;case 17:return Qt(e.type)&&Fc(),xt(e),null;case 19:if(Pe(Le),s=e.memoizedState,s===null)return xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ma(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qc(t),o!==null){for(e.flags|=128,ma(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Le,Le.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>To&&(e.flags|=128,r=!0,ma(s,!1),e.lanes=4194304)}else{if(!r)if(t=qc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ma(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ke)return xt(e),null}else 2*He()-s.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,r=!0,ma(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,n=Le.current,Se(Le,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return kg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Nk(t,e){switch(hg(e),e.tag){case 1:return Qt(e.type)&&Fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),Pe(Kt),Pe(Nt),wg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _g(e),null;case 13:if(Pe(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Le),null;case 4:return wo(),null;case 10:return mg(e.type._context),null;case 22:case 23:return kg(),null;case 24:return null;default:return null}}var qu=!1,Rt=!1,Dk=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Lp(t,e,n){try{n()}catch(r){ze(t,e,r)}}var J_=!1;function Ok(t,e){if(_p=Vc,t=aS(),ug(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wp={focusedElem:t,selectionRange:n},Vc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,I=v.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?_:Tn(e.type,_),I);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){ze(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return v=J_,J_=!1,v}function Fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lp(e,n,s)}i=i.next}while(i!==r)}}function zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rI(t){var e=t.alternate;e!==null&&(t.alternate=null,rI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[al],delete e[Sp],delete e[gk],delete e[yk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iI(t){return t.tag===5||t.tag===3||t.tag===4}function Z_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(r!==4&&(t=t.child,t!==null))for(jp(t,e,n),t=t.sibling;t!==null;)jp(t,e,n),t=t.sibling}function Fp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fp(t,e,n),t=t.sibling;t!==null;)Fp(t,e,n),t=t.sibling}var pt=null,Sn=!1;function Rr(t,e,n){for(n=n.child;n!==null;)sI(t,e,n),n=n.sibling}function sI(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Vh,n)}catch{}switch(n.tag){case 5:Rt||Ks(n,e);case 6:var r=pt,i=Sn;pt=null,Rr(t,e,n),pt=r,Sn=i,pt!==null&&(Sn?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(Sn?(t=pt,n=n.stateNode,t.nodeType===8?hf(t.parentNode,n):t.nodeType===1&&hf(t,n),nl(t)):hf(pt,n.stateNode));break;case 4:r=pt,i=Sn,pt=n.stateNode.containerInfo,Sn=!0,Rr(t,e,n),pt=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lp(n,e,o),i=i.next}while(i!==r)}Rr(t,e,n);break;case 1:if(!Rt&&(Ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,Rr(t,e,n),Rt=r):Rr(t,e,n);break;default:Rr(t,e,n)}}function ew(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Dk),e.forEach(function(r){var i=zk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:pt=a.stateNode,Sn=!1;break e;case 3:pt=a.stateNode.containerInfo,Sn=!0;break e;case 4:pt=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(pt===null)throw Error($(160));sI(s,o,i),pt=null,Sn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oI(e,t),e=e.sibling}function oI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),On(t),r&4){try{Fa(3,t,t.return),zh(3,t)}catch(_){ze(t,t.return,_)}try{Fa(5,t,t.return)}catch(_){ze(t,t.return,_)}}break;case 1:wn(e,t),On(t),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(wn(e,t),On(t),r&512&&n!==null&&Ks(n,n.return),t.flags&32){var i=t.stateNode;try{Ja(i,"")}catch(_){ze(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PT(i,s),up(a,o);var c=up(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?DT(i,d):h==="dangerouslySetInnerHTML"?kT(i,d):h==="children"?Ja(i,d):Ym(i,h,d,c)}switch(a){case"input":ip(i,s);break;case"textarea":CT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?io(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?io(i,!!s.multiple,s.defaultValue,!0):io(i,!!s.multiple,s.multiple?[]:"",!1))}i[al]=s}catch(_){ze(t,t.return,_)}}break;case 6:if(wn(e,t),On(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){ze(t,t.return,_)}}break;case 3:if(wn(e,t),On(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nl(e.containerInfo)}catch(_){ze(t,t.return,_)}break;case 4:wn(e,t),On(t);break;case 13:wn(e,t),On(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cg=He())),r&4&&ew(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(c=Rt)||h,wn(e,t),Rt=c):wn(e,t),On(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(d=G=h;G!==null;){switch(p=G,g=p.child,p.tag){case 0:case 11:case 14:case 15:Fa(4,p,p.return);break;case 1:Ks(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){ze(r,n,_)}}break;case 5:Ks(p,p.return);break;case 22:if(p.memoizedState!==null){nw(d);continue}}g!==null?(g.return=p,G=g):nw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NT("display",o))}catch(_){ze(t,t.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){ze(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wn(e,t),On(t),r&4&&ew(t);break;case 21:break;default:wn(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iI(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ja(i,""),r.flags&=-33);var s=Z_(t);Fp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Z_(t);jp(t,a,o);break;default:throw Error($(161))}}catch(l){ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vk(t,e,n){G=t,aI(t)}function aI(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=qu;var c=Rt;if(qu=o,(Rt=l)&&!c)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?rw(i):l!==null?(l.return=o,G=l):rw(i);for(;s!==null;)G=s,aI(s),s=s.sibling;G=i,qu=a,Rt=c}tw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):tw(t)}}function tw(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||zh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&F_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&nl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Rt||e.flags&512&&Mp(e)}catch(p){ze(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function nw(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function rw(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zh(4,e)}catch(l){ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ze(e,i,l)}}var s=e.return;try{Mp(e)}catch(l){ze(e,s,l)}break;case 5:var o=e.return;try{Mp(e)}catch(l){ze(e,o,l)}}}catch(l){ze(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var Lk=Math.ceil,Qc=xr.ReactCurrentDispatcher,bg=xr.ReactCurrentOwner,mn=xr.ReactCurrentBatchConfig,pe=0,ct=null,Ye=null,yt=0,tn=0,Qs=yi(0),tt=0,fl=null,is=0,Wh=0,Pg=0,Ua=null,Ht=null,Cg=0,To=1/0,rr=null,Yc=!1,Up=null,Xr=null,Gu=!1,zr=null,Xc=0,Ba=0,Bp=null,gc=-1,yc=0;function Ft(){return pe&6?He():gc!==-1?gc:gc=He()}function Jr(t){return t.mode&1?pe&2&&yt!==0?yt&-yt:_k.transition!==null?(yc===0&&(yc=HT()),yc):(t=_e,t!==0||(t=window.event,t=t===void 0?16:JT(t.type)),t):1}function bn(t,e,n,r){if(50<Ba)throw Ba=0,Bp=null,Error($(185));Vl(t,n,r),(!(pe&2)||t!==ct)&&(t===ct&&(!(pe&2)&&(Wh|=n),tt===4&&Mr(t,yt)),Yt(t,r),n===1&&pe===0&&!(e.mode&1)&&(To=He()+500,Uh&&vi()))}function Yt(t,e){var n=t.callbackNode;_R(t,e);var r=Oc(t,t===ct?yt:0);if(r===0)n!==null&&d_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&d_(n),e===1)t.tag===0?vk(iw.bind(null,t)):yS(iw.bind(null,t)),pk(function(){!(pe&6)&&vi()}),n=null;else{switch(qT(r)){case 1:n=tg;break;case 4:n=zT;break;case 16:n=Dc;break;case 536870912:n=WT;break;default:n=Dc}n=mI(n,lI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lI(t,e){if(gc=-1,yc=0,pe&6)throw Error($(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var r=Oc(t,t===ct?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jc(t,r);else{e=r;var i=pe;pe|=2;var s=cI();(ct!==t||yt!==e)&&(rr=null,To=He()+500,Yi(t,e));do try{Fk();break}catch(a){uI(t,a)}while(!0);pg(),Qc.current=s,pe=i,Ye!==null?e=0:(ct=null,yt=0,e=tt)}if(e!==0){if(e===2&&(i=pp(t),i!==0&&(r=i,e=$p(t,i))),e===1)throw n=fl,Yi(t,0),Mr(t,r),Yt(t,He()),n;if(e===6)Mr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Mk(i)&&(e=Jc(t,r),e===2&&(s=pp(t),s!==0&&(r=s,e=$p(t,s))),e===1))throw n=fl,Yi(t,0),Mr(t,r),Yt(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Bi(t,Ht,rr);break;case 3:if(Mr(t,r),(r&130023424)===r&&(e=Cg+500-He(),10<e)){if(Oc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tp(Bi.bind(null,t,Ht,rr),e);break}Bi(t,Ht,rr);break;case 4:if(Mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lk(r/1960))-r,10<r){t.timeoutHandle=Tp(Bi.bind(null,t,Ht,rr),r);break}Bi(t,Ht,rr);break;case 5:Bi(t,Ht,rr);break;default:throw Error($(329))}}}return Yt(t,He()),t.callbackNode===n?lI.bind(null,t):null}function $p(t,e){var n=Ua;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=Jc(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&zp(e)),t}function zp(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function Mk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(t,e){for(e&=~Pg,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function iw(t){if(pe&6)throw Error($(327));uo();var e=Oc(t,0);if(!(e&1))return Yt(t,He()),null;var n=Jc(t,e);if(t.tag!==0&&n===2){var r=pp(t);r!==0&&(e=r,n=$p(t,r))}if(n===1)throw n=fl,Yi(t,0),Mr(t,e),Yt(t,He()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bi(t,Ht,rr),Yt(t,He()),null}function Rg(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(To=He()+500,Uh&&vi())}}function ss(t){zr!==null&&zr.tag===0&&!(pe&6)&&uo();var e=pe;pe|=1;var n=mn.transition,r=_e;try{if(mn.transition=null,_e=1,t)return t()}finally{_e=r,mn.transition=n,pe=e,!(pe&6)&&vi()}}function kg(){tn=Qs.current,Pe(Qs)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fk(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(hg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fc();break;case 3:wo(),Pe(Kt),Pe(Nt),wg();break;case 5:_g(r);break;case 4:wo();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:mg(r.type._context);break;case 22:case 23:kg()}n=n.return}if(ct=t,Ye=t=Zr(t.current,null),yt=tn=e,tt=0,fl=null,Pg=Wh=is=0,Ht=Ua=null,qi!==null){for(e=0;e<qi.length;e++)if(n=qi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qi=null}return t}function uI(t,e){do{var n=Ye;try{if(pg(),fc.current=Kc,Gc){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gc=!1}if(rs=0,lt=et=je=null,ja=!1,cl=0,bg.current=null,n===null||n.return===null){tt=1,fl=e,Ye=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=H_(o);if(g!==null){g.flags&=-257,q_(g,o,a,s,e),g.mode&1&&W_(s,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){W_(s,c,e),Ng();break e}l=Error($(426))}}else if(ke&&a.mode&1){var I=H_(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),q_(I,o,a,s,e),dg(Eo(l,a));break e}}s=l=Eo(l,a),tt!==4&&(tt=2),Ua===null?Ua=[s]:Ua.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=qS(s,l,e);j_(s,T);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Xr===null||!Xr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=GS(s,a,e);j_(s,k);break e}}s=s.return}while(s!==null)}dI(n)}catch(V){e=V,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function cI(){var t=Qc.current;return Qc.current=Kc,t===null?Kc:t}function Ng(){(tt===0||tt===3||tt===2)&&(tt=4),ct===null||!(is&268435455)&&!(Wh&268435455)||Mr(ct,yt)}function Jc(t,e){var n=pe;pe|=2;var r=cI();(ct!==t||yt!==e)&&(rr=null,Yi(t,e));do try{jk();break}catch(i){uI(t,i)}while(!0);if(pg(),pe=n,Qc.current=r,Ye!==null)throw Error($(261));return ct=null,yt=0,tt}function jk(){for(;Ye!==null;)hI(Ye)}function Fk(){for(;Ye!==null&&!cR();)hI(Ye)}function hI(t){var e=pI(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?dI(t):Ye=e,bg.current=null}function dI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nk(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ye=null;return}}else if(n=kk(n,e,tn),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);tt===0&&(tt=5)}function Bi(t,e,n){var r=_e,i=mn.transition;try{mn.transition=null,_e=1,Uk(t,e,n,r)}finally{mn.transition=i,_e=r}return null}function Uk(t,e,n,r){do uo();while(zr!==null);if(pe&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wR(t,s),t===ct&&(Ye=ct=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,mI(Dc,function(){return uo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=_e;_e=1;var a=pe;pe|=4,bg.current=null,Ok(t,n),oI(n,t),ok(wp),Vc=!!_p,wp=_p=null,t.current=n,Vk(n),hR(),pe=a,_e=o,mn.transition=s}else t.current=n;if(Gu&&(Gu=!1,zr=t,Xc=i),s=t.pendingLanes,s===0&&(Xr=null),pR(n.stateNode),Yt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yc)throw Yc=!1,t=Up,Up=null,t;return Xc&1&&t.tag!==0&&uo(),s=t.pendingLanes,s&1?t===Bp?Ba++:(Ba=0,Bp=t):Ba=0,vi(),null}function uo(){if(zr!==null){var t=qT(Xc),e=mn.transition,n=_e;try{if(mn.transition=null,_e=16>t?16:t,zr===null)var r=!1;else{if(t=zr,zr=null,Xc=0,pe&6)throw Error($(331));var i=pe;for(pe|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:Fa(8,h,s)}var d=h.child;if(d!==null)d.return=h,G=d;else for(;G!==null;){h=G;var p=h.sibling,g=h.return;if(rI(h),h===c){G=null;break}if(p!==null){p.return=g,G=p;break}G=g}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var I=_.sibling;_.sibling=null,_=I}while(_!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Fa(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,G=T;break e}G=s.return}}var w=t.current;for(G=w;G!==null;){o=G;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,G=S;else e:for(o=w;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zh(9,a)}}catch(V){ze(a,a.return,V)}if(a===o){G=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,G=k;break e}G=a.return}}if(pe=i,vi(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Vh,t)}catch{}r=!0}return r}finally{_e=n,mn.transition=e}}return!1}function sw(t,e,n){e=Eo(n,e),e=qS(t,e,1),t=Yr(t,e,1),e=Ft(),t!==null&&(Vl(t,1,e),Yt(t,e))}function ze(t,e,n){if(t.tag===3)sw(t,t,n);else for(;e!==null;){if(e.tag===3){sw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xr===null||!Xr.has(r))){t=Eo(n,t),t=GS(e,t,1),e=Yr(e,t,1),t=Ft(),e!==null&&(Vl(e,1,t),Yt(e,t));break}}e=e.return}}function Bk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(yt&n)===n&&(tt===4||tt===3&&(yt&130023424)===yt&&500>He()-Cg?Yi(t,0):Pg|=n),Yt(t,e)}function fI(t,e){e===0&&(t.mode&1?(e=Mu,Mu<<=1,!(Mu&130023424)&&(Mu=4194304)):e=1);var n=Ft();t=vr(t,e),t!==null&&(Vl(t,e,n),Yt(t,n))}function $k(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fI(t,n)}function zk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),fI(t,n)}var pI;pI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,Rk(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,ke&&e.flags&1048576&&vS(e,$c,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mc(t,e),t=e.pendingProps;var i=yo(e,Nt.current);lo(e,n),i=Tg(null,e,r,t,i,n);var s=Sg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(s=!0,Uc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yg(e),i.updater=$h,e.stateNode=i,i._reactInternals=e,Cp(e,r,t,n),e=Np(null,e,r,!0,s,n)):(e.tag=0,ke&&s&&cg(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Hk(r),t=Tn(r,t),i){case 0:e=kp(null,e,r,t,n);break e;case 1:e=Q_(null,e,r,t,n);break e;case 11:e=G_(null,e,r,t,n);break e;case 14:e=K_(null,e,r,Tn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),kp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Q_(t,e,r,i,n);case 3:e:{if(XS(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,IS(t,e),Hc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Eo(Error($(423)),e),e=Y_(t,e,r,n,i);break e}else if(r!==i){i=Eo(Error($(424)),e),e=Y_(t,e,r,n,i);break e}else for(nn=Qr(e.stateNode.containerInfo.firstChild),sn=e,ke=!0,In=null,n=TS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),r===i){e=_r(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return AS(e),t===null&&xp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ep(r,i)?o=null:s!==null&&Ep(r,s)&&(e.flags|=32),YS(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&xp(e),null;case 13:return JS(t,e,n);case 4:return vg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_o(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),G_(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(zc,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Kt.current){e=_r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),bp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,lo(e,n),i=yn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),K_(t,e,r,i,n);case 15:return KS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),mc(t,e),e.tag=1,Qt(r)?(t=!0,Uc(e)):t=!1,lo(e,n),HS(e,r,i),Cp(e,r,i,n),Np(null,e,r,!0,t,n);case 19:return ZS(t,e,n);case 22:return QS(t,e,n)}throw Error($(156,e.tag))};function mI(t,e){return $T(t,e)}function Wk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new Wk(t,e,n,r)}function Dg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hk(t){if(typeof t=="function")return Dg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jm)return 11;if(t===Zm)return 14}return 2}function Zr(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fs:return Xi(n.children,i,s,e);case Xm:o=8,i|=8;break;case Zf:return t=pn(12,n,e,i|2),t.elementType=Zf,t.lanes=s,t;case ep:return t=pn(13,n,e,i),t.elementType=ep,t.lanes=s,t;case tp:return t=pn(19,n,e,i),t.elementType=tp,t.lanes=s,t;case AT:return Hh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ST:o=10;break e;case IT:o=9;break e;case Jm:o=11;break e;case Zm:o=14;break e;case Dr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xi(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function Hh(t,e,n,r){return t=pn(22,t,r,e),t.elementType=AT,t.lanes=n,t.stateNode={isHidden:!1},t}function _f(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function wf(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zd(0),this.expirationTimes=Zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Og(t,e,n,r,i,s,o,a,l){return t=new qk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yg(s),t}function Gk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gI(t){if(!t)return ai;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Qt(n))return gS(t,n,e)}return e}function yI(t,e,n,r,i,s,o,a,l){return t=Og(n,r,!0,t,i,s,o,a,l),t.context=gI(null),n=t.current,r=Ft(),i=Jr(n),s=hr(r,i),s.callback=e??null,Yr(n,s,i),t.current.lanes=i,Vl(t,i,r),Yt(t,r),t}function qh(t,e,n,r){var i=e.current,s=Ft(),o=Jr(i);return n=gI(n),e.context===null?e.context=n:e.pendingContext=n,e=hr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yr(i,e,o),t!==null&&(bn(t,i,o,s),dc(t,i,o)),o}function Zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ow(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vg(t,e){ow(t,e),(t=t.alternate)&&ow(t,e)}function Kk(){return null}var vI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lg(t){this._internalRoot=t}Gh.prototype.render=Lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));qh(t,e,null,null)};Gh.prototype.unmount=Lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){qh(null,t,null,null)}),e[yr]=null}};function Gh(t){this._internalRoot=t}Gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=QT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&XT(t)}};function Mg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aw(){}function Qk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Zc(o);s.call(c)}}var o=yI(e,r,t,0,null,!1,!1,"",aw);return t._reactRootContainer=o,t[yr]=o.current,sl(t.nodeType===8?t.parentNode:t),ss(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Zc(l);a.call(c)}}var l=Og(t,0,!1,null,null,!1,!1,"",aw);return t._reactRootContainer=l,t[yr]=l.current,sl(t.nodeType===8?t.parentNode:t),ss(function(){qh(e,l,n,r)}),l}function Qh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Zc(o);a.call(l)}}qh(e,o,t,i)}else o=Qk(n,e,t,i,r);return Zc(o)}GT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(ng(e,n|1),Yt(e,He()),!(pe&6)&&(To=He()+500,vi()))}break;case 13:ss(function(){var r=vr(t,1);if(r!==null){var i=Ft();bn(r,t,1,i)}}),Vg(t,1)}};rg=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Ft();bn(e,t,134217728,n)}Vg(t,134217728)}};KT=function(t){if(t.tag===13){var e=Jr(t),n=vr(t,e);if(n!==null){var r=Ft();bn(n,t,e,r)}Vg(t,e)}};QT=function(){return _e};YT=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};hp=function(t,e,n){switch(e){case"input":if(ip(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fh(r);if(!i)throw Error($(90));bT(r),ip(r,i)}}}break;case"textarea":CT(t,n);break;case"select":e=n.value,e!=null&&io(t,!!n.multiple,e,!1)}};LT=Rg;MT=ss;var Yk={usingClientEntryPoint:!1,Events:[Ml,zs,Fh,OT,VT,Rg]},ga={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xk={bundleType:ga.bundleType,version:ga.version,rendererPackageName:ga.rendererPackageName,rendererConfig:ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UT(t),t===null?null:t.stateNode},findFiberByHostInstance:ga.findFiberByHostInstance||Kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{Vh=Ku.inject(Xk),Fn=Ku}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yk;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mg(e))throw Error($(200));return Gk(t,e,null,n)};ln.createRoot=function(t,e){if(!Mg(t))throw Error($(299));var n=!1,r="",i=vI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Og(t,1,!1,null,null,n,!1,r,i),t[yr]=e.current,sl(t.nodeType===8?t.parentNode:t),new Lg(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=UT(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return ss(t)};ln.hydrate=function(t,e,n){if(!Kh(e))throw Error($(200));return Qh(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!Mg(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yI(e,null,t,1,n??null,i,!1,s,o),t[yr]=e.current,sl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gh(e)};ln.render=function(t,e,n){if(!Kh(e))throw Error($(200));return Qh(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!Kh(t))throw Error($(40));return t._reactRootContainer?(ss(function(){Qh(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};ln.unstable_batchedUpdates=Rg;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Qh(t,e,n,!1,r)};ln.version="18.3.1-next-f1338f8080-20240426";function _I(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_I)}catch(t){console.error(t)}}_I(),_T.exports=ln;var Jk=_T.exports,lw=Jk;Xf.createRoot=lw.createRoot,Xf.hydrateRoot=lw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pl.apply(this,arguments)}var Wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wr||(Wr={}));const uw="popstate";function Zk(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ps(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wp("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:eh(s))}function r(i,s){jg(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return t1(e,n,r,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function e1(){return Math.random().toString(36).substr(2,8)}function cw(t,e){return{usr:t.state,key:t.key,idx:e}}function Wp(t,e,n,r){return n===void 0&&(n=null),pl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ps(e):e,{state:n,key:e&&e.key||r||e1()})}function eh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ps(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function t1(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Wr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(pl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Wr.Pop;let I=h(),T=I==null?null:I-c;c=I,l&&l({action:a,location:_.location,delta:T})}function p(I,T){a=Wr.Push;let w=Wp(_.location,I,T);n&&n(w,I),c=h()+1;let S=cw(w,c),k=_.createHref(w);try{o.pushState(S,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&l&&l({action:a,location:_.location,delta:1})}function g(I,T){a=Wr.Replace;let w=Wp(_.location,I,T);n&&n(w,I),c=h();let S=cw(w,c),k=_.createHref(w);o.replaceState(S,"",k),s&&l&&l({action:a,location:_.location,delta:0})}function v(I){let T=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof I=="string"?I:eh(I);return w=w.replace(/ $/,"%20"),Je(T,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,T)}let _={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(uw,d),l=I,()=>{i.removeEventListener(uw,d),l=null}},createHref(I){return e(i,I)},createURL:v,encodeLocation(I){let T=v(I);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:g,go(I){return o.go(I)}};return _}var hw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hw||(hw={}));function n1(t,e,n){return n===void 0&&(n="/"),r1(t,e,n)}function r1(t,e,n,r){let i=typeof e=="string"?ps(e):e,s=Fg(i.pathname||"/",n);if(s==null)return null;let o=wI(t);i1(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=g1(s);a=f1(o[l],c)}return a}function wI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Je(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ei([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),wI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:h1(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of EI(s.path))i(s,o,l)}),e}function EI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=EI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function i1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s1=/^:[\w-]+$/,o1=3,a1=2,l1=1,u1=10,c1=-2,dw=t=>t==="*";function h1(t,e){let n=t.split("/"),r=n.length;return n.some(dw)&&(r+=c1),e&&(r+=a1),n.filter(i=>!dw(i)).reduce((i,s)=>i+(s1.test(s)?o1:s===""?l1:u1),r)}function d1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function f1(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=p1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ei([s,d.pathname]),pathnameBase:w1(ei([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ei([s,d.pathnameBase]))}return o}function p1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m1(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let _=a[d]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=a[d];return g&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function m1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function g1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function y1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ps(t):t;return{pathname:n?n.startsWith("/")?n:v1(n,e):e,search:E1(r),hash:T1(i)}}function v1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ef(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function TI(t,e){let n=_1(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SI(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ps(t):(i=pl({},t),Je(!i.pathname||!i.pathname.includes("?"),Ef("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),Ef("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),Ef("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=y1(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ei=t=>t.join("/").replace(/\/\/+/g,"/"),w1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),E1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function S1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const II=["post","put","patch","delete"];new Set(II);const I1=["get",...II];new Set(I1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ml.apply(this,arguments)}const Ug=R.createContext(null),A1=R.createContext(null),ms=R.createContext(null),Yh=R.createContext(null),_i=R.createContext({outlet:null,matches:[],isDataRoute:!1}),AI=R.createContext(null);function x1(t,e){let{relative:n}=e===void 0?{}:e;Fl()||Je(!1);let{basename:r,navigator:i}=R.useContext(ms),{hash:s,pathname:o,search:a}=bI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ei([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Fl(){return R.useContext(Yh)!=null}function Ul(){return Fl()||Je(!1),R.useContext(Yh).location}function xI(t){R.useContext(ms).static||R.useLayoutEffect(t)}function Bg(){let{isDataRoute:t}=R.useContext(_i);return t?U1():b1()}function b1(){Fl()||Je(!1);let t=R.useContext(Ug),{basename:e,future:n,navigator:r}=R.useContext(ms),{matches:i}=R.useContext(_i),{pathname:s}=Ul(),o=JSON.stringify(TI(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return xI(()=>{a.current=!0}),R.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=SI(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ei([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function P1(){let{matches:t}=R.useContext(_i),e=t[t.length-1];return e?e.params:{}}function bI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(ms),{matches:i}=R.useContext(_i),{pathname:s}=Ul(),o=JSON.stringify(TI(i,r.v7_relativeSplatPath));return R.useMemo(()=>SI(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function C1(t,e){return R1(t,e)}function R1(t,e,n,r){Fl()||Je(!1);let{navigator:i}=R.useContext(ms),{matches:s}=R.useContext(_i),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ul(),h;if(e){var d;let I=typeof e=="string"?ps(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||Je(!1),h=I}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let I=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(I.length).join("/")}let v=n1(t,{pathname:g}),_=V1(v&&v.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:ei([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:ei([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&_?R.createElement(Yh.Provider,{value:{location:ml({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Wr.Pop}},_):_}function k1(){let t=F1(),e=S1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const N1=R.createElement(k1,null);class D1 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(_i.Provider,{value:this.props.routeContext},R.createElement(AI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O1(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(Ug);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(_i.Provider,{value:e},r)}function V1(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Je(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,v=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,v=!1,_=null,I=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,_=d.route.errorElement||N1,l&&(c<0&&p===0?(B1("route-fallback"),v=!0,I=null):c===p&&(v=!0,I=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),w=()=>{let S;return g?S=_:v?S=I:d.route.Component?S=R.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,R.createElement(O1,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(D1,{location:n.location,revalidation:n.revalidation,component:_,error:g,children:w(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):w()},null)}var PI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PI||{}),CI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CI||{});function L1(t){let e=R.useContext(Ug);return e||Je(!1),e}function M1(t){let e=R.useContext(A1);return e||Je(!1),e}function j1(t){let e=R.useContext(_i);return e||Je(!1),e}function RI(t){let e=j1(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function F1(){var t;let e=R.useContext(AI),n=M1(),r=RI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function U1(){let{router:t}=L1(PI.UseNavigateStable),e=RI(CI.UseNavigateStable),n=R.useRef(!1);return xI(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ml({fromRouteId:e},s)))},[t,e])}const fw={};function B1(t,e,n){fw[t]||(fw[t]=!0)}function $1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function En(t){Je(!1)}function z1(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Wr.Pop,navigator:s,static:o=!1,future:a}=t;Fl()&&Je(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:s,static:o,future:ml({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ps(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:v="default"}=r,_=R.useMemo(()=>{let I=Fg(h,l);return I==null?null:{location:{pathname:I,search:d,hash:p,state:g,key:v},navigationType:i}},[l,h,d,p,g,v,i]);return _==null?null:R.createElement(ms.Provider,{value:c},R.createElement(Yh.Provider,{children:n,value:_}))}function W1(t){let{children:e,location:n}=t;return C1(Hp(e),n)}new Promise(()=>{});function Hp(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,Hp(r.props.children,s));return}r.type!==En&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qp.apply(this,arguments)}function H1(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function q1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function G1(t,e){return t.button===0&&(!e||e==="_self")&&!q1(t)}function Gp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function K1(t,e){let n=Gp(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Q1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y1="6";try{window.__reactRouterVersion=Y1}catch{}const X1="startTransition",pw=BC[X1];function J1(t){let{basename:e,children:n,future:r,window:i}=t,s=R.useRef();s.current==null&&(s.current=Zk({window:i,v5Compat:!0}));let o=s.current,[a,l]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=R.useCallback(d=>{c&&pw?pw(()=>l(d)):l(d)},[l,c]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>$1(r),[r]),R.createElement(z1,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Z1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ti=R.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=H1(e,Q1),{basename:g}=R.useContext(ms),v,_=!1;if(typeof c=="string"&&eN.test(c)&&(v=c,Z1))try{let S=new URL(window.location.href),k=c.startsWith("//")?new URL(S.protocol+c):new URL(c),V=Fg(k.pathname,g);k.origin===S.origin&&V!=null?c=V+k.search+k.hash:_=!0}catch{}let I=x1(c,{relative:i}),T=tN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function w(S){r&&r(S),S.defaultPrevented||T(S)}return R.createElement("a",qp({},p,{href:v||I,onClick:_||s?r:w,ref:n,target:l}))});var mw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mw||(mw={}));var gw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gw||(gw={}));function tN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Bg(),c=Ul(),h=bI(t,{relative:o});return R.useCallback(d=>{if(G1(d,n)){d.preventDefault();let p=r!==void 0?r:eh(c)===eh(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function nN(t){let e=R.useRef(Gp(t)),n=R.useRef(!1),r=Ul(),i=R.useMemo(()=>K1(r.search,n.current?null:e.current),[r.search]),s=Bg(),o=R.useCallback((a,l)=>{const c=Gp(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var yw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},rN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new iN;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sN=function(t){const e=kI(t);return NI.encodeByteArray(e,!0)},th=function(t){return sN(t).replace(/\./g,"")},DI=function(t){try{return NI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=()=>oN().__FIREBASE_DEFAULTS__,lN=()=>{if(typeof process>"u"||typeof yw>"u")return;const t=yw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DI(t[1]);return e&&JSON.parse(e)},Xh=()=>{try{return aN()||lN()||uN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VI=t=>{const e=OI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LI=()=>{var t;return(t=Xh())===null||t===void 0?void 0:t.config},MI=t=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[th(JSON.stringify(n)),th(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function dN(){var t;const e=(t=Xh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gN(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yN(){return!dN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vN(){try{return typeof indexedDB=="object"}catch{return!1}}function _N(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="FirebaseError";class Qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wN,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?EN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Qn(i,a,r)}}function EN(t,e){return t.replace(TN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TN=/\{\$([^}]+)}/g;function SN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(vw(s)&&vw(o)){if(!nh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Aa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function xa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function IN(t,e){const n=new AN(t,e);return n.subscribe.bind(n)}class AN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Tf),i.error===void 0&&(i.error=Tf),i.complete===void 0&&(i.complete=Tf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CN(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PN(t){return t===$i?void 0:t}function CN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const kN={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},NN=he.INFO,DN={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ON=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $g{constructor(e){this.name=e,this._logLevel=NN,this._logHandler=ON,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const VN=(t,e)=>e.some(n=>t instanceof n);let _w,ww;function LN(){return _w||(_w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MN(){return ww||(ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FI=new WeakMap,Kp=new WeakMap,UI=new WeakMap,Sf=new WeakMap,zg=new WeakMap;function jN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ni(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FI.set(n,t)}).catch(()=>{}),zg.set(e,t),e}function FN(t){if(Kp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Kp.set(t,e)}let Qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UN(t){Qp=t(Qp)}function BN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(If(this),e,...n);return UI.set(r,e.sort?e.sort():[e]),ni(r)}:MN().includes(t)?function(...e){return t.apply(If(this),e),ni(FI.get(this))}:function(...e){return ni(t.apply(If(this),e))}}function $N(t){return typeof t=="function"?BN(t):(t instanceof IDBTransaction&&FN(t),VN(t,LN())?new Proxy(t,Qp):t)}function ni(t){if(t instanceof IDBRequest)return jN(t);if(Sf.has(t))return Sf.get(t);const e=$N(t);return e!==t&&(Sf.set(t,e),zg.set(e,t)),e}const If=t=>zg.get(t);function zN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ni(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ni(o.result),l.oldVersion,l.newVersion,ni(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WN=["get","getKey","getAll","getAllKeys","count"],HN=["put","add","delete","clear"],Af=new Map;function Ew(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WN.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Af.set(e,s),s}UN(t=>({...t,get:(e,n,r)=>Ew(e,n)||t.get(e,n,r),has:(e,n)=>!!Ew(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yp="@firebase/app",Tw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new $g("@firebase/app"),KN="@firebase/app-compat",QN="@firebase/analytics-compat",YN="@firebase/analytics",XN="@firebase/app-check-compat",JN="@firebase/app-check",ZN="@firebase/auth",eD="@firebase/auth-compat",tD="@firebase/database",nD="@firebase/data-connect",rD="@firebase/database-compat",iD="@firebase/functions",sD="@firebase/functions-compat",oD="@firebase/installations",aD="@firebase/installations-compat",lD="@firebase/messaging",uD="@firebase/messaging-compat",cD="@firebase/performance",hD="@firebase/performance-compat",dD="@firebase/remote-config",fD="@firebase/remote-config-compat",pD="@firebase/storage",mD="@firebase/storage-compat",gD="@firebase/firestore",yD="@firebase/vertexai-preview",vD="@firebase/firestore-compat",_D="firebase",wD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="[DEFAULT]",ED={[Yp]:"fire-core",[KN]:"fire-core-compat",[YN]:"fire-analytics",[QN]:"fire-analytics-compat",[JN]:"fire-app-check",[XN]:"fire-app-check-compat",[ZN]:"fire-auth",[eD]:"fire-auth-compat",[tD]:"fire-rtdb",[nD]:"fire-data-connect",[rD]:"fire-rtdb-compat",[iD]:"fire-fn",[sD]:"fire-fn-compat",[oD]:"fire-iid",[aD]:"fire-iid-compat",[lD]:"fire-fcm",[uD]:"fire-fcm-compat",[cD]:"fire-perf",[hD]:"fire-perf-compat",[dD]:"fire-rc",[fD]:"fire-rc-compat",[pD]:"fire-gcs",[mD]:"fire-gcs-compat",[gD]:"fire-fst",[vD]:"fire-fst-compat",[yD]:"fire-vertex","fire-js":"fire-js",[_D]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,TD=new Map,Jp=new Map;function Sw(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function os(t){const e=t.name;if(Jp.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Jp.set(e,t);for(const n of rh.values())Sw(n,t);for(const n of TD.values())Sw(n,t);return!0}function Jh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new Bl("app","Firebase",SD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=wD;function Wg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ri.create("bad-app-name",{appName:String(i)});if(n||(n=LI()),!n)throw ri.create("no-options");const s=rh.get(i);if(s){if(nh(n,s.options)&&nh(r,s.config))return s;throw ri.create("duplicate-app",{appName:i})}const o=new RN(i);for(const l of Jp.values())o.addComponent(l);const a=new ID(n,r,o);return rh.set(i,a),a}function Hg(t=Xp){const e=rh.get(t);if(!e&&t===Xp&&LI())return Wg();if(!e)throw ri.create("no-app",{appName:t});return e}function Bn(t,e,n){var r;let i=(r=ED[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(a.join(" "));return}os(new li(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="firebase-heartbeat-database",xD=1,gl="firebase-heartbeat-store";let xf=null;function BI(){return xf||(xf=zN(AD,xD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),xf}async function bD(t){try{const n=(await BI()).transaction(gl),r=await n.objectStore(gl).get($I(t));return await n.done,r}catch(e){if(e instanceof Qn)wr.warn(e.message);else{const n=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function Iw(t,e){try{const r=(await BI()).transaction(gl,"readwrite");await r.objectStore(gl).put(e,$I(t)),await r.done}catch(n){if(n instanceof Qn)wr.warn(n.message);else{const r=ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function $I(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=1024,CD=30*24*60*60*1e3;class RD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ND(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Aw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=CD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Aw(),{heartbeatsToSend:r,unsentEntries:i}=kD(this._heartbeatsCache.heartbeats),s=th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wr.warn(n),""}}}function Aw(){return new Date().toISOString().substring(0,10)}function kD(t,e=PD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ND{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vN()?_N().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Iw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Iw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xw(t){return th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){os(new li("platform-logger",e=>new qN(e),"PRIVATE")),os(new li("heartbeat",e=>new RD(e),"PRIVATE")),Bn(Yp,Tw,t),Bn(Yp,Tw,"esm2017"),Bn("fire-js","")}DD("");function qg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OD=zI,WI=new Bl("auth","Firebase",zI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new $g("@firebase/auth");function VD(t,...e){ih.logLevel<=he.WARN&&ih.warn(`Auth (${gs}): ${t}`,...e)}function _c(t,...e){ih.logLevel<=he.ERROR&&ih.error(`Auth (${gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw Gg(t,...e)}function $n(t,...e){return Gg(t,...e)}function HI(t,e,n){const r=Object.assign(Object.assign({},OD()),{[e]:n});return new Bl("auth","Firebase",r).create(e,{appName:t.name})}function dr(t){return HI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WI.create(t,...e)}function te(t,e,...n){if(!t)throw Gg(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _c(e),new Error(e)}function Er(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LD(){return bw()==="http:"||bw()==="https:"}function bw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LD()||pN()||"connection"in navigator)?navigator.onLine:!0}function jD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=hN()||mN()}get(){return MD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){Er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new zl(3e4,6e4);function wi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ei(t,e,n,r,i={}){return GI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=$l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return fN()||(c.referrerPolicy="no-referrer"),qI.fetch()(KI(t,t.config.apiHost,n,a),c)})}async function GI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FD),e);try{const i=new $D(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Qu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw HI(t,h,c);Rn(t,h)}}catch(i){if(i instanceof Qn)throw i;Rn(t,"network-request-failed",{message:String(i)})}}async function Wl(t,e,n,r,i={}){const s=await Ei(t,e,n,r,i);return"mfaPendingCredential"in s&&Rn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function KI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Kg(t.config,i):`${t.config.apiScheme}://${i}`}function BD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $D{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),UD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}function Pw(t){return t!==void 0&&t.enterprise!==void 0}class zD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function WD(t,e){return Ei(t,"GET","/v2/recaptchaConfig",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e){return Ei(t,"POST","/v1/accounts:delete",e)}async function QI(t,e){return Ei(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qD(t,e=!1){const n=Ze(t),r=await n.getIdToken(e),i=Qg(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$a(bf(i.auth_time)),issuedAtTime:$a(bf(i.iat)),expirationTime:$a(bf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bf(t){return Number(t)*1e3}function Qg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{const i=DI(n);return i?JSON.parse(i):(_c("Failed to decode base64 JWT payload"),null)}catch(i){return _c("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Cw(t){const e=Qg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qn&&GD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await yl(t,QI(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YI(s.providerUserInfo):[],a=YD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new em(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function QD(t){const e=Ze(t);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YI(t){return t.map(e=>{var{providerId:n}=e,r=qg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e){const n=await GI(t,{},async()=>{const r=$l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=KI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JD(t,e){return Ei(t,"POST","/v2/accounts:revokeToken",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Cw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new co;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class lr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=qg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new em(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qD(this,e)}reload(){return QD(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(dr(this.auth));const e=await this.getIdToken();return await yl(this,HD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:k,isAnonymous:V,providerData:M,stsTokenManager:x}=n;te(S&&x,e,"internal-error");const E=co.fromJSON(this.name,x);te(typeof S=="string",e,"internal-error"),kr(d,e.name),kr(p,e.name),te(typeof k=="boolean",e,"internal-error"),te(typeof V=="boolean",e,"internal-error"),kr(g,e.name),kr(v,e.name),kr(_,e.name),kr(I,e.name),kr(T,e.name),kr(w,e.name);const b=new lr({uid:S,auth:e,email:p,emailVerified:k,displayName:d,isAnonymous:V,photoURL:v,phoneNumber:g,tenantId:_,stsTokenManager:E,createdAt:T,lastLoginAt:w});return M&&Array.isArray(M)&&(b.providerData=M.map(P=>Object.assign({},P))),I&&(b._redirectEventId=I),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new co;i.updateFromServerResponse(n);const s=new lr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?YI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new co;a.updateFromIdToken(r);const l=new lr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new em(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;function ur(t){Er(t instanceof Function,"Expected a class definition");let e=Rw.get(t);return e?(Er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XI.type="NONE";const kw=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e,n){return`firebase:${t}:${e}:${n}`}class ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wc(this.userKey,i.apiKey,s),this.fullPersistenceKey=wc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ho(ur(kw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ur(kw);const o=wc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=lr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ho(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rA(e))return"Blackberry";if(iA(e))return"Webos";if(ZI(e))return"Safari";if((e.includes("chrome/")||eA(e))&&!e.includes("edge/"))return"Chrome";if(nA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JI(t=Dt()){return/firefox\//i.test(t)}function ZI(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eA(t=Dt()){return/crios\//i.test(t)}function tA(t=Dt()){return/iemobile/i.test(t)}function nA(t=Dt()){return/android/i.test(t)}function rA(t=Dt()){return/blackberry/i.test(t)}function iA(t=Dt()){return/webos/i.test(t)}function Yg(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZD(t=Dt()){var e;return Yg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eO(){return gN()&&document.documentMode===10}function sA(t=Dt()){return Yg(t)||nA(t)||iA(t)||rA(t)||/windows phone/i.test(t)||tA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e=[]){let n;switch(t){case"Browser":n=Nw(Dt());break;case"Worker":n=`${Nw(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e={}){return Ei(t,"GET","/v2/passwordPolicy",wi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=6;class iO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dw(this),this.idTokenSubscription=new Dw(this),this.beforeStateQueue=new tO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await QI(this,{idToken:e}),r=await lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(dr(this));const n=e?Ze(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nO(this),n=new iO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ys(t){return Ze(t)}class Dw{constructor(e){this.auth=e,this.observer=null,this.addObserver=IN(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oO(t){Zh=t}function aA(t){return Zh.loadJS(t)}function aO(){return Zh.recaptchaEnterpriseScript}function lO(){return Zh.gapiScript}function uO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const cO="recaptcha-enterprise",hO="NO_RECAPTCHA";class dO{constructor(e){this.type=cO,this.auth=ys(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{WD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new zD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Pw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(hO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Pw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=aO();l.length!==0&&(l+=a),aA(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ow(t,e,n,r=!1){const i=new dO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function tm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ow(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ow(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t,e){const n=Jh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(nh(s,e??{}))return i;Rn(i,"already-initialized")}return n.initialize({options:e})}function pO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mO(t,e,n){const r=ys(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=lA(e),{host:o,port:a}=gO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),yO()}function lA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gO(t){const e=lA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Vw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Vw(o)}}}function Vw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}async function vO(t,e){return Ei(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(t,e){return Wl(t,"POST","/v1/accounts:signInWithPassword",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(t,e){return Wl(t,"POST","/v1/accounts:signInWithEmailLink",wi(t,e))}async function EO(t,e){return Wl(t,"POST","/v1/accounts:signInWithEmailLink",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Xg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new vl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,n,"signInWithPassword",_O);case"emailLink":return wO(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,r,"signUpPassword",vO);case"emailLink":return EO(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t,e){return Wl(t,"POST","/v1/accounts:signInWithIdp",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="http://localhost";class as extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=qg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new as(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:TO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IO(t){const e=Aa(xa(t)).link,n=e?Aa(xa(e)).deep_link_id:null,r=Aa(xa(t)).deep_link_id;return(r?Aa(xa(r)).link:null)||r||n||e||t}class Jg{constructor(e){var n,r,i,s,o,a;const l=Aa(xa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=SO((i=l.mode)!==null&&i!==void 0?i:null);te(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=IO(e);try{return new Jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return vl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jg.parseLink(n);return te(r,"argument-error"),vl._fromEmailAndCode(e,r.code,r.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends uA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Hl{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fr.credential(n,r)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Hl{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Hl{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Br.credential(n,r)}catch{return null}}}Br.TWITTER_SIGN_IN_METHOD="twitter.com";Br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e){return Wl(t,"POST","/v1/accounts:signUp",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await lr._fromIdTokenResponse(e,r,i),o=Lw(r);return new ls({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lw(r);return new ls({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends Qn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new oh(e,n,r,i)}}function cA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(t,s,e,r):s})}async function xO(t,e,n=!1){const r=await yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e,n=!1){const{auth:r}=t;if(jn(r.app))return Promise.reject(dr(r));const i="reauthenticate";try{const s=await yl(t,cA(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=Qg(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),ls._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e,n=!1){if(jn(t.app))return Promise.reject(dr(t));const r="signIn",i=await cA(t,r,e),s=await ls._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function PO(t,e){return hA(ys(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t){const e=ys(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CO(t,e,n){if(jn(t.app))return Promise.reject(dr(t));const r=ys(t),o=await tm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dA(t),l}),a=await ls._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function RO(t,e,n){return jn(t.app)?Promise.reject(dr(t)):PO(Ze(t),Vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dA(t),r})}function kO(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function NO(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function ed(t,e,n,r){return Ze(t).onAuthStateChanged(e,n,r)}function DO(t){return Ze(t).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=1e3,VO=10;class pA extends fA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);eO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,VO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},OO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pA.type="LOCAL";const LO=pA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends fA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mA.type="SESSION";const gA=mA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new td(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await MO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Zg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return window}function FO(t){zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof zn().WorkerGlobalScope<"u"&&typeof zn().importScripts=="function"}async function UO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $O(){return yA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebaseLocalStorageDb",zO=1,lh="firebaseLocalStorage",_A="fbase_key";class ql{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nd(t,e){return t.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function WO(){const t=indexedDB.deleteDatabase(vA);return new ql(t).toPromise()}function nm(){const t=indexedDB.open(vA,zO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lh,{keyPath:_A})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),await WO(),e(await nm()))})})}async function Mw(t,e,n){const r=nd(t,!0).put({[_A]:e,value:n});return new ql(r).toPromise()}async function HO(t,e){const n=nd(t,!1).get(e),r=await new ql(n).toPromise();return r===void 0?null:r.value}function jw(t,e){const n=nd(t,!0).delete(e);return new ql(n).toPromise()}const qO=800,GO=3;class wA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance($O()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await UO(),!this.activeServiceWorker)return;this.sender=new jO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nm();return await Mw(e,ah,"1"),await jw(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>HO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=nd(i,!1).getAll();return new ql(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wA.type="LOCAL";const KO=wA;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e){return e?ur(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YO(t){return hA(t.auth,new ey(t),t.bypassAuthState)}function XO(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),bO(n,new ey(t),t.bypassAuthState)}async function JO(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),xO(n,new ey(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YO;case"linkViaPopup":case"linkViaRedirect":return JO;case"reauthViaPopup":case"reauthViaRedirect":return XO;default:Rn(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=new zl(2e3,1e4);class Ys extends EA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=Zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZO.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="pendingRedirect",Ec=new Map;class tV extends EA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ec.get(this.auth._key());if(!e){try{const r=await nV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ec.set(this.auth._key(),e)}return this.bypassAuthState||Ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nV(t,e){const n=sV(e),r=iV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rV(t,e){Ec.set(t._key(),e)}function iV(t){return ur(t._redirectPersistence)}function sV(t){return wc(eV,t.config.apiKey,t.name)}async function oV(t,e,n=!1){if(jn(t.app))return Promise.reject(dr(t));const r=ys(t),i=QO(r,e),o=await new tV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=10*60*1e3;class lV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fw(e))}saveEventToCache(e){this.cachedEventUids.add(Fw(e)),this.lastProcessedEventTime=Date.now()}}function Fw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(t,e={}){return Ei(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dV=/^https?/;async function fV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cV(t);for(const n of e)try{if(pV(n))return}catch{}Rn(t,"unauthorized-domain")}function pV(t){const e=Zp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dV.test(n))return!1;if(hV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new zl(3e4,6e4);function Uw(){const t=zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gV(t){return new Promise((e,n)=>{var r,i,s;function o(){Uw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uw(),n($n(t,"network-request-failed"))},timeout:mV.get()})}if(!((i=(r=zn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=zn().gapi)===null||s===void 0)&&s.load)o();else{const a=uO("iframefcb");return zn()[a]=()=>{gapi.load?o():n($n(t,"network-request-failed"))},aA(`${lO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Tc=null,e})}let Tc=null;function yV(t){return Tc=Tc||gV(t),Tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=new zl(5e3,15e3),_V="__/auth/iframe",wV="emulator/auth/iframe",EV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SV(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,wV):`https://${t.config.authDomain}/${_V}`,r={apiKey:e.apiKey,appName:t.name,v:gs},i=TV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$l(r).slice(1)}`}async function IV(t){const e=await yV(t),n=zn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:SV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$n(t,"network-request-failed"),a=zn().setTimeout(()=>{s(o)},vV.get());function l(){zn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xV=500,bV=600,PV="_blank",CV="http://localhost";class Bw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RV(t,e,n,r=xV,i=bV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},AV),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Dt().toLowerCase();n&&(a=eA(c)?PV:n),JI(c)&&(e=e||CV,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(ZD(c)&&a!=="_self")return kV(e||"",a),new Bw(null);const d=window.open(e||"",a,h);te(d,t,"popup-blocked");try{d.focus()}catch{}return new Bw(d)}function kV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="__/auth/handler",DV="emulator/auth/handler",OV=encodeURIComponent("fac");async function $w(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gs,eventId:i};if(e instanceof uA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",SN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Hl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${OV}=${encodeURIComponent(l)}`:"";return`${VV(t)}?${$l(a).slice(1)}${c}`}function VV({config:t}){return t.emulator?Kg(t,DV):`https://${t.authDomain}/${NV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class LV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gA,this._completeRedirectFn=oV,this._overrideRedirectResult=rV}async _openPopup(e,n,r,i){var s;Er((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $w(e,n,r,Zp(),i);return RV(e,o,Zg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $w(e,n,r,Zp(),i);return FO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Er(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IV(e),r=new lV(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Pf];o!==void 0&&n(!!o),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sA()||ZI()||Yg()}}const MV=LV;var zw="@firebase/auth",Ww="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UV(t){os(new li("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oA(t)},c=new sO(r,i,s,l);return pO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),os(new li("auth-internal",e=>{const n=ys(e.getProvider("auth").getImmediate());return(r=>new jV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(zw,Ww,FV(t)),Bn(zw,Ww,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=5*60,$V=MI("authIdTokenMaxAge")||BV;let Hw=null;const zV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$V)return;const i=n==null?void 0:n.token;Hw!==i&&(Hw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SA(t=Hg()){const e=Jh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fO(t,{popupRedirectResolver:MV,persistence:[KO,LO,gA]}),r=MI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zV(s.toString());NO(n,o,()=>o(n.currentUser)),kO(n,a=>o(a))}}const i=OI("auth");return i&&mO(n,`http://${i}`),n}function WV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$n("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",WV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UV("Browser");var HV="firebase",qV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(HV,qV,"app");var qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,IA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,E){function b(){}b.prototype=E.prototype,x.D=E.prototype,x.prototype=new b,x.prototype.constructor=x,x.C=function(P,N,D){for(var C=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)C[ae-2]=arguments[ae];return E.prototype[N].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,E,b){b||(b=0);var P=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)P[N]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(N=0;16>N;++N)P[N]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=x.g[0],b=x.g[1],N=x.g[2];var D=x.g[3],C=E+(D^b&(N^D))+P[0]+3614090360&4294967295;E=b+(C<<7&4294967295|C>>>25),C=D+(N^E&(b^N))+P[1]+3905402710&4294967295,D=E+(C<<12&4294967295|C>>>20),C=N+(b^D&(E^b))+P[2]+606105819&4294967295,N=D+(C<<17&4294967295|C>>>15),C=b+(E^N&(D^E))+P[3]+3250441966&4294967295,b=N+(C<<22&4294967295|C>>>10),C=E+(D^b&(N^D))+P[4]+4118548399&4294967295,E=b+(C<<7&4294967295|C>>>25),C=D+(N^E&(b^N))+P[5]+1200080426&4294967295,D=E+(C<<12&4294967295|C>>>20),C=N+(b^D&(E^b))+P[6]+2821735955&4294967295,N=D+(C<<17&4294967295|C>>>15),C=b+(E^N&(D^E))+P[7]+4249261313&4294967295,b=N+(C<<22&4294967295|C>>>10),C=E+(D^b&(N^D))+P[8]+1770035416&4294967295,E=b+(C<<7&4294967295|C>>>25),C=D+(N^E&(b^N))+P[9]+2336552879&4294967295,D=E+(C<<12&4294967295|C>>>20),C=N+(b^D&(E^b))+P[10]+4294925233&4294967295,N=D+(C<<17&4294967295|C>>>15),C=b+(E^N&(D^E))+P[11]+2304563134&4294967295,b=N+(C<<22&4294967295|C>>>10),C=E+(D^b&(N^D))+P[12]+1804603682&4294967295,E=b+(C<<7&4294967295|C>>>25),C=D+(N^E&(b^N))+P[13]+4254626195&4294967295,D=E+(C<<12&4294967295|C>>>20),C=N+(b^D&(E^b))+P[14]+2792965006&4294967295,N=D+(C<<17&4294967295|C>>>15),C=b+(E^N&(D^E))+P[15]+1236535329&4294967295,b=N+(C<<22&4294967295|C>>>10),C=E+(N^D&(b^N))+P[1]+4129170786&4294967295,E=b+(C<<5&4294967295|C>>>27),C=D+(b^N&(E^b))+P[6]+3225465664&4294967295,D=E+(C<<9&4294967295|C>>>23),C=N+(E^b&(D^E))+P[11]+643717713&4294967295,N=D+(C<<14&4294967295|C>>>18),C=b+(D^E&(N^D))+P[0]+3921069994&4294967295,b=N+(C<<20&4294967295|C>>>12),C=E+(N^D&(b^N))+P[5]+3593408605&4294967295,E=b+(C<<5&4294967295|C>>>27),C=D+(b^N&(E^b))+P[10]+38016083&4294967295,D=E+(C<<9&4294967295|C>>>23),C=N+(E^b&(D^E))+P[15]+3634488961&4294967295,N=D+(C<<14&4294967295|C>>>18),C=b+(D^E&(N^D))+P[4]+3889429448&4294967295,b=N+(C<<20&4294967295|C>>>12),C=E+(N^D&(b^N))+P[9]+568446438&4294967295,E=b+(C<<5&4294967295|C>>>27),C=D+(b^N&(E^b))+P[14]+3275163606&4294967295,D=E+(C<<9&4294967295|C>>>23),C=N+(E^b&(D^E))+P[3]+4107603335&4294967295,N=D+(C<<14&4294967295|C>>>18),C=b+(D^E&(N^D))+P[8]+1163531501&4294967295,b=N+(C<<20&4294967295|C>>>12),C=E+(N^D&(b^N))+P[13]+2850285829&4294967295,E=b+(C<<5&4294967295|C>>>27),C=D+(b^N&(E^b))+P[2]+4243563512&4294967295,D=E+(C<<9&4294967295|C>>>23),C=N+(E^b&(D^E))+P[7]+1735328473&4294967295,N=D+(C<<14&4294967295|C>>>18),C=b+(D^E&(N^D))+P[12]+2368359562&4294967295,b=N+(C<<20&4294967295|C>>>12),C=E+(b^N^D)+P[5]+4294588738&4294967295,E=b+(C<<4&4294967295|C>>>28),C=D+(E^b^N)+P[8]+2272392833&4294967295,D=E+(C<<11&4294967295|C>>>21),C=N+(D^E^b)+P[11]+1839030562&4294967295,N=D+(C<<16&4294967295|C>>>16),C=b+(N^D^E)+P[14]+4259657740&4294967295,b=N+(C<<23&4294967295|C>>>9),C=E+(b^N^D)+P[1]+2763975236&4294967295,E=b+(C<<4&4294967295|C>>>28),C=D+(E^b^N)+P[4]+1272893353&4294967295,D=E+(C<<11&4294967295|C>>>21),C=N+(D^E^b)+P[7]+4139469664&4294967295,N=D+(C<<16&4294967295|C>>>16),C=b+(N^D^E)+P[10]+3200236656&4294967295,b=N+(C<<23&4294967295|C>>>9),C=E+(b^N^D)+P[13]+681279174&4294967295,E=b+(C<<4&4294967295|C>>>28),C=D+(E^b^N)+P[0]+3936430074&4294967295,D=E+(C<<11&4294967295|C>>>21),C=N+(D^E^b)+P[3]+3572445317&4294967295,N=D+(C<<16&4294967295|C>>>16),C=b+(N^D^E)+P[6]+76029189&4294967295,b=N+(C<<23&4294967295|C>>>9),C=E+(b^N^D)+P[9]+3654602809&4294967295,E=b+(C<<4&4294967295|C>>>28),C=D+(E^b^N)+P[12]+3873151461&4294967295,D=E+(C<<11&4294967295|C>>>21),C=N+(D^E^b)+P[15]+530742520&4294967295,N=D+(C<<16&4294967295|C>>>16),C=b+(N^D^E)+P[2]+3299628645&4294967295,b=N+(C<<23&4294967295|C>>>9),C=E+(N^(b|~D))+P[0]+4096336452&4294967295,E=b+(C<<6&4294967295|C>>>26),C=D+(b^(E|~N))+P[7]+1126891415&4294967295,D=E+(C<<10&4294967295|C>>>22),C=N+(E^(D|~b))+P[14]+2878612391&4294967295,N=D+(C<<15&4294967295|C>>>17),C=b+(D^(N|~E))+P[5]+4237533241&4294967295,b=N+(C<<21&4294967295|C>>>11),C=E+(N^(b|~D))+P[12]+1700485571&4294967295,E=b+(C<<6&4294967295|C>>>26),C=D+(b^(E|~N))+P[3]+2399980690&4294967295,D=E+(C<<10&4294967295|C>>>22),C=N+(E^(D|~b))+P[10]+4293915773&4294967295,N=D+(C<<15&4294967295|C>>>17),C=b+(D^(N|~E))+P[1]+2240044497&4294967295,b=N+(C<<21&4294967295|C>>>11),C=E+(N^(b|~D))+P[8]+1873313359&4294967295,E=b+(C<<6&4294967295|C>>>26),C=D+(b^(E|~N))+P[15]+4264355552&4294967295,D=E+(C<<10&4294967295|C>>>22),C=N+(E^(D|~b))+P[6]+2734768916&4294967295,N=D+(C<<15&4294967295|C>>>17),C=b+(D^(N|~E))+P[13]+1309151649&4294967295,b=N+(C<<21&4294967295|C>>>11),C=E+(N^(b|~D))+P[4]+4149444226&4294967295,E=b+(C<<6&4294967295|C>>>26),C=D+(b^(E|~N))+P[11]+3174756917&4294967295,D=E+(C<<10&4294967295|C>>>22),C=N+(E^(D|~b))+P[2]+718787259&4294967295,N=D+(C<<15&4294967295|C>>>17),C=b+(D^(N|~E))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+E&4294967295,x.g[1]=x.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+D&4294967295}r.prototype.u=function(x,E){E===void 0&&(E=x.length);for(var b=E-this.blockSize,P=this.B,N=this.h,D=0;D<E;){if(N==0)for(;D<=b;)i(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<E;)if(P[N++]=x.charCodeAt(D++),N==this.blockSize){i(this,P),N=0;break}}else for(;D<E;)if(P[N++]=x[D++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=E},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var E=1;E<x.length-8;++E)x[E]=0;var b=8*this.o;for(E=x.length-8;E<x.length;++E)x[E]=b&255,b/=256;for(this.u(x),x=Array(16),E=b=0;4>E;++E)for(var P=0;32>P;P+=8)x[b++]=this.g[E]>>>P&255;return x};function s(x,E){var b=a;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=E(x)}function o(x,E){this.h=E;for(var b=[],P=!0,N=x.length-1;0<=N;N--){var D=x[N]|0;P&&D==E||(b[N]=D,P=!1)}this.g=b}var a={};function l(x){return-128<=x&&128>x?s(x,function(E){return new o([E|0],0>E?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return I(c(-x));for(var E=[],b=1,P=0;x>=b;P++)E[P]=x/b|0,b*=4294967296;return new o(E,0)}function h(x,E){if(x.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x.charAt(0)=="-")return I(h(x.substring(1),E));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(E,8)),P=d,N=0;N<x.length;N+=8){var D=Math.min(8,x.length-N),C=parseInt(x.substring(N,N+D),E);8>D?(D=c(Math.pow(E,D)),P=P.j(D).add(c(C))):(P=P.j(b),P=P.add(c(C)))}return P}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-I(this).m();for(var x=0,E=1,b=0;b<this.g.length;b++){var P=this.i(b);x+=(0<=P?P:4294967296+P)*E,E*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(_(this))return"-"+I(this).toString(x);for(var E=c(Math.pow(x,6)),b=this,P="";;){var N=k(b,E).g;b=T(b,N.j(E));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(x);if(b=N,v(b))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var E=0;E<x.g.length;E++)if(x.g[E]!=0)return!1;return!0}function _(x){return x.h==-1}t.l=function(x){return x=T(this,x),_(x)?-1:v(x)?0:1};function I(x){for(var E=x.g.length,b=[],P=0;P<E;P++)b[P]=~x.g[P];return new o(b,~x.h).add(p)}t.abs=function(){return _(this)?I(this):this},t.add=function(x){for(var E=Math.max(this.g.length,x.g.length),b=[],P=0,N=0;N<=E;N++){var D=P+(this.i(N)&65535)+(x.i(N)&65535),C=(D>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);P=C>>>16,D&=65535,C&=65535,b[N]=C<<16|D}return new o(b,b[b.length-1]&-2147483648?-1:0)};function T(x,E){return x.add(I(E))}t.j=function(x){if(v(this)||v(x))return d;if(_(this))return _(x)?I(this).j(I(x)):I(I(this).j(x));if(_(x))return I(this.j(I(x)));if(0>this.l(g)&&0>x.l(g))return c(this.m()*x.m());for(var E=this.g.length+x.g.length,b=[],P=0;P<2*E;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<x.g.length;N++){var D=this.i(P)>>>16,C=this.i(P)&65535,ae=x.i(N)>>>16,Re=x.i(N)&65535;b[2*P+2*N]+=C*Re,w(b,2*P+2*N),b[2*P+2*N+1]+=D*Re,w(b,2*P+2*N+1),b[2*P+2*N+1]+=C*ae,w(b,2*P+2*N+1),b[2*P+2*N+2]+=D*ae,w(b,2*P+2*N+2)}for(P=0;P<E;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=E;P<2*E;P++)b[P]=0;return new o(b,0)};function w(x,E){for(;(x[E]&65535)!=x[E];)x[E+1]+=x[E]>>>16,x[E]&=65535,E++}function S(x,E){this.g=x,this.h=E}function k(x,E){if(v(E))throw Error("division by zero");if(v(x))return new S(d,d);if(_(x))return E=k(I(x),E),new S(I(E.g),I(E.h));if(_(E))return E=k(x,I(E)),new S(I(E.g),E.h);if(30<x.g.length){if(_(x)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var b=p,P=E;0>=P.l(x);)b=V(b),P=V(P);var N=M(b,1),D=M(P,1);for(P=M(P,2),b=M(b,2);!v(P);){var C=D.add(P);0>=C.l(x)&&(N=N.add(b),D=C),P=M(P,1),b=M(b,1)}return E=T(x,N.j(E)),new S(N,E)}for(N=d;0<=x.l(E);){for(b=Math.max(1,Math.floor(x.m()/E.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(b),C=D.j(E);_(C)||0<C.l(x);)b-=P,D=c(b),C=D.j(E);v(D)&&(D=p),N=N.add(D),x=T(x,C)}return new S(N,x)}t.A=function(x){return k(this,x).h},t.and=function(x){for(var E=Math.max(this.g.length,x.g.length),b=[],P=0;P<E;P++)b[P]=this.i(P)&x.i(P);return new o(b,this.h&x.h)},t.or=function(x){for(var E=Math.max(this.g.length,x.g.length),b=[],P=0;P<E;P++)b[P]=this.i(P)|x.i(P);return new o(b,this.h|x.h)},t.xor=function(x){for(var E=Math.max(this.g.length,x.g.length),b=[],P=0;P<E;P++)b[P]=this.i(P)^x.i(P);return new o(b,this.h^x.h)};function V(x){for(var E=x.g.length+1,b=[],P=0;P<E;P++)b[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(b,x.h)}function M(x,E){var b=E>>5;E%=32;for(var P=x.g.length-b,N=[],D=0;D<P;D++)N[D]=0<E?x.i(D+b)>>>E|x.i(D+b+1)<<32-E:x.i(D+b);return new o(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ji=o}).apply(typeof qw<"u"?qw:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AA,ba,xA,Sc,rm,bA,PA,CA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var O=u[A];if(!(O in m))break e;m=m[O]}u=u[u.length-1],A=m[u],f=f(A),f!=A&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,A=!1,O={next:function(){if(!A&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return A=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,A),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var A=m.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function v(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(A,O,L){for(var z=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)z[Te-2]=arguments[Te];return f.prototype[O].apply(A,z)}}function _(u){const f=u.length;if(0<f){const m=Array(f);for(let A=0;A<f;A++)m[A]=u[A];return m}return[]}function I(u,f){for(let m=1;m<arguments.length;m++){const A=arguments[m];if(l(A)){const O=u.length||0,L=A.length||0;u.length=O+L;for(let z=0;z<L;z++)u[O+z]=A[z]}else u.push(A)}}class T{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var V=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(u,f,m){for(const A in u)f.call(m,u[A],A,u)}function x(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function E(u){const f={};for(const m in u)f[m]=u[m];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let m,A;for(let O=1;O<arguments.length;O++){A=arguments[O];for(m in A)u[m]=A[m];for(let L=0;L<b.length;L++)m=b[L],Object.prototype.hasOwnProperty.call(A,m)&&(u[m]=A[m])}}function N(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function D(u){a.setTimeout(()=>{throw u},0)}function C(){var u=W;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ae{constructor(){this.h=this.g=null}add(f,m){const A=Re.get();A.set(f,m),this.h?this.h.next=A:this.g=A,this.h=A}}var Re=new T(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,B=!1,W=new ae,H=()=>{const u=a.Promise.resolve(void 0);Y=()=>{u.then(K)}};var K=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){D(m)}var f=Re;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}B=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Et(u,f){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{k(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ge[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Et.aa.h.call(this)}}v(Et,de);var Ge={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),Xn=0;function zt(u,f,m,A,O){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!A,this.ha=O,this.key=++Xn,this.da=this.fa=!1}function Jt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Tt(u){this.src=u,this.g={},this.h=0}Tt.prototype.add=function(u,f,m,A,O){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var z=bi(u,f,A,O);return-1<z?(f=u[z],m||(f.fa=!1)):(f=new zt(f,this.src,L,!!A,O),f.fa=m,u.push(f)),f};function Jn(u,f){var m=f.type;if(m in u.g){var A=u.g[m],O=Array.prototype.indexOf.call(A,f,void 0),L;(L=0<=O)&&Array.prototype.splice.call(A,O,1),L&&(Jt(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function bi(u,f,m,A){for(var O=0;O<u.length;++O){var L=u[O];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==A)return O}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),Zn={};function Ot(u,f,m,A,O){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Ot(u,f[L],m,A,O);return null}return m=hu(m),u&&u[rt]?u.K(f,m,c(A)?!!A.capture:!1,O):Is(u,f,m,!1,A,O)}function Is(u,f,m,A,O,L){if(!f)throw Error("Invalid event type");var z=c(O)?!!O.capture:!!O,Te=As(u);if(Te||(u[Oe]=Te=new Tt(u)),m=Te.add(f,m,A,z,L),m.proxy)return m;if(A=uu(),m.proxy=A,A.src=u,A.listener=m,u.addEventListener)ht||(O=z),O===void 0&&(O=!1),u.addEventListener(f.toString(),A,O);else if(u.attachEvent)u.attachEvent(cu(f.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return m}function uu(){function u(m){return f.call(u.src,u.listener,m)}const f=Md;return u}function zo(u,f,m,A,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)zo(u,f[L],m,A,O);else A=c(A)?!!A.capture:!!A,m=hu(m),u&&u[rt]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=bi(L,m,A,O),-1<m&&(Jt(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=As(u))&&(f=u.g[f.toString()],u=-1,f&&(u=bi(f,m,A,O)),(m=-1<u?f[u]:null)&&Wo(m))}function Wo(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[rt])Jn(f.i,u);else{var m=u.type,A=u.proxy;f.removeEventListener?f.removeEventListener(m,A,u.capture):f.detachEvent?f.detachEvent(cu(m),A):f.addListener&&f.removeListener&&f.removeListener(A),(m=As(f))?(Jn(m,u),m.h==0&&(m.src=null,f[Oe]=null)):Jt(u)}}}function cu(u){return u in Zn?Zn[u]:Zn[u]="on"+u}function Md(u,f){if(u.da)u=!0;else{f=new Et(f,this);var m=u.listener,A=u.ha||u.src;u.fa&&Wo(u),u=m.call(A,f)}return u}function As(u){return u=u[Oe],u instanceof Tt?u:null}var Ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function hu(u){return typeof u=="function"?u:(u[Ho]||(u[Ho]=function(f){return u.handleEvent(f)}),u[Ho])}function it(){J.call(this),this.i=new Tt(this),this.M=this,this.F=null}v(it,J),it.prototype[rt]=!0,it.prototype.removeEventListener=function(u,f,m,A){zo(this,u,f,m,A)};function dt(u,f){var m,A=u.F;if(A)for(m=[];A;A=A.F)m.push(A);if(u=u.M,A=f.type||f,typeof f=="string")f=new de(f,u);else if(f instanceof de)f.target=f.target||u;else{var O=f;f=new de(A,u),P(f,O)}if(O=!0,m)for(var L=m.length-1;0<=L;L--){var z=f.g=m[L];O=xs(z,A,!0,f)&&O}if(z=f.g=u,O=xs(z,A,!0,f)&&O,O=xs(z,A,!1,f)&&O,m)for(L=0;L<m.length;L++)z=f.g=m[L],O=xs(z,A,!1,f)&&O}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],A=0;A<m.length;A++)Jt(m[A]);delete u.g[f],u.h--}}this.F=null},it.prototype.K=function(u,f,m,A){return this.i.add(String(u),f,!1,m,A)},it.prototype.L=function(u,f,m,A){return this.i.add(String(u),f,!0,m,A)};function xs(u,f,m,A){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,L=0;L<f.length;++L){var z=f[L];if(z&&!z.da&&z.capture==m){var Te=z.listener,ft=z.ha||z.src;z.fa&&Jn(u.i,z),O=Te.call(ft,A)!==!1&&O}}return O&&!A.defaultPrevented}function bs(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function qo(u){u.g=bs(()=>{u.g=null,u.i&&(u.i=!1,qo(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class du extends J{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(u){J.call(this),this.h=u,this.g={}}v(Pi,J);var Ci=[];function Go(u){M(u.g,function(f,m){this.g.hasOwnProperty(m)&&Wo(f)},u),u.g={}}Pi.prototype.N=function(){Pi.aa.N.call(this),Go(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ko=a.JSON.stringify,fu=a.JSON.parse,pu=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ri(){}Ri.prototype.h=null;function mu(u){return u.h||(u.h=u.i())}function Qo(){}var ki={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ps(){de.call(this,"d")}v(Ps,de);function st(){de.call(this,"c")}v(st,de);var Be={},Ni=null;function Ee(){return Ni=Ni||new it}Be.La="serverreachability";function Zt(u){de.call(this,Be.La,u)}v(Zt,de);function Di(u){const f=Ee();dt(f,new Zt(f))}Be.STAT_EVENT="statevent";function Cs(u,f){de.call(this,Be.STAT_EVENT,u),this.stat=f}v(Cs,de);function ot(u){const f=Ee();dt(f,new Cs(f,u))}Be.Ma="timingevent";function Yo(u,f){de.call(this,Be.Ma,u),this.size=f}v(Yo,de);function er(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Xo(u,f,m,A,O,L){u.info(function(){if(u.g)if(L)for(var z="",Te=L.split("&"),ft=0;ft<Te.length;ft++){var me=Te[ft].split("=");if(1<me.length){var St=me[0];me=me[1];var It=St.split("_");z=2<=It.length&&It[1]=="type"?z+(St+"="+me+"&"):z+(St+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+A+") [attempt "+O+"]: "+f+`
`+m+`
`+z})}function Jo(u,f,m,A,O,L,z){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+O+"]: "+f+`
`+m+`
`+L+" "+z})}function Dn(u,f,m,A){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Zo(u,m)+(A?" "+A:"")})}function jd(u,f){u.info(function(){return"TIMEOUT: "+f})}Nn.prototype.info=function(){};function Zo(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var A=m[u];if(!(2>A.length)){var O=A[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return Ko(m)}catch{return f}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ea;function se(){}v(se,Ri),se.prototype.g=function(){return new XMLHttpRequest},se.prototype.i=function(){return{}},ea=new se;function ye(u,f,m,A){this.j=u,this.i=f,this.l=m,this.R=A||1,this.U=new Pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Wt={},Vt={};function Vi(u,f,m){u.L=1,u.v=Tu(tr(f)),u.m=m,u.P=!0,yu(u,null)}function yu(u,f){u.F=Date.now(),_u(u),u.A=tr(u.v);var m=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Nv(m.i,"t",A),u.C=0,m=u.j.J,u.h=new Ve,u.g=Yv(u.j,m?f:null,!u.m),0<u.O&&(u.M=new du(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,A=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ci[0]=O.toString()),O=Ci);for(var L=0;L<O.length;L++){var z=Ot(m,O[L],A||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Di(),Xo(u.i,u.u,u.A,u.l,u.R,u.m)}ye.prototype.ca=function(u){u=u.target;const f=this.M;f&&nr(u)==3?f.j():this.Y(u)},ye.prototype.Y=function(u){try{if(u==this.g)e:{const It=nr(this.g);var f=this.g.Ba();const Ns=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||Fv(this.g)))){this.J||It!=4||f==7||(f==8||0>=Ns?Di(3):Di(2)),Fd(this);var m=this.g.Z();this.X=m;t:if(vu(this)){var A=Fv(this.g);u="";var O=A.length,L=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),ta(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(A[f],{stream:!(L&&f==O-1)});A.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,Jo(this.i,this.u,this.A,this.l,this.R,It,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ft=this.g;if((Te=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Te)){var me=Te;break t}}me=null}if(m=me)Dn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ud(this,m);else{this.o=!1,this.s=3,ot(12),Li(this),ta(this);break e}}if(this.P){m=!0;let _n;for(;!this.J&&this.C<z.length;)if(_n=oC(this,z),_n==Vt){It==4&&(this.s=4,ot(14),m=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Wt){this.s=4,ot(15),Dn(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Dn(this.i,this.l,_n,null),Ud(this,_n);if(vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||z.length!=0||this.h.h||(this.s=1,ot(16),m=!1),this.o=this.o&&m,!m)Dn(this.i,this.l,z,"[Invalid Chunked Response]"),Li(this),ta(this);else if(0<z.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),qd(St),St.M=!0,ot(11))}}else Dn(this.i,this.l,z,null),Ud(this,z);It==4&&Li(this),this.o&&!this.J&&(It==4?qv(this.j,this):(this.o=!1,_u(this)))}else SC(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Li(this),ta(this)}}}catch{}finally{}};function vu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function oC(u,f){var m=u.C,A=f.indexOf(`
`,m);return A==-1?Vt:(m=Number(f.substring(m,A)),isNaN(m)?Wt:(A+=1,A+m>f.length?Vt:(f=f.slice(A,A+m),u.C=A+m,f)))}ye.prototype.cancel=function(){this.J=!0,Li(this)};function _u(u){u.S=Date.now()+u.I,wv(u,u.I)}function wv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=er(p(u.ba,u),f)}function Fd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ye.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(jd(this.i,this.A),this.L!=2&&(Di(),ot(17)),Li(this),this.s=2,ta(this)):wv(this,this.S-u)};function ta(u){u.j.G==0||u.J||qv(u.j,u)}function Li(u){Fd(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Go(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ud(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Bd(m.h,u))){if(!u.K&&Bd(m.h,u)&&m.G==3){try{var A=m.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var O=A;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Pu(m),xu(m);else break e;Hd(m),ot(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=er(p(m.Za,m),6e3));if(1>=Sv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ji(m,11)}else if((u.K||m.g==u)&&Pu(m),!w(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let me=O[f];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];const St=me[3];St!=null&&(m.la=St,m.j.info("VER="+m.la));const It=me[4];It!=null&&(m.Aa=It,m.j.info("SVER="+m.Aa));const Ns=me[5];Ns!=null&&typeof Ns=="number"&&0<Ns&&(A=1.5*Ns,m.L=A,m.j.info("backChannelRequestTimeoutMs_="+A)),A=m;const _n=u.g;if(_n){const Ru=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var L=A.h;L.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&($d(L,L.h),L.h=null))}if(A.D){const Gd=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Gd&&(A.ya=Gd,Ie(A.I,A.D,Gd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),A=m;var z=u;if(A.qa=Qv(A,A.J?A.ia:null,A.W),z.K){Iv(A.h,z);var Te=z,ft=A.L;ft&&(Te.I=ft),Te.B&&(Fd(Te),_u(Te)),A.g=z}else Wv(A);0<m.i.length&&bu(m)}else me[0]!="stop"&&me[0]!="close"||ji(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ji(m,7):Wd(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}Di(4)}catch{}}var aC=class{constructor(u,f){this.g=u,this.map=f}};function Ev(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sv(u){return u.h?1:u.g?u.g.size:0}function Bd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function $d(u,f){u.g?u.g.add(f):u.h=f}function Iv(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Ev.prototype.cancel=function(){if(this.i=Av(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Av(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return _(u.i)}function lC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,A=0;A<m;A++)f.push(u[A]);return f}f=[],m=0;for(A in u)f[m++]=u[A];return f}function uC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const A in u)f[m++]=A;return f}}}function xv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=uC(u),A=lC(u),O=A.length,L=0;L<O;L++)f.call(void 0,A[L],m&&m[L],u)}var bv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cC(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var A=u[m].indexOf("="),O=null;if(0<=A){var L=u[m].substring(0,A);O=u[m].substring(A+1)}else L=u[m];f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Mi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Mi){this.h=u.h,wu(this,u.j),this.o=u.o,this.g=u.g,Eu(this,u.s),this.l=u.l;var f=u.i,m=new ia;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Pv(this,m),this.m=u.m}else u&&(f=String(u).match(bv))?(this.h=!1,wu(this,f[1]||"",!0),this.o=na(f[2]||""),this.g=na(f[3]||"",!0),Eu(this,f[4]),this.l=na(f[5]||"",!0),Pv(this,f[6]||"",!0),this.m=na(f[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Mi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ra(f,Cv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ra(f,Cv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(ra(m,m.charAt(0)=="/"?fC:dC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",ra(m,mC)),u.join("")};function tr(u){return new Mi(u)}function wu(u,f,m){u.j=m?na(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Eu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Pv(u,f,m){f instanceof ia?(u.i=f,gC(u.i,u.h)):(m||(f=ra(f,pC)),u.i=new ia(f,u.h))}function Ie(u,f,m){u.i.set(f,m)}function Tu(u){return Ie(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function na(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ra(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,hC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cv=/[#\/\?@]/g,dC=/[#\?:]/g,fC=/[#\?]/g,pC=/[#\?@]/g,mC=/#/g;function ia(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Pr(u){u.g||(u.g=new Map,u.h=0,u.i&&cC(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=ia.prototype,t.add=function(u,f){Pr(this),this.i=null,u=Rs(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Rv(u,f){Pr(u),f=Rs(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function kv(u,f){return Pr(u),f=Rs(u,f),u.g.has(f)}t.forEach=function(u,f){Pr(this),this.g.forEach(function(m,A){m.forEach(function(O){u.call(f,O,A,this)},this)},this)},t.na=function(){Pr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let A=0;A<f.length;A++){const O=u[A];for(let L=0;L<O.length;L++)m.push(f[A])}return m},t.V=function(u){Pr(this);let f=[];if(typeof u=="string")kv(this,u)&&(f=f.concat(this.g.get(Rs(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return Pr(this),this.i=null,u=Rs(this,u),kv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Nv(u,f,m){Rv(u,f),0<m.length&&(u.i=null,u.g.set(Rs(u,f),_(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var A=f[m];const L=encodeURIComponent(String(A)),z=this.V(A);for(A=0;A<z.length;A++){var O=L;z[A]!==""&&(O+="="+encodeURIComponent(String(z[A]))),u.push(O)}}return this.i=u.join("&")};function Rs(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function gC(u,f){f&&!u.j&&(Pr(u),u.i=null,u.g.forEach(function(m,A){var O=A.toLowerCase();A!=O&&(Rv(this,A),Nv(this,O,m))},u)),u.j=f}function yC(u,f){const m=new Nn;if(a.Image){const A=new Image;A.onload=g(Cr,m,"TestLoadImage: loaded",!0,f,A),A.onerror=g(Cr,m,"TestLoadImage: error",!1,f,A),A.onabort=g(Cr,m,"TestLoadImage: abort",!1,f,A),A.ontimeout=g(Cr,m,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else f(!1)}function vC(u,f){const m=new Nn,A=new AbortController,O=setTimeout(()=>{A.abort(),Cr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:A.signal}).then(L=>{clearTimeout(O),L.ok?Cr(m,"TestPingServer: ok",!0,f):Cr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Cr(m,"TestPingServer: error",!1,f)})}function Cr(u,f,m,A,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),A(m)}catch{}}function _C(){this.g=new pu}function wC(u,f,m){const A=m||"";try{xv(u,function(O,L){let z=O;c(O)&&(z=Ko(O)),f.push(A+L+"="+encodeURIComponent(z))})}catch(O){throw f.push(A+"type="+encodeURIComponent("_badmap")),O}}function Su(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Su,Ri),Su.prototype.g=function(){return new Iu(this.l,this.j)},Su.prototype.i=function(u){return function(){return u}}({});function Iu(u,f){it.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Iu,it),t=Iu.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,oa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,oa(this)),this.g&&(this.readyState=3,oa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?sa(this):oa(this),this.readyState==3&&Dv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,sa(this))},t.Qa=function(u){this.g&&(this.response=u,sa(this))},t.ga=function(){this.g&&sa(this)};function sa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,oa(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function oa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ov(u){let f="";return M(u,function(m,A){f+=A,f+=":",f+=m,f+=`\r
`}),f}function zd(u,f,m){e:{for(A in m){var A=!1;break e}A=!0}A||(m=Ov(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ie(u,f,m))}function $e(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v($e,it);var EC=/^https?$/i,TC=["POST","PUT"];t=$e.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ea.g(),this.v=this.o?mu(this.o):mu(ea),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){Vv(this,L);return}if(u=m||"",m=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var O in A)m.set(O,A[O]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const L of A.keys())m.set(L,A.get(L));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TC,f,void 0))||A||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of m)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jv(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Vv(this,L)}};function Vv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Lv(u),Au(u)}function Lv(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,dt(this,"complete"),dt(this,"abort"),Au(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Au(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mv(this):this.bb())},t.bb=function(){Mv(this)};function Mv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||nr(u)!=4||u.Z()!=2)){if(u.u&&nr(u)==4)bs(u.Ea,0,u);else if(dt(u,"readystatechange"),nr(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var A;if(A=z===0){var O=String(u.D).match(bv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),A=!EC.test(O?O.toLowerCase():"")}m=A}if(m)dt(u,"complete"),dt(u,"success");else{u.m=6;try{var L=2<nr(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",Lv(u)}}finally{Au(u)}}}}function Au(u,f){if(u.g){jv(u);const m=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||dt(u,"ready");try{m.onreadystatechange=A}catch{}}}function jv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function nr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),fu(f)}};function Fv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function SC(u){const f={};u=(u.g&&2<=nr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(w(u[A]))continue;var m=N(u[A]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[O]||[];f[O]=L,L.push(m)}x(f,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Uv(u){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,u),this.cb=aa("retryDelaySeedMs",1e4,u),this.Wa=aa("forwardChannelMaxRetries",2,u),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ev(u&&u.concurrentRequestLimit),this.Da=new _C,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Uv.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,A){ot(0),this.W=u,this.H=f||{},m&&A!==void 0&&(this.H.OSID=m,this.H.OAID=A),this.F=this.X,this.I=Qv(this,null,this.W),bu(this)};function Wd(u){if(Bv(u),u.G==3){var f=u.U++,m=tr(u.I);if(Ie(m,"SID",u.K),Ie(m,"RID",f),Ie(m,"TYPE","terminate"),la(u,m),f=new ye(u,u.j,f),f.L=2,f.v=Tu(tr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Yv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),_u(f)}Kv(u)}function xu(u){u.g&&(qd(u),u.g.cancel(),u.g=null)}function Bv(u){xu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Pu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bu(u){if(!Tv(u.h)&&!u.s){u.s=!0;var f=u.Ga;Y||H(),B||(Y(),B=!0),W.add(f,u),u.B=0}}function IC(u,f){return Sv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=er(p(u.Ga,u,f),Gv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new ye(this,this.j,u);let L=this.o;if(this.S&&(L?(L=E(L),P(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var A=this.i[m];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=zv(this,O,f),m=tr(this.I),Ie(m,"RID",u),Ie(m,"CVER",22),this.D&&Ie(m,"X-HTTP-Session-Id",this.D),la(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(Ov(L)))+"&"+f:this.m&&zd(m,this.m,L)),$d(this.h,O),this.Ua&&Ie(m,"TYPE","init"),this.P?(Ie(m,"$req",f),Ie(m,"SID","null"),O.T=!0,Vi(O,m,null)):Vi(O,m,f),this.G=2}}else this.G==3&&(u?$v(this,u):this.i.length==0||Tv(this.h)||$v(this))};function $v(u,f){var m;f?m=f.l:m=u.U++;const A=tr(u.I);Ie(A,"SID",u.K),Ie(A,"RID",m),Ie(A,"AID",u.T),la(u,A),u.m&&u.o&&zd(A,u.m,u.o),m=new ye(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=zv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$d(u.h,m),Vi(m,A,f)}function la(u,f){u.H&&M(u.H,function(m,A){Ie(f,A,m)}),u.l&&xv({},function(m,A){Ie(f,A,m)})}function zv(u,f,m){m=Math.min(u.i.length,m);var A=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let L=-1;for(;;){const z=["count="+m];L==-1?0<m?(L=O[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let Te=!0;for(let ft=0;ft<m;ft++){let me=O[ft].g;const St=O[ft].map;if(me-=L,0>me)L=Math.max(0,O[ft].g-100),Te=!1;else try{wC(St,z,"req"+me+"_")}catch{A&&A(St)}}if(Te){A=z.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,A}function Wv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Y||H(),B||(Y(),B=!0),W.add(f,u),u.v=0}}function Hd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=er(p(u.Fa,u),Gv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Hv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=er(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),xu(this),Hv(this))};function qd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Hv(u){u.g=new ye(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=tr(u.qa);Ie(f,"RID","rpc"),Ie(f,"SID",u.K),Ie(f,"AID",u.T),Ie(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ie(f,"TO",u.ja),Ie(f,"TYPE","xmlhttp"),la(u,f),u.m&&u.o&&zd(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Tu(tr(f)),m.m=null,m.P=!0,yu(m,u)}t.Za=function(){this.C!=null&&(this.C=null,xu(this),Hd(this),ot(19))};function Pu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qv(u,f){var m=null;if(u.g==f){Pu(u),qd(u),u.g=null;var A=2}else if(Bd(u.h,f))m=f.D,Iv(u.h,f),A=1;else return;if(u.G!=0){if(f.o)if(A==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;A=Ee(),dt(A,new Yo(A,m)),bu(u)}else Wv(u);else if(O=f.s,O==3||O==0&&0<f.X||!(A==1&&IC(u,f)||A==2&&Hd(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),O){case 1:ji(u,5);break;case 4:ji(u,10);break;case 3:ji(u,6);break;default:ji(u,2)}}}function Gv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function ji(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),A=u.Xa;const O=!A;A=new Mi(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wu(A,"https"),Tu(A),O?yC(A.toString(),m):vC(A.toString(),m)}else ot(2);u.G=0,u.l&&u.l.sa(f),Kv(u),Bv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Kv(u){if(u.G=0,u.ka=[],u.l){const f=Av(u.h);(f.length!=0||u.i.length!=0)&&(I(u.ka,f),I(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function Qv(u,f,m){var A=m instanceof Mi?tr(m):new Mi(m);if(A.g!="")f&&(A.g=f+"."+A.g),Eu(A,A.s);else{var O=a.location;A=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var L=new Mi(null);A&&wu(L,A),f&&(L.g=f),O&&Eu(L,O),m&&(L.l=m),A=L}return m=u.D,f=u.ya,m&&f&&Ie(A,m,f),Ie(A,"VER",u.la),la(u,A),A}function Yv(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new $e(new Su({eb:m})):new $e(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xv(){}t=Xv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cu(){}Cu.prototype.g=function(u,f){return new en(u,f)};function en(u,f){it.call(this),this.g=new Uv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ks(this)}v(en,it),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Wd(this.g)},en.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Ko(u),u=m);f.i.push(new aC(f.Ya++,u)),f.G==3&&bu(f)},en.prototype.N=function(){this.g.l=null,delete this.j,Wd(this.g),delete this.g,en.aa.N.call(this)};function Jv(u){Ps.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v(Jv,Ps);function Zv(){st.call(this),this.status=1}v(Zv,st);function ks(u){this.g=u}v(ks,Xv),ks.prototype.ua=function(){dt(this.g,"a")},ks.prototype.ta=function(u){dt(this.g,new Jv(u))},ks.prototype.sa=function(u){dt(this.g,new Zv)},ks.prototype.ra=function(){dt(this.g,"b")},Cu.prototype.createWebChannel=Cu.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,CA=function(){return new Cu},PA=function(){return Ee()},bA=Be,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,Sc=Oi,gu.COMPLETE="complete",xA=gu,Qo.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",it.prototype.listen=it.prototype.K,ba=Qo,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,AA=$e}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const Gw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new $g("@firebase/firestore");function ya(){return us.logLevel}function Q(t,...e){if(us.logLevel<=he.DEBUG){const n=e.map(ty);us.debug(`Firestore (${Lo}): ${t}`,...n)}}function Tr(t,...e){if(us.logLevel<=he.ERROR){const n=e.map(ty);us.error(`Firestore (${Lo}): ${t}`,...n)}}function So(t,...e){if(us.logLevel<=he.WARN){const n=e.map(ty);us.warn(`Firestore (${Lo}): ${t}`,...n)}}function ty(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+t;throw Tr(e),new Error(e)}function we(t,e){t||ne()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class KV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QV{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new RA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Ct(e)}}class YV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new JV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=eL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Io(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new nt(0,0))}static max(){return new re(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _l.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _l?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends _l{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const tL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends _l{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return tL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(xe.fromString(e))}static fromName(e){return new Z(xe.fromString(e).popFirst(5))}static empty(){return new Z(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new xe(e.slice()))}}function nL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ui(i,Z.empty(),e)}function rL(t){return new ui(t.readTime,t.key,-1)}class ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ui(re.min(),Z.empty(),-1)}static max(){return new ui(re.max(),Z.empty(),-1)}}function iL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==sL)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function aL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ny.oe=-1;function rd(t){return t==null}function uh(t){return t===0&&1/t==-1/0}function lL(t){return typeof t=="number"&&Number.isInteger(t)&&!uh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??mt.RED,this.left=i??mt.EMPTY,this.right=s??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new mt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qw(this.data.getIterator())}getIteratorFrom(e){return new Qw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class Qw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new vt(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DA("Invalid base64 string: "+s):s}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const uL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(t){if(we(!!t),typeof t=="string"){let e=0;const n=uL.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iy(t){const e=t.mapValue.fields.__previous_value__;return ry(e)?iy(e):e}function wl(t){const e=ci(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class El{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new El("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju={mapValue:{}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:dL(t)?9007199254740991:hL(t)?10:11:ne()}function Gn(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wl(t).isEqual(wl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ci(i.timestampValue),a=ci(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return cs(i.bytesValue).isEqual(cs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=We(i.doubleValue),a=We(s.doubleValue);return o===a?uh(o)===uh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Io(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kw(o)!==Kw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Gn(o[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function Tl(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function Ao(t,e){if(t===e)return 0;const n=hs(t),r=hs(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=We(s.integerValue||s.doubleValue),l=We(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Yw(t.timestampValue,e.timestampValue);case 4:return Yw(wl(t),wl(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=cs(s),l=cs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ge(a[c],l[c]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(We(s.latitude),We(o.latitude));return a!==0?a:ge(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=ge(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:Xw(g,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ju.mapValue&&o===Ju.mapValue)return 0;if(s===Ju.mapValue)return 1;if(o===Ju.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ge(l[d],h[d]);if(p!==0)return p;const g=Ao(a[l[d]],c[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Yw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=ci(t),r=ci(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function Xw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ao(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function xo(t){return im(t)}function im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ci(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=im(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${im(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function Jw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sm(t){return!!t&&"integerValue"in t}function sy(t){return!!t&&"arrayValue"in t}function Zw(t){return!!t&&"nullValue"in t}function e0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ic(t){return!!t&&"mapValue"in t}function hL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=za(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ic(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(n)}setAll(e){let n=gt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=za(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ic(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ic(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qt(za(this.value))}}function OA(t){const e=[];return vs(t.fields,(n,r)=>{const i=new gt([n]);if(Ic(r)){const s=OA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,re.min(),re.min(),re.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new kt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new kt(e,2,n,re.min(),re.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,re.min(),re.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.position=e,this.inclusive=n}}function t0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=Ao(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function n0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n="asc"){this.field=e,this.dir=n}}function fL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{}class Xe extends VA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mL(e,n,r):n==="array-contains"?new vL(e,r):n==="in"?new _L(e,r):n==="not-in"?new wL(e,r):n==="array-contains-any"?new EL(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gL(e,r):new yL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ao(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(Ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends VA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kn(e,n)}matches(e){return LA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LA(t){return t.op==="and"}function MA(t){return pL(t)&&LA(t)}function pL(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function om(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+xo(t.value);if(MA(t))return t.filters.map(e=>om(e)).join(",");{const e=t.filters.map(n=>om(n)).join(",");return`${t.op}(${e})`}}function jA(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&Gn(r.value,i.value)}(t,e):t instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jA(o,i.filters[a]),!0):!1}(t,e):void ne()}function FA(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(FA).join(" ,")+"}"}(t):"Filter"}class mL extends Xe{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class gL extends Xe{constructor(e,n){super(e,"in",n),this.keys=UA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yL extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=UA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class vL extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sy(n)&&Tl(n.arrayValue,this.value)}}class _L extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tl(this.value.arrayValue,n)}}class wL extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Tl(this.value.arrayValue,n)}}class EL extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function r0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new TL(t,e,n,r,i,s,o)}function oy(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>om(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xo(r)).join(",")),e.ue=n}return e.ue}function ay(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!n0(t.startAt,e.startAt)&&n0(t.endAt,e.endAt)}function am(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SL(t,e,n,r,i,s,o,a){return new Mo(t,e,n,r,i,s,o,a)}function id(t){return new Mo(t)}function i0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BA(t){return t.collectionGroup!==null}function Wa(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sl(s,r))}),n.has(gt.keyField().canonicalString())||e.ce.push(new Sl(gt.keyField(),r))}return e.ce}function Wn(t){const e=ie(t);return e.le||(e.le=IL(e,Wa(t))),e.le}function IL(t,e){if(t.limitType==="F")return r0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sl(i.field,s)});const n=t.endAt?new ch(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ch(t.startAt.position,t.startAt.inclusive):null;return r0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lm(t,e){const n=t.filters.concat([e]);return new Mo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function um(t,e,n){return new Mo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sd(t,e){return ay(Wn(t),Wn(e))&&t.limitType===e.limitType}function $A(t){return`${oy(Wn(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>FA(i)).join(", ")}]`),rd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xo(i)).join(",")),`Target(${r})`}(Wn(t))}; limitType=${t.limitType})`}function od(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=t0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Wa(r),i)||r.endAt&&!function(o,a,l){const c=t0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Wa(r),i))}(t,e)}function AL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zA(t){return(e,n)=>{let r=!1;for(const i of Wa(t)){const s=xL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function xL(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ao(l,c):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return NA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new Ue(Z.comparator);function Sr(){return bL}const WA=new Ue(Z.comparator);function Pa(...t){let e=WA;for(const n of t)e=e.insert(n.key,n);return e}function HA(t){let e=WA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ki(){return Ha()}function qA(){return Ha()}function Ha(){return new jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const PL=new Ue(Z.comparator),CL=new vt(Z.comparator);function ce(...t){let e=CL;for(const n of t)e=e.add(n);return e}const RL=new vt(ge);function kL(){return RL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function GA(t){return{integerValue:""+t}}function NL(t,e){return lL(e)?GA(e):ly(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function DL(t,e,n){return t instanceof hh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ry(s)&&(s=iy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Il?QA(t,e):t instanceof Al?YA(t,e):function(i,s){const o=KA(i,s),a=s0(o)+s0(i.Pe);return sm(o)&&sm(i.Pe)?GA(a):ly(i.serializer,a)}(t,e)}function OL(t,e,n){return t instanceof Il?QA(t,e):t instanceof Al?YA(t,e):n}function KA(t,e){return t instanceof dh?function(r){return sm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hh extends ad{}class Il extends ad{constructor(e){super(),this.elements=e}}function QA(t,e){const n=XA(e);for(const r of t.elements)n.some(i=>Gn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Al extends ad{constructor(e){super(),this.elements=e}}function YA(t,e){let n=XA(e);for(const r of t.elements)n=n.filter(i=>!Gn(i,r));return{arrayValue:{values:n}}}class dh extends ad{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function s0(t){return We(t.integerValue||t.doubleValue)}function XA(t){return sy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function VL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Il&&i instanceof Il||r instanceof Al&&i instanceof Al?Io(r.elements,i.elements,Gn):r instanceof dh&&i instanceof dh?Gn(r.Pe,i.Pe):r instanceof hh&&i instanceof hh}(t.transform,e.transform)}class LL{constructor(e,n){this.version=e,this.transformResults=n}}class Pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ld{}function JA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new uy(t.key,Pn.none()):new Ql(t.key,t.data,Pn.none());{const n=t.data,r=qt.empty();let i=new vt(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ti(t.key,r,new rn(i.toArray()),Pn.none())}}function ML(t,e,n){t instanceof Ql?function(i,s,o){const a=i.value.clone(),l=a0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(i,s,o){if(!Ac(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=a0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ZA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qa(t,e,n,r){return t instanceof Ql?function(s,o,a,l){if(!Ac(s.precondition,o))return a;const c=s.value.clone(),h=l0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(s,o,a,l){if(!Ac(s.precondition,o))return a;const c=l0(s.fieldTransforms,l,o),h=o.data;return h.setAll(ZA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ac(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KA(r.transform,i||null);s!=null&&(n===null&&(n=qt.empty()),n.set(r.field,s))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Io(r,i,(s,o)=>VL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ql extends ld{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ti extends ld{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function a0(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,OL(o,a,n[i]))}return r}function l0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,DL(s,o,e))}return r}class uy extends ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FL extends ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ML(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=JA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(n,r)=>o0(n,r))&&Io(this.baseMutations,e.baseMutations,(n,r)=>o0(n,r))}}class cy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return PL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,fe;function zL(t){switch(t){default:return ne();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function ex(t){if(t===void 0)return Tr("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ke.OK:return F.OK;case Ke.CANCELLED:return F.CANCELLED;case Ke.UNKNOWN:return F.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return F.INTERNAL;case Ke.UNAVAILABLE:return F.UNAVAILABLE;case Ke.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ke.NOT_FOUND:return F.NOT_FOUND;case Ke.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ke.ABORTED:return F.ABORTED;case Ke.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ke.DATA_LOSS:return F.DATA_LOSS;default:return ne()}}(fe=Ke||(Ke={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=new Ji([4294967295,4294967295],0);function u0(t){const e=WL().encode(t),n=new IA;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ji([n,r],0),new Ji([i,s],0)]}class hy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ji.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ji.fromNumber(r)));return i.compare(HL)===1&&(i=new Ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=u0(e),[r,i]=c0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=u0(e),[r,i]=c0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ud(re.min(),i,new Ue(ge),Sr(),ce())}}class Yl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class tx{constructor(e,n){this.targetId=e,this.me=n}}class nx{constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class h0{constructor(){this.fe=0,this.ge=f0(),this.pe=wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Yl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=f0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sr(),this.qe=d0(),this.Qe=new Ue(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(am(s))if(r===0){const o=new Z(s.path);this.Ue(n,o,kt.newNoDocument(o,re.min()))}else we(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=cs(r).toUint8Array()}catch(l){if(l instanceof DA)return So("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hy(o,i,s)}catch(l){return So(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&am(a.target)){const l=new Z(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,kt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ud(e,n,this.Qe,this.ke,r);return this.ke=Sr(),this.qe=d0(),this.Qe=new Ue(ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new h0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new h0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function d0(){return new Ue(Z.comparator)}function f0(){return new Ue(Z.comparator)}const GL={asc:"ASCENDING",desc:"DESCENDING"},KL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QL={and:"AND",or:"OR"};class YL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cm(t,e){return t.useProto3Json||rd(e)?e:{value:e}}function fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XL(t,e){return fh(t,e.toTimestamp())}function Hn(t){return we(!!t),re.fromTimestamp(function(n){const r=ci(n);return new nt(r.seconds,r.nanos)}(t))}function dy(t,e){return hm(t,e).canonicalString()}function hm(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ix(t){const e=xe.fromString(t);return we(ux(e)),e}function dm(t,e){return dy(t.databaseId,e.path)}function Cf(t,e){const n=ix(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(ox(n))}function sx(t,e){return dy(t.databaseId,e)}function JL(t){const e=ix(t);return e.length===4?xe.emptyPath():ox(e)}function fm(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ox(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function p0(t,e,n){return{name:dm(t,e),fields:n.value.mapValue.fields}}function ZL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(we(h===void 0||typeof h=="string"),wt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),wt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:ex(c.code);return new q(h,c.message||"")}(o);n=new nx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cf(t,r.document.name),s=Hn(r.document.updateTime),o=r.document.createTime?Hn(r.document.createTime):re.min(),a=new qt({mapValue:{fields:r.document.fields}}),l=kt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new xc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cf(t,r.document),s=r.readTime?Hn(r.readTime):re.min(),o=kt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cf(t,r.document),s=r.removedTargetIds||[];n=new xc([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new $L(i,s),a=r.targetId;n=new tx(a,o)}}return n}function e2(t,e){let n;if(e instanceof Ql)n={update:p0(t,e.key,e.value)};else if(e instanceof uy)n={delete:dm(t,e.key)};else if(e instanceof Ti)n={update:p0(t,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof FL))return ne();n={verify:dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof hh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Il)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:XL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function t2(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Hn(i.updateTime):Hn(s);return o.isEqual(re.min())&&(o=Hn(s)),new LL(o,i.transformResults||[])}(n,e))):[]}function n2(t,e){return{documents:[sx(t,e.path)]}}function r2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sx(t,i);const s=function(c){if(c.length!==0)return lx(kn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ls(p.field),direction:o2(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function i2(t){let e=JL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=ax(d);return p instanceof kn&&MA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(v){return new Sl(Ms(v.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,rd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new ch(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new ch(g,p)}(n.endAt)),SL(e,i,o,s,a,"F",l,c)}function s2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ax(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ms(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ms(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ms(n.unaryFilter.field);return Xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ms(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(Ms(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>ax(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function o2(t){return GL[t]}function a2(t){return KL[t]}function l2(t){return QL[t]}function Ls(t){return{fieldPath:t.canonicalString()}}function Ms(t){return gt.fromServerFormat(t.fieldPath)}function lx(t){return t instanceof Xe?function(n){if(n.op==="=="){if(e0(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NAN"}};if(Zw(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e0(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NAN"}};if(Zw(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(n.field),op:a2(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(i=>lx(i));return r.length===1?r[0]:{compositeFilter:{op:l2(n.op),filters:r}}}(t):ne()}function u2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ux(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,i,s=re.min(),o=re.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.ct=e}}function h2(t){const e=i2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.un=new f2}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ui.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class f2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vt(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bo(0)}static kn(){return new bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.changes=new jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&qa(r.mutation,i,rn.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Pa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Sr();const o=Ha(),a=function(){return Ha()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ti)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),qa(h.mutation,c,h.mutation.getFieldMask(),nt.now())):o.set(c.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new m2(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ha();let i=new Ue((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||rn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=qA();h.forEach(p=>{if(!s.has(p)){const g=JA(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Ki());let a=-1,l=s;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:HA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=Pa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Pa();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(d,p){return new Mo(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,kt.newInvalidDocument(h)))});let a=Pa();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&qa(h.mutation,c,rn.empty(),nt.now()),od(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:h2(i.bundledQuery),readTime:Hn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.overlays=new Ue(Z.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ki();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Ki(),s=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ki(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ki(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return U.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BL(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.Tr=new vt(at.Er),this.dr=new vt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new at(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Z(new xe([])),r=new at(n,e),i=new at(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new xe([])),r=new at(n,e),i=new at(n,e+1);let s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new at(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(at.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new at(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(ge);return n.forEach(i=>{const s=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new at(new Z(s),0);let a=new vt(ge);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new at(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new at(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.Mr=e,this.docs=function(){return new Ue(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Sr();const o=n.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iL(rL(h),r)<=0||(i.has(h.key)||od(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new T2(this)}getSize(e){return U.resolve(this.size)}}class T2 extends p2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.persistence=e,this.Nr=new jo(n=>oy(n),ay),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fy,this.targetCount=0,this.kr=bo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new bo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ny(0),this.Kr=!1,this.Kr=!0,this.$r=new _2,this.referenceDelegate=e(this),this.Ur=new S2(this),this.indexManager=new d2,this.remoteDocumentCache=function(i){return new E2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new c2(n),this.Gr=new y2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new w2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new A2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class A2 extends oL{constructor(e){super(),this.currentSequenceNumber=e}}class py{constructor(e){this.persistence=e,this.Jr=new fy,this.Yr=null}static Zr(e){return new py(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=Z.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new my(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yN()?8:aL(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new x2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ya()<=he.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(ya()<=he.DEBUG&&Q("QueryEngine","Query:",Vs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ya()<=he.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):U.resolve())}Yi(e,n){if(i0(n))return U.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=um(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,um(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return i0(n)||i.isEqual(re.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(ya()<=he.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vs(n)),this.rs(e,o,n,nL(i,-1)).next(a=>a))})}ts(e,n){let r=new vt(zA(e));return n.forEach((i,s)=>{od(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ya()<=he.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ui.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(ge),this._s=new jo(s=>oy(s),ay),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function C2(t,e,n,r){return new P2(t,e,n,r)}async function cx(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function R2(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=U.resolve();return p.forEach(v=>{g=g.next(()=>h.getEntry(l,v)).next(_=>{const I=c.docVersions.get(v);we(I!==null),_.version.compareTo(I)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),h.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hx(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function k2(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(wt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(_,I,T){return _.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=Sr(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(N2(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(re.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function N2(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Sr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function D2(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function O2(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function pm(t,e,n){const r=ie(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Kl(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function m0(t,e,n){const r=ie(t);let i=re.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ie(l),p=d._s.get(h);return p!==void 0?U.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,Wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:ce())).next(a=>(V2(r,AL(e),a),{documents:a,Ts:s})))}function V2(t,e,n){let r=t.us.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class g0{constructor(){this.activeTargetIds=kL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class L2{constructor(){this.so=new g0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu=null;function Rf(){return Zu===null?Zu=function(){return 268435456+Math.round(2147483648*Math.random())}():Zu++,"0x"+Zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class U2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Rf(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw So("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=j2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Rf();return new Promise((o,a)=>{const l=new AA;l.setWithCredentials(!0),l.listenOnce(xA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sc.NO_ERROR:const h=l.getResponseJson();Q(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Sc.TIMEOUT:Q(bt,`RPC '${e}' ${s} timed out`),a(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Sc.HTTP_ERROR:const d=l.getStatus();if(Q(bt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(I){const T=I.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(g.status);a(new q(v,g.message))}else a(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{Q(bt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(bt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Rf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CA(),a=PA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Q(bt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const v=new F2({Io:I=>{g?Q(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(Q(bt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Q(bt,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},To:()=>d.close()}),_=(I,T,w)=>{I.listen(T,S=>{try{w(S)}catch(k){setTimeout(()=>{throw k},0)}})};return _(d,ba.EventType.OPEN,()=>{g||(Q(bt,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),_(d,ba.EventType.CLOSE,()=>{g||(g=!0,Q(bt,`RPC '${e}' stream ${i} transport closed`),v.So())}),_(d,ba.EventType.ERROR,I=>{g||(g=!0,So(bt,`RPC '${e}' stream ${i} transport errored:`,I),v.So(new q(F.UNAVAILABLE,"The operation could not be completed")))}),_(d,ba.EventType.MESSAGE,I=>{var T;if(!g){const w=I.data[0];we(!!w);const S=w,k=S.error||((T=S[0])===null||T===void 0?void 0:T.error);if(k){Q(bt,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let M=function(b){const P=Ke[b];if(P!==void 0)return ex(P)}(V),x=k.message;M===void 0&&(M=F.INTERNAL,x="Unknown error status: "+V+" with message "+k.message),g=!0,v.So(new q(M,x)),d.close()}else Q(bt,`RPC '${e}' stream ${i} received:`,w),v.bo(w)}}),_(a,bA.STAT_EVENT,I=>{I.stat===rm.PROXY?Q(bt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===rm.NOPROXY&&Q(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){return new YL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B2 extends fx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ZL(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Hn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=fm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=am(l)?{documents:n2(s,l)}:{query:r2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rx(s,o.resumeToken);const c=cm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=fh(s,o.snapshotVersion.toTimestamp());const c=cm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=s2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=fm(this.serializer),n.removeTarget=e,this.a_(n)}}class $2 extends fx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=t2(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=fm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>e2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,hm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,hm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class W2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tr(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ie(l);c.L_.add(4),await Xl(c),c.q_.set("Unknown"),c.L_.delete(4),await hd(c)}(this))})}),this.q_=new W2(r,i)}}async function hd(t){if(_s(t))for(const e of t.B_)await e(!0)}async function Xl(t){for(const e of t.B_)await e(!1)}function px(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_y(n)?vy(n):Fo(n).r_()&&yy(n,e))}function gy(t,e){const n=ie(t),r=Fo(n);n.N_.delete(e),r.r_()&&mx(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function yy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(t).A_(e)}function mx(t,e){t.Q_.xe(e),Fo(t).R_(e)}function vy(t){t.Q_=new qL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fo(t).start(),t.q_.v_()}function _y(t){return _s(t)&&!Fo(t).n_()&&t.N_.size>0}function _s(t){return ie(t).L_.size===0}function gx(t){t.Q_=void 0}async function q2(t){t.q_.set("Online")}async function G2(t){t.N_.forEach((e,n)=>{yy(t,e)})}async function K2(t,e){gx(t),_y(t)?(t.q_.M_(e),vy(t)):t.q_.set("Unknown")}async function Q2(t,e,n){if(t.q_.set("Online"),e instanceof nx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ph(t,r)}else if(e instanceof xc?t.Q_.Ke(e):e instanceof tx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await hx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(wt.EMPTY_BYTE_STRING,h.snapshotVersion)),mx(s,l);const d=new Hr(h.target,l,c,h.sequenceNumber);yy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await ph(t,r)}}async function ph(t,e,n){if(!Kl(e))throw e;t.L_.add(1),await Xl(t),t.q_.set("Offline"),n||(n=()=>hx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hd(t)})}function yx(t,e){return e().catch(n=>ph(t,n,e))}async function dd(t){const e=ie(t),n=hi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Y2(e);)try{const i=await D2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,X2(e,i)}catch(i){await ph(e,i)}vx(e)&&_x(e)}function Y2(t){return _s(t)&&t.O_.length<10}function X2(t,e){t.O_.push(e);const n=hi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vx(t){return _s(t)&&!hi(t).n_()&&t.O_.length>0}function _x(t){hi(t).start()}async function J2(t){hi(t).p_()}async function Z2(t){const e=hi(t);for(const n of t.O_)e.m_(n.mutations)}async function eM(t,e,n){const r=t.O_.shift(),i=cy.from(r,e,n);await yx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await dd(t)}async function tM(t,e){e&&hi(t).V_&&await async function(r,i){if(function(o){return zL(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();hi(r).s_(),await yx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await dd(r)}}(t,e),vx(t)&&_x(t)}async function v0(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await Xl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hd(n)}async function nM(t,e){const n=ie(t);e?(n.L_.delete(2),await hd(n)):e||(n.L_.add(2),await Xl(n),n.q_.set("Unknown"))}function Fo(t){return t.K_||(t.K_=function(n,r,i){const s=ie(n);return s.w_(),new B2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:q2.bind(null,t),Ro:G2.bind(null,t),mo:K2.bind(null,t),d_:Q2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_y(t)?vy(t):t.q_.set("Unknown")):(await t.K_.stop(),gx(t))})),t.K_}function hi(t){return t.U_||(t.U_=function(n,r,i){const s=ie(n);return s.w_(),new $2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:J2.bind(null,t),mo:tM.bind(null,t),f_:Z2.bind(null,t),g_:eM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await dd(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new wy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(t,e){if(Tr("AsyncQueue",`${e}: ${t}`),Kl(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Pa(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.W_=new Ue(Z.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Po{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Po(e,n,po.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class iM{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=w0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}}function w0(){return new jo(t=>$A(t),sd)}async function Ty(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new rM,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ey(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Iy(n)}async function Sy(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sM(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Iy(n)}function oM(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Iy(t){t.Y_.forEach(e=>{e.next()})}var mm,E0;(E0=mm||(mm={})).ea="default",E0.Cache="cache";class Ay{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.key=e}}class Ex{constructor(e){this.key=e}}class aM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=zA(e),this.Ra=new po(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=od(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let I=!1;p&&g?p.data.isEqual(g.data)?v!==_&&(r.track({type:3,doc:g}),I=!0):this.ga(p,g)||(r.track({type:2,doc:g}),I=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),I=!0):p&&!g&&(r.track({type:1,doc:p}),I=!0,(l||c)&&(a=!0)),I&&(g?(o=o.add(g),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,v){const _=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return _(g)-_(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Po(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ex(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uM{constructor(e){this.key=e,this.va=!1}}class cM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jo(a=>$A(a),sd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(Z.comparator),this.Na=new Map,this.La=new fy,this.Ba={},this.ka=new Map,this.qa=bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hM(t,e,n=!0){const r=bx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Tx(r,e,n,!0),i}async function dM(t,e){const n=bx(t);await Tx(n,e,!0,!1)}async function Tx(t,e,n,r){const i=await O2(t.localStore,Wn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await fM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&px(t.remoteStore,i),a}async function fM(t,e,n,r,i){t.Ka=(d,p,g)=>async function(_,I,T,w){let S=I.view.ma(T);S.ns&&(S=await m0(_.localStore,I.query,!1).then(({documents:x})=>I.view.ma(x,S)));const k=w&&w.targetChanges.get(I.targetId),V=w&&w.targetMismatches.get(I.targetId)!=null,M=I.view.applyChanges(S,_.isPrimaryClient,k,V);return S0(_,I.targetId,M.wa),M.snapshot}(t,d,p,g);const s=await m0(t.localStore,e,!0),o=new aM(e,s.Ts),a=o.ma(s.documents),l=Yl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);S0(t,n,c.wa);const h=new lM(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function pM(t,e,n){const r=ie(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!sd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gy(r.remoteStore,i.targetId),gm(r,i.targetId)}).catch(Gl)):(gm(r,i.targetId),await pm(r.localStore,i.targetId,!0))}async function mM(t,e){const n=ie(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gy(n.remoteStore,r.targetId))}async function gM(t,e,n){const r=SM(t);try{const i=await function(o,a){const l=ie(o),c=nt.now(),h=a.reduce((g,v)=>g.add(v.key),ce());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Sr(),_=ce();return l.cs.getEntries(g,h).next(I=>{v=I,v.forEach((T,w)=>{w.isValidDocument()||(_=_.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(I=>{d=I;const T=[];for(const w of a){const S=jL(w,d.get(w.key).overlayedDocument);S!=null&&T.push(new Ti(w.key,S,OA(S.value.mapValue),Pn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,T,a)}).next(I=>{p=I;const T=I.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(g,I.batchId,T)})}).then(()=>({batchId:p.batchId,changes:HA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ue(ge)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Jl(r,i.changes),await dd(r.remoteStore)}catch(i){const s=Ey(i,"Failed to persist write");n.reject(s)}}async function Sx(t,e){const n=ie(t);try{const r=await k2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),await Jl(n,r,e)}catch(r){await Gl(r)}}function T0(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&Iy(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yM(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ue(Z.comparator);o=o.insert(s,kt.newNoDocument(s,re.min()));const a=ce().add(s),l=new ud(re.min(),new Map,new Ue(ge),o,a);await Sx(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),xy(r)}else await pm(r.localStore,e,!1).then(()=>gm(r,e,n)).catch(Gl)}async function vM(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await R2(n.localStore,e);Ax(n,r,null),Ix(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jl(n,i)}catch(i){await Gl(i)}}async function _M(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(we(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);Ax(r,e,n),Ix(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jl(r,i)}catch(i){await Gl(i)}}function Ix(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ax(t,e,n){const r=ie(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function gm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||xx(t,r)})}function xx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xy(t))}function S0(t,e,n){for(const r of n)r instanceof wx?(t.La.addReference(r.key,e),wM(t,r)):r instanceof Ex?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||xx(t,r.key)):ne()}function wM(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),xy(t))}function xy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new uM(n)),t.Oa=t.Oa.insert(n,r),px(t.remoteStore,new Hr(Wn(id(n.path)),r,"TargetPurposeLimboResolution",ny.oe))}}async function Jl(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=my.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,p=>U.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>U.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Kl(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),v=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(p,_)}}}(r.localStore,s))}async function EM(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await cx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jl(n,r.hs)}}function TM(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function bx(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yM.bind(null,e),e.Ca.d_=sM.bind(null,e.eventManager),e.Ca.$a=oM.bind(null,e.eventManager),e}function SM(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_M.bind(null,e),e}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return C2(this.persistence,new b2,e.initialUser,this.serializer)}Ga(e){return new I2(py.Zr,this.serializer)}Wa(e){return new L2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class ym{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EM.bind(null,this.syncEngine),await nM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iM}()}createDatastore(e){const n=cd(e.databaseInfo.databaseId),r=function(s){return new U2(s)}(e.databaseInfo);return function(s,o,a,l){return new z2(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new H2(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>T0(this.syncEngine,n,0),function(){return y0.D()?new y0:new M2}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new cM(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Xl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ym.provider={build:()=>new ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=kA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ey(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nf(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AM(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>v0(e.remoteStore,i)),t._onlineComponents=e}async function AM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await Nf(t,new mh)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Nf(t,new mh);return t._offlineComponents}async function Px(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new ym))),t._onlineComponents}function xM(t){return Px(t).then(e=>e.syncEngine)}async function gh(t){const e=await Px(t),n=e.eventManager;return n.onListen=hM.bind(null,e.syncEngine),n.onUnlisten=pM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mM.bind(null,e.syncEngine),n}function bM(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new by({next:p=>{h.Za(),o.enqueueAndForget(()=>Sy(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ay(id(a.path),h,{includeMetadataChanges:!0,_a:!0});return Ty(s,d)}(await gh(t),t.asyncQueue,e,n,r)),r.promise}function PM(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new by({next:p=>{h.Za(),o.enqueueAndForget(()=>Sy(s,d)),p.fromCache&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ay(a,h,{includeMetadataChanges:!0,_a:!0});return Ty(s,d)}(await gh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CM(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x0(t){if(!Z.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function b0(t){if(Z.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fd(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GV;switch(r.type){case"firstParty":return new XV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=A0.get(n);r&&(Q("ComponentProvider","Removing Datastore"),A0.delete(n),r.terminate())}(this),Promise.resolve()}}function RM(t,e,n,r={}){var i;const s=(t=gn(t,pd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ct.MOCK_USER;else{a=jI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ct(c)}t._authCredentials=new KV(new RA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class ii extends Si{constructor(e,n,r){super(e,n,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Z(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function ve(t,e,...n){if(t=Ze(t),Rx("collection","path",e),t instanceof pd){const r=xe.fromString(e,...n);return b0(r),new ii(t,null,r)}{if(!(t instanceof Ut||t instanceof ii))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return b0(r),new ii(t.firestore,null,r)}}function Ir(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=kA.newId()),Rx("doc","path",e),t instanceof pd){const r=xe.fromString(e,...n);return x0(r),new Ut(t,null,new Z(r))}{if(!(t instanceof Ut||t instanceof ii))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return x0(r),new Ut(t.firestore,t instanceof ii?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dx(this,"async_queue_retry"),this.Vu=()=>{const r=kf();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=kf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=kf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kl(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Tr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=wy.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function R0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class di extends pd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new C0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C0(e),this._firestoreClient=void 0,await e}}}function kM(t,e){const n=typeof t=="object"?t:Hg(),r=typeof t=="string"?t:"(default)",i=Jh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=VI("firestore");s&&RM(i,...s)}return i}function md(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NM(t),t._firestoreClient}function NM(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new cL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Cx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new IM(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(wt.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Co(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^__.*__$/;class OM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class kx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class ky{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ky(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Nx(this.Cu)&&DM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class VM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cd(e)}Qu(e,n,r,i=!1){return new ky({Cu:e,methodName:n,qu:r,path:gt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ny(t){const e=t._freezeSettings(),n=cd(t._databaseId);return new VM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LM(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Dy("Data must be an object, but it was:",o,r);const a=Dx(r,o);let l,c;if(s.merge)l=new rn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=vm(e,d,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Vx(h,p)||h.push(p)}l=new rn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new OM(new qt(a),l,c)}class yd extends Py{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}function MM(t,e,n,r){const i=t.Qu(1,e,n);Dy("Data must be an object, but it was:",i,r);const s=[],o=qt.empty();vs(r,(l,c)=>{const h=Oy(e,l,n);c=Ze(c);const d=i.Nu(h);if(c instanceof yd)s.push(h);else{const p=Zl(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new rn(s);return new kx(o,a,i.fieldTransforms)}function jM(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[vm(e,r,n)],l=[i];if(s.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(vm(e,s[p])),l.push(s[p+1]);const c=[],h=qt.empty();for(let p=a.length-1;p>=0;--p)if(!Vx(c,a[p])){const g=a[p];let v=l[p];v=Ze(v);const _=o.Nu(g);if(v instanceof yd)c.push(g);else{const I=Zl(v,_);I!=null&&(c.push(g),h.set(g,I))}}const d=new rn(c);return new kx(h,d,o.fieldTransforms)}function FM(t,e,n,r=!1){return Zl(n,t.Qu(r?4:3,e))}function Zl(t,e){if(Ox(t=Ze(t)))return Dy("Unsupported field value:",e,t),Dx(t,e);if(t instanceof Py)return function(r,i){if(!Nx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Zl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:fh(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fh(i.serializer,s)}}if(r instanceof Cy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Co)return{bytesValue:rx(i.serializer,r._byteString)};if(r instanceof Ut){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ry)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ly(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${fd(r)}`)}(t,e)}function Dx(t,e){const n={};return NA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,(r,i)=>{const s=Zl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Ox(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Cy||t instanceof Co||t instanceof Ut||t instanceof Py||t instanceof Ry)}function Dy(t,e,n){if(!Ox(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=fd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function vm(t,e,n){if((e=Ze(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Oy(t,e);throw yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const UM=new RegExp("[~\\*/\\[\\]]");function Oy(t,e,n){if(e.search(UM)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(F.INVALID_ARGUMENT,a+t+l)}function Vx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BM extends Lx{data(){return super.data()}}function vd(t,e){return typeof e=="string"?Oy(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class jx extends Vy{}function jt(t,e,...n){let r=[];e instanceof Vy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ly).length,a=s.filter(l=>l instanceof _d).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class _d extends jx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _d(e,n,r)}_apply(e){const n=this._parse(e);return Fx(e._query,n),new Si(e.firestore,e.converter,lm(e._query,n))}_parse(e){const n=Ny(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){N0(d,h);const g=[];for(const v of d)g.push(k0(l,s,v));p={arrayValue:{values:g}}}else p=k0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||N0(d,h),p=FM(a,o,d,h==="in"||h==="not-in");return Xe.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ut(t,e,n){const r=e,i=vd("where",t);return _d._create(i,r,n)}class Ly extends Vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ly(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Fx(o,l),o=lm(o,l)}(e._query,n),new Si(e.firestore,e.converter,lm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class My extends jx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new My(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(s,o)}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Mo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function $M(t,e="asc"){const n=e,r=vd("orderBy",t);return My._create(r,n)}function k0(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BA(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!Z.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jw(t,new Z(r))}if(n instanceof Ut)return Jw(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(n)}.`)}function N0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fx(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zM{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>We(o.doubleValue));return new Ry(s)}convertGeoPoint(e){return new Cy(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=iy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wl(e));default:return null}}convertTimestamp(e){const n=ci(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);we(ux(r));const i=new El(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||Tr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ux extends Lx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bc extends Ux{data(e={}){return super.data(e)}}class Bx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ra(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bc(this._firestore,this._userDataWriter,r.key,r,new Ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ra(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ra(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:HM(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t){t=gn(t,Ut);const e=gn(t.firestore,di);return bM(md(e),t._key).then(n=>Wx(e,t,n))}class jy extends zM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function $x(t){t=gn(t,Si);const e=gn(t.firestore,di),n=md(e),r=new jy(e);return Mx(t._query),PM(n,t._query).then(i=>new Bx(e,r,t,i))}function zx(t,e,n,...r){t=gn(t,Ut);const i=gn(t.firestore,di),s=Ny(i);let o;return o=typeof(e=Ze(e))=="string"||e instanceof gd?jM(s,"updateDoc",t._key,e,n,r):MM(s,"updateDoc",t._key,e),Fy(i,[o.toMutation(t._key,Pn.exists(!0))])}function eu(t){return Fy(gn(t.firestore,di),[new uy(t._key,Pn.none())])}function wd(t,e){const n=gn(t.firestore,di),r=Ir(t),i=WM(t.converter,e);return Fy(n,[LM(Ny(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}function Ne(t,...e){var n,r,i;t=Ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||R0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(R0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof Ut)c=gn(t.firestore,di),h=id(t._key.path),l={next:d=>{e[o]&&e[o](Wx(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=gn(t,Si);c=gn(d.firestore,di),h=d._query;const p=new jy(c);l={next:g=>{e[o]&&e[o](new Bx(c,p,d,g))},error:e[o+1],complete:e[o+2]},Mx(t._query)}return function(p,g,v,_){const I=new by(_),T=new Ay(g,I,v);return p.asyncQueue.enqueueAndForget(async()=>Ty(await gh(p),T)),()=>{I.Za(),p.asyncQueue.enqueueAndForget(async()=>Sy(await gh(p),T))}}(md(c),h,a,l)}function Fy(t,e){return function(r,i){const s=new fr;return r.asyncQueue.enqueueAndForget(async()=>gM(await xM(r),i,s)),s.promise}(md(t),e)}function Wx(t,e,n){const r=n.docs.get(e._key),i=new jy(t);return new Ux(t,i,e._key,r,new Ra(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Lo=i})(gs),os(new li("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new di(new QV(r.getProvider("auth-internal")),new ZV(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Bn(Gw,"4.7.3",e),Bn(Gw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="firebasestorage.googleapis.com",GM="storageBucket",KM=2*60*1e3,QM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends Qn{constructor(e,n,r=0){super(Df(e),`Firebase Storage: ${n} (${Df(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Df(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function Df(t){return"storage/"+t}function YM(){const t="An unknown error occurred, please check the error payload for server response.";return new Yn(Kn.UNKNOWN,t)}function XM(){return new Yn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JM(){return new Yn(Kn.CANCELED,"User canceled the upload/download.")}function ZM(t){return new Yn(Kn.INVALID_URL,"Invalid URL '"+t+"'.")}function ej(t){return new Yn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function D0(t){return new Yn(Kn.INVALID_ARGUMENT,t)}function qx(){return new Yn(Kn.APP_DELETED,"The Firebase app was deleted.")}function tj(t){return new Yn(Kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=An.makeFromUrl(e,n)}catch{return new An(e,"")}if(r.path==="")return r;throw ej(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),v={bucket:1,path:3},_=n===Hx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",T=new RegExp(`^https?://${_}/${i}/${I}`,"i"),S=[{regex:a,indices:l,postModify:s},{regex:g,indices:v,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<S.length;k++){const V=S[k],M=V.regex.exec(e);if(M){const x=M[V.indices.bucket];let E=M[V.indices.path];E||(E=""),r=new An(x,E),V.postModify(r);break}}if(r==null)throw ZM(e);return r}}class nj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...I){c||(c=!0,e.apply(null,I))}function d(I){i=setTimeout(()=>{i=null,t(g,l())},I)}function p(){s&&clearTimeout(s)}function g(I,...T){if(c){p();return}if(I){p(),h.call(null,I,...T);return}if(l()||o){p(),h.call(null,I,...T);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,d(S)}let v=!1;function _(I){v||(v=!0,p(),!c&&(i!==null?(I||(a=2),clearTimeout(i),d(0)):I||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function ij(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){return t!==void 0}function O0(t,e,n,r){if(r<e)throw D0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw D0(`Invalid value for '${t}'. Expected ${n} or less.`)}function oj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var vh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vh||(vh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,r,i,s,o,a,l,c,h,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ec(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===vh.NO_ERROR,l=s.getStatus();if(!a||aj(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===vh.ABORT;r(!1,new ec(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ec(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());sj(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=YM();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?qx():JM();o(l)}else{const l=XM();o(l)}};this.canceled_?n(!1,new ec(!1,null,!0)):this.backoffId_=rj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ij(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ec{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function uj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function fj(t,e,n,r,i,s,o=!0){const a=oj(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return hj(c,e),uj(c,n),cj(c,s),dj(c,r),new lj(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this._service=e,n instanceof An?this._location=n:this._location=An.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _h(e,n)}get root(){const e=new An(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mj(this._location.path)}get storage(){return this._service}get parent(){const e=pj(this._location.path);if(e===null)return null;const n=new An(this._location.bucket,e);return new _h(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tj(e)}}function V0(t,e){const n=e==null?void 0:e[GM];return n==null?null:An.makeFromBucketSpec(n,t)}function gj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:jI(i,t.app.options.projectId))}class yj{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Hx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KM,this._maxUploadRetryTime=QM,this._requests=new Set,i!=null?this._bucket=An.makeFromBucketSpec(i,this._host):this._bucket=V0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=An.makeFromBucketSpec(this._url,e):this._bucket=V0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _h(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new nj(qx());{const o=fj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const L0="@firebase/storage",M0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="storage";function vj(t=Hg(),e){t=Ze(t);const r=Jh(t,Gx).getImmediate({identifier:e}),i=VI("storage");return i&&_j(r,...i),r}function _j(t,e,n,r={}){gj(t,e,n,r)}function wj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new yj(n,r,i,e,gs)}function Ej(){os(new li(Gx,wj,"PUBLIC").setMultipleInstances(!0)),Bn(L0,M0,""),Bn(L0,M0,"esm2017")}Ej();const Kx={apiKey:"AIzaSyDNDrRYhZ8Z5rCeSg7wC8grJUCiudY2wN0",authDomain:"barberia-turnos-65776.firebaseapp.com",projectId:"barberia-turnos-65776",storageBucket:"barberia-turnos-65776.appspot.com",messagingSenderId:"136280564495",appId:"1:136280564495:web:f65016f9f0bac316ec947a"},Uy=Wg(Kx),fi=SA(Uy),le=kM(Uy);vj(Uy);const Tj=["super@hotmail.com"];function Sj(){const[t,e]=R.useState(""),[n,r]=R.useState(""),i=Bg(),s=async o=>{o.preventDefault();try{await RO(fi,t,n);let a="/";if(Tj.includes(t.toLowerCase()))a="/admin";else{const l=jt(ve(le,"barberos"),ut("email","==",t));(await $x(l)).empty||(a="/barbero")}i(a)}catch{alert("Error de autenticación")}};return y.jsxs("form",{onSubmit:s,className:"flex flex-col space-y-4",children:[y.jsx("input",{className:"input input-bordered w-full",type:"email",value:t,onChange:o=>e(o.target.value),placeholder:"Email"}),y.jsx("input",{className:"input input-bordered w-full",type:"password",value:n,onChange:o=>r(o.target.value),placeholder:"Contraseña"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Ingresar"})]})}const Qx="/barberia-turnos/assets/barber-CVio9kJA.svg";function Ij(){return y.jsx("div",{className:"hero min-h-screen bg-base-200",children:y.jsxs("div",{className:"hero-content flex-col w-full max-w-md",children:[y.jsx("img",{src:Qx,alt:"Logo Barbería",className:"w-32 mb-4 logo-main"}),y.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Bienvenido a la Barbería"}),y.jsx("div",{className:"card w-full shadow-2xl bg-base-100",children:y.jsx("div",{className:"card-body",children:y.jsx(Sj,{})})}),y.jsx("a",{href:"#/agendar",className:"text-blue-600 hover:underline mt-4",children:"Agendar un turno sin registrarse"})]})})}const Yx=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ed=R.createContext({}),By=R.createContext(null),Td=typeof document<"u",Aj=Td?R.useLayoutEffect:R.useEffect,Xx=R.createContext({strict:!1}),$y=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),xj="framerAppearId",Jx="data-"+$y(xj);function bj(t,e,n,r){const{visualElement:i}=R.useContext(Ed),s=R.useContext(Xx),o=R.useContext(By),a=R.useContext(Yx).reducedMotion,l=R.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;R.useInsertionEffect(()=>{c&&c.update(n,o)});const h=R.useRef(!!(n[Jx]&&!window.HandoffComplete));return Aj(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),R.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function Xs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Pj(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Xs(n)&&(n.current=r))},[e])}function xl(t){return typeof t=="string"||Array.isArray(t)}function Sd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const zy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wy=["initial",...zy];function Id(t){return Sd(t.animate)||Wy.some(e=>xl(t[e]))}function Zx(t){return!!(Id(t)||t.variants)}function Cj(t,e){if(Id(t)){const{initial:n,animate:r}=t;return{initial:n===!1||xl(n)?n:void 0,animate:xl(r)?r:void 0}}return t.inherit!==!1?e:{}}function Rj(t){const{initial:e,animate:n}=Cj(t,R.useContext(Ed));return R.useMemo(()=>({initial:e,animate:n}),[j0(e),j0(n)])}function j0(t){return Array.isArray(t)?t.join(" "):t}const F0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bl={};for(const t in F0)bl[t]={isEnabled:e=>F0[t].some(n=>!!e[n])};function kj(t){for(const e in t)bl[e]={...bl[e],...t[e]}}const eb=R.createContext({}),tb=R.createContext({}),Nj=Symbol.for("motionComponentSymbol");function Dj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&kj(t);function s(a,l){let c;const h={...R.useContext(Yx),...a,layoutId:Oj(a)},{isStatic:d}=h,p=Rj(a),g=r(a,d);if(!d&&Td){p.visualElement=bj(i,g,h,e);const v=R.useContext(tb),_=R.useContext(Xx).strict;p.visualElement&&(c=p.visualElement.loadFeatures(h,_,t,v))}return R.createElement(Ed.Provider,{value:p},c&&p.visualElement?R.createElement(c,{visualElement:p.visualElement,...h}):null,n(i,a,Pj(g,p.visualElement,l),g,d,p.visualElement))}const o=R.forwardRef(s);return o[Nj]=i,o}function Oj({layoutId:t}){const e=R.useContext(eb).id;return e&&t!==void 0?e+"-"+t:t}function Vj(t){function e(r,i={}){return Dj(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const Lj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hy(t){return typeof t!="string"||t.includes("-")?!1:!!(Lj.indexOf(t)>-1||/[A-Z]/.test(t))}const wh={};function Mj(t){Object.assign(wh,t)}const tu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ws=new Set(tu);function nb(t,{layout:e,layoutId:n}){return ws.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wh[t]||t==="opacity")}const Xt=t=>!!(t&&t.getVelocity),jj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fj=tu.length;function Uj(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<Fj;o++){const a=tu[o];if(t[a]!==void 0){const l=jj[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const rb=t=>e=>typeof e=="string"&&e.startsWith(t),ib=rb("--"),_m=rb("var(--"),Bj=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,$j=(t,e)=>e&&typeof t=="number"?e.transform(t):t,pi=(t,e,n)=>Math.min(Math.max(n,t),e),Es={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ga={...Es,transform:t=>pi(0,1,t)},tc={...Es,default:1},Ka=t=>Math.round(t*1e5)/1e5,Ad=/(-)?([\d]*\.?[\d])+/g,sb=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,zj=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function nu(t){return typeof t=="string"}const ru=t=>({test:e=>nu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nr=ru("deg"),qn=ru("%"),ee=ru("px"),Wj=ru("vh"),Hj=ru("vw"),U0={...qn,parse:t=>qn.parse(t)/100,transform:t=>qn.transform(t*100)},B0={...Es,transform:Math.round},ob={borderWidth:ee,borderTopWidth:ee,borderRightWidth:ee,borderBottomWidth:ee,borderLeftWidth:ee,borderRadius:ee,radius:ee,borderTopLeftRadius:ee,borderTopRightRadius:ee,borderBottomRightRadius:ee,borderBottomLeftRadius:ee,width:ee,maxWidth:ee,height:ee,maxHeight:ee,size:ee,top:ee,right:ee,bottom:ee,left:ee,padding:ee,paddingTop:ee,paddingRight:ee,paddingBottom:ee,paddingLeft:ee,margin:ee,marginTop:ee,marginRight:ee,marginBottom:ee,marginLeft:ee,rotate:Nr,rotateX:Nr,rotateY:Nr,rotateZ:Nr,scale:tc,scaleX:tc,scaleY:tc,scaleZ:tc,skew:Nr,skewX:Nr,skewY:Nr,distance:ee,translateX:ee,translateY:ee,translateZ:ee,x:ee,y:ee,z:ee,perspective:ee,transformPerspective:ee,opacity:Ga,originX:U0,originY:U0,originZ:ee,zIndex:B0,fillOpacity:Ga,strokeOpacity:Ga,numOctaves:B0};function qy(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const d in e){const p=e[d];if(ib(d)){s[d]=p;continue}const g=ob[d],v=$j(p,g);if(ws.has(d)){if(l=!0,o[d]=v,!h)continue;p!==(g.default||0)&&(h=!1)}else d.startsWith("origin")?(c=!0,a[d]=v):i[d]=v}if(e.transform||(l||r?i.transform=Uj(t.transform,n,h,r):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:p="50%",originZ:g=0}=a;i.transformOrigin=`${d} ${p} ${g}`}}const Gy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ab(t,e,n){for(const r in e)!Xt(e[r])&&!nb(r,n)&&(t[r]=e[r])}function qj({transformTemplate:t},e,n){return R.useMemo(()=>{const r=Gy();return qy(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function Gj(t,e,n){const r=t.style||{},i={};return ab(i,r,t),Object.assign(i,qj(t,e,n)),t.transformValues?t.transformValues(i):i}function Kj(t,e,n){const r={},i=Gj(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const Qj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Eh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Qj.has(t)}let lb=t=>!Eh(t);function Yj(t){t&&(lb=e=>e.startsWith("on")?!Eh(e):t(e))}try{Yj(require("@emotion/is-prop-valid").default)}catch{}function Xj(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(lb(i)||n===!0&&Eh(i)||!e&&!Eh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function $0(t,e,n){return typeof t=="string"?t:ee.transform(e+n*t)}function Jj(t,e,n){const r=$0(e,t.x,t.width),i=$0(n,t.y,t.height);return`${r} ${i}`}const Zj={offset:"stroke-dashoffset",array:"stroke-dasharray"},eF={offset:"strokeDashoffset",array:"strokeDasharray"};function tF(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Zj:eF;t[s.offset]=ee.transform(-r);const o=ee.transform(e),a=ee.transform(n);t[s.array]=`${o} ${a}`}function Ky(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d,p){if(qy(t,c,h,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v,dimensions:_}=t;g.transform&&(_&&(v.transform=g.transform),delete g.transform),_&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=Jj(_,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&tF(g,o,a,l,!1)}const ub=()=>({...Gy(),attrs:{}}),Qy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function nF(t,e,n,r){const i=R.useMemo(()=>{const s=ub();return Ky(s,e,{enableHardwareAcceleration:!1},Qy(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};ab(s,t.style,t),i.style={...s,...i.style}}return i}function rF(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Hy(n)?nF:Kj)(r,s,o,n),h={...Xj(r,typeof n=="string",t),...l,ref:i},{children:d}=r,p=R.useMemo(()=>Xt(d)?d.get():d,[d]);return R.createElement(n,{...h,children:p})}}function cb(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const hb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function db(t,e,n,r){cb(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(hb.has(i)?i:$y(i),e.attrs[i])}function Yy(t,e){const{style:n}=t,r={};for(const i in n)(Xt(n[i])||e.style&&Xt(e.style[i])||nb(i,t))&&(r[i]=n[i]);return r}function fb(t,e){const n=Yy(t,e);for(const r in t)if(Xt(t[r])||Xt(e[r])){const i=tu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Xy(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function iF(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const Th=t=>Array.isArray(t),sF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),oF=t=>Th(t)?t[t.length-1]||0:t;function Pc(t){const e=Xt(t)?t.get():t;return sF(e)?e.toValue():e}function aF({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:lF(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const pb=t=>(e,n)=>{const r=R.useContext(Ed),i=R.useContext(By),s=()=>aF(t,e,r,i);return n?s():iF(s)};function lF(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Pc(s[p]);let{initial:o,animate:a}=t;const l=Id(t),c=Zx(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Sd(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const v=Xy(t,g);if(!v)return;const{transitionEnd:_,transition:I,...T}=v;for(const w in T){let S=T[w];if(Array.isArray(S)){const k=h?S.length-1:0;S=S[k]}S!==null&&(i[w]=S)}for(const w in _)i[w]=_[w]}),i}const qe=t=>t;class z0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function uF(t){let e=new z0,n=new z0,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const d=h&&i,p=d?e:n;return c&&o.add(l),p.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const h=e.order[c];h(l),o.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const nc=["prepare","read","update","preRender","render","postRender"],cF=40;function hF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=nc.reduce((d,p)=>(d[p]=uF(()=>n=!0),d),{}),o=d=>s[d].process(i),a=()=>{const d=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,cF),1),i.timestamp=d,i.isProcessing=!0,nc.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:nc.reduce((d,p)=>{const g=s[p];return d[p]=(v,_=!1,I=!1)=>(n||l(),g.schedule(v,_,I)),d},{}),cancel:d=>nc.forEach(p=>s[p].cancel(d)),state:i,steps:s}}const{schedule:Ce,cancel:Ar,state:Pt,steps:Of}=hF(typeof requestAnimationFrame<"u"?requestAnimationFrame:qe,!0),dF={useVisualState:pb({scrapeMotionValuesFromProps:fb,createRenderState:ub,onMount:(t,e,{renderState:n,latestValues:r})=>{Ce.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ce.render(()=>{Ky(n,r,{enableHardwareAcceleration:!1},Qy(e.tagName),t.transformTemplate),db(e,n)})}})},fF={useVisualState:pb({scrapeMotionValuesFromProps:Yy,createRenderState:Gy})};function pF(t,{forwardMotionProps:e=!1},n,r){return{...Hy(t)?dF:fF,preloadedFeatures:n,useRender:rF(e),createVisualElement:r,Component:t}}function cr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const mb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function xd(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const mF=t=>e=>mb(e)&&t(e,xd(e));function pr(t,e,n,r){return cr(t,e,mF(n),r)}const gF=(t,e)=>n=>e(t(n)),si=(...t)=>t.reduce(gF);function gb(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const W0=gb("dragHorizontal"),H0=gb("dragVertical");function yb(t){let e=!1;if(t==="y")e=H0();else if(t==="x")e=W0();else{const n=W0(),r=H0();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function vb(){const t=yb(!0);return t?(t(),!1):!0}class Ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}function q0(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||vb())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ce.update(()=>a[r](s,o))};return pr(t.current,n,i,{passive:!t.getProps()[r]})}class yF extends Ii{mount(){this.unmount=si(q0(this.node,!0),q0(this.node,!1))}unmount(){}}class vF extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=si(cr(this.node.current,"focus",()=>this.onFocus()),cr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _b=(t,e)=>e?t===e?!0:_b(t,e.parentElement):!1;function Vf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,xd(n))}class _F extends Ii{constructor(){super(...arguments),this.removeStartListeners=qe,this.removeEndListeners=qe,this.removeAccessibleListeners=qe,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=pr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:d}=this.node.getProps();Ce.update(()=>{!d&&!_b(this.node.current,a.target)?h&&h(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=pr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=si(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Vf("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&Ce.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=cr(this.node.current,"keyup",o),Vf("down",(a,l)=>{this.startPress(a,l)})},n=cr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Vf("cancel",(s,o)=>this.cancelPress(s,o))},i=cr(this.node.current,"blur",r);this.removeAccessibleListeners=si(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ce.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vb()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ce.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=pr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=cr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=si(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const wm=new WeakMap,Lf=new WeakMap,wF=t=>{const e=wm.get(t.target);e&&e(t)},EF=t=>{t.forEach(wF)};function TF({root:t,...e}){const n=t||document;Lf.has(n)||Lf.set(n,{});const r=Lf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(EF,{root:t,...e})),r[i]}function SF(t,e,n){const r=TF(e);return wm.set(t,n),r.observe(t),()=>{wm.delete(t),r.unobserve(t)}}const IF={some:0,all:1};class AF extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:IF[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(l)};return SF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(xF(e,n))&&this.startObserver()}unmount(){}}function xF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bF={inView:{Feature:AF},tap:{Feature:_F},focus:{Feature:vF},hover:{Feature:yF}};function wb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function PF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function CF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function bd(t,e,n){const r=t.getProps();return Xy(r,e,n!==void 0?n:r.custom,PF(t),CF(t))}let Jy=qe;const Zi=t=>t*1e3,mr=t=>t/1e3,RF={current:!1},Eb=t=>Array.isArray(t)&&typeof t[0]=="number";function Tb(t){return!!(!t||typeof t=="string"&&Sb[t]||Eb(t)||Array.isArray(t)&&t.every(Tb))}const ka=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Sb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ka([0,.65,.55,1]),circOut:ka([.55,0,1,.45]),backIn:ka([.31,.01,.66,-.59]),backOut:ka([.33,1.53,.69,.99])};function Ib(t){if(t)return Eb(t)?ka(t):Array.isArray(t)?t.map(Ib):Sb[t]}function kF(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=Ib(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function NF(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Ab=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,DF=1e-7,OF=12;function VF(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Ab(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>DF&&++a<OF);return o}function iu(t,e,n,r){if(t===e&&n===r)return qe;const i=s=>VF(s,0,1,t,n);return s=>s===0||s===1?s:Ab(i(s),e,r)}const LF=iu(.42,0,1,1),MF=iu(0,0,.58,1),xb=iu(.42,0,.58,1),jF=t=>Array.isArray(t)&&typeof t[0]!="number",bb=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Pb=t=>e=>1-t(1-e),Zy=t=>1-Math.sin(Math.acos(t)),Cb=Pb(Zy),FF=bb(Zy),Rb=iu(.33,1.53,.69,.99),ev=Pb(Rb),UF=bb(ev),BF=t=>(t*=2)<1?.5*ev(t):.5*(2-Math.pow(2,-10*(t-1))),$F={linear:qe,easeIn:LF,easeInOut:xb,easeOut:MF,circIn:Zy,circInOut:FF,circOut:Cb,backIn:ev,backInOut:UF,backOut:Rb,anticipate:BF},G0=t=>{if(Array.isArray(t)){Jy(t.length===4);const[e,n,r,i]=t;return iu(e,n,r,i)}else if(typeof t=="string")return $F[t];return t},tv=(t,e)=>n=>!!(nu(n)&&zj.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),kb=(t,e,n)=>r=>{if(!nu(r))return r;const[i,s,o,a]=r.match(Ad);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},zF=t=>pi(0,255,t),Mf={...Es,transform:t=>Math.round(zF(t))},Qi={test:tv("rgb","red"),parse:kb("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Mf.transform(t)+", "+Mf.transform(e)+", "+Mf.transform(n)+", "+Ka(Ga.transform(r))+")"};function WF(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Em={test:tv("#"),parse:WF,transform:Qi.transform},Js={test:tv("hsl","hue"),parse:kb("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+qn.transform(Ka(e))+", "+qn.transform(Ka(n))+", "+Ka(Ga.transform(r))+")"},Lt={test:t=>Qi.test(t)||Em.test(t)||Js.test(t),parse:t=>Qi.test(t)?Qi.parse(t):Js.test(t)?Js.parse(t):Em.parse(t),transform:t=>nu(t)?t:t.hasOwnProperty("red")?Qi.transform(t):Js.transform(t)},Me=(t,e,n)=>-n*t+n*e+t;function jf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function HF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=jf(l,a,t+1/3),s=jf(l,a,t),o=jf(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Ff=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},qF=[Em,Qi,Js],GF=t=>qF.find(e=>e.test(t));function K0(t){const e=GF(t);let n=e.parse(t);return e===Js&&(n=HF(n)),n}const Nb=(t,e)=>{const n=K0(t),r=K0(e),i={...n};return s=>(i.red=Ff(n.red,r.red,s),i.green=Ff(n.green,r.green,s),i.blue=Ff(n.blue,r.blue,s),i.alpha=Me(n.alpha,r.alpha,s),Qi.transform(i))};function KF(t){var e,n;return isNaN(t)&&nu(t)&&(((e=t.match(Ad))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(sb))===null||n===void 0?void 0:n.length)||0)>0}const Db={regex:Bj,countKey:"Vars",token:"${v}",parse:qe},Ob={regex:sb,countKey:"Colors",token:"${c}",parse:Lt.parse},Vb={regex:Ad,countKey:"Numbers",token:"${n}",parse:Es.parse};function Uf(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Sh(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Uf(n,Db),Uf(n,Ob),Uf(n,Vb),n}function Lb(t){return Sh(t).values}function Mb(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Sh(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(Db.token,o[l]):l<r+n?a=a.replace(Ob.token,Lt.transform(o[l])):a=a.replace(Vb.token,Ka(o[l]));return a}}const QF=t=>typeof t=="number"?0:t;function YF(t){const e=Lb(t);return Mb(t)(e.map(QF))}const mi={test:KF,parse:Lb,createTransformer:Mb,getAnimatableNone:YF},jb=(t,e)=>n=>`${n>0?e:t}`;function Fb(t,e){return typeof t=="number"?n=>Me(t,e,n):Lt.test(t)?Nb(t,e):t.startsWith("var(")?jb(t,e):Bb(t,e)}const Ub=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>Fb(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},XF=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Fb(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},Bb=(t,e)=>{const n=mi.createTransformer(e),r=Sh(t),i=Sh(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?si(Ub(r.values,i.values),n):jb(t,e)},Pl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Q0=(t,e)=>n=>Me(t,e,n);function JF(t){return typeof t=="number"?Q0:typeof t=="string"?Lt.test(t)?Nb:Bb:Array.isArray(t)?Ub:typeof t=="object"?XF:Q0}function ZF(t,e,n){const r=[],i=n||JF(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||qe:e;a=si(l,a)}r.push(a)}return r}function $b(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Jy(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=ZF(e,r,i),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=Pl(t[h],t[h+1],c);return o[h](d)};return n?c=>l(pi(t[0],t[s-1],c)):l}function eU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Pl(0,e,r);t.push(Me(n,1,i))}}function tU(t){const e=[0];return eU(e,t.length-1),e}function nU(t,e){return t.map(n=>n*e)}function rU(t,e){return t.map(()=>e||xb).splice(0,t.length-1)}function Ih({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=jF(r)?r.map(G0):G0(r),s={done:!1,value:e[0]},o=nU(n&&n.length===e.length?n:tU(e),t),a=$b(o,e,{ease:Array.isArray(i)?i:rU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function zb(t,e){return e?t*(1e3/e):0}const iU=5;function Wb(t,e,n){const r=Math.max(e-iU,0);return zb(n-t(r),e-r)}const Bf=.001,sU=.01,oU=10,aU=.05,lU=1;function uU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=pi(aU,lU,o),t=pi(sU,oU,mr(t)),o<1?(i=c=>{const h=c*o,d=h*t,p=h-n,g=Tm(c,o),v=Math.exp(-d);return Bf-p/g*v},s=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-d),_=Tm(Math.pow(c,2),o);return(-i(c)+Bf>0?-1:1)*((p-g)*v)/_}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Bf+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=hU(i,s,a);if(t=Zi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const cU=12;function hU(t,e,n){let r=n;for(let i=1;i<cU;i++)r=r-t(r)/e(r);return r}function Tm(t,e){return t*Math.sqrt(1-e*e)}const dU=["duration","bounce"],fU=["stiffness","damping","mass"];function Y0(t,e){return e.some(n=>t[n]!==void 0)}function pU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Y0(t,fU)&&Y0(t,dU)){const n=uU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Hb({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:h,velocity:d,isResolvedFromDuration:p}=pU({...r,velocity:-mr(r.velocity||0)}),g=d||0,v=l/(2*Math.sqrt(a*c)),_=s-i,I=mr(Math.sqrt(a/c)),T=Math.abs(_)<5;n||(n=T?.01:2),e||(e=T?.005:.5);let w;if(v<1){const S=Tm(I,v);w=k=>{const V=Math.exp(-v*I*k);return s-V*((g+v*I*_)/S*Math.sin(S*k)+_*Math.cos(S*k))}}else if(v===1)w=S=>s-Math.exp(-I*S)*(_+(g+I*_)*S);else{const S=I*Math.sqrt(v*v-1);w=k=>{const V=Math.exp(-v*I*k),M=Math.min(S*k,300);return s-V*((g+v*I*_)*Math.sinh(M)+S*_*Math.cosh(M))/S}}return{calculatedDuration:p&&h||null,next:S=>{const k=w(S);if(p)o.done=S>=h;else{let V=g;S!==0&&(v<1?V=Wb(w,S,k):V=0);const M=Math.abs(V)<=n,x=Math.abs(s-k)<=e;o.done=M&&x}return o.value=o.done?s:k,o}}}function X0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=E=>a!==void 0&&E<a||l!==void 0&&E>l,v=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let _=n*e;const I=d+_,T=o===void 0?I:o(I);T!==I&&(_=T-d);const w=E=>-_*Math.exp(-E/r),S=E=>T+w(E),k=E=>{const b=w(E),P=S(E);p.done=Math.abs(b)<=c,p.value=p.done?T:P};let V,M;const x=E=>{g(p.value)&&(V=E,M=Hb({keyframes:[p.value,v(p.value)],velocity:Wb(S,E,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return x(0),{calculatedDuration:null,next:E=>{let b=!1;return!M&&V===void 0&&(b=!0,k(E),x(E)),V!==void 0&&E>V?M.next(E-V):(!b&&k(E),p)}}}const mU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ce.update(e,!0),stop:()=>Ar(e),now:()=>Pt.isProcessing?Pt.timestamp:performance.now()}},J0=2e4;function Z0(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<J0;)e+=n,r=t.next(e);return e>=J0?1/0:e}const gU={decay:X0,inertia:X0,tween:Ih,keyframes:Ih,spring:Hb};function Ah({autoplay:t=!0,delay:e=0,driver:n=mU,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:d,...p}){let g=1,v=!1,_,I;const T=()=>{I=new Promise(K=>{_=K})};T();let w;const S=gU[i]||Ih;let k;S!==Ih&&typeof r[0]!="number"&&(k=$b([0,100],r,{clamp:!1}),r=[0,100]);const V=S({...p,keyframes:r});let M;a==="mirror"&&(M=S({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let x="idle",E=null,b=null,P=null;V.calculatedDuration===null&&s&&(V.calculatedDuration=Z0(V));const{calculatedDuration:N}=V;let D=1/0,C=1/0;N!==null&&(D=N+o,C=D*(s+1)-o);let ae=0;const Re=K=>{if(b===null)return;g>0&&(b=Math.min(b,K)),g<0&&(b=Math.min(K-C/g,b)),E!==null?ae=E:ae=Math.round(K-b)*g;const J=ae-e*(g>=0?1:-1),de=g>=0?J<0:J>C;ae=Math.max(J,0),x==="finished"&&E===null&&(ae=C);let ht=ae,Et=V;if(s){const zt=Math.min(ae,C)/D;let Jt=Math.floor(zt),Tt=zt%1;!Tt&&zt>=1&&(Tt=1),Tt===1&&Jt--,Jt=Math.min(Jt,s+1),!!(Jt%2)&&(a==="reverse"?(Tt=1-Tt,o&&(Tt-=o/D)):a==="mirror"&&(Et=M)),ht=pi(0,1,Tt)*D}const Ge=de?{done:!1,value:r[0]}:Et.next(ht);k&&(Ge.value=k(Ge.value));let{done:rt}=Ge;!de&&N!==null&&(rt=g>=0?ae>=C:ae<=0);const Xn=E===null&&(x==="finished"||x==="running"&&rt);return d&&d(Ge.value),Xn&&B(),Ge},oe=()=>{w&&w.stop(),w=void 0},Y=()=>{x="idle",oe(),_(),T(),b=P=null},B=()=>{x="finished",h&&h(),oe(),_()},W=()=>{if(v)return;w||(w=n(Re));const K=w.now();l&&l(),E!==null?b=K-E:(!b||x==="finished")&&(b=K),x==="finished"&&T(),P=b,E=null,x="running",w.start()};t&&W();const H={then(K,J){return I.then(K,J)},get time(){return mr(ae)},set time(K){K=Zi(K),ae=K,E!==null||!w||g===0?E=K:b=w.now()-K/g},get duration(){const K=V.calculatedDuration===null?Z0(V):V.calculatedDuration;return mr(K)},get speed(){return g},set speed(K){K===g||!w||(g=K,H.time=mr(ae))},get state(){return x},play:W,pause:()=>{x="paused",E=ae},stop:()=>{v=!0,x!=="idle"&&(x="idle",c&&c(),Y())},cancel:()=>{P!==null&&Re(P),Y()},complete:()=>{x="finished"},sample:K=>(b=0,Re(K))};return H}function yU(t){let e;return()=>(e===void 0&&(e=t()),e)}const vU=yU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_U=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),rc=10,wU=2e4,EU=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Tb(e.ease);function TU(t,e,{onUpdate:n,onComplete:r,...i}){if(!(vU()&&_U.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const h=()=>{l=new Promise(S=>{a=S})};h();let{keyframes:d,duration:p=300,ease:g,times:v}=i;if(EU(e,i)){const S=Ah({...i,repeat:0,delay:0});let k={done:!1,value:d[0]};const V=[];let M=0;for(;!k.done&&M<wU;)k=S.sample(M),V.push(k.value),M+=rc;v=void 0,d=V,p=M-rc,g="linear"}const _=kF(t.owner.current,e,d,{...i,duration:p,ease:g,times:v}),I=()=>{c=!1,_.cancel()},T=()=>{c=!0,Ce.update(I),a(),h()};return _.onfinish=()=>{c||(t.set(NF(d,i)),r&&r(),T())},{then(S,k){return l.then(S,k)},attachTimeline(S){return _.timeline=S,_.onfinish=null,qe},get time(){return mr(_.currentTime||0)},set time(S){_.currentTime=Zi(S)},get speed(){return _.playbackRate},set speed(S){_.playbackRate=S},get duration(){return mr(p)},play:()=>{o||(_.play(),Ar(I))},pause:()=>_.pause(),stop:()=>{if(o=!0,_.playState==="idle")return;const{currentTime:S}=_;if(S){const k=Ah({...i,autoplay:!1});t.setWithVelocity(k.sample(S-rc).value,k.sample(S).value,rc)}T()},complete:()=>{c||_.finish()},cancel:T}}function SU({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:qe,pause:qe,stop:qe,then:s=>(s(),Promise.resolve()),cancel:qe,complete:qe});return e?Ah({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const IU={type:"spring",stiffness:500,damping:25,restSpeed:10},AU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),xU={type:"keyframes",duration:.8},bU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PU=(t,{keyframes:e})=>e.length>2?xU:ws.has(t)?t.startsWith("scale")?AU(e[1]):IU:bU,Sm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url(")),CU=new Set(["brightness","contrast","saturate","opacity"]);function RU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ad)||[];if(!r)return t;const i=n.replace(r,"");let s=CU.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const kU=/([a-z-]*)\(.*?\)/g,Im={...mi,getAnimatableNone:t=>{const e=t.match(kU);return e?e.map(RU).join(" "):t}},NU={...ob,color:Lt,backgroundColor:Lt,outlineColor:Lt,fill:Lt,stroke:Lt,borderColor:Lt,borderTopColor:Lt,borderRightColor:Lt,borderBottomColor:Lt,borderLeftColor:Lt,filter:Im,WebkitFilter:Im},nv=t=>NU[t];function qb(t,e){let n=nv(t);return n!==Im&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Gb=t=>/^0[^.\s]+$/.test(t);function DU(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Gb(t)}function OU(t,e,n,r){const i=Sm(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),DU(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];s[h]=qb(e,a)}return s}function VU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function rv(t,e){return t[e]||t.default||t}const LU={skipAnimations:!1},iv=(t,e,n,r={})=>i=>{const s=rv(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Zi(o);const l=OU(e,t,n,s),c=l[0],h=l[l.length-1],d=Sm(t,c),p=Sm(t,h);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:v=>{e.set(v),s.onUpdate&&s.onUpdate(v)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(VU(s)||(g={...g,...PU(t,g)}),g.duration&&(g.duration=Zi(g.duration)),g.repeatDelay&&(g.repeatDelay=Zi(g.repeatDelay)),!d||!p||RF.current||s.type===!1||LU.skipAnimations)return SU(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=TU(e,t,g);if(v)return v}return Ah(g)};function xh(t){return!!(Xt(t)&&t.add)}const Kb=t=>/^\-?\d*\.?\d+$/.test(t);function sv(t,e){t.indexOf(e)===-1&&t.push(e)}function ov(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class av{constructor(){this.subscriptions=[]}add(e){return sv(this.subscriptions,e),()=>ov(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MU=t=>!isNaN(parseFloat(t));class jU{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Pt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=MU(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new av);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ro(t,e){return new jU(t,e)}const Qb=t=>e=>e.test(t),FU={test:t=>t==="auto",parse:t=>t},Yb=[Es,ee,qn,Nr,Hj,Wj,FU],va=t=>Yb.find(Qb(t)),UU=[...Yb,Lt,mi],BU=t=>UU.find(Qb(t));function $U(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ro(n))}function zU(t,e){const n=bd(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=oF(s[o]);$U(t,o,a)}}function WU(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(Kb(h)||Gb(h))?h=parseFloat(h):!BU(h)&&mi.test(c)&&(h=qb(l,c)),t.addValue(l,Ro(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function HU(t,e){return e?(e[t]||e.default||e).from:void 0}function qU(t,e,n){const r={};for(const i in t){const s=HU(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function GU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function KU(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function Xb(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const p=t.getValue(d),g=a[d];if(!p||g===void 0||h&&GU(h,d))continue;const v={delay:n,elapsed:0,...rv(s||{},d)};if(window.HandoffAppearAnimations){const T=t.getProps()[Jx];if(T){const w=window.HandoffAppearAnimations(T,d,p,Ce);w!==null&&(v.elapsed=w,v.isHandoff=!0)}}let _=!v.isHandoff&&!KU(p,g);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(_=!1),p.animation&&(_=!1),_)continue;p.start(iv(d,p,g,t.shouldReduceMotion&&ws.has(d)?{type:!1}:v));const I=p.animation;xh(l)&&(l.add(d),I.then(()=>l.remove(d))),c.push(I)}return o&&Promise.all(c).then(()=>{o&&zU(t,o)}),c}function Am(t,e,n={}){const r=bd(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Xb(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=i;return QU(t,e,c+l,h,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function QU(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(YU).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Am(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function YU(t,e){return t.sortNodePosition(e)}function XU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Am(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Am(t,e,n);else{const i=typeof e=="function"?bd(t,e,n.custom):e;r=Promise.all(Xb(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const JU=[...zy].reverse(),ZU=zy.length;function e4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>XU(t,n,r)))}function t4(t){let e=e4(t);const n=r4();let r=!0;const i=(l,c)=>{const h=bd(t,c);if(h){const{transition:d,transitionEnd:p,...g}=h;l={...l,...g,...p}}return l};function s(l){e=l(t)}function o(l,c){const h=t.getProps(),d=t.getVariantContext(!0)||{},p=[],g=new Set;let v={},_=1/0;for(let T=0;T<ZU;T++){const w=JU[T],S=n[w],k=h[w]!==void 0?h[w]:d[w],V=xl(k),M=w===c?S.isActive:null;M===!1&&(_=T);let x=k===d[w]&&k!==h[w]&&V;if(x&&r&&t.manuallyAnimateOnMount&&(x=!1),S.protectedKeys={...v},!S.isActive&&M===null||!k&&!S.prevProp||Sd(k)||typeof k=="boolean")continue;let b=n4(S.prevProp,k)||w===c&&S.isActive&&!x&&V||T>_&&V,P=!1;const N=Array.isArray(k)?k:[k];let D=N.reduce(i,{});M===!1&&(D={});const{prevResolvedValues:C={}}=S,ae={...C,...D},Re=oe=>{b=!0,g.has(oe)&&(P=!0,g.delete(oe)),S.needsAnimating[oe]=!0};for(const oe in ae){const Y=D[oe],B=C[oe];if(v.hasOwnProperty(oe))continue;let W=!1;Th(Y)&&Th(B)?W=!wb(Y,B):W=Y!==B,W?Y!==void 0?Re(oe):g.add(oe):Y!==void 0&&g.has(oe)?Re(oe):S.protectedKeys[oe]=!0}S.prevProp=k,S.prevResolvedValues=D,S.isActive&&(v={...v,...D}),r&&t.blockInitialAnimation&&(b=!1),b&&(!x||P)&&p.push(...N.map(oe=>({animation:oe,options:{type:w,...l}})))}if(g.size){const T={};g.forEach(w=>{const S=t.getBaseTarget(w);S!==void 0&&(T[w]=S)}),p.push({animation:T})}let I=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(p):Promise.resolve()}function a(l,c,h){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(l,c)}),n[l].isActive=c;const p=o(h,l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function n4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wb(e,t):!1}function Fi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r4(){return{animate:Fi(!0),whileInView:Fi(),whileHover:Fi(),whileTap:Fi(),whileDrag:Fi(),whileFocus:Fi(),exit:Fi()}}class i4 extends Ii{constructor(e){super(e),e.animationState||(e.animationState=t4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Sd(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let s4=0;class o4 extends Ii{constructor(){super(...arguments),this.id=s4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const a4={animation:{Feature:i4},exit:{Feature:o4}},eE=(t,e)=>Math.abs(t-e);function l4(t,e){const n=eE(t.x,e.x),r=eE(t.y,e.y);return Math.sqrt(n**2+r**2)}class Jb{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=zf(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=l4(d.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:v}=d,{timestamp:_}=Pt;this.history.push({...v,timestamp:_});const{onStart:I,onMove:T}=this.handlers;p||(I&&I(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=$f(p,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=zf(d.type==="pointercancel"?this.lastMoveEventInfo:$f(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,I),v&&v(d,I)},!mb(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=xd(e),a=$f(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Pt;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,zf(a,this.history)),this.removeListeners=si(pr(this.contextWindow,"pointermove",this.handlePointerMove),pr(this.contextWindow,"pointerup",this.handlePointerUp),pr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ar(this.updatePoint)}}function $f(t,e){return e?{point:e(t.point)}:t}function tE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zf({point:t},e){return{point:t,delta:tE(t,Zb(e)),offset:tE(t,u4(e)),velocity:c4(e,.1)}}function u4(t){return t[0]}function Zb(t){return t[t.length-1]}function c4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Zb(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Zi(e)));)n--;if(!r)return{x:0,y:0};const s=mr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function an(t){return t.max-t.min}function xm(t,e=0,n=.01){return Math.abs(t-e)<=n}function nE(t,e,n,r=.5){t.origin=r,t.originPoint=Me(e.min,e.max,t.origin),t.scale=an(n)/an(e),(xm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Me(n.min,n.max,t.origin)-t.originPoint,(xm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Qa(t,e,n,r){nE(t.x,e.x,n.x,r?r.originX:void 0),nE(t.y,e.y,n.y,r?r.originY:void 0)}function rE(t,e,n){t.min=n.min+e.min,t.max=t.min+an(e)}function h4(t,e,n){rE(t.x,e.x,n.x),rE(t.y,e.y,n.y)}function iE(t,e,n){t.min=e.min-n.min,t.max=t.min+an(e)}function Ya(t,e,n){iE(t.x,e.x,n.x),iE(t.y,e.y,n.y)}function d4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Me(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Me(n,t,r.max):Math.min(t,n)),t}function sE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function f4(t,{top:e,left:n,bottom:r,right:i}){return{x:sE(t.x,n,i),y:sE(t.y,e,r)}}function oE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function p4(t,e){return{x:oE(t.x,e.x),y:oE(t.y,e.y)}}function m4(t,e){let n=.5;const r=an(t),i=an(e);return i>r?n=Pl(e.min,e.max-r,t.min):r>i&&(n=Pl(t.min,t.max-i,e.min)),pi(0,1,n)}function g4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const bm=.35;function y4(t=bm){return t===!1?t=0:t===!0&&(t=bm),{x:aE(t,"left","right"),y:aE(t,"top","bottom")}}function aE(t,e,n){return{min:lE(t,e),max:lE(t,n)}}function lE(t,e){return typeof t=="number"?t:t[e]||0}const uE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zs=()=>({x:uE(),y:uE()}),cE=()=>({min:0,max:0}),Qe=()=>({x:cE(),y:cE()});function hn(t){return[t("x"),t("y")]}function eP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function v4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Wf(t){return t===void 0||t===1}function Pm({scale:t,scaleX:e,scaleY:n}){return!Wf(t)||!Wf(e)||!Wf(n)}function zi(t){return Pm(t)||tP(t)||t.z||t.rotate||t.rotateX||t.rotateY}function tP(t){return hE(t.x)||hE(t.y)}function hE(t){return t&&t!=="0%"}function bh(t,e,n){const r=t-n,i=e*r;return n+i}function dE(t,e,n,r,i){return i!==void 0&&(t=bh(t,i,r)),bh(t,n,r)+e}function Cm(t,e=0,n=1,r,i){t.min=dE(t.min,e,n,r,i),t.max=dE(t.max,e,n,r,i)}function nP(t,{x:e,y:n}){Cm(t.x,e.translate,e.scale,e.originPoint),Cm(t.y,n.translate,n.scale,n.originPoint)}function w4(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&eo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,nP(t,o)),r&&zi(s.latestValues)&&eo(t,s.latestValues))}e.x=fE(e.x),e.y=fE(e.y)}function fE(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Vr(t,e){t.min=t.min+e,t.max=t.max+e}function pE(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Me(t.min,t.max,s);Cm(t,e[n],e[r],o,e.scale)}const E4=["x","scaleX","originX"],T4=["y","scaleY","originY"];function eo(t,e){pE(t.x,e,E4),pE(t.y,e,T4)}function rP(t,e){return eP(_4(t.getBoundingClientRect(),e))}function S4(t,e,n){const r=rP(t,n),{scroll:i}=e;return i&&(Vr(r.x,i.offset.x),Vr(r.y,i.offset.y)),r}const iP=({current:t})=>t?t.ownerDocument.defaultView:null,I4=new WeakMap;class A4{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xd(h,"page").point)},s=(h,d)=>{const{drag:p,dragPropagation:g,onDragStart:v}=this.getProps();if(p&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=yb(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hn(I=>{let T=this.getAxisMotionValue(I).get()||0;if(qn.test(T)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[I];S&&(T=an(S)*(parseFloat(T)/100))}}this.originPoint[I]=T}),v&&Ce.update(()=>v(h,d),!1,!0);const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:v,onDrag:_}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:I}=d;if(g&&this.currentDirection===null){this.currentDirection=x4(I),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,I),this.updateAxis("y",d.point,I),this.visualElement.render(),_&&_(h,d)},a=(h,d)=>this.stop(h,d),l=()=>hn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Jb(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:iP(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ce.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ic(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=d4(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Xs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=f4(i.layoutBox,n):this.constraints=!1,this.elastic=y4(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=g4(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=S4(r,i.root,this.visualElement.getTransformPagePoint());let o=p4(i.layout.layoutBox,s);if(n){const a=n(v4(o));this.hasMutatedConstraints=!!a,a&&(o=eP(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=hn(h=>{if(!ic(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(iv(e,r,0,n))}stopAnimation(){hn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){hn(n=>{const{drag:r}=this.getProps();if(!ic(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Me(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=m4({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),hn(o=>{if(!ic(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Me(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;I4.set(this.visualElement,this);const e=this.visualElement.current,n=pr(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xs(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=cr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(hn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=bm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ic(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function x4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class b4 extends Ii{constructor(e){super(e),this.removeGroupControls=qe,this.removeListeners=qe,this.controls=new A4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const mE=t=>(e,n)=>{t&&Ce.update(()=>t(e,n))};class P4 extends Ii{constructor(){super(...arguments),this.removePointerDownListener=qe}onPointerDown(e){this.session=new Jb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:mE(e),onStart:mE(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ce.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=pr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function C4(){const t=R.useContext(By);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();return R.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Cc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _a={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ee.test(t))t=parseFloat(t);else return t;const n=gE(t,e.target.x),r=gE(t,e.target.y);return`${n}% ${r}%`}},R4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=mi.parse(t);if(i.length>5)return r;const s=mi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Me(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class k4 extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Mj(N4),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Cc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sP(t){const[e,n]=C4(),r=R.useContext(eb);return X.createElement(k4,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(tb),isPresent:e,safeToRemove:n})}const N4={borderRadius:{..._a,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_a,borderTopRightRadius:_a,borderBottomLeftRadius:_a,borderBottomRightRadius:_a,boxShadow:R4},oP=["TopLeft","TopRight","BottomLeft","BottomRight"],D4=oP.length,yE=t=>typeof t=="string"?parseFloat(t):t,vE=t=>typeof t=="number"||ee.test(t);function O4(t,e,n,r,i,s){i?(t.opacity=Me(0,n.opacity!==void 0?n.opacity:1,V4(r)),t.opacityExit=Me(e.opacity!==void 0?e.opacity:1,0,L4(r))):s&&(t.opacity=Me(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<D4;o++){const a=`border${oP[o]}Radius`;let l=_E(e,a),c=_E(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||vE(l)===vE(c)?(t[a]=Math.max(Me(yE(l),yE(c),r),0),(qn.test(c)||qn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Me(e.rotate||0,n.rotate||0,r))}function _E(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const V4=aP(0,.5,Cb),L4=aP(.5,.95,qe);function aP(t,e,n){return r=>r<t?0:r>e?1:n(Pl(t,e,r))}function wE(t,e){t.min=e.min,t.max=e.max}function cn(t,e){wE(t.x,e.x),wE(t.y,e.y)}function EE(t,e,n,r,i){return t-=e,t=bh(t,1/n,r),i!==void 0&&(t=bh(t,1/i,r)),t}function M4(t,e=0,n=1,r=.5,i,s=t,o=t){if(qn.test(e)&&(e=parseFloat(e),e=Me(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Me(s.min,s.max,r);t===s&&(a-=e),t.min=EE(t.min,e,n,a,i),t.max=EE(t.max,e,n,a,i)}function TE(t,e,[n,r,i],s,o){M4(t,e[n],e[r],e[i],e.scale,s,o)}const j4=["x","scaleX","originX"],F4=["y","scaleY","originY"];function SE(t,e,n,r){TE(t.x,e,j4,n?n.x:void 0,r?r.x:void 0),TE(t.y,e,F4,n?n.y:void 0,r?r.y:void 0)}function IE(t){return t.translate===0&&t.scale===1}function lP(t){return IE(t.x)&&IE(t.y)}function U4(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function uP(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function AE(t){return an(t.x)/an(t.y)}class B4{constructor(){this.members=[]}add(e){sv(this.members,e),e.scheduleRender()}remove(e){if(ov(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xE(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const $4=(t,e)=>t.depth-e.depth;class z4{constructor(){this.children=[],this.isDirty=!1}add(e){sv(this.children,e),this.isDirty=!0}remove(e){ov(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($4),this.isDirty=!1,this.children.forEach(e)}}function W4(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ar(r),t(s-e))};return Ce.read(r,!0),()=>Ar(r)}function H4(t){window.MotionDebug&&window.MotionDebug.record(t)}function q4(t){return t instanceof SVGElement&&t.tagName!=="svg"}function G4(t,e,n){const r=Xt(t)?t:Ro(t);return r.start(iv("",r,e,n)),r.animation}const bE=["","X","Y","Z"],K4={visibility:"hidden"},PE=1e3;let Q4=0;const Wi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function cP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Q4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Wi.totalNodes=Wi.resolvedTargetDeltas=Wi.recalculatedProjection=0,this.nodes.forEach(J4),this.nodes.forEach(rB),this.nodes.forEach(iB),this.nodes.forEach(Z4),H4(Wi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new av),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=q4(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=W4(p,250),Cc.hasAnimatedSinceResize&&(Cc.hasAnimatedSinceResize=!1,this.nodes.forEach(RE))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||uB,{onLayoutAnimationStart:I,onLayoutAnimationComplete:T}=h.getProps(),w=!this.targetLayout||!uP(this.targetLayout,v)||g,S=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const k={...rv(_,"layout"),onPlay:I,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else p||RE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ar(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CE);return}this.isUpdating||this.nodes.forEach(tB),this.isUpdating=!1,this.nodes.forEach(nB),this.nodes.forEach(Y4),this.nodes.forEach(X4),this.clearAllSnapshots();const a=performance.now();Pt.delta=pi(0,1e3/60,a-Pt.timestamp),Pt.timestamp=a,Pt.isProcessing=!0,Of.update.process(Pt),Of.preRender.process(Pt),Of.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eB),this.sharedNodes.forEach(oB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!lP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||zi(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),cB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Qe();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Vr(a.x,l.offset.x),Vr(a.y,l.offset.y)),a}removeElementScroll(o){const a=Qe();cn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:d}=c;if(c!==this.root&&h&&d.layoutScroll){if(h.isRoot){cn(a,o);const{scroll:p}=this.root;p&&(Vr(a.x,-p.offset.x),Vr(a.y,-p.offset.y))}Vr(a.x,h.offset.x),Vr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=Qe();cn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&eo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),zi(h.latestValues)&&eo(l,h.latestValues)}return zi(this.latestValues)&&eo(l,this.latestValues),l}removeTransform(o){const a=Qe();cn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!zi(c.latestValues))continue;Pm(c.latestValues)&&c.updateSnapshot();const h=Qe(),d=c.measurePageBox();cn(h,d),SE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return zi(this.latestValues)&&SE(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Pt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qe(),this.relativeTargetOrigin=Qe(),Ya(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qe(),this.targetWithTransforms=Qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),h4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cn(this.target,this.layout.layoutBox),nP(this.target,this.targetDelta)):cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qe(),this.relativeTargetOrigin=Qe(),Ya(this.relativeTargetOrigin,this.target,g.target),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Wi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Pm(this.parent.latestValues)||tP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;cn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;w4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=Zs(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Zs(),this.projectionDeltaWithTransform=Zs());const _=this.projectionTransform;Qa(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=xE(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==p||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Wi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=Zs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Qe(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,_=g!==v,I=this.getStack(),T=!I||I.members.length<=1,w=!!(_&&!T&&this.options.crossfade===!0&&!this.path.some(lB));this.animationProgress=0;let S;this.mixTargetDelta=k=>{const V=k/1e3;kE(d.x,o.x,V),kE(d.y,o.y,V),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ya(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aB(this.relativeTarget,this.relativeTargetOrigin,p,V),S&&U4(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Qe()),cn(S,this.relativeTarget)),_&&(this.animationValues=h,O4(h,c,this.latestValues,V,w,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ar(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{Cc.hasAnimatedSinceResize=!0,this.currentAnimation=G4(0,PE,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&hP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Qe();const d=an(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=an(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}cn(a,l),eo(a,h),Qa(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new B4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<bE.length;h++){const d="rotate"+bE[h];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return K4;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Pc(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Pc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!zi(this.latestValues)&&(_.transform=h?h({},""):"none",this.hasProjected=!1),_}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=xE(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:g,y:v}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in wh){if(p[_]===void 0)continue;const{correct:I,applyTo:T}=wh[_],w=c.transform==="none"?p[_]:I(p[_],d);if(T){const S=T.length;for(let k=0;k<S;k++)c[T[k]]=w}else c[_]=w}return this.options.layoutId&&(c.pointerEvents=d===this?Pc(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(CE),this.root.sharedNodes.clear()}}}function Y4(t){t.updateLayout()}function X4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?hn(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],g=an(p);p.min=r[d].min,p.max=p.min+g}):hP(s,n.layoutBox,r)&&hn(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],g=an(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=Zs();Qa(a,r,n.layoutBox);const l=Zs();o?Qa(l,t.applyTransform(i,!0),n.measuredBox):Qa(l,r,n.layoutBox);const c=!lP(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const v=Qe();Ya(v,n.layoutBox,p.layoutBox);const _=Qe();Ya(_,r,g.layoutBox),uP(v,_)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function J4(t){Wi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Z4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function eB(t){t.clearSnapshot()}function CE(t){t.clearMeasurements()}function tB(t){t.isLayoutDirty=!1}function nB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function RE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rB(t){t.resolveTargetDelta()}function iB(t){t.calcProjection()}function sB(t){t.resetRotation()}function oB(t){t.removeLeadSnapshot()}function kE(t,e,n){t.translate=Me(e.translate,0,n),t.scale=Me(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function NE(t,e,n,r){t.min=Me(e.min,n.min,r),t.max=Me(e.max,n.max,r)}function aB(t,e,n,r){NE(t.x,e.x,n.x,r),NE(t.y,e.y,n.y,r)}function lB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uB={duration:.45,ease:[.4,0,.1,1]},DE=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),OE=DE("applewebkit/")&&!DE("chrome/")?Math.round:qe;function VE(t){t.min=OE(t.min),t.max=OE(t.max)}function cB(t){VE(t.x),VE(t.y)}function hP(t,e,n){return t==="position"||t==="preserve-aspect"&&!xm(AE(e),AE(n),.2)}const hB=cP({attachResizeListener:(t,e)=>cr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hf={current:void 0},dP=cP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Hf.current){const t=new hB({});t.mount(window),t.setOptions({layoutScroll:!0}),Hf.current=t}return Hf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dB={pan:{Feature:P4},drag:{Feature:b4,ProjectionNode:dP,MeasureLayout:sP}},fB=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pB(t){const e=fB.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Rm(t,e,n=1){const[r,i]=pB(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Kb(o)?parseFloat(o):o}else return _m(i)?Rm(i,e,n+1):i}function mB(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!_m(s))return;const o=Rm(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!_m(s))continue;const o=Rm(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const gB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fP=t=>gB.has(t),yB=t=>Object.keys(t).some(fP),LE=t=>t===Es||t===ee,ME=(t,e)=>parseFloat(t.split(", ")[e]),jE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return ME(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?ME(s[1],t):0}},vB=new Set(["x","y","z"]),_B=tu.filter(t=>!vB.has(t));function wB(t){const e=[];return _B.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const ko={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:jE(4,13),y:jE(5,14)};ko.translateX=ko.x;ko.translateY=ko.y;const EB=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=ko[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=ko[c](l,s)}),t},TB=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(fP);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],d=va(h);const p=e[l];let g;if(Th(p)){const v=p.length,_=p[0]===null?1:0;h=p[_],d=va(h);for(let I=_;I<v&&p[I]!==null;I++)g?Jy(va(p[I])===g):g=va(p[I])}else g=va(p);if(d!==g)if(LE(d)&&LE(g)){const v=c.get();typeof v=="string"&&c.set(parseFloat(v)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&g===ee&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(h===0||p===0)?h===0?c.set(g.transform(h)):e[l]=d.transform(p):(o||(s=wB(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=EB(e,t,a);return s.length&&s.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),Td&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function SB(t,e,n,r){return yB(e)?TB(t,e,n,r):{target:e,transitionEnd:r}}const IB=(t,e,n,r)=>{const i=mB(t,e,r);return e=i.target,r=i.transitionEnd,SB(t,e,n,r)},km={current:null},pP={current:!1};function AB(){if(pP.current=!0,!!Td)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>km.current=t.matches;t.addListener(e),e()}else km.current=!1}function xB(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Xt(s))t.addValue(i,s),xh(r)&&r.add(i);else if(Xt(o))t.addValue(i,Ro(s,{owner:t})),xh(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Ro(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const FE=new WeakMap,mP=Object.keys(bl),bB=mP.length,UE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],PB=Wy.length;class CB{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ce.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Id(n),this.isVariantNode=Zx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const p=h[d];a[d]!==void 0&&Xt(p)&&(p.set(a[d],!1),xh(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,FE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),pP.current||AB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:km.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FE.delete(this.current),this.projection&&this.projection.unmount(),Ar(this.notifyUpdate),Ar(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=ws.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ce.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<bB;l++){const c=mP[l],{isEnabled:h,Feature:d,ProjectionNode:p,MeasureLayout:g}=bl[c];p&&(o=p),h(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:d,layoutScroll:p,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||d&&Xs(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<UE.length;r++){const i=UE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=xB(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<PB;r++){const i=Wy[r],s=this.props[i];(xl(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ro(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Xy(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new av),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class gP extends CB{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=qU(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){WU(this,r,o);const a=IB(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function RB(t){return window.getComputedStyle(t)}class kB extends gP{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(ws.has(n)){const r=nv(n);return r&&r.default||0}else{const r=RB(e),i=(ib(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rP(e,n)}build(e,n,r,i){qy(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Yy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){cb(e,n,r,i)}}class NB extends gP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ws.has(n)){const r=nv(n);return r&&r.default||0}return n=hb.has(n)?n:$y(n),e.getAttribute(n)}measureInstanceViewportBox(){return Qe()}scrapeMotionValuesFromProps(e,n){return fb(e,n)}build(e,n,r,i){Ky(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){db(e,n,r,i)}mount(e){this.isSVGTag=Qy(e.tagName),super.mount(e)}}const DB=(t,e)=>Hy(t)?new NB(e,{enableHardwareAcceleration:!1}):new kB(e,{enableHardwareAcceleration:!0}),OB={layout:{ProjectionNode:dP,MeasureLayout:sP}},VB={...a4,...bF,...dB,...OB},BE=Vj((t,e)=>pF(t,e,VB,DB));function LB(){const[t,e]=R.useState(!1);return R.useEffect(()=>{const n=()=>e(window.scrollY>10);return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),y.jsxs("header",{className:`navbar bg-base-200 justify-between px-4 fixed top-0 left-0 right-0 z-50 transition-shadow ${t?"shadow-lg":""}`,children:[y.jsx(ti,{to:"/",className:"btn btn-ghost text-xl",children:"Barber Shop BEXS"}),y.jsxs("nav",{className:"space-x-2",children:[y.jsx(ti,{to:"/servicios",className:"btn btn-ghost btn-sm",children:"Servicios"}),y.jsx(ti,{to:"/barberos",className:"btn btn-ghost btn-sm",children:"Barberos"}),y.jsx("a",{href:"#/login",className:"btn btn-primary btn-sm",children:"Iniciar sesión"})]})]})}function MB(){const[t,e]=R.useState([]),[n,r]=R.useState([]);return R.useEffect(()=>{const i=Ne(ve(le,"servicios"),o=>{e(o.docs.map(a=>({id:a.id,...a.data()})))}),s=Ne(ve(le,"barberos"),o=>{r(o.docs.map(a=>({id:a.id,...a.data()})))});return()=>{i(),s()}},[]),y.jsxs("div",{children:[y.jsx(LB,{}),y.jsxs("div",{className:"pt-16",children:[y.jsxs("section",{className:"relative hero min-h-[60vh] overflow-hidden",children:[y.jsx("img",{src:"https://images.pexels.com/photos/1813272/pexels-photo-1813272.jpeg",alt:"Barbería",className:"absolute inset-0 w-full h-full object-cover opacity-40"}),y.jsx("div",{className:"absolute inset-0 bg-black/60"}),y.jsx("div",{className:"relative hero-content text-center text-neutral-content",children:y.jsxs(BE.div,{className:"max-w-md",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[y.jsx("h1",{className:"mb-4 text-5xl font-bold",children:"Barber Shop BEXS"}),y.jsx("p",{className:"mb-4",children:"Los mejores estilos y cortes profesionales para ti."}),y.jsx(BE.a,{href:"#/agendar",className:"btn btn-primary",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Agendar Turno"})]})})]}),y.jsxs("section",{id:"servicios",className:"py-16 px-6 max-w-6xl mx-auto space-y-6",children:[y.jsx("h2",{className:"text-3xl font-bold text-center",children:"Nuestros Servicios"}),y.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.slice(0,4).map(i=>y.jsx("div",{className:"card bg-base-200 rounded-lg shadow transition-transform duration-300 hover:scale-105 hover:shadow-lg",children:y.jsxs("div",{className:"card-body flex-row items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"card-title",children:i.nombre}),i.precio&&y.jsxs("p",{className:"text-lg",children:["$",i.precio]})]}),y.jsx("img",{className:"w-32 h-32",src:i.imagen||"https://cdn-icons-png.flaticon.com/512/7338/7338646.png",alt:i.nombre})]})},i.id))}),y.jsx("div",{className:"text-center",children:y.jsx(ti,{to:"/servicios",className:"btn btn-primary",children:"Ver todos"})})]}),y.jsxs("section",{className:"bg-gray-100 py-16 px-6 space-y-6",children:[y.jsx("h2",{className:"text-3xl font-bold text-center",children:"Conoce a Nuestros Barberos"}),y.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-6 justify-center",children:n.slice(0,3).map(i=>y.jsx(ti,{to:`/barberos/${i.id}`,className:"card bg-base-200 rounded-lg shadow transition-transform duration-300 hover:scale-105 hover:shadow-lg",children:y.jsxs("div",{className:"card-body items-center text-center",children:[y.jsx("div",{className:"avatar",children:y.jsx("div",{className:"w-24 rounded-full",children:y.jsx("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp"})})}),y.jsx("h3",{className:"card-title",children:i.nombre})]})},i.id))}),y.jsx("div",{className:"text-center",children:y.jsx(ti,{to:"/barberos",className:"btn btn-primary",children:"Ver todos"})})]})]})]})}function jB(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(""),l=async()=>{!t||!n||(await wd(ve(le,"servicios"),{nombre:t,precio:parseFloat(n),descripcion:i,imagen:o,timestamp:new Date}),e(""),r(""),s(""),a(""))};return y.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[y.jsx("input",{className:"border p-2 rounded",value:t,onChange:c=>e(c.target.value),placeholder:"Nombre del servicio"}),y.jsx("input",{className:"border p-2 rounded",type:"number",value:n,onChange:c=>r(c.target.value),placeholder:"Precio"}),y.jsx("textarea",{className:"border p-2 rounded",value:i,onChange:c=>s(c.target.value),placeholder:"Descripción"}),y.jsx("input",{className:"border p-2 rounded",value:o,onChange:c=>a(c.target.value),placeholder:"URL de la imagen"}),y.jsx("button",{onClick:l,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Guardar servicio"})]})}function FB(){const[t,e]=R.useState([]),[n,r]=R.useState(null),[i,s]=R.useState(""),[o,a]=R.useState(""),[l,c]=R.useState(""),[h,d]=R.useState("");R.useEffect(()=>{const I=Ne(ve(le,"servicios"),T=>{e(T.docs.map(w=>({id:w.id,...w.data()})))});return()=>I()},[]);const p=I=>{r(I.id),s(I.nombre),a(I.precio||""),c(I.descripcion||""),d(I.imagen||"")},g=()=>{r(null),s(""),a(""),c(""),d("")},v=async()=>{!i||!o||(await zx(Ir(le,"servicios",n),{nombre:i,precio:parseFloat(o),descripcion:l,imagen:h}),g())},_=async I=>{await eu(Ir(le,"servicios",I))};return y.jsx("div",{className:"grid gap-4",children:t.map(I=>y.jsx("div",{className:"card bg-base-100 shadow-md p-4",children:n===I.id?y.jsxs("div",{className:"space-y-2",children:[y.jsx("input",{className:"border p-1 rounded w-full",value:i,onChange:T=>s(T.target.value)}),y.jsx("input",{className:"border p-1 rounded w-full",type:"number",value:o,onChange:T=>a(T.target.value)}),y.jsx("textarea",{className:"border p-1 rounded w-full",value:l,onChange:T=>c(T.target.value)}),y.jsx("input",{className:"border p-1 rounded w-full",value:h,onChange:T=>d(T.target.value),placeholder:"URL de la imagen"}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsx("button",{onClick:v,className:"btn btn-sm btn-primary",children:"Guardar"}),y.jsx("button",{onClick:g,className:"btn btn-sm",children:"Cancelar"})]})]}):y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("span",{children:[I.nombre,I.precio?` - $${I.precio}`:""]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx("button",{onClick:()=>p(I),className:"text-blue-600 hover:underline",children:"Editar"}),y.jsx("button",{onClick:()=>_(I.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]}),I.imagen&&y.jsx("img",{src:I.imagen,alt:I.nombre,className:"w-20 h-20 object-contain mt-2"}),I.descripcion&&y.jsx("p",{className:"text-sm opacity-80 mt-1",children:I.descripcion})]})},I.id))})}function UB(){return y.jsxs("div",{className:"p-4 space-y-6",children:[y.jsx("h2",{className:"text-xl font-semibold",children:"Gestionar Servicios"}),y.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Nuevo servicio"}),y.jsx(jB,{})]})}),y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Servicios existentes"}),y.jsx(FB,{})]})})]})}function BB(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(""),l=async()=>{if(!t||!n||!i||!o)return;const c=Wg(Kx,"aux"),h=SA(c);await CO(h,n,o),await wd(ve(le,"barberos"),{nombre:t,email:n,telefono:i,timestamp:new Date}),e(""),r(""),s(""),a("")};return y.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[y.jsx("input",{className:"border p-2 rounded",value:t,onChange:c=>e(c.target.value),placeholder:"Nombre del barbero"}),y.jsx("input",{className:"border p-2 rounded",type:"email",value:n,onChange:c=>r(c.target.value),placeholder:"Correo electrónico"}),y.jsx("input",{className:"border p-2 rounded",value:i,onChange:c=>s(c.target.value),placeholder:"Teléfono"}),y.jsx("input",{className:"border p-2 rounded",type:"password",value:o,onChange:c=>a(c.target.value),placeholder:"Contraseña"}),y.jsx("button",{onClick:l,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Guardar barbero"})]})}function $B(){const[t,e]=R.useState([]);R.useEffect(()=>{const r=Ne(ve(le,"barberos"),i=>{e(i.docs.map(s=>({id:s.id,...s.data()})))});return()=>r()},[]);const n=async r=>{await eu(Ir(le,"barberos",r))};return y.jsx("div",{className:"grid gap-4",children:t.map(r=>y.jsx("div",{className:"card bg-base-100 shadow-md p-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"avatar placeholder",children:r.imagen?y.jsx("div",{className:"w-12 rounded-full",children:y.jsx("img",{src:r.imagen,alt:r.nombre})}):y.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-12 flex items-center justify-center",children:y.jsx("span",{className:"text-lg",children:r.nombre.charAt(0).toUpperCase()})})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:r.nombre}),r.email&&y.jsx("p",{children:r.email}),r.telefono&&y.jsx("p",{children:r.telefono})]})]}),y.jsx("button",{onClick:()=>n(r.id),className:"btn btn-xs btn-error",children:"Eliminar"})]})},r.id))})}function zB(){return y.jsxs("div",{className:"p-4 space-y-6",children:[y.jsx("h2",{className:"text-xl font-semibold",children:"Gestionar Barberos"}),y.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Nuevo barbero"}),y.jsx(BB,{})]})}),y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Barberos existentes"}),y.jsx($B,{})]})})]})}function WB(){const[t,e]=R.useState([]);return R.useEffect(()=>Ne(ve(le,"servicios"),r=>{e(r.docs.map(i=>({id:i.id,...i.data()})))}),[]),y.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-center",children:"Servicios"}),y.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>y.jsxs("div",{className:"card bg-base-200 shadow hover:shadow-lg transition",children:[y.jsx("figure",{className:"px-4 pt-4",children:y.jsx("img",{className:"w-24 h-24 object-contain",src:n.imagen||"https://cdn-icons-png.flaticon.com/512/7338/7338646.png",alt:n.nombre})}),y.jsxs("div",{className:"card-body items-center text-center space-y-2",children:[y.jsx("h2",{className:"card-title",children:n.nombre}),n.precio&&y.jsxs("p",{className:"opacity-70",children:["$",n.precio]}),n.descripcion&&y.jsx("p",{className:"text-sm opacity-80",children:n.descripcion}),y.jsx("div",{className:"card-actions mt-2",children:y.jsx(ti,{to:`/agendar?servicio=${encodeURIComponent(n.nombre)}`,className:"btn btn-primary btn-sm",children:"Reservar"})})]})]},n.id))})]})}function HB(){const[t,e]=R.useState([]);return R.useEffect(()=>Ne(ve(le,"barberos"),r=>{e(r.docs.map(i=>({id:i.id,...i.data()})))}),[]),y.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[y.jsx("h1",{className:"text-3xl font-bold text-center mb-6",children:"Nuestros Barberos"}),y.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map(n=>y.jsx(ti,{to:`/barberos/${n.id}`,className:"card bg-base-200 rounded-lg shadow transition-transform duration-300 hover:scale-105 hover:shadow-lg",children:y.jsxs("div",{className:"card-body items-center text-center",children:[y.jsx("div",{className:"avatar",children:y.jsx("div",{className:"w-24 rounded-full",children:y.jsx("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp"})})}),y.jsx("h2",{className:"card-title",children:n.nombre})]})},n.id))})]})}function qB(){const{id:t}=P1(),[e,n]=R.useState(null);return R.useEffect(()=>{async function r(){const i=await qM(Ir(le,"barberos",t));i.exists()&&n({id:i.id,...i.data()})}r()},[t]),e?y.jsxs("div",{className:"p-6 flex flex-col items-center space-y-4",children:[y.jsx("div",{className:"avatar",children:y.jsx("div",{className:"w-32 rounded-full",children:y.jsx("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp"})})}),y.jsx("h1",{className:"text-3xl font-bold",children:e.nombre}),e.email&&y.jsx("p",{className:"text-lg",children:e.email}),e.telefono&&y.jsx("p",{className:"text-lg",children:e.telefono})]}):y.jsx("div",{className:"p-6 text-center",children:"Cargando..."})}function GB(){return new Date().toLocaleDateString("en-CA",{timeZone:"America/Bogota"})}function Uo(t){return t?new Date(`1970-01-01T${t}:00`).toLocaleTimeString("es-CO",{timeZone:"America/Bogota",hour:"2-digit",minute:"2-digit",hour12:!0}):""}function yP({showSteps:t=!1}){const[e]=nN(),n=e.get("servicio")||"",[r,i]=R.useState(n),[s,o]=R.useState(""),[a,l]=R.useState(""),[c,h]=R.useState(""),[d,p]=R.useState(""),[g,v]=R.useState(""),[_,I]=R.useState(""),[T,w]=R.useState([]),[S,k]=R.useState([]),[V,M]=R.useState([]),[x,E]=R.useState({}),[b,P]=R.useState({}),[N,D]=R.useState([]),[C,ae]=R.useState(!1),Re=r?s?a?_?5:4:3:2:1;R.useEffect(()=>{n&&i(n)},[n]),R.useEffect(()=>{const Y=Ne(ve(le,"servicios"),B=>{w(B.docs.map(W=>({id:W.id,...W.data()})))});return()=>Y()},[]),R.useEffect(()=>{if(s){const Y=jt(ve(le,"turnos"),ut("fecha","==",s)),B=Ne(Y,W=>{const H={};W.forEach(K=>{const{hora:J,barbero:de}=K.data();H[J]||(H[J]=[]),H[J].push(de)}),P(H)});return()=>B()}P({})},[s]),R.useEffect(()=>{if(r&&s){const Y=jt(ve(le,"disponibilidades"),ut("servicio","==",r),ut("fecha","==",s)),B=Ne(Y,W=>{const H={};W.forEach(K=>{const{hora:J,barbero:de}=K.data();H[J]||(H[J]=[]),H[J].push(de)}),E(H)});return()=>B()}E({})},[r,s]),R.useEffect(()=>{const B=Object.keys(x).filter(W=>{const H=b[W]||[];return x[W].filter(J=>!H.includes(J)).length>0});k(B)},[x,b]),R.useEffect(()=>{if(s&&a){const Y=jt(ve(le,"turnos"),ut("fecha","==",s),ut("hora","==",a)),B=Ne(Y,W=>{D(W.docs.map(H=>H.data().barbero))});return()=>B()}else D([])},[s,a]),R.useEffect(()=>{if(r&&s&&a){const Y=jt(ve(le,"disponibilidades"),ut("servicio","==",r),ut("fecha","==",s),ut("hora","==",a)),B=Ne(Y,W=>{const K=[...new Set(W.docs.map(J=>J.data().barbero))].filter(J=>!N.includes(J));M(K)});return()=>B()}else M([])},[r,s,a,N]);const oe=async()=>{if(!c||!s||!a||!r||!_||!d||!g)return;const Y=fi.currentUser?fi.currentUser.uid:null,B={nombre:c,fecha:s,hora:a,servicio:r,barbero:_,email:d,telefono:g,estado:"pendiente",userId:Y,timestamp:new Date};await wd(ve(le,"turnos"),B);try{await fetch("https://hook.us2.make.com/307slkl4v8t4p76yy91sugd5uql87t6d",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)})}catch(W){console.error("Error calling webhook",W)}ae(!0),setTimeout(()=>ae(!1),3e3),h(""),o(""),l(""),i(""),I(""),p(""),v("")};return y.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[t&&y.jsx("div",{"data-theme":"corporate",children:y.jsxs("ul",{className:"steps w-full mb-4",children:[y.jsx("li",{className:`step ${Re>=1?"step-primary":""}`,children:"Servicio"}),y.jsx("li",{className:`step ${Re>=2?"step-primary":""}`,children:"Fecha"}),y.jsx("li",{className:`step ${Re>=3?"step-primary":""}`,children:"Hora"}),y.jsx("li",{className:`step ${Re>=4?"step-primary":""}`,children:"Barbero"}),y.jsx("li",{className:`step ${Re>=5?"step-primary":""}`,children:"Datos"})]})}),r&&s&&S.length===0&&y.jsx("div",{role:"alert",className:"alert alert-warning",children:y.jsx("span",{children:"Sin turnos disponibles para ese día"})}),y.jsxs("select",{className:"border p-2 rounded",value:r,onChange:Y=>i(Y.target.value),children:[y.jsx("option",{value:"",children:"Seleccione un servicio"}),T.map(Y=>y.jsx("option",{value:Y.nombre,children:Y.nombre},Y.id))]}),r&&y.jsx("input",{type:"date",className:"border p-2 rounded",value:s,onChange:Y=>o(Y.target.value)}),S.length>0&&y.jsxs("select",{className:"border p-2 rounded",value:a,onChange:Y=>l(Y.target.value),children:[y.jsx("option",{value:"",children:"Seleccione una hora"}),S.map(Y=>y.jsx("option",{value:Y,children:Uo(Y)},Y))]}),V.length>0&&y.jsxs("select",{className:"border p-2 rounded",value:_,onChange:Y=>I(Y.target.value),children:[y.jsx("option",{value:"",children:"Seleccione un barbero"}),V.map(Y=>y.jsx("option",{value:Y,children:Y},Y))]}),_&&y.jsx("input",{className:"border p-2 rounded",value:c,onChange:Y=>h(Y.target.value),placeholder:"Nombre del cliente"}),_&&y.jsx("input",{className:"border p-2 rounded",type:"email",value:d,onChange:Y=>p(Y.target.value),placeholder:"Correo del cliente"}),_&&y.jsx("input",{className:"border p-2 rounded",value:g,onChange:Y=>v(Y.target.value),placeholder:"Teléfono del cliente"}),_&&y.jsx("button",{onClick:oe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Guardar turno"}),C&&y.jsx("div",{role:"alert",className:"alert alert-success",children:y.jsx("span",{children:"Turno guardado"})})]})}function KB(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[i,s]=R.useState(""),o=R.useRef(null),a=p=>{p.current&&p.current.scrollBy({left:-150,behavior:"smooth"})},l=p=>{p.current&&p.current.scrollBy({left:150,behavior:"smooth"})};R.useEffect(()=>{const p=jt(ve(le,"turnos"),$M("timestamp","desc")),g=Ne(p,v=>{e(v.docs.map(_=>({id:_.id,..._.data()})))});return()=>g()},[]);const c=R.useMemo(()=>Array.from(new Set(t.map(p=>p.fecha))).sort(),[t]);R.useEffect(()=>{c.length>0&&!c.includes(n)&&r(c[0])},[c,n]);const h=R.useMemo(()=>Array.from(new Set(t.filter(p=>p.fecha===n).map(p=>p.barbero))),[t,n]);R.useEffect(()=>{h.length>0&&!h.includes(i)&&s(h[0])},[h,i]);const d=async p=>{await eu(Ir(le,"turnos",p))};return t.length===0?y.jsx("p",{children:"No hay turnos registrados."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>a(o),className:"btn btn-square btn-sm mr-2",children:"❮"}),y.jsx("div",{ref:o,role:"tablist",className:"tabs tabs-boxed flex-1 overflow-x-auto whitespace-nowrap scroll-smooth",children:c.map(p=>y.jsx("button",{role:"tab",className:`tab ${n===p?"tab-active":""}`,onClick:()=>r(p),children:p},p))}),y.jsx("button",{onClick:()=>l(o),className:"btn btn-square btn-sm ml-2",children:"❯"})]}),y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{role:"tablist",className:"tabs tabs-boxed overflow-x-auto",children:h.map(p=>y.jsx("button",{role:"tab",className:`tab ${i===p?"tab-active":""}`,onClick:()=>s(p),children:p},p))})}),y.jsx("div",{className:"grid gap-4",children:t.filter(p=>p.fecha===n).filter(p=>p.barbero===i).map(p=>y.jsx("div",{className:"card bg-base-100 shadow-md",children:y.jsxs("div",{className:"card-body",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("h2",{className:"card-title",children:p.nombre}),y.jsx("span",{className:`badge ${(p.estado||"pendiente")==="pendiente"?"badge-info":(p.estado||"pendiente")==="atendido"?"badge-success":"badge-error"}`,children:p.estado||"pendiente"})]}),y.jsxs("p",{children:["Fecha: ",p.fecha]}),y.jsxs("p",{children:["Hora: ",Uo(p.hora)]}),y.jsxs("p",{children:["Servicio: ",p.servicio]}),y.jsxs("p",{children:["Barbero: ",p.barbero]}),p.email&&y.jsxs("p",{children:["Correo: ",p.email]}),p.telefono&&y.jsxs("p",{children:["Teléfono: ",p.telefono]}),y.jsx("div",{className:"pt-2",children:y.jsx("button",{onClick:()=>d(p.id),className:"btn btn-xs btn-error",children:"Eliminar"})})]})},p.id))})]})}function QB(){const[t,e]=R.useState([]),[n,r]=R.useState([]),[i,s]=R.useState(""),[o,a]=R.useState(""),l=R.useRef(null),c=R.useRef(null),h=_=>{_.current&&_.current.scrollBy({left:-150,behavior:"smooth"})},d=_=>{_.current&&_.current.scrollBy({left:150,behavior:"smooth"})};R.useEffect(()=>{const _=Ne(ve(le,"barberos"),T=>{e(T.docs.map(w=>({id:w.id,...w.data()})))}),I=Ne(ve(le,"turnos"),T=>{r(T.docs.map(w=>({id:w.id,...w.data()})))});return()=>{_(),I()}},[]);const p=R.useMemo(()=>Array.from(new Set(n.map(_=>_.fecha))).sort(),[n]),g=R.useMemo(()=>t.map(_=>_.nombre),[t]);R.useEffect(()=>{p.length>0&&!p.includes(i)&&s(p[0])},[p,i]),R.useEffect(()=>{g.length>0&&!g.includes(o)&&a(g[0])},[g,o]);const v=n.filter(_=>_.barbero===o&&_.fecha===i);return p.length===0?y.jsx("p",{children:"No hay turnos registrados."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>h(l),className:"btn btn-square btn-sm mr-2",children:"❮"}),y.jsx("div",{ref:l,role:"tablist",className:"tabs tabs-boxed flex-1 overflow-x-auto whitespace-nowrap scroll-smooth",children:p.map(_=>y.jsx("button",{role:"tab",className:`tab ${i===_?"tab-active":""}`,onClick:()=>s(_),children:_},_))}),y.jsx("button",{onClick:()=>d(l),className:"btn btn-square btn-sm ml-2",children:"❯"})]}),y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{role:"tablist",className:"tabs tabs-boxed overflow-x-auto",ref:c,children:g.map(_=>y.jsx("button",{role:"tab",className:`tab ${o===_?"tab-active":""}`,onClick:()=>a(_),children:_},_))})}),y.jsxs("div",{className:"space-y-6 mt-4",children:[y.jsx("h3",{className:"font-bold mb-2",children:o}),v.length===0?y.jsx("p",{className:"text-sm italic",children:"Sin turnos"}):y.jsx("div",{className:"grid gap-2",children:v.map(_=>y.jsxs("div",{className:"card bg-base-100 shadow-md p-4",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("p",{className:"font-semibold",children:[Uo(_.hora)," - ",_.nombre]}),y.jsx("span",{className:`badge ${(_.estado||"pendiente")==="pendiente"?"badge-info":(_.estado||"pendiente")==="atendido"?"badge-success":"badge-error"}`,children:_.estado||"pendiente"})]}),y.jsxs("p",{className:"text-sm",children:["Servicio: ",_.servicio]})]},_.id))})]})]})}var vP={exports:{}},YB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XB=YB,JB=XB;function _P(){}function wP(){}wP.resetWarningCache=_P;var ZB=function(){function t(r,i,s,o,a,l){if(l!==JB){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wP,resetWarningCache:_P};return n.PropTypes=n,n};vP.exports=ZB();var e3=vP.exports;const j=Dh(e3);function EP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=EP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pd(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=EP(t))&&(r&&(r+=" "),r+=e);return r}const t3=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!n3(i,s)&&r||Object.defineProperty(t,n,s)},n3=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},r3=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},i3=(t,e)=>`/* Wrapped ${t}*/
${e}`,s3=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),o3=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),a3=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=i3.bind(null,r,e.toString());Object.defineProperty(i,"name",o3),Object.defineProperty(t,"toString",{...s3,value:i})},l3=(t,e,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=t;for(const i of Reflect.ownKeys(e))t3(t,e,i,n);return r3(t,e),a3(t,e,r),t};var u3=l3,Nm={exports:{}},c3=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};(function(t,e){var n=ku&&ku.__awaiter||function(o,a,l,c){return new(l||(l=Promise))(function(h,d){function p(_){try{v(c.next(_))}catch(I){d(I)}}function g(_){try{v(c.throw(_))}catch(I){d(I)}}function v(_){_.done?h(_.value):new l(function(I){I(_.value)}).then(p,g)}v((c=c.apply(o,a||[])).next())})},r=ku&&ku.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(c3);function s(o,a="maxAge"){let l,c,h;const d=()=>n(this,void 0,void 0,function*(){if(l!==void 0)return;const v=_=>n(this,void 0,void 0,function*(){h=i.default();const I=_[1][a]-Date.now();if(I<=0){o.delete(_[0]),h.resolve();return}return l=_[0],c=setTimeout(()=>{o.delete(_[0]),h&&h.resolve()},I),typeof c.unref=="function"&&c.unref(),h.promise});try{for(const _ of o)yield v(_)}catch{}l=void 0}),p=()=>{l=void 0,c!==void 0&&(clearTimeout(c),c=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},g=o.set.bind(o);return o.set=(v,_)=>{o.has(v)&&o.delete(v);const I=g(v,_);return l&&l===v&&p(),d(),I},d(),o}e.default=s,t.exports=s,t.exports.default=s})(Nm,Nm.exports);var h3=Nm.exports;const d3=u3,f3=h3,qf=new WeakMap,TP=new WeakMap,Ph=(t,{cacheKey:e,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&f3(n);const i=function(...s){const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s);return n.set(o,{data:l,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),l};return d3(i,t,{ignoreNonConfigurable:!0}),TP.set(i,n),i};Ph.decorator=(t={})=>(e,n,r)=>{const i=e[n];if(typeof i!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!qf.has(this)){const s=Ph(i,t);return qf.set(this,s),s}return qf.get(this)}};Ph.clear=t=>{const e=TP.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var p3=Ph;const SP=Dh(p3);function m3(t){return typeof t=="string"}function g3(t,e,n){return n.indexOf(t)===e}function y3(t){return t.toLowerCase()===t}function $E(t){return t.indexOf(",")===-1?t:t.split(",")}function Dm(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return Dm(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return Dm(n)}if(t.indexOf("-")===-1||!y3(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function v3(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,h=a;c<h.length;c++){var d=h[c];l=l.concat($E(d))}var p=navigator.language,g=p&&$E(p);o=o.concat(l,g)}return r&&o.push(s),o.filter(m3).map(Dm).filter(g3)}var _3=SP(v3,{cacheKey:JSON.stringify});function w3(t){return _3(t)[0]||null}var IP=SP(w3,{cacheKey:JSON.stringify});function br(t,e,n){return function(i,s){s===void 0&&(s=n);var o=t(i)+s;return e(o)}}function su(t){return function(n){return new Date(t(n).getTime()-1)}}function ou(t,e){return function(r){return[t(r),e(r)]}}function De(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function Ai(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function Cd(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function Bo(t){var e=De(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var E3=br(De,Bo,-100),AP=br(De,Bo,100),lv=su(AP),T3=br(De,lv,-100),xP=ou(Bo,lv);function xi(t){var e=De(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var bP=br(De,xi,-10),uv=br(De,xi,10),Rd=su(uv),PP=br(De,Rd,-10),CP=ou(xi,Rd);function $o(t){var e=De(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var RP=br(De,$o,-1),cv=br(De,$o,1),kd=su(cv),kP=br(De,kd,-1),S3=ou($o,kd);function hv(t,e){return function(r,i){i===void 0&&(i=e);var s=De(r),o=Ai(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function Ts(t){var e=De(t),n=Ai(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}var NP=hv(Ts,-1),dv=hv(Ts,1),au=su(dv),DP=hv(au,-1),I3=ou(Ts,au);function A3(t,e){return function(r,i){i===void 0&&(i=e);var s=De(r),o=Ai(r),a=Cd(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function lu(t){var e=De(t),n=Ai(t),r=Cd(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}var x3=A3(lu,1),fv=su(x3),b3=ou(lu,fv);function OP(t){return Cd(au(t))}var wa,be={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},to={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},P3=(wa={},wa[be.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],wa[be.HEBREW]=["he","he-IL"],wa[be.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],wa),pv=[0,1,2,3,4,5,6],Gf=new Map;function C3(t){return function(n,r){var i=n||IP();Gf.has(i)||Gf.set(i,new Map);var s=Gf.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function R3(t){var e=new Date(t);return new Date(e.setHours(12))}function Ss(t){return function(e,n){return C3(t)(e,R3(n))}}var k3={day:"numeric"},N3={day:"numeric",month:"long",year:"numeric"},D3={month:"long"},O3={month:"long",year:"numeric"},V3={weekday:"short"},L3={weekday:"long"},M3={year:"numeric"},j3=Ss(k3),F3=Ss(N3),U3=Ss(D3),VP=Ss(O3),B3=Ss(V3),$3=Ss(L3),Nd=Ss(M3),z3=pv[0],W3=pv[5],zE=pv[6];function Cl(t,e){e===void 0&&(e=be.ISO_8601);var n=t.getDay();switch(e){case be.ISO_8601:return(n+6)%7;case be.ISLAMIC:return(n+1)%7;case be.HEBREW:case be.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function H3(t){var e=Bo(t);return De(e)}function q3(t){var e=xi(t);return De(e)}function Om(t,e){e===void 0&&(e=be.ISO_8601);var n=De(t),r=Ai(t),i=t.getDate()-Cl(t,e);return new Date(n,r,i)}function G3(t,e){e===void 0&&(e=be.ISO_8601);var n=e===be.GREGORY?be.GREGORY:be.ISO_8601,r=Om(t,e),i=De(t)+1,s,o;do s=new Date(i,0,n===be.ISO_8601?4:1),o=Om(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function es(t,e){switch(t){case"century":return Bo(e);case"decade":return xi(e);case"year":return $o(e);case"month":return Ts(e);case"day":return lu(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function K3(t,e){switch(t){case"century":return E3(e);case"decade":return bP(e);case"year":return RP(e);case"month":return NP(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function LP(t,e){switch(t){case"century":return AP(e);case"decade":return uv(e);case"year":return cv(e);case"month":return dv(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Q3(t,e){switch(t){case"decade":return bP(e,-100);case"year":return RP(e,-10);case"month":return NP(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function Y3(t,e){switch(t){case"decade":return uv(e,100);case"year":return cv(e,10);case"month":return dv(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function MP(t,e){switch(t){case"century":return lv(e);case"decade":return Rd(e);case"year":return kd(e);case"month":return au(e);case"day":return fv(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function X3(t,e){switch(t){case"century":return T3(e);case"decade":return PP(e);case"year":return kP(e);case"month":return DP(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function J3(t,e){switch(t){case"decade":return PP(e,-100);case"year":return kP(e,-10);case"month":return DP(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function WE(t,e){switch(t){case"century":return xP(e);case"decade":return CP(e);case"year":return S3(e);case"month":return I3(e);case"day":return b3(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Z3(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[es(t,r[0]),MP(t,r[1])]}function jP(t,e,n){return e===void 0&&(e=Nd),n.map(function(r){return e(t,r)}).join(" – ")}function e9(t,e,n){return jP(t,e,xP(n))}function FP(t,e,n){return jP(t,e,CP(n))}function t9(t){return t.getDay()===new Date().getDay()}function UP(t,e){e===void 0&&(e=be.ISO_8601);var n=t.getDay();switch(e){case be.ISLAMIC:case be.HEBREW:return n===W3||n===zE;case be.ISO_8601:case be.GREGORY:return n===zE||n===z3;default:throw new Error("Unsupported calendar type.")}}var Vn="react-calendar__navigation";function n9(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?VP:r,s=t.formatYear,o=s===void 0?Nd:s,a=t.locale,l=t.maxDate,c=t.minDate,h=t.navigationAriaLabel,d=h===void 0?"":h,p=t.navigationAriaLive,g=t.navigationLabel,v=t.next2AriaLabel,_=v===void 0?"":v,I=t.next2Label,T=I===void 0?"»":I,w=t.nextAriaLabel,S=w===void 0?"":w,k=t.nextLabel,V=k===void 0?"›":k,M=t.prev2AriaLabel,x=M===void 0?"":M,E=t.prev2Label,b=E===void 0?"«":E,P=t.prevAriaLabel,N=P===void 0?"":P,D=t.prevLabel,C=D===void 0?"‹":D,ae=t.setActiveStartDate,Re=t.showDoubleView,oe=t.view,Y=t.views,B=Y.indexOf(oe)>0,W=oe!=="century",H=K3(oe,e),K=W?Q3(oe,e):void 0,J=LP(oe,e),de=W?Y3(oe,e):void 0,ht=function(){if(H.getFullYear()<0)return!0;var Oe=X3(oe,e);return c&&c>=Oe}(),Et=W&&function(){if(K.getFullYear()<0)return!0;var Oe=J3(oe,e);return c&&c>=Oe}(),Ge=l&&l<J,rt=W&&l&&l<de;function Xn(){ae(H,"prev")}function zt(){ae(K,"prev2")}function Jt(){ae(J,"next")}function Tt(){ae(de,"next2")}function Jn(Oe){var Zn=function(){switch(oe){case"century":return e9(a,o,Oe);case"decade":return FP(a,o,Oe);case"year":return o(a,Oe);case"month":return i(a,Oe);default:throw new Error("Invalid view: ".concat(oe,"."))}}();return g?g({date:Oe,label:Zn,locale:a||IP()||void 0,view:oe}):Zn}function bi(){var Oe="".concat(Vn,"__label");return X.createElement("button",{"aria-label":d,"aria-live":p,className:Oe,disabled:!B,onClick:n,style:{flexGrow:1},type:"button"},X.createElement("span",{className:"".concat(Oe,"__labelText ").concat(Oe,"__labelText--from")},Jn(e)),Re?X.createElement(X.Fragment,null,X.createElement("span",{className:"".concat(Oe,"__divider")}," – "),X.createElement("span",{className:"".concat(Oe,"__labelText ").concat(Oe,"__labelText--to")},Jn(J))):null)}return X.createElement("div",{className:Vn},b!==null&&W?X.createElement("button",{"aria-label":x,className:"".concat(Vn,"__arrow ").concat(Vn,"__prev2-button"),disabled:Et,onClick:zt,type:"button"},b):null,C!==null&&X.createElement("button",{"aria-label":N,className:"".concat(Vn,"__arrow ").concat(Vn,"__prev-button"),disabled:ht,onClick:Xn,type:"button"},C),bi(),V!==null&&X.createElement("button",{"aria-label":S,className:"".concat(Vn,"__arrow ").concat(Vn,"__next-button"),disabled:Ge,onClick:Jt,type:"button"},V),T!==null&&W?X.createElement("button",{"aria-label":_,className:"".concat(Vn,"__arrow ").concat(Vn,"__next2-button"),disabled:rt,onClick:Tt,type:"button"},T):null)}var no=function(){return no=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},no.apply(this,arguments)},r9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function HE(t){return"".concat(t,"%")}function mv(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=r9(t,["children","className","count","direction","offset","style","wrap"]);return X.createElement("div",no({className:n,style:no({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l),X.Children.map(e,function(c,h){var d=s&&h===0?HE(100*s/r):null;return X.cloneElement(c,no(no({},c.props),{style:{flexBasis:HE(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:d,marginInlineStart:d,marginInlineEnd:0}}))}))}var i9=function(){},s9=i9;const o9=Dh(s9);var Os;function a9(t,e,n){return e&&e>t?e:n&&n<t?n:t}function Rl(t,e){return e[0]<=t&&e[1]>=t}function l9(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function BP(t,e){return Rl(t[0],e)||Rl(t[1],e)}function qE(t,e,n){var r=BP(e,t),i=[];if(r){i.push(n);var s=Rl(t[0],e),o=Rl(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function u9(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function c9(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var g=t.dateType;if(!g)throw new Error("dateType is required when date is not an array of two dates");return WE(g,n)}();if(Rl(o,a)&&s.push("".concat(i,"--now")),!e||!u9(e))return s;var l=function(){if(Array.isArray(e))return e;var g=t.valueType;if(!g)throw new Error("valueType is required when value is not an array of two dates");return WE(g,e)}();l9(l,a)?s.push("".concat(i,"--active")):BP(l,a)&&s.push("".concat(i,"--hasActive"));var c=qE(l,a,"".concat(i,"--range"));s.push.apply(s,c);var h=Array.isArray(e)?e:[e];if(r&&h.length===1){var d=r>l[0]?[l[0],r]:[r,l[0]],p=qE(d,a,"".concat(i,"--hover"));s.push.apply(s,p)}return s}var h9=(Os={},Os[to.ARABIC]=be.ISLAMIC,Os[to.HEBREW]=be.HEBREW,Os[to.ISO_8601]=be.ISO_8601,Os[to.US]=be.GREGORY,Os);function d9(t){return t!==void 0&&t in to}var GE=!1;function Dd(t){if(d9(t)){var e=h9[t];return o9(GE,'Specifying calendarType="'.concat(t,'" is deprecated. Use calendarType="').concat(e,'" instead.')),GE=!0,e}return t}function Od(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,h=t.start,d=t.step,p=d===void 0?1:d,g=t.value,v=t.valueType,_=[],I=h;I<=o;I+=p){var T=i(I);_.push(c({classes:c9({date:T,dateType:s,hover:a,value:g,valueType:v}),date:T}))}return X.createElement(mv,{className:e,count:r,offset:l,wrap:!0},_)}function Vd(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,h=t.minDateTransform,d=t.onClick,p=t.onMouseOver,g=t.style,v=t.tileClassName,_=t.tileContent,I=t.tileDisabled,T=t.view,w=R.useMemo(function(){var k={activeStartDate:e,date:i,view:T};return typeof v=="function"?v(k):v},[e,i,v,T]),S=R.useMemo(function(){var k={activeStartDate:e,date:i,view:T};return typeof _=="function"?_(k):_},[e,i,_,T]);return X.createElement("button",{className:Pd(r,w),disabled:c&&h(c)>i||a&&l(a)<i||I&&I({activeStartDate:e,date:i,view:T}),onClick:d?function(k){return d(i,k)}:void 0,onFocus:p?function(){return p(i)}:void 0,onMouseOver:p?function(){return p(i)}:void 0,style:g,type:"button"},s?X.createElement("abbr",{"aria-label":s(o,i)},n):n,S)}var Vm=function(){return Vm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vm.apply(this,arguments)},f9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},KE="react-calendar__century-view__decades__decade";function p9(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Nd:i,o=f9(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(KE),Bo(a).getFullYear()!==r&&c.push("".concat(KE,"--neighboringCentury")),X.createElement(Vd,Vm({},o,{classes:c,maxDateTransform:Rd,minDateTransform:xi,view:"century"}),FP(l,s,a))}var Lm=function(){return Lm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lm.apply(this,arguments)},QE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function m9(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=QE(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=H3(e),l=a+(r?119:99);return X.createElement(Od,{className:"react-calendar__century-view__decades",dateTransform:xi,dateType:"decade",end:l,hover:n,renderTile:function(c){var h=c.date,d=QE(c,["date"]);return X.createElement(p9,Lm({key:h.getTime()},o,d,{activeStartDate:e,currentCentury:a,date:h}))},start:a,step:10,value:i,valueType:s})}var YE=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},g9=Object.values(be),y9=Object.values(to),Mm=["century","decade","year","month"],$P=j.oneOf(YE(YE([],g9,!0),y9,!0)),Ch=j.oneOfType([j.string,j.arrayOf(j.string)]),zP=function(e,n,r){var i=e,s=n,o=i[s];if(!o)return null;if(!(o instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, expected instance of `Date`."));var a=e.maxDate;return a&&o>a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, minDate cannot be larger than maxDate.")):null},WP=function(e,n,r){var i=e,s=n,o=i[s];if(!o)return null;if(!(o instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, expected instance of `Date`."));var a=e.minDate;return a&&o<a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, maxDate cannot be smaller than minDate.")):null},v9=j.oneOfType([j.func,j.exact({current:j.any})]),_9=j.arrayOf(j.oneOfType([j.instanceOf(Date),j.oneOf([null])]).isRequired),w9=j.oneOfType([j.instanceOf(Date),j.oneOf([null]),_9]);j.arrayOf(j.oneOf(Mm));var Rh=function(e,n,r){var i=e,s=n,o=i[s];return o!==void 0&&(typeof o!="string"||Mm.indexOf(o)===-1)?new Error("Invalid prop `".concat(n,"` of value `").concat(o,"` supplied to `").concat(r,"`, expected one of [").concat(Mm.map(function(a){return'"'.concat(a,'"')}).join(", "),"].")):null};Rh.isRequired=function(e,n,r,i,s){var o=e,a=n,l=o[a];return l?Rh(e,n,r):new Error("The prop `".concat(n,"` is marked as required in `").concat(r,"`, but its value is `").concat(l,"`."))};var E9=function(t){return j.arrayOf(t)},Ld={activeStartDate:j.instanceOf(Date).isRequired,hover:j.instanceOf(Date),locale:j.string,maxDate:WP,minDate:zP,onClick:j.func,onMouseOver:j.func,tileClassName:j.oneOfType([j.func,Ch]),tileContent:j.oneOfType([j.func,j.node]),value:w9,valueType:j.oneOf(["century","decade","year","month","day"]).isRequired};j.instanceOf(Date).isRequired,j.arrayOf(j.string.isRequired).isRequired,j.instanceOf(Date).isRequired,j.string,j.func,j.func,j.objectOf(j.oneOfType([j.string,j.number])),j.oneOfType([j.func,Ch]),j.oneOfType([j.func,j.node]),j.func;var kl=function(){return kl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kl.apply(this,arguments)},HP=function(e){function n(){return X.createElement(m9,kl({},e))}return X.createElement("div",{className:"react-calendar__century-view"},n())};HP.propTypes=kl(kl({},Ld),{showNeighboringCentury:j.bool});var jm=function(){return jm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jm.apply(this,arguments)},T9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},XE="react-calendar__decade-view__years__year";function S9(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Nd:i,o=T9(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(XE),xi(a).getFullYear()!==r&&c.push("".concat(XE,"--neighboringDecade")),X.createElement(Vd,jm({},o,{classes:c,maxDateTransform:kd,minDateTransform:$o,view:"decade"}),s(l,a))}var Fm=function(){return Fm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fm.apply(this,arguments)},JE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function I9(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=JE(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=q3(e),l=a+(r?11:9);return X.createElement(Od,{className:"react-calendar__decade-view__years",dateTransform:$o,dateType:"year",end:l,hover:n,renderTile:function(c){var h=c.date,d=JE(c,["date"]);return X.createElement(S9,Fm({key:h.getTime()},o,d,{activeStartDate:e,currentDecade:a,date:h}))},start:a,value:i,valueType:s})}var Nl=function(){return Nl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nl.apply(this,arguments)},qP=function(e){function n(){return X.createElement(I9,Nl({},e))}return X.createElement("div",{className:"react-calendar__decade-view"},n())};qP.propTypes=Nl(Nl({},Ld),{showNeighboringDecade:j.bool});var Um=function(){return Um=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Um.apply(this,arguments)},A9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},ZE=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},x9="react-calendar__year-view__months__month";function b9(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?U3:r,s=t.formatMonthYear,o=s===void 0?VP:s,a=A9(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return X.createElement(Vd,Um({},a,{classes:ZE(ZE([],n,!0),[x9],!1),formatAbbr:o,maxDateTransform:au,minDateTransform:Ts,view:"year"}),i(c,l))}var Bm=function(){return Bm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bm.apply(this,arguments)},eT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function P9(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=eT(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=De(e);return X.createElement(Od,{className:"react-calendar__year-view__months",dateTransform:function(c){var h=new Date;return h.setFullYear(l,c,1),Ts(h)},dateType:"month",end:a,hover:n,renderTile:function(c){var h=c.date,d=eT(c,["date"]);return X.createElement(b9,Bm({key:h.getTime()},s,d,{activeStartDate:e,date:h}))},start:o,value:r,valueType:i})}var kh=function(){return kh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kh.apply(this,arguments)},GP=function(e){function n(){return X.createElement(P9,kh({},e))}return X.createElement("div",{className:"react-calendar__year-view"},n())};GP.propTypes=kh({},Ld);var $m=function(){return $m=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$m.apply(this,arguments)},C9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Kf="react-calendar__month-view__days__day";function R9(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?j3:s,a=t.formatLongDate,l=a===void 0?F3:a,c=C9(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=Dd(e),d=c.date,p=c.locale,g=[];return r&&g.push.apply(g,r),g.push(Kf),UP(d,h)&&g.push("".concat(Kf,"--weekend")),d.getMonth()!==i&&g.push("".concat(Kf,"--neighboringMonth")),X.createElement(Vd,$m({},c,{classes:g,formatAbbr:l,maxDateTransform:fv,minDateTransform:lu,view:"month"}),o(p,d))}var zm=function(){return zm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zm.apply(this,arguments)},tT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function k9(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=tT(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=Dd(n),h=De(e),d=Ai(e),p=i||s,g=Cl(e,c),v=p?0:g,_=(p?-g:0)+1,I=function(){if(i)return _+6*7-1;var T=OP(e);if(s){var w=new Date;w.setFullYear(h,d,T),w.setHours(0,0,0,0);var S=7-Cl(w,c)-1;return T+S}return T}();return X.createElement(Od,{className:"react-calendar__month-view__days",count:7,dateTransform:function(T){var w=new Date;return w.setFullYear(h,d,T),lu(w)},dateType:"day",hover:r,end:I,renderTile:function(T){var w=T.date,S=tT(T,["date"]);return X.createElement(R9,zm({key:w.getTime()},l,S,{activeStartDate:e,calendarType:n,currentMonthIndex:d,date:w}))},offset:v,start:_,value:o,valueType:a})}var KP="react-calendar__month-view__weekdays",Qf="".concat(KP,"__weekday");function N9(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?B3:n,i=t.formatWeekday,s=i===void 0?$3:i,o=t.locale,a=t.onMouseLeave,l=Dd(e),c=new Date,h=Ts(c),d=De(h),p=Ai(h),g=[],v=1;v<=7;v+=1){var _=new Date(d,p,v-Cl(h,l)),I=s(o,_);g.push(X.createElement("div",{key:v,className:Pd(Qf,t9(_)&&"".concat(Qf,"--current"),UP(_,l)&&"".concat(Qf,"--weekend"))},X.createElement("abbr",{"aria-label":I,title:I},r(o,_).replace(".",""))))}return X.createElement(mv,{className:KP,count:7,onFocus:a,onMouseOver:a},g)}var Nh=function(){return Nh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nh.apply(this,arguments)},nT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},rT="react-calendar__tile";function D9(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=X.createElement("span",null,n);if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=nT(t,["date","onClickWeekNumber","weekNumber"]);return X.createElement("button",Nh({},a,{className:rT,onClick:function(l){return s(o,i,l)},type:"button"}),r)}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=nT(t,["date","onClickWeekNumber","weekNumber"]);return X.createElement("div",Nh({},a,{className:rT}),r)}}function O9(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=Dd(n),a=function(){if(s)return 6;var h=OP(e),d=Cl(e,o),p=h-(7-d);return 1+Math.ceil(p/7)}(),l=function(){for(var h=De(e),d=Ai(e),p=Cd(e),g=[],v=0;v<a;v+=1)g.push(Om(new Date(h,d,p+v*7),o));return g}(),c=l.map(function(h){return G3(h,o)});return X.createElement(mv,{className:"react-calendar__month-view__weekNumbers",count:a,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},c.map(function(h,d){var p=l[d];if(!p)throw new Error("date is not defined");return X.createElement(D9,{key:h,date:p,onClickWeekNumber:r,weekNumber:h})}))}var Dl=function(){return Dl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dl.apply(this,arguments)},V9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function L9(t){if(t)for(var e=0,n=Object.entries(P3);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return be.ISO_8601}var QP=function(e){var n=e.activeStartDate,r=e.locale,i=e.onMouseLeave,s=e.showFixedNumberOfWeeks,o=e.calendarType,a=o===void 0?L9(r):o,l=e.formatShortWeekday,c=e.formatWeekday,h=e.onClickWeekNumber,d=e.showWeekNumbers,p=V9(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function g(){return X.createElement(N9,{calendarType:a,formatShortWeekday:l,formatWeekday:c,locale:r,onMouseLeave:i})}function v(){return d?X.createElement(O9,{activeStartDate:n,calendarType:a,onClickWeekNumber:h,onMouseLeave:i,showFixedNumberOfWeeks:s}):null}function _(){return X.createElement(k9,Dl({calendarType:a},p))}var I="react-calendar__month-view";return X.createElement("div",{className:Pd(I,d?"".concat(I,"--weekNumbers"):"")},X.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},v(),X.createElement("div",{style:{flexGrow:1,width:"100%"}},g(),_())))};QP.propTypes=Dl(Dl({},Ld),{calendarType:$P,formatDay:j.func,formatLongDate:j.func,formatShortWeekday:j.func,formatWeekday:j.func,onClickWeekNumber:j.func,onMouseLeave:j.func,showFixedNumberOfWeeks:j.bool,showNeighboringMonth:j.bool,showWeekNumbers:j.bool});var ro=function(){return ro=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ro.apply(this,arguments)},sc="react-calendar",mo=["century","decade","year","month"],M9=["decade","year","month","day"],gv=new Date;gv.setFullYear(1,0,1);gv.setHours(0,0,0,0);var j9=new Date(864e13);function Na(t){return t instanceof Date?t:new Date(t)}function YP(t,e){return mo.slice(mo.indexOf(t),mo.indexOf(e)+1)}function F9(t,e,n){var r=YP(e,n);return r.indexOf(t)!==-1}function yv(t,e,n){return t&&F9(t,e,n)?t:n}function XP(t){var e=mo.indexOf(t);return M9[e]}function U9(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=Na(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function JP(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=U9(n,e);if(!o)return null;var a=XP(s),l=function(){switch(e){case 0:return es(a,o);case 1:return MP(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return a9(l,r,i)}var vv=function(t){return JP(t,0)},ZP=function(t){return JP(t,1)},B9=function(t){return[vv,ZP].map(function(e){return e(t)})};function eC(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=yv(o,i,n),l=vv({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return es(a,l)}function $9(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,h=t.view,d=yv(h,l,o),p=e||n;return p?es(d,p):eC({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:h||i})}function Yf(t){return t&&(!Array.isArray(t)||t.length===1)}function oc(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var _v=R.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,h=e.formatDay,d=e.formatLongDate,p=e.formatMonth,g=e.formatMonthYear,v=e.formatShortWeekday,_=e.formatWeekday,I=e.formatYear,T=e.goToRangeStartOnSelect,w=T===void 0?!0:T,S=e.inputRef,k=e.locale,V=e.maxDate,M=V===void 0?j9:V,x=e.maxDetail,E=x===void 0?"month":x,b=e.minDate,P=b===void 0?gv:b,N=e.minDetail,D=N===void 0?"century":N,C=e.navigationAriaLabel,ae=e.navigationAriaLive,Re=e.navigationLabel,oe=e.next2AriaLabel,Y=e.next2Label,B=e.nextAriaLabel,W=e.nextLabel,H=e.onActiveStartDateChange,K=e.onChange,J=e.onClickDay,de=e.onClickDecade,ht=e.onClickMonth,Et=e.onClickWeekNumber,Ge=e.onClickYear,rt=e.onDrillDown,Xn=e.onDrillUp,zt=e.onViewChange,Jt=e.prev2AriaLabel,Tt=e.prev2Label,Jn=e.prevAriaLabel,bi=e.prevLabel,Oe=e.returnValue,Zn=Oe===void 0?"start":Oe,Ot=e.selectRange,Is=e.showDoubleView,uu=e.showFixedNumberOfWeeks,zo=e.showNavigation,Wo=zo===void 0?!0:zo,cu=e.showNeighboringCentury,Md=e.showNeighboringDecade,As=e.showNeighboringMonth,Ho=As===void 0?!0:As,hu=e.showWeekNumbers,it=e.tileClassName,dt=e.tileContent,xs=e.tileDisabled,bs=e.value,qo=e.view,du=R.useState(a),Pi=du[0],Ci=du[1],Go=R.useState(null),Ko=Go[0],fu=Go[1],pu=R.useState(Array.isArray(l)?l.map(function(se){return se!==null?Na(se):null}):l!=null?Na(l):null),Ri=pu[0],mu=pu[1],Qo=R.useState(c),ki=Qo[0],Ps=Qo[1],st=r||Pi||$9({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:M,maxDetail:E,minDate:P,minDetail:D,value:bs,view:qo}),Be=function(){var se=function(){return Ot&&Yf(Ri)?Ri:bs!==void 0?bs:Ri}();return se?Array.isArray(se)?se.map(function(ye){return ye!==null?Na(ye):null}):se!==null?Na(se):null:null}(),Ni=XP(E),Ee=yv(qo||ki,D,E),Zt=YP(D,E),Di=Ot?Ko:null,Cs=Zt.indexOf(Ee)<Zt.length-1,ot=Zt.indexOf(Ee)>0,Yo=R.useCallback(function(se){var ye=function(){switch(Zn){case"start":return vv;case"end":return ZP;case"range":return B9;default:throw new Error("Invalid returnValue.")}}();return ye({maxDate:M,maxDetail:E,minDate:P,value:se})},[M,E,P,Zn]),er=R.useCallback(function(se,ye){Ci(se);var Ve={action:ye,activeStartDate:se,value:Be,view:Ee};H&&!oc(st,se)&&H(Ve)},[st,H,Be,Ee]),Nn=R.useCallback(function(se,ye){var Ve=function(){switch(Ee){case"century":return de;case"decade":return Ge;case"year":return ht;case"month":return J;default:throw new Error("Invalid view: ".concat(Ee,"."))}}();Ve&&Ve(se,ye)},[J,de,ht,Ge,Ee]),Xo=R.useCallback(function(se,ye){if(Cs){Nn(se,ye);var Ve=Zt[Zt.indexOf(Ee)+1];if(!Ve)throw new Error("Attempted to drill down from the lowest view.");Ci(se),Ps(Ve);var Wt={action:"drillDown",activeStartDate:se,value:Be,view:Ve};H&&!oc(st,se)&&H(Wt),zt&&Ee!==Ve&&zt(Wt),rt&&rt(Wt)}},[st,Cs,H,Nn,rt,zt,Be,Ee,Zt]),Jo=R.useCallback(function(){if(ot){var se=Zt[Zt.indexOf(Ee)-1];if(!se)throw new Error("Attempted to drill up from the highest view.");var ye=es(se,st);Ci(ye),Ps(se);var Ve={action:"drillUp",activeStartDate:ye,value:Be,view:se};H&&!oc(st,ye)&&H(Ve),zt&&Ee!==se&&zt(Ve),Xn&&Xn(Ve)}},[st,ot,H,Xn,zt,Be,Ee,Zt]),Dn=R.useCallback(function(se,ye){var Ve=Be;Nn(se,ye);var Wt=Ot&&!Yf(Ve),Vt;if(Ot)if(Wt)Vt=es(Ni,se);else{if(!Ve)throw new Error("previousValue is required");if(Array.isArray(Ve))throw new Error("previousValue must not be an array");Vt=Z3(Ni,Ve,se)}else Vt=Yo(se);var Vi=!Ot||Wt||w?eC({maxDate:M,maxDetail:E,minDate:P,minDetail:D,value:Vt,view:Ee}):null;ye.persist(),Ci(Vi),mu(Vt);var yu={action:"onChange",activeStartDate:Vi,value:Vt,view:Ee};if(H&&!oc(st,Vi)&&H(yu),K)if(Ot){var vu=Yf(Vt);if(!vu)K(Vt||null,ye);else if(i){if(Array.isArray(Vt))throw new Error("value must not be an array");K([Vt||null,null],ye)}}else K(Vt||null,ye)},[st,i,Yo,w,M,E,P,D,H,K,Nn,Ot,Be,Ni,Ee]);function jd(se){fu(se)}function Zo(){fu(null)}R.useImperativeHandle(n,function(){return{activeStartDate:st,drillDown:Xo,drillUp:Jo,onChange:Dn,setActiveStartDate:er,value:Be,view:Ee}},[st,Xo,Jo,Dn,er,Be,Ee]);function Oi(se){var ye=se?LP(Ee,st):es(Ee,st),Ve=Cs?Xo:Dn,Wt={activeStartDate:ye,hover:Di,locale:k,maxDate:M,minDate:P,onClick:Ve,onMouseOver:Ot?jd:void 0,tileClassName:it,tileContent:dt,tileDisabled:xs,value:Be,valueType:Ni};switch(Ee){case"century":return X.createElement(HP,ro({formatYear:I,showNeighboringCentury:cu},Wt));case"decade":return X.createElement(qP,ro({formatYear:I,showNeighboringDecade:Md},Wt));case"year":return X.createElement(GP,ro({formatMonth:p,formatMonthYear:g},Wt));case"month":return X.createElement(QP,ro({calendarType:s,formatDay:h,formatLongDate:d,formatShortWeekday:v,formatWeekday:_,onClickWeekNumber:Et,onMouseLeave:Ot?Zo:void 0,showFixedNumberOfWeeks:typeof uu<"u"?uu:Is,showNeighboringMonth:Ho,showWeekNumbers:hu},Wt));default:throw new Error("Invalid view: ".concat(Ee,"."))}}function gu(){return Wo?X.createElement(n9,{activeStartDate:st,drillUp:Jo,formatMonthYear:g,formatYear:I,locale:k,maxDate:M,minDate:P,navigationAriaLabel:C,navigationAriaLive:ae,navigationLabel:Re,next2AriaLabel:oe,next2Label:Y,nextAriaLabel:B,nextLabel:W,prev2AriaLabel:Jt,prev2Label:Tt,prevAriaLabel:Jn,prevLabel:bi,setActiveStartDate:er,showDoubleView:Is,view:Ee,views:Zt}):null}var ea=Array.isArray(Be)?Be:[Be];return X.createElement("div",{className:Pd(sc,Ot&&ea.length===1&&"".concat(sc,"--selectRange"),Is&&"".concat(sc,"--doubleView"),o),ref:S},gu(),X.createElement("div",{className:"".concat(sc,"__viewContainer"),onBlur:Ot?Zo:void 0,onMouseLeave:Ot?Zo:void 0},Oi(),Is?Oi(!0):null))}),iT=j.instanceOf(Date),sT=j.oneOfType([j.string,j.instanceOf(Date)]),oT=j.oneOfType([sT,E9(sT)]);_v.propTypes={activeStartDate:iT,allowPartialRange:j.bool,calendarType:$P,className:Ch,defaultActiveStartDate:iT,defaultValue:oT,defaultView:Rh,formatDay:j.func,formatLongDate:j.func,formatMonth:j.func,formatMonthYear:j.func,formatShortWeekday:j.func,formatWeekday:j.func,formatYear:j.func,goToRangeStartOnSelect:j.bool,inputRef:v9,locale:j.string,maxDate:WP,maxDetail:j.oneOf(mo),minDate:zP,minDetail:j.oneOf(mo),navigationAriaLabel:j.string,navigationAriaLive:j.oneOf(["off","polite","assertive"]),navigationLabel:j.func,next2AriaLabel:j.string,next2Label:j.node,nextAriaLabel:j.string,nextLabel:j.node,onActiveStartDateChange:j.func,onChange:j.func,onClickDay:j.func,onClickDecade:j.func,onClickMonth:j.func,onClickWeekNumber:j.func,onClickYear:j.func,onDrillDown:j.func,onDrillUp:j.func,onViewChange:j.func,prev2AriaLabel:j.string,prev2Label:j.node,prevAriaLabel:j.string,prevLabel:j.node,returnValue:j.oneOf(["start","end","range"]),selectRange:j.bool,showDoubleView:j.bool,showFixedNumberOfWeeks:j.bool,showNavigation:j.bool,showNeighboringCentury:j.bool,showNeighboringDecade:j.bool,showNeighboringMonth:j.bool,showWeekNumbers:j.bool,tileClassName:j.oneOfType([j.func,Ch]),tileContent:j.oneOfType([j.func,j.node]),tileDisabled:j.func,value:oT,view:Rh};function z9(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[i,s]=R.useState([]),[o,a]=R.useState([]),[l,c]=R.useState("");R.useEffect(()=>Ne(ve(le,"barberos"),_=>{const I=_.docs.map(T=>T.data().nombre);e(I),I.length>0&&!I.includes(n)&&r(I[0])}),[n]),R.useEffect(()=>{if(!n)return;const v=jt(ve(le,"disponibilidades"),ut("barbero","==",n)),_=jt(ve(le,"turnos"),ut("barbero","==",n)),I=Ne(v,w=>{s(w.docs.map(S=>({id:S.id,...S.data()})))}),T=Ne(_,w=>{a(w.docs.map(S=>({id:S.id,...S.data()})))});return()=>{I(),T()}},[n]);const h=v=>{c(v.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}))},d=({date:v,view:_})=>{if(_!=="month")return null;const I=v.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}),T=i.filter(k=>k.fecha===I);if(T.length===0)return null;const w=T.filter(k=>o.some(V=>V.fecha===k.fecha&&V.hora===k.hora)).length,S=T.length-w;return y.jsxs("div",{className:"mt-1 text-[10px]",children:[S>0&&y.jsx("span",{className:"text-green-600",children:"●"}),w>0&&y.jsx("span",{className:"text-red-600 ml-1",children:"●"})]})},p=R.useMemo(()=>i.filter(v=>v.fecha===l),[i,l]),g=async v=>{await eu(Ir(le,"disponibilidades",v))};return y.jsxs("div",{className:"space-y-4",children:[y.jsx("select",{className:"select select-bordered",value:n,onChange:v=>r(v.target.value),children:t.map(v=>y.jsx("option",{value:v,children:v},v))}),y.jsx(_v,{onClickDay:h,tileContent:d}),l&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("h4",{className:"font-semibold",children:["Horarios para ",l]}),p.length===0&&y.jsx("p",{children:"No hay horarios cargados."}),p.map(v=>{const _=o.some(I=>I.fecha===v.fecha&&I.hora===v.hora);return y.jsxs("div",{className:"card bg-base-100 shadow-md p-4 flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"font-semibold",children:[Uo(v.hora)," - ",v.servicio]}),_&&y.jsx("span",{className:"badge badge-success mt-2",children:"Agendado"})]}),y.jsx("button",{onClick:()=>g(v.id),className:"btn btn-xs btn-error",children:"Eliminar"})]},v.id)})]})]})}function tC(){const[t,e]=R.useState("");R.useEffect(()=>ed(fi,async i=>{if(i){const s=jt(ve(le,"barberos"),ut("email","==",i.email)),o=await $x(s);o.empty?e(i.email):e(o.docs[0].data().nombre)}}),[]);const n=async()=>{await DO(fi),window.location.hash="/"};return y.jsxs("div",{className:"dropdown dropdown-end",children:[y.jsxs("div",{tabIndex:0,role:"button",className:"btn btn-ghost flex items-center gap-2",children:[y.jsx("div",{className:"avatar placeholder",children:y.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-10",children:y.jsx("span",{className:"text-lg",children:t?t.charAt(0).toUpperCase():"?"})})}),y.jsx("span",{children:t})]}),y.jsxs("ul",{tabIndex:0,className:"mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52",children:[y.jsx("li",{className:"px-4 py-2 font-semibold",children:t}),y.jsx("li",{children:y.jsx("button",{onClick:n,children:"Cerrar sesión"})})]})]})}function nC({sections:t=[],current:e="",onSelect:n}){const[r,i]=R.useState(t.map(()=>!0)),s=o=>{i(a=>a.map((l,c)=>c===o?!l:l))};return y.jsx("aside",{className:"w-64 bg-base-200 min-h-screen p-4 space-y-4",children:t.map((o,a)=>y.jsxs("div",{className:"border border-base-300 rounded",children:[y.jsxs("button",{className:"w-full px-4 py-2 flex justify-between items-center font-semibold",onClick:()=>s(a),children:[y.jsx("span",{children:o.label}),y.jsx("span",{children:r[a]?"-":"+"})]}),r[a]&&y.jsx("ul",{className:"menu px-2 py-2",children:o.items.map(l=>y.jsx("li",{children:l.href?y.jsxs("a",{href:l.href,className:"flex items-center gap-2",children:[y.jsx(l.icon,{}),l.label]}):y.jsxs("a",{onClick:()=>n(l.id),className:`flex items-center gap-2 ${e===l.id?"active":""}`,children:[y.jsx(l.icon,{}),l.label]})},l.id))})]},o.label))})}function rC(t){return y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[y.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),y.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),y.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),y.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}function iC(t){return y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[y.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),y.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),y.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),y.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"6"}),y.jsx("line",{x1:"3",y1:"12",x2:"3",y2:"12"}),y.jsx("line",{x1:"3",y1:"18",x2:"3",y2:"18"})]})}function aT(t){return y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[y.jsx("path",{d:"M17 21v-2a4 4 0 0 0-3-3.87"}),y.jsx("path",{d:"M9 21v-2a4 4 0 0 1 3-3.87"}),y.jsx("path",{d:"M16 3.13a4 4 0 1 1-2.82 2.82"}),y.jsx("path",{d:"M6 3.13a4 4 0 1 0 2.82 2.82"})]})}function sC(t){return y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("polyline",{points:"12 6 12 12 16 14"})]})}function W9(t){return y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[y.jsx("path",{d:"M16 4H9a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),y.jsx("rect",{x:"9",y:"2",width:"6",height:"4",rx:"1",ry:"1"})]})}function H9(){const[t,e]=R.useState("nuevo"),n=[{label:"Turnos",items:[{id:"nuevo",label:"Nuevo turno",icon:rC},{id:"recientes",label:"Turnos recientes",icon:iC},{id:"porBarbero",label:"Turnos por barbero",icon:aT},{id:"horarios",label:"Horarios cargados",icon:sC}]},{label:"Gestionar",items:[{id:"servicios",label:"Servicios",href:"#/admin/servicios",icon:W9},{id:"barberos",label:"Barberos",href:"#/admin/barberos",icon:aT}]}],r=i=>{i==="servicios"||i==="barberos"?window.location.hash=`/admin/${i}`:e(i)};return y.jsxs("div",{className:"flex",children:[y.jsx(nC,{sections:n,current:t,onSelect:r}),y.jsxs("div",{className:"p-4 space-y-6 flex-1",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold",children:"Panel de Administración"}),y.jsx(tC,{})]}),t==="nuevo"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Nuevo turno"}),y.jsx(yP,{})]})}),t==="recientes"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Turnos recientes"}),y.jsx(KB,{})]})}),t==="porBarbero"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Turnos por barbero"}),y.jsx(QB,{})]})}),t==="horarios"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Horarios cargados"}),y.jsx(z9,{})]})})]})]})}function q9(){return y.jsx("div",{className:"hero min-h-screen bg-base-200 p-4",children:y.jsxs("div",{className:"hero-content flex-col w-full max-w-md",children:[y.jsx("img",{src:Qx,alt:"Logo Barbería",className:"w-32 mb-4 logo-main"}),y.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Agendar Turno"}),y.jsx("div",{className:"card w-full shadow-2xl bg-base-100",children:y.jsx("div",{className:"card-body",children:y.jsx(yP,{showSteps:!0})})})]})})}function G9(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[i,s]=R.useState("pendiente"),o=R.useRef(null),a=()=>{o.current&&o.current.scrollBy({left:-150,behavior:"smooth"})},l=()=>{o.current&&o.current.scrollBy({left:150,behavior:"smooth"})},c=R.useMemo(()=>{const v=GB();return Array.from(new Set(t.map(I=>I.fecha))).filter(I=>I>=v).sort()},[t]);R.useEffect(()=>{c.length>0&&!c.includes(n)&&r(c[0])},[c,n]),R.useEffect(()=>{let v,_;const I=ed(fi,T=>{if(T){const w=jt(ve(le,"barberos"),ut("email","==",T.email));_=Ne(w,S=>{if(S.empty)e([]);else{const k=S.docs[0].data().nombre,V=jt(ve(le,"turnos"),ut("barbero","==",k));v=Ne(V,M=>{e(M.docs.map(x=>({id:x.id,...x.data()})))})}})}else e([])});return()=>{v&&v(),_&&_(),I()}},[]);const h=async(v,_)=>{await zx(Ir(le,"turnos",v),{estado:_})},d=R.useMemo(()=>t.filter(v=>v.fecha===n),[t,n]),p=d.filter(v=>(v.estado||"pendiente")==="pendiente").length,g=d.filter(v=>(v.estado||"pendiente")==="atendido").length;return t.length===0?y.jsx("p",{children:"No tienes turnos asignados."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:a,className:"btn btn-square btn-sm mr-2",children:"❮"}),y.jsx("div",{ref:o,role:"tablist",className:"tabs tabs-boxed flex-1 overflow-x-auto whitespace-nowrap scroll-smooth",children:c.map(v=>y.jsx("button",{role:"tab",className:`tab ${n===v?"tab-active":""}`,onClick:()=>r(v),children:v},v))}),y.jsx("button",{onClick:l,className:"btn btn-square btn-sm ml-2",children:"❯"})]}),y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{role:"tablist",className:"tabs tabs-boxed",children:[{key:"pendiente",label:"Pendientes"},{key:"todos",label:"Todos"},{key:"atendido",label:"Atendidos"},{key:"cancelado",label:"Cancelados"}].map(v=>y.jsx("button",{role:"tab",className:`tab ${i===v.key?"tab-active":""}`,onClick:()=>s(v.key),children:v.label},v.key))})}),y.jsxs("div",{role:"alert",className:"alert alert-info justify-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-6 w-6 shrink-0 stroke-current",children:y.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),y.jsxs("span",{children:["Tienes ",d.length," turnos hoy. Pendientes: ",p," – ","Atendidos: ",g]})]}),y.jsx("div",{className:"grid gap-4",children:t.filter(v=>v.fecha===n).filter(v=>i==="todos"?!0:(v.estado||"pendiente")===i).map(v=>y.jsxs("div",{className:"card bg-base-100 shadow-md p-4 space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("p",{className:"font-semibold",children:v.nombre}),y.jsx("span",{className:`badge ${(v.estado||"pendiente")==="pendiente"?"badge-info":(v.estado||"pendiente")==="atendido"?"badge-success":"badge-error"}`,children:v.estado||"pendiente"})]}),y.jsxs("p",{children:[v.fecha," ",Uo(v.hora)," - ",v.servicio]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx("button",{disabled:(v.estado||"pendiente")!=="pendiente",onClick:()=>h(v.id,"atendido"),className:"btn btn-xs btn-success",children:"✅ Marcar como atendido"}),y.jsx("button",{disabled:(v.estado||"pendiente")!=="pendiente",onClick:()=>confirm("¿Cancelar este turno?")&&h(v.id,"cancelado"),className:"btn btn-xs btn-error",children:"❌ Cancelar turno"})]})]},v.id))})]})}function K9(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(""),[l,c]=R.useState([]),[h,d]=R.useState(!1),[p,g]=R.useState({message:"",type:""}),v=t&&n&&i&&o&&!h;R.useEffect(()=>{const I=Ne(ve(le,"servicios"),S=>{c(S.docs.map(k=>({id:k.id,...k.data()})))});let T;const w=ed(fi,S=>{if(S){const k=jt(ve(le,"barberos"),ut("email","==",S.email));T=Ne(k,V=>{V.empty||e(V.docs[0].data().nombre)})}});return()=>{I(),w(),T&&T()}},[]),R.useEffect(()=>{if(p.message){const I=setTimeout(()=>g({message:"",type:""}),3e3);return()=>clearTimeout(I)}},[p]);const _=async()=>{if(!t||!n||!i||!o){g({message:"Complete todos los campos",type:"error"});return}if(!h)try{d(!0),await wd(ve(le,"disponibilidades"),{barbero:t,servicio:n,fecha:i,hora:o,timestamp:new Date}),g({message:"Horario guardado correctamente",type:"success"}),r(""),s(""),a("")}catch(I){console.error(I),g({message:"Hubo un error al guardar",type:"error"})}finally{d(!1)}};return y.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[y.jsxs("p",{className:"font-semibold",children:["Barbero: ",t||"Cargando..."]}),y.jsxs("select",{className:"border p-2 rounded",value:n,onChange:I=>r(I.target.value),children:[y.jsx("option",{value:"",children:"Seleccione un servicio"}),l.map(I=>y.jsx("option",{value:I.nombre,children:I.nombre},I.id))]}),y.jsx("input",{type:"date",className:"border p-2 rounded",value:i,onChange:I=>s(I.target.value)}),y.jsx("input",{type:"time",className:"border p-2 rounded",value:o,onChange:I=>a(I.target.value)}),y.jsx("button",{onClick:_,className:"btn btn-primary",disabled:!v,children:h?y.jsx("span",{className:"loading loading-spinner"}):"Agregar horario"}),p.message&&y.jsx("div",{className:"toast toast-top toast-end",children:y.jsx("div",{className:`alert ${p.type==="error"?"alert-error":"alert-success"}`,children:y.jsx("span",{children:p.message})})})]})}function Q9(){const[t,e]=R.useState([]),[n,r]=R.useState([]),[i,s]=R.useState("");R.useEffect(()=>{let h,d,p;const g=ed(fi,v=>{if(v){const _=jt(ve(le,"barberos"),ut("email","==",v.email));p=Ne(_,I=>{if(I.empty)e([]);else{const T=I.docs[0].data().nombre,w=jt(ve(le,"disponibilidades"),ut("barbero","==",T));h=Ne(w,k=>{e(k.docs.map(V=>({id:V.id,...V.data()})))});const S=jt(ve(le,"turnos"),ut("barbero","==",T));d=Ne(S,k=>{r(k.docs.map(V=>({id:V.id,...V.data()})))})}})}else e([])});return()=>{h&&h(),d&&d(),p&&p(),g()}},[]);const o=h=>{s(h.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}))},a=({date:h,view:d})=>{if(d!=="month")return null;const p=h.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}),g=t.filter(I=>I.fecha===p);if(g.length===0)return null;const v=g.filter(I=>n.some(T=>T.fecha===I.fecha&&T.hora===I.hora)).length,_=g.length-v;return y.jsxs("div",{className:"mt-1 text-[10px]",children:[_>0&&y.jsx("span",{className:"text-green-600",children:"●"}),v>0&&y.jsx("span",{className:"text-red-600 ml-1",children:"●"})]})},l=R.useMemo(()=>t.filter(h=>h.fecha===i),[t,i]),c=async h=>{await eu(Ir(le,"disponibilidades",h))};return y.jsxs("div",{className:"space-y-4",children:[y.jsx(_v,{onClickDay:o,tileContent:a}),i&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("h4",{className:"font-semibold",children:["Horarios para ",i]}),l.length===0&&y.jsx("p",{children:"No hay horarios cargados."}),l.map(h=>{const d=n.some(p=>p.fecha===h.fecha&&p.hora===h.hora);return y.jsxs("div",{className:"card bg-base-100 shadow-md p-4 flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"font-semibold",children:[Uo(h.hora)," - ",h.servicio]}),d&&y.jsx("span",{className:"badge badge-success mt-2",children:"Agendado"})]}),y.jsx("button",{onClick:()=>c(h.id),className:"btn btn-xs btn-error",children:"Eliminar"})]},h.id)})]})]})}function Y9(){const[t,e]=R.useState("cargar"),n=[{label:"Horarios",items:[{id:"cargar",label:"Cargar horario",icon:rC},{id:"cargados",label:"Horarios cargados",icon:sC}]},{label:"Turnos",items:[{id:"turnos",label:"Turnos asignados",icon:iC}]}],r=i=>e(i);return y.jsxs("div",{className:"flex",children:[y.jsx(nC,{sections:n,current:t,onSelect:r}),y.jsxs("div",{className:"p-4 space-y-6 flex-1",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold",children:"Panel del Barbero"}),y.jsx(tC,{})]}),t==="cargar"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Cargar horarios disponibles"}),y.jsx(K9,{})]})}),t==="cargados"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Horarios cargados"}),y.jsx(Q9,{})]})}),t==="turnos"&&y.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:y.jsxs("div",{className:"card-body",children:[y.jsx("h3",{className:"card-title",children:"Mis turnos asignados"}),y.jsx(G9,{})]})})]})]})}function X9(){return y.jsx(J1,{children:y.jsxs(W1,{children:[y.jsx(En,{path:"/",element:y.jsx(MB,{})}),y.jsx(En,{path:"/login",element:y.jsx(Ij,{})}),y.jsx(En,{path:"/servicios",element:y.jsx(WB,{})}),y.jsx(En,{path:"/barberos",element:y.jsx(HB,{})}),y.jsx(En,{path:"/barberos/:id",element:y.jsx(qB,{})}),y.jsx(En,{path:"/agendar",element:y.jsx(q9,{})}),y.jsx(En,{path:"/barbero",element:y.jsx(Y9,{})}),y.jsx(En,{path:"/admin",element:y.jsx(H9,{})}),y.jsx(En,{path:"/admin/servicios",element:y.jsx(UB,{})}),y.jsx(En,{path:"/admin/barberos",element:y.jsx(zB,{})})]})})}function J9(){return y.jsx(X9,{})}Xf.createRoot(document.getElementById("root")).render(y.jsx(X.StrictMode,{children:y.jsx(J9,{})}));
