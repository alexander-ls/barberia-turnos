function Z8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aC={exports:{}},_d={},uC={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=Symbol.for("react.element"),J8=Symbol.for("react.portal"),eb=Symbol.for("react.fragment"),tb=Symbol.for("react.strict_mode"),nb=Symbol.for("react.profiler"),rb=Symbol.for("react.provider"),ib=Symbol.for("react.context"),ob=Symbol.for("react.forward_ref"),sb=Symbol.for("react.suspense"),ab=Symbol.for("react.memo"),ub=Symbol.for("react.lazy"),w2=Symbol.iterator;function lb(t){return t===null||typeof t!="object"?null:(t=w2&&t[w2]||t["@@iterator"],typeof t=="function"?t:null)}var lC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cC=Object.assign,hC={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||lC}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fC(){}fC.prototype=Ga.prototype;function Zg(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||lC}var Jg=Zg.prototype=new fC;Jg.constructor=Zg;cC(Jg,Ga.prototype);Jg.isPureReactComponent=!0;var E2=Array.isArray,dC=Object.prototype.hasOwnProperty,e0={current:null},pC={key:!0,ref:!0,__self:!0,__source:!0};function mC(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)dC.call(e,r)&&!pC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:tc,type:t,key:o,ref:s,props:i,_owner:e0.current}}function cb(t,e){return{$$typeof:tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function t0(t){return typeof t=="object"&&t!==null&&t.$$typeof===tc}function hb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A2=/\/+/g;function Bp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hb(""+t.key):e.toString(36)}function Fh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case tc:case J8:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Bp(s,0):r,E2(i)?(n="",t!=null&&(n=t.replace(A2,"$&/")+"/"),Fh(i,e,n,"",function(l){return l})):i!=null&&(t0(i)&&(i=cb(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(A2,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",E2(t))for(var a=0;a<t.length;a++){o=t[a];var u=r+Bp(o,a);s+=Fh(o,e,n,u,i)}else if(u=lb(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=r+Bp(o,a++),s+=Fh(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function nh(t,e,n){if(t==null)return t;var r=[],i=0;return Fh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function fb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},jh={transition:null},db={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:jh,ReactCurrentOwner:e0};function gC(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:nh,forEach:function(t,e,n){nh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nh(t,function(){e++}),e},toArray:function(t){return nh(t,function(e){return e})||[]},only:function(t){if(!t0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Ga;_e.Fragment=eb;_e.Profiler=nb;_e.PureComponent=Zg;_e.StrictMode=tb;_e.Suspense=sb;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=db;_e.act=gC;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cC({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=e0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)dC.call(e,u)&&!pC.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:tc,type:t.type,key:i,ref:o,props:r,_owner:s}};_e.createContext=function(t){return t={$$typeof:ib,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rb,_context:t},t.Consumer=t};_e.createElement=mC;_e.createFactory=function(t){var e=mC.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:ob,render:t}};_e.isValidElement=t0;_e.lazy=function(t){return{$$typeof:ub,_payload:{_status:-1,_result:t},_init:fb}};_e.memo=function(t,e){return{$$typeof:ab,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=jh.transition;jh.transition={};try{t()}finally{jh.transition=e}};_e.unstable_act=gC;_e.useCallback=function(t,e){return En.current.useCallback(t,e)};_e.useContext=function(t){return En.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return En.current.useDeferredValue(t)};_e.useEffect=function(t,e){return En.current.useEffect(t,e)};_e.useId=function(){return En.current.useId()};_e.useImperativeHandle=function(t,e,n){return En.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return En.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return En.current.useReducer(t,e,n)};_e.useRef=function(t){return En.current.useRef(t)};_e.useState=function(t){return En.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return En.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return En.current.useTransition()};_e.version="18.3.1";uC.exports=_e;var N=uC.exports;const Y=vd(N),pb=Z8({__proto__:null,default:Y},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=N,gb=Symbol.for("react.element"),yb=Symbol.for("react.fragment"),vb=Object.prototype.hasOwnProperty,_b=mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wb={key:!0,ref:!0,__self:!0,__source:!0};function yC(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)vb.call(e,r)&&!wb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gb,type:t,key:o,ref:s,props:i,_owner:_b.current}}_d.Fragment=yb;_d.jsx=yC;_d.jsxs=yC;aC.exports=_d;var C=aC.exports,G1={},vC={exports:{}},Wn={},_C={exports:{}},wC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Z){var J=G.length;G.push(Z);e:for(;0<J;){var W=J-1>>>1,re=G[W];if(0<i(re,Z))G[W]=Z,G[J]=re,J=W;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Z=G[0],J=G.pop();if(J!==Z){G[0]=J;e:for(var W=0,re=G.length,se=re>>>1;W<se;){var we=2*(W+1)-1,We=G[we],ve=we+1,Ue=G[ve];if(0>i(We,J))ve<re&&0>i(Ue,We)?(G[W]=Ue,G[ve]=J,W=ve):(G[W]=We,G[we]=J,W=we);else if(ve<re&&0>i(Ue,J))G[W]=Ue,G[ve]=J,W=ve;else break e}}return Z}function i(G,Z){var J=G.sortIndex-Z.sortIndex;return J!==0?J:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,h=null,d=3,p=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var Z=n(l);Z!==null;){if(Z.callback===null)r(l);else if(Z.startTime<=G)r(l),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(l)}}function S(G){if(y=!1,A(G),!m)if(n(u)!==null)m=!0,de(x);else{var Z=n(l);Z!==null&&Fe(S,Z.startTime-G)}}function x(G,Z){m=!1,y&&(y=!1,_(I),I=-1),p=!0;var J=d;try{for(A(Z),h=n(u);h!==null&&(!(h.expirationTime>Z)||G&&!k());){var W=h.callback;if(typeof W=="function"){h.callback=null,d=h.priorityLevel;var re=W(h.expirationTime<=Z);Z=t.unstable_now(),typeof re=="function"?h.callback=re:h===n(u)&&r(u),A(Z)}else r(u);h=n(u)}if(h!==null)var se=!0;else{var we=n(l);we!==null&&Fe(S,we.startTime-Z),se=!1}return se}finally{h=null,d=J,p=!1}}var M=!1,T=null,I=-1,R=5,O=-1;function k(){return!(t.unstable_now()-O<R)}function L(){if(T!==null){var G=t.unstable_now();O=G;var Z=!0;try{Z=T(!0,G)}finally{Z?D():(M=!1,T=null)}}else M=!1}var D;if(typeof v=="function")D=function(){v(L)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ge=ne.port2;ne.port1.onmessage=L,D=function(){ge.postMessage(null)}}else D=function(){w(L,0)};function de(G){T=G,M||(M=!0,D())}function Fe(G,Z){I=w(function(){G(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,de(x))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(d){case 1:case 2:case 3:var Z=3;break;default:Z=d}var J=d;d=Z;try{return G()}finally{d=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=d;d=G;try{return Z()}finally{d=J}},t.unstable_scheduleCallback=function(G,Z,J){var W=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,G){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=J+re,G={id:c++,callback:Z,priorityLevel:G,startTime:J,expirationTime:re,sortIndex:-1},J>W?(G.sortIndex=J,e(l,G),n(u)===null&&G===n(l)&&(y?(_(I),I=-1):y=!0,Fe(S,J-W))):(G.sortIndex=re,e(u,G),m||p||(m=!0,de(x))),G},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(G){var Z=d;return function(){var J=d;d=Z;try{return G.apply(this,arguments)}finally{d=J}}}})(wC);_C.exports=wC;var Eb=_C.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab=N,Hn=Eb;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EC=new Set,vl={};function Cs(t,e){Pa(t,e),Pa(t+"Capture",e)}function Pa(t,e){for(vl[t]=e,t=0;t<e.length;t++)EC.add(e[t])}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X1=Object.prototype.hasOwnProperty,Cb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C2={},I2={};function Ib(t){return X1.call(I2,t)?!0:X1.call(C2,t)?!1:Cb.test(t)?I2[t]=!0:(C2[t]=!0,!1)}function Tb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sb(t,e,n,r){if(e===null||typeof e>"u"||Tb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var n0=/[\-:]([a-z])/g;function r0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(n0,r0);Yt[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(n0,r0);Yt[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(n0,r0);Yt[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function i0(t,e,n,r){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sb(e,n,i,r)&&(n=null),r||i===null?Ib(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ii=Ab.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rh=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Qs=Symbol.for("react.fragment"),o0=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),AC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),s0=Symbol.for("react.forward_ref"),Y1=Symbol.for("react.suspense"),q1=Symbol.for("react.suspense_list"),a0=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),IC=Symbol.for("react.offscreen"),T2=Symbol.iterator;function Cu(t){return t===null||typeof t!="object"?null:(t=T2&&t[T2]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,Fp;function Vu(t){if(Fp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fp=e&&e[1]||""}return`
`+Fp+t}var jp=!1;function Up(t,e){if(!t||jp)return"";jp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{jp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vu(t):""}function bb(t){switch(t.tag){case 5:return Vu(t.type);case 16:return Vu("Lazy");case 13:return Vu("Suspense");case 19:return Vu("SuspenseList");case 0:case 2:case 15:return t=Up(t.type,!1),t;case 11:return t=Up(t.type.render,!1),t;case 1:return t=Up(t.type,!0),t;default:return""}}function Q1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qs:return"Fragment";case qs:return"Portal";case K1:return"Profiler";case o0:return"StrictMode";case Y1:return"Suspense";case q1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CC:return(t.displayName||"Context")+".Consumer";case AC:return(t._context.displayName||"Context")+".Provider";case s0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case a0:return e=t.displayName||null,e!==null?e:Q1(t.type)||"Memo";case Mi:e=t._payload,t=t._init;try{return Q1(t(e))}catch{}}return null}function Rb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q1(e);case 8:return e===o0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pb(t){var e=TC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ih(t){t._valueTracker||(t._valueTracker=Pb(t))}function SC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Z1(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function S2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=uo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bC(t,e){e=e.checked,e!=null&&i0(t,"checked",e,!1)}function J1(t,e){bC(t,e);var n=uo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?em(t,e.type,n):e.hasOwnProperty("defaultValue")&&em(t,e.type,uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function em(t,e,n){(e!=="number"||pf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bu=Array.isArray;function va(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+uo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function R2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Bu(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:uo(n)}}function RC(t,e){var n=uo(e.value),r=uo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function P2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oh,OC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oh=oh||document.createElement("div"),oh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _l(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ob=["Webkit","ms","Moz","O"];Object.keys(Ju).forEach(function(t){Ob.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ju[e]=Ju[t]})});function NC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ju.hasOwnProperty(t)&&Ju[t]?(""+e).trim():e+"px"}function DC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Nb=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rm(t,e){if(e){if(Nb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function im(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var om=null;function u0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sm=null,_a=null,wa=null;function O2(t){if(t=ic(t)){if(typeof sm!="function")throw Error($(280));var e=t.stateNode;e&&(e=Id(e),sm(t.stateNode,t.type,e))}}function xC(t){_a?wa?wa.push(t):wa=[t]:_a=t}function kC(){if(_a){var t=_a,e=wa;if(wa=_a=null,O2(t),e)for(t=0;t<e.length;t++)O2(e[t])}}function MC(t,e){return t(e)}function LC(){}var Hp=!1;function VC(t,e,n){if(Hp)return t(e,n);Hp=!0;try{return MC(t,e,n)}finally{Hp=!1,(_a!==null||wa!==null)&&(LC(),kC())}}function wl(t,e){var n=t.stateNode;if(n===null)return null;var r=Id(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var am=!1;if(pi)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){am=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{am=!1}function Db(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var el=!1,mf=null,gf=!1,um=null,xb={onError:function(t){el=!0,mf=t}};function kb(t,e,n,r,i,o,s,a,u){el=!1,mf=null,Db.apply(xb,arguments)}function Mb(t,e,n,r,i,o,s,a,u){if(kb.apply(this,arguments),el){if(el){var l=mf;el=!1,mf=null}else throw Error($(198));gf||(gf=!0,um=l)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N2(t){if(Is(t)!==t)throw Error($(188))}function Lb(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return N2(i),t;if(o===r)return N2(i),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function FC(t){return t=Lb(t),t!==null?jC(t):null}function jC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jC(t);if(e!==null)return e;t=t.sibling}return null}var UC=Hn.unstable_scheduleCallback,D2=Hn.unstable_cancelCallback,Vb=Hn.unstable_shouldYield,Bb=Hn.unstable_requestPaint,dt=Hn.unstable_now,Fb=Hn.unstable_getCurrentPriorityLevel,l0=Hn.unstable_ImmediatePriority,HC=Hn.unstable_UserBlockingPriority,yf=Hn.unstable_NormalPriority,jb=Hn.unstable_LowPriority,zC=Hn.unstable_IdlePriority,wd=null,Mr=null;function Ub(t){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(wd,t,void 0,(t.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:Wb,Hb=Math.log,zb=Math.LN2;function Wb(t){return t>>>=0,t===0?32:31-(Hb(t)/zb|0)|0}var sh=64,ah=4194304;function Fu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Fu(a):(o&=s,o!==0&&(r=Fu(o)))}else s=n&~i,s!==0?r=Fu(s):o!==0&&(r=Fu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yr(e),i=1<<n,r|=t[n],e&=~i;return r}function $b(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-yr(o),a=1<<s,u=i[s];u===-1?(!(a&n)||a&r)&&(i[s]=$b(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WC(){var t=sh;return sh<<=1,!(sh&4194240)&&(sh=64),t}function zp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yr(e),t[e]=n}function Xb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function c0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function $C(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GC,h0,XC,KC,YC,cm=!1,uh=[],Yi=null,qi=null,Qi=null,El=new Map,Al=new Map,Bi=[],Kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x2(t,e){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":El.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function Tu(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ic(e),e!==null&&h0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Yb(t,e,n,r,i){switch(e){case"focusin":return Yi=Tu(Yi,t,e,n,r,i),!0;case"dragenter":return qi=Tu(qi,t,e,n,r,i),!0;case"mouseover":return Qi=Tu(Qi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return El.set(o,Tu(El.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Al.set(o,Tu(Al.get(o)||null,t,e,n,r,i)),!0}return!1}function qC(t){var e=ts(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=BC(n),e!==null){t.blockedOn=e,YC(t.priority,function(){XC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);om=r,n.target.dispatchEvent(r),om=null}else return e=ic(n),e!==null&&h0(e),t.blockedOn=n,!1;e.shift()}return!0}function k2(t,e,n){Uh(t)&&n.delete(e)}function qb(){cm=!1,Yi!==null&&Uh(Yi)&&(Yi=null),qi!==null&&Uh(qi)&&(qi=null),Qi!==null&&Uh(Qi)&&(Qi=null),El.forEach(k2),Al.forEach(k2)}function Su(t,e){t.blockedOn===e&&(t.blockedOn=null,cm||(cm=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,qb)))}function Cl(t){function e(i){return Su(i,t)}if(0<uh.length){Su(uh[0],t);for(var n=1;n<uh.length;n++){var r=uh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yi!==null&&Su(Yi,t),qi!==null&&Su(qi,t),Qi!==null&&Su(Qi,t),El.forEach(e),Al.forEach(e),n=0;n<Bi.length;n++)r=Bi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bi.length&&(n=Bi[0],n.blockedOn===null);)qC(n),n.blockedOn===null&&Bi.shift()}var Ea=Ii.ReactCurrentBatchConfig,_f=!0;function Qb(t,e,n,r){var i=Me,o=Ea.transition;Ea.transition=null;try{Me=1,f0(t,e,n,r)}finally{Me=i,Ea.transition=o}}function Zb(t,e,n,r){var i=Me,o=Ea.transition;Ea.transition=null;try{Me=4,f0(t,e,n,r)}finally{Me=i,Ea.transition=o}}function f0(t,e,n,r){if(_f){var i=hm(t,e,n,r);if(i===null)Jp(t,e,r,wf,n),x2(t,r);else if(Yb(i,t,e,n,r))r.stopPropagation();else if(x2(t,r),e&4&&-1<Kb.indexOf(t)){for(;i!==null;){var o=ic(i);if(o!==null&&GC(o),o=hm(t,e,n,r),o===null&&Jp(t,e,r,wf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Jp(t,e,r,null,n)}}var wf=null;function hm(t,e,n,r){if(wf=null,t=u0(r),t=ts(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wf=t,null}function QC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fb()){case l0:return 1;case HC:return 4;case yf:case jb:return 16;case zC:return 536870912;default:return 16}default:return 16}}var Wi=null,d0=null,Hh=null;function ZC(){if(Hh)return Hh;var t,e=d0,n=e.length,r,i="value"in Wi?Wi.value:Wi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Hh=i.slice(t,1<r?1-r:void 0)}function zh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lh(){return!0}function M2(){return!1}function $n(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lh:M2,this.isPropagationStopped=M2,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),e}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p0=$n(Xa),rc=at({},Xa,{view:0,detail:0}),Jb=$n(rc),Wp,$p,bu,Ed=at({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bu&&(bu&&t.type==="mousemove"?(Wp=t.screenX-bu.screenX,$p=t.screenY-bu.screenY):$p=Wp=0,bu=t),Wp)},movementY:function(t){return"movementY"in t?t.movementY:$p}}),L2=$n(Ed),eR=at({},Ed,{dataTransfer:0}),tR=$n(eR),nR=at({},rc,{relatedTarget:0}),Gp=$n(nR),rR=at({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),iR=$n(rR),oR=at({},Xa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sR=$n(oR),aR=at({},Xa,{data:0}),V2=$n(aR),uR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cR[t])?!!e[t]:!1}function m0(){return hR}var fR=at({},rc,{key:function(t){if(t.key){var e=uR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m0,charCode:function(t){return t.type==="keypress"?zh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dR=$n(fR),pR=at({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B2=$n(pR),mR=at({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m0}),gR=$n(mR),yR=at({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),vR=$n(yR),_R=at({},Ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wR=$n(_R),ER=[9,13,27,32],g0=pi&&"CompositionEvent"in window,tl=null;pi&&"documentMode"in document&&(tl=document.documentMode);var AR=pi&&"TextEvent"in window&&!tl,JC=pi&&(!g0||tl&&8<tl&&11>=tl),F2=" ",j2=!1;function e4(t,e){switch(t){case"keyup":return ER.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zs=!1;function CR(t,e){switch(t){case"compositionend":return t4(e);case"keypress":return e.which!==32?null:(j2=!0,F2);case"textInput":return t=e.data,t===F2&&j2?null:t;default:return null}}function IR(t,e){if(Zs)return t==="compositionend"||!g0&&e4(t,e)?(t=ZC(),Hh=d0=Wi=null,Zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JC&&e.locale!=="ko"?null:e.data;default:return null}}var TR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TR[t.type]:e==="textarea"}function n4(t,e,n,r){xC(r),e=Ef(e,"onChange"),0<e.length&&(n=new p0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,Il=null;function SR(t){d4(t,0)}function Ad(t){var e=ta(t);if(SC(e))return t}function bR(t,e){if(t==="change")return e}var r4=!1;if(pi){var Xp;if(pi){var Kp="oninput"in document;if(!Kp){var H2=document.createElement("div");H2.setAttribute("oninput","return;"),Kp=typeof H2.oninput=="function"}Xp=Kp}else Xp=!1;r4=Xp&&(!document.documentMode||9<document.documentMode)}function z2(){nl&&(nl.detachEvent("onpropertychange",i4),Il=nl=null)}function i4(t){if(t.propertyName==="value"&&Ad(Il)){var e=[];n4(e,Il,t,u0(t)),VC(SR,e)}}function RR(t,e,n){t==="focusin"?(z2(),nl=e,Il=n,nl.attachEvent("onpropertychange",i4)):t==="focusout"&&z2()}function PR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ad(Il)}function OR(t,e){if(t==="click")return Ad(e)}function NR(t,e){if(t==="input"||t==="change")return Ad(e)}function DR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:DR;function Tl(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X1.call(e,i)||!wr(t[i],e[i]))return!1}return!0}function W2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $2(t,e){var n=W2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W2(n)}}function o4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?o4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s4(){for(var t=window,e=pf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pf(t.document)}return e}function y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xR(t){var e=s4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&o4(n.ownerDocument.documentElement,n)){if(r!==null&&y0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=$2(n,o);var s=$2(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kR=pi&&"documentMode"in document&&11>=document.documentMode,Js=null,fm=null,rl=null,dm=!1;function G2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dm||Js==null||Js!==pf(r)||(r=Js,"selectionStart"in r&&y0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Tl(rl,r)||(rl=r,r=Ef(fm,"onSelect"),0<r.length&&(e=new p0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Js)))}function ch(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:ch("Animation","AnimationEnd"),animationiteration:ch("Animation","AnimationIteration"),animationstart:ch("Animation","AnimationStart"),transitionend:ch("Transition","TransitionEnd")},Yp={},a4={};pi&&(a4=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Cd(t){if(Yp[t])return Yp[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a4)return Yp[t]=e[n];return t}var u4=Cd("animationend"),l4=Cd("animationiteration"),c4=Cd("animationstart"),h4=Cd("transitionend"),f4=new Map,X2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(t,e){f4.set(t,e),Cs(e,[t])}for(var qp=0;qp<X2.length;qp++){var Qp=X2[qp],MR=Qp.toLowerCase(),LR=Qp[0].toUpperCase()+Qp.slice(1);_o(MR,"on"+LR)}_o(u4,"onAnimationEnd");_o(l4,"onAnimationIteration");_o(c4,"onAnimationStart");_o("dblclick","onDoubleClick");_o("focusin","onFocus");_o("focusout","onBlur");_o(h4,"onTransitionEnd");Pa("onMouseEnter",["mouseout","mouseover"]);Pa("onMouseLeave",["mouseout","mouseover"]);Pa("onPointerEnter",["pointerout","pointerover"]);Pa("onPointerLeave",["pointerout","pointerover"]);Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function K2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Mb(r,e,void 0,t),t.currentTarget=null}function d4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;K2(i,a,l),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;K2(i,a,l),o=u}}}if(gf)throw t=um,gf=!1,um=null,t}function Ge(t,e){var n=e[vm];n===void 0&&(n=e[vm]=new Set);var r=t+"__bubble";n.has(r)||(p4(e,t,2,!1),n.add(r))}function Zp(t,e,n){var r=0;e&&(r|=4),p4(n,t,r,e)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Sl(t){if(!t[hh]){t[hh]=!0,EC.forEach(function(n){n!=="selectionchange"&&(VR.has(n)||Zp(n,!1,t),Zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hh]||(e[hh]=!0,Zp("selectionchange",!1,e))}}function p4(t,e,n,r){switch(QC(e)){case 1:var i=Qb;break;case 4:i=Zb;break;default:i=f0}n=i.bind(null,e,n,t),i=void 0,!am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Jp(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ts(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}VC(function(){var l=o,c=u0(n),h=[];e:{var d=f4.get(t);if(d!==void 0){var p=p0,m=t;switch(t){case"keypress":if(zh(n)===0)break e;case"keydown":case"keyup":p=dR;break;case"focusin":m="focus",p=Gp;break;case"focusout":m="blur",p=Gp;break;case"beforeblur":case"afterblur":p=Gp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=L2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gR;break;case u4:case l4:case c4:p=iR;break;case h4:p=vR;break;case"scroll":p=Jb;break;case"wheel":p=wR;break;case"copy":case"cut":case"paste":p=sR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=B2}var y=(e&4)!==0,w=!y&&t==="scroll",_=y?d!==null?d+"Capture":null:d;y=[];for(var v=l,A;v!==null;){A=v;var S=A.stateNode;if(A.tag===5&&S!==null&&(A=S,_!==null&&(S=wl(v,_),S!=null&&y.push(bl(v,S,A)))),w)break;v=v.return}0<y.length&&(d=new p(d,m,null,n,c),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==om&&(m=n.relatedTarget||n.fromElement)&&(ts(m)||m[mi]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=l,m=m?ts(m):null,m!==null&&(w=Is(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=l),p!==m)){if(y=L2,S="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=B2,S="onPointerLeave",_="onPointerEnter",v="pointer"),w=p==null?d:ta(p),A=m==null?d:ta(m),d=new y(S,v+"leave",p,n,c),d.target=w,d.relatedTarget=A,S=null,ts(c)===l&&(y=new y(_,v+"enter",m,n,c),y.target=A,y.relatedTarget=w,S=y),w=S,p&&m)t:{for(y=p,_=m,v=0,A=y;A;A=$s(A))v++;for(A=0,S=_;S;S=$s(S))A++;for(;0<v-A;)y=$s(y),v--;for(;0<A-v;)_=$s(_),A--;for(;v--;){if(y===_||_!==null&&y===_.alternate)break t;y=$s(y),_=$s(_)}y=null}else y=null;p!==null&&Y2(h,d,p,y,!1),m!==null&&w!==null&&Y2(h,w,m,y,!0)}}e:{if(d=l?ta(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var x=bR;else if(U2(d))if(r4)x=NR;else{x=PR;var M=RR}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=OR);if(x&&(x=x(t,l))){n4(h,x,n,c);break e}M&&M(t,d,l),t==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&em(d,"number",d.value)}switch(M=l?ta(l):window,t){case"focusin":(U2(M)||M.contentEditable==="true")&&(Js=M,fm=l,rl=null);break;case"focusout":rl=fm=Js=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,G2(h,n,c);break;case"selectionchange":if(kR)break;case"keydown":case"keyup":G2(h,n,c)}var T;if(g0)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Zs?e4(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(JC&&n.locale!=="ko"&&(Zs||I!=="onCompositionStart"?I==="onCompositionEnd"&&Zs&&(T=ZC()):(Wi=c,d0="value"in Wi?Wi.value:Wi.textContent,Zs=!0)),M=Ef(l,I),0<M.length&&(I=new V2(I,t,null,n,c),h.push({event:I,listeners:M}),T?I.data=T:(T=t4(n),T!==null&&(I.data=T)))),(T=AR?CR(t,n):IR(t,n))&&(l=Ef(l,"onBeforeInput"),0<l.length&&(c=new V2("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:l}),c.data=T))}d4(h,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ef(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=wl(t,n),o!=null&&r.unshift(bl(t,o,i)),o=wl(t,e),o!=null&&r.push(bl(t,o,i))),t=t.return}return r}function $s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y2(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=wl(n,o),u!=null&&s.unshift(bl(n,u,a))):i||(u=wl(n,o),u!=null&&s.push(bl(n,u,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var BR=/\r\n?/g,FR=/\u0000|\uFFFD/g;function q2(t){return(typeof t=="string"?t:""+t).replace(BR,`
`).replace(FR,"")}function fh(t,e,n){if(e=q2(e),q2(t)!==e&&n)throw Error($(425))}function Af(){}var pm=null,mm=null;function gm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,jR=typeof clearTimeout=="function"?clearTimeout:void 0,Q2=typeof Promise=="function"?Promise:void 0,UR=typeof queueMicrotask=="function"?queueMicrotask:typeof Q2<"u"?function(t){return Q2.resolve(null).then(t).catch(HR)}:ym;function HR(t){setTimeout(function(){throw t})}function e1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cl(e)}function Zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),Pr="__reactFiber$"+Ka,Rl="__reactProps$"+Ka,mi="__reactContainer$"+Ka,vm="__reactEvents$"+Ka,zR="__reactListeners$"+Ka,WR="__reactHandles$"+Ka;function ts(t){var e=t[Pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mi]||n[Pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z2(t);t!==null;){if(n=t[Pr])return n;t=Z2(t)}return e}t=n,n=t.parentNode}return null}function ic(t){return t=t[Pr]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Id(t){return t[Rl]||null}var _m=[],na=-1;function wo(t){return{current:t}}function Ye(t){0>na||(t.current=_m[na],_m[na]=null,na--)}function ze(t,e){na++,_m[na]=t.current,t.current=e}var lo={},un=wo(lo),Pn=wo(!1),fs=lo;function Oa(t,e){var n=t.type.contextTypes;if(!n)return lo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function On(t){return t=t.childContextTypes,t!=null}function Cf(){Ye(Pn),Ye(un)}function J2(t,e,n){if(un.current!==lo)throw Error($(168));ze(un,e),ze(Pn,n)}function m4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Rb(t)||"Unknown",i));return at({},n,r)}function If(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lo,fs=un.current,ze(un,t),ze(Pn,Pn.current),!0}function e_(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=m4(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,Ye(Pn),Ye(un),ze(un,t)):Ye(Pn),ze(Pn,n)}var ti=null,Td=!1,t1=!1;function g4(t){ti===null?ti=[t]:ti.push(t)}function $R(t){Td=!0,g4(t)}function Eo(){if(!t1&&ti!==null){t1=!0;var t=0,e=Me;try{var n=ti;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ti=null,Td=!1}catch(i){throw ti!==null&&(ti=ti.slice(t+1)),UC(l0,Eo),i}finally{Me=e,t1=!1}}return null}var ra=[],ia=0,Tf=null,Sf=0,Jn=[],er=0,ds=null,ni=1,ri="";function Ko(t,e){ra[ia++]=Sf,ra[ia++]=Tf,Tf=t,Sf=e}function y4(t,e,n){Jn[er++]=ni,Jn[er++]=ri,Jn[er++]=ds,ds=t;var r=ni;t=ri;var i=32-yr(r)-1;r&=~(1<<i),n+=1;var o=32-yr(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ni=1<<32-yr(e)+i|n<<i|r,ri=o+t}else ni=1<<o|n<<i|r,ri=t}function v0(t){t.return!==null&&(Ko(t,1),y4(t,1,0))}function _0(t){for(;t===Tf;)Tf=ra[--ia],ra[ia]=null,Sf=ra[--ia],ra[ia]=null;for(;t===ds;)ds=Jn[--er],Jn[er]=null,ri=Jn[--er],Jn[er]=null,ni=Jn[--er],Jn[er]=null}var Un=null,Fn=null,Qe=!1,fr=null;function v4(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,Fn=Zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ds!==null?{id:ni,overflow:ri}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,Fn=null,!0):!1;default:return!1}}function wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Em(t){if(Qe){var e=Fn;if(e){var n=e;if(!t_(t,e)){if(wm(t))throw Error($(418));e=Zi(n.nextSibling);var r=Un;e&&t_(t,e)?v4(r,n):(t.flags=t.flags&-4097|2,Qe=!1,Un=t)}}else{if(wm(t))throw Error($(418));t.flags=t.flags&-4097|2,Qe=!1,Un=t}}}function n_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function dh(t){if(t!==Un)return!1;if(!Qe)return n_(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gm(t.type,t.memoizedProps)),e&&(e=Fn)){if(wm(t))throw _4(),Error($(418));for(;e;)v4(t,e),e=Zi(e.nextSibling)}if(n_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=Zi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Un?Zi(t.stateNode.nextSibling):null;return!0}function _4(){for(var t=Fn;t;)t=Zi(t.nextSibling)}function Na(){Fn=Un=null,Qe=!1}function w0(t){fr===null?fr=[t]:fr.push(t)}var GR=Ii.ReactCurrentBatchConfig;function Ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ph(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r_(t){var e=t._init;return e(t._payload)}function w4(t){function e(_,v){if(t){var A=_.deletions;A===null?(_.deletions=[v],_.flags|=16):A.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=no(_,v),_.index=0,_.sibling=null,_}function o(_,v,A){return _.index=A,t?(A=_.alternate,A!==null?(A=A.index,A<v?(_.flags|=2,v):A):(_.flags|=2,v)):(_.flags|=1048576,v)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,A,S){return v===null||v.tag!==6?(v=u1(A,_.mode,S),v.return=_,v):(v=i(v,A),v.return=_,v)}function u(_,v,A,S){var x=A.type;return x===Qs?c(_,v,A.props.children,S,A.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Mi&&r_(x)===v.type)?(S=i(v,A.props),S.ref=Ru(_,v,A),S.return=_,S):(S=qh(A.type,A.key,A.props,null,_.mode,S),S.ref=Ru(_,v,A),S.return=_,S)}function l(_,v,A,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=l1(A,_.mode,S),v.return=_,v):(v=i(v,A.children||[]),v.return=_,v)}function c(_,v,A,S,x){return v===null||v.tag!==7?(v=us(A,_.mode,S,x),v.return=_,v):(v=i(v,A),v.return=_,v)}function h(_,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return v=u1(""+v,_.mode,A),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rh:return A=qh(v.type,v.key,v.props,null,_.mode,A),A.ref=Ru(_,null,v),A.return=_,A;case qs:return v=l1(v,_.mode,A),v.return=_,v;case Mi:var S=v._init;return h(_,S(v._payload),A)}if(Bu(v)||Cu(v))return v=us(v,_.mode,A,null),v.return=_,v;ph(_,v)}return null}function d(_,v,A,S){var x=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return x!==null?null:a(_,v,""+A,S);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case rh:return A.key===x?u(_,v,A,S):null;case qs:return A.key===x?l(_,v,A,S):null;case Mi:return x=A._init,d(_,v,x(A._payload),S)}if(Bu(A)||Cu(A))return x!==null?null:c(_,v,A,S,null);ph(_,A)}return null}function p(_,v,A,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(A)||null,a(v,_,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rh:return _=_.get(S.key===null?A:S.key)||null,u(v,_,S,x);case qs:return _=_.get(S.key===null?A:S.key)||null,l(v,_,S,x);case Mi:var M=S._init;return p(_,v,A,M(S._payload),x)}if(Bu(S)||Cu(S))return _=_.get(A)||null,c(v,_,S,x,null);ph(v,S)}return null}function m(_,v,A,S){for(var x=null,M=null,T=v,I=v=0,R=null;T!==null&&I<A.length;I++){T.index>I?(R=T,T=null):R=T.sibling;var O=d(_,T,A[I],S);if(O===null){T===null&&(T=R);break}t&&T&&O.alternate===null&&e(_,T),v=o(O,v,I),M===null?x=O:M.sibling=O,M=O,T=R}if(I===A.length)return n(_,T),Qe&&Ko(_,I),x;if(T===null){for(;I<A.length;I++)T=h(_,A[I],S),T!==null&&(v=o(T,v,I),M===null?x=T:M.sibling=T,M=T);return Qe&&Ko(_,I),x}for(T=r(_,T);I<A.length;I++)R=p(T,_,I,A[I],S),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?I:R.key),v=o(R,v,I),M===null?x=R:M.sibling=R,M=R);return t&&T.forEach(function(k){return e(_,k)}),Qe&&Ko(_,I),x}function y(_,v,A,S){var x=Cu(A);if(typeof x!="function")throw Error($(150));if(A=x.call(A),A==null)throw Error($(151));for(var M=x=null,T=v,I=v=0,R=null,O=A.next();T!==null&&!O.done;I++,O=A.next()){T.index>I?(R=T,T=null):R=T.sibling;var k=d(_,T,O.value,S);if(k===null){T===null&&(T=R);break}t&&T&&k.alternate===null&&e(_,T),v=o(k,v,I),M===null?x=k:M.sibling=k,M=k,T=R}if(O.done)return n(_,T),Qe&&Ko(_,I),x;if(T===null){for(;!O.done;I++,O=A.next())O=h(_,O.value,S),O!==null&&(v=o(O,v,I),M===null?x=O:M.sibling=O,M=O);return Qe&&Ko(_,I),x}for(T=r(_,T);!O.done;I++,O=A.next())O=p(T,_,I,O.value,S),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?I:O.key),v=o(O,v,I),M===null?x=O:M.sibling=O,M=O);return t&&T.forEach(function(L){return e(_,L)}),Qe&&Ko(_,I),x}function w(_,v,A,S){if(typeof A=="object"&&A!==null&&A.type===Qs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case rh:e:{for(var x=A.key,M=v;M!==null;){if(M.key===x){if(x=A.type,x===Qs){if(M.tag===7){n(_,M.sibling),v=i(M,A.props.children),v.return=_,_=v;break e}}else if(M.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Mi&&r_(x)===M.type){n(_,M.sibling),v=i(M,A.props),v.ref=Ru(_,M,A),v.return=_,_=v;break e}n(_,M);break}else e(_,M);M=M.sibling}A.type===Qs?(v=us(A.props.children,_.mode,S,A.key),v.return=_,_=v):(S=qh(A.type,A.key,A.props,null,_.mode,S),S.ref=Ru(_,v,A),S.return=_,_=S)}return s(_);case qs:e:{for(M=A.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){n(_,v.sibling),v=i(v,A.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=l1(A,_.mode,S),v.return=_,_=v}return s(_);case Mi:return M=A._init,w(_,v,M(A._payload),S)}if(Bu(A))return m(_,v,A,S);if(Cu(A))return y(_,v,A,S);ph(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,A),v.return=_,_=v):(n(_,v),v=u1(A,_.mode,S),v.return=_,_=v),s(_)):n(_,v)}return w}var Da=w4(!0),E4=w4(!1),bf=wo(null),Rf=null,oa=null,E0=null;function A0(){E0=oa=Rf=null}function C0(t){var e=bf.current;Ye(bf),t._currentValue=e}function Am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Aa(t,e){Rf=t,E0=oa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function ir(t){var e=t._currentValue;if(E0!==t)if(t={context:t,memoizedValue:e,next:null},oa===null){if(Rf===null)throw Error($(308));oa=t,Rf.dependencies={lanes:0,firstContext:t}}else oa=oa.next=t;return e}var ns=null;function I0(t){ns===null?ns=[t]:ns.push(t)}function A4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,I0(e)):(n.next=i.next,i.next=n),e.interleaved=n,gi(t,r)}function gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Li=!1;function T0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gi(t,n)}return i=r.interleaved,i===null?(e.next=e,I0(r)):(e.next=i.next,i.next=e),r.interleaved=e,gi(t,n)}function Wh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,c0(t,n)}}function i_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pf(t,e,n,r){var i=t.updateQueue;Li=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var h=i.baseState;s=0,c=l=u=null,a=o;do{var d=a.lane,p=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(d=e,p=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(p,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,d=typeof m=="function"?m.call(p,h,d):m,d==null)break e;h=at({},h,d);break e;case 2:Li=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=p,u=h):c=c.next=p,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ms|=s,t.lanes=s,t.memoizedState=h}}function o_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var oc={},Lr=wo(oc),Pl=wo(oc),Ol=wo(oc);function rs(t){if(t===oc)throw Error($(174));return t}function S0(t,e){switch(ze(Ol,e),ze(Pl,t),ze(Lr,oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nm(e,t)}Ye(Lr),ze(Lr,e)}function xa(){Ye(Lr),Ye(Pl),Ye(Ol)}function I4(t){rs(Ol.current);var e=rs(Lr.current),n=nm(e,t.type);e!==n&&(ze(Pl,t),ze(Lr,n))}function b0(t){Pl.current===t&&(Ye(Lr),Ye(Pl))}var rt=wo(0);function Of(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var n1=[];function R0(){for(var t=0;t<n1.length;t++)n1[t]._workInProgressVersionPrimary=null;n1.length=0}var $h=Ii.ReactCurrentDispatcher,r1=Ii.ReactCurrentBatchConfig,ps=0,st=null,Ct=null,xt=null,Nf=!1,il=!1,Nl=0,XR=0;function en(){throw Error($(321))}function P0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wr(t[n],e[n]))return!1;return!0}function O0(t,e,n,r,i,o){if(ps=o,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$h.current=t===null||t.memoizedState===null?QR:ZR,t=n(r,i),il){o=0;do{if(il=!1,Nl=0,25<=o)throw Error($(301));o+=1,xt=Ct=null,e.updateQueue=null,$h.current=JR,t=n(r,i)}while(il)}if($h.current=Df,e=Ct!==null&&Ct.next!==null,ps=0,xt=Ct=st=null,Nf=!1,e)throw Error($(300));return t}function N0(){var t=Nl!==0;return Nl=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?st.memoizedState=xt=t:xt=xt.next=t,xt}function or(){if(Ct===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=xt===null?st.memoizedState:xt.next;if(e!==null)xt=e,Ct=t;else{if(t===null)throw Error($(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},xt===null?st.memoizedState=xt=t:xt=xt.next=t}return xt}function Dl(t,e){return typeof e=="function"?e(t):e}function i1(t){var e=or(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ct,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((ps&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=h,s=r):u=u.next=h,st.lanes|=c,ms|=c}l=l.next}while(l!==null&&l!==o);u===null?s=r:u.next=a,wr(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,st.lanes|=o,ms|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function o1(t){var e=or(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);wr(o,e.memoizedState)||(Rn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function T4(){}function S4(t,e){var n=st,r=or(),i=e(),o=!wr(r.memoizedState,i);if(o&&(r.memoizedState=i,Rn=!0),r=r.queue,D0(P4.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,xl(9,R4.bind(null,n,r,i,e),void 0,null),Vt===null)throw Error($(349));ps&30||b4(n,e,i)}return i}function b4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R4(t,e,n,r){e.value=n,e.getSnapshot=r,O4(e)&&N4(t)}function P4(t,e,n){return n(function(){O4(e)&&N4(t)})}function O4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wr(t,n)}catch{return!0}}function N4(t){var e=gi(t,1);e!==null&&vr(e,t,1,-1)}function s_(t){var e=Rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:t},e.queue=t,t=t.dispatch=qR.bind(null,st,t),[e.memoizedState,t]}function xl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function D4(){return or().memoizedState}function Gh(t,e,n,r){var i=Rr();st.flags|=t,i.memoizedState=xl(1|e,n,void 0,r===void 0?null:r)}function Sd(t,e,n,r){var i=or();r=r===void 0?null:r;var o=void 0;if(Ct!==null){var s=Ct.memoizedState;if(o=s.destroy,r!==null&&P0(r,s.deps)){i.memoizedState=xl(e,n,o,r);return}}st.flags|=t,i.memoizedState=xl(1|e,n,o,r)}function a_(t,e){return Gh(8390656,8,t,e)}function D0(t,e){return Sd(2048,8,t,e)}function x4(t,e){return Sd(4,2,t,e)}function k4(t,e){return Sd(4,4,t,e)}function M4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L4(t,e,n){return n=n!=null?n.concat([t]):null,Sd(4,4,M4.bind(null,e,t),n)}function x0(){}function V4(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&P0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B4(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&P0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function F4(t,e,n){return ps&21?(wr(n,e)||(n=WC(),st.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function KR(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=r1.transition;r1.transition={};try{t(!1),e()}finally{Me=n,r1.transition=r}}function j4(){return or().memoizedState}function YR(t,e,n){var r=to(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U4(t))H4(e,n);else if(n=A4(t,e,n,r),n!==null){var i=_n();vr(n,t,r,i),z4(n,e,r)}}function qR(t,e,n){var r=to(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U4(t))H4(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,wr(a,s)){var u=e.interleaved;u===null?(i.next=i,I0(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=A4(t,e,i,r),n!==null&&(i=_n(),vr(n,t,r,i),z4(n,e,r))}}function U4(t){var e=t.alternate;return t===st||e!==null&&e===st}function H4(t,e){il=Nf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,c0(t,n)}}var Df={readContext:ir,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},QR={readContext:ir,useCallback:function(t,e){return Rr().memoizedState=[t,e===void 0?null:e],t},useContext:ir,useEffect:a_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gh(4194308,4,M4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gh(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YR.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=Rr();return t={current:t},e.memoizedState=t},useState:s_,useDebugValue:x0,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=s_(!1),e=t[0];return t=KR.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=Rr();if(Qe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Vt===null)throw Error($(349));ps&30||b4(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,a_(P4.bind(null,r,o,t),[t]),r.flags|=2048,xl(9,R4.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Rr(),e=Vt.identifierPrefix;if(Qe){var n=ri,r=ni;n=(r&~(1<<32-yr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZR={readContext:ir,useCallback:V4,useContext:ir,useEffect:D0,useImperativeHandle:L4,useInsertionEffect:x4,useLayoutEffect:k4,useMemo:B4,useReducer:i1,useRef:D4,useState:function(){return i1(Dl)},useDebugValue:x0,useDeferredValue:function(t){var e=or();return F4(e,Ct.memoizedState,t)},useTransition:function(){var t=i1(Dl)[0],e=or().memoizedState;return[t,e]},useMutableSource:T4,useSyncExternalStore:S4,useId:j4,unstable_isNewReconciler:!1},JR={readContext:ir,useCallback:V4,useContext:ir,useEffect:D0,useImperativeHandle:L4,useInsertionEffect:x4,useLayoutEffect:k4,useMemo:B4,useReducer:o1,useRef:D4,useState:function(){return o1(Dl)},useDebugValue:x0,useDeferredValue:function(t){var e=or();return Ct===null?e.memoizedState=t:F4(e,Ct.memoizedState,t)},useTransition:function(){var t=o1(Dl)[0],e=or().memoizedState;return[t,e]},useMutableSource:T4,useSyncExternalStore:S4,useId:j4,unstable_isNewReconciler:!1};function cr(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bd={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),i=to(t),o=ui(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ji(t,o,i),e!==null&&(vr(e,t,i,r),Wh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),i=to(t),o=ui(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ji(t,o,i),e!==null&&(vr(e,t,i,r),Wh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=to(t),i=ui(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ji(t,i,r),e!==null&&(vr(e,t,r,n),Wh(e,t,r))}};function u_(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Tl(n,r)||!Tl(i,o):!0}function W4(t,e,n){var r=!1,i=lo,o=e.contextType;return typeof o=="object"&&o!==null?o=ir(o):(i=On(e)?fs:un.current,r=e.contextTypes,o=(r=r!=null)?Oa(t,i):lo),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function l_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bd.enqueueReplaceState(e,e.state,null)}function Im(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},T0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ir(o):(o=On(e)?fs:un.current,i.context=Oa(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Cm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bd.enqueueReplaceState(i,i.state,null),Pf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var n="",r=e;do n+=bb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function s1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eP=typeof WeakMap=="function"?WeakMap:Map;function $4(t,e,n){n=ui(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kf||(kf=!0,Mm=r),Tm(t,e)},n}function G4(t,e,n){n=ui(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Tm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Tm(t,e),typeof r!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function c_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pP.bind(null,t,e,n),e.then(t,t))}function h_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ui(-1,1),e.tag=2,Ji(n,e,1))),n.lanes|=1),t)}var tP=Ii.ReactCurrentOwner,Rn=!1;function gn(t,e,n,r){e.child=t===null?E4(e,null,n,r):Da(e,t.child,n,r)}function d_(t,e,n,r,i){n=n.render;var o=e.ref;return Aa(e,i),r=O0(t,e,n,r,o,i),n=N0(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yi(t,e,i)):(Qe&&n&&v0(e),e.flags|=1,gn(t,e,r,i),e.child)}function p_(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!U0(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,X4(t,e,o,r,i)):(t=qh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(s,r)&&t.ref===e.ref)return yi(t,e,i)}return e.flags|=1,t=no(o,r),t.ref=e.ref,t.return=e,e.child=t}function X4(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Tl(o,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,yi(t,e,i)}return Sm(t,e,n,r,i)}function K4(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(aa,Bn),Bn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(aa,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ze(aa,Bn),Bn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ze(aa,Bn),Bn|=r;return gn(t,e,i,n),e.child}function Y4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sm(t,e,n,r,i){var o=On(n)?fs:un.current;return o=Oa(e,o),Aa(e,i),n=O0(t,e,n,r,o,i),r=N0(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yi(t,e,i)):(Qe&&r&&v0(e),e.flags|=1,gn(t,e,n,i),e.child)}function m_(t,e,n,r,i){if(On(n)){var o=!0;If(e)}else o=!1;if(Aa(e,i),e.stateNode===null)Xh(t,e),W4(e,n,r),Im(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=ir(l):(l=On(n)?fs:un.current,l=Oa(e,l));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==l)&&l_(e,s,r,l),Li=!1;var d=e.memoizedState;s.state=d,Pf(e,r,s,i),u=e.memoizedState,a!==r||d!==u||Pn.current||Li?(typeof c=="function"&&(Cm(e,n,c,r),u=e.memoizedState),(a=Li||u_(e,n,a,r,d,u,l))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,C4(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:cr(e.type,a),s.props=l,h=e.pendingProps,d=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=ir(u):(u=On(n)?fs:un.current,u=Oa(e,u));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||d!==u)&&l_(e,s,r,u),Li=!1,d=e.memoizedState,s.state=d,Pf(e,r,s,i);var m=e.memoizedState;a!==h||d!==m||Pn.current||Li?(typeof p=="function"&&(Cm(e,n,p,r),m=e.memoizedState),(l=Li||u_(e,n,l,r,d,m,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return bm(t,e,n,r,o,i)}function bm(t,e,n,r,i,o){Y4(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&e_(e,n,!1),yi(t,e,o);r=e.stateNode,tP.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Da(e,t.child,null,o),e.child=Da(e,null,a,o)):gn(t,e,a,o),e.memoizedState=r.state,i&&e_(e,n,!0),e.child}function q4(t){var e=t.stateNode;e.pendingContext?J2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J2(t,e.context,!1),S0(t,e.containerInfo)}function g_(t,e,n,r,i){return Na(),w0(i),e.flags|=256,gn(t,e,n,r),e.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Pm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q4(t,e,n){var r=e.pendingProps,i=rt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(rt,i&1),t===null)return Em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Od(s,r,0,null),t=us(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Pm(n),e.memoizedState=Rm,t):k0(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nP(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=no(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=no(a,o):(o=us(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Pm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Rm,r}return o=t.child,t=o.sibling,r=no(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function k0(t,e){return e=Od({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mh(t,e,n,r){return r!==null&&w0(r),Da(e,t.child,null,n),t=k0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nP(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=s1(Error($(422))),mh(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Od({mode:"visible",children:r.children},i,0,null),o=us(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Da(e,t.child,null,s),e.child.memoizedState=Pm(s),e.memoizedState=Rm,o);if(!(e.mode&1))return mh(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error($(419)),r=s1(o,r,void 0),mh(t,e,s,r)}if(a=(s&t.childLanes)!==0,Rn||a){if(r=Vt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,gi(t,i),vr(r,t,i,-1))}return j0(),r=s1(Error($(421))),mh(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mP.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Fn=Zi(i.nextSibling),Un=e,Qe=!0,fr=null,t!==null&&(Jn[er++]=ni,Jn[er++]=ri,Jn[er++]=ds,ni=t.id,ri=t.overflow,ds=e),e=k0(e,r.children),e.flags|=4096,e)}function y_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Am(t.return,e,n)}function a1(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Z4(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(gn(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y_(t,n,e);else if(t.tag===19)y_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(rt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Of(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),a1(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Of(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}a1(e,!0,n,null,o);break;case"together":a1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=no(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=no(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rP(t,e,n){switch(e.tag){case 3:q4(e),Na();break;case 5:I4(e);break;case 1:On(e.type)&&If(e);break;case 4:S0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(bf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?Q4(t,e,n):(ze(rt,rt.current&1),t=yi(t,e,n),t!==null?t.sibling:null);ze(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Z4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,K4(t,e,n)}return yi(t,e,n)}var J4,Om,eI,tI;J4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Om=function(){};eI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rs(Lr.current);var o=null;switch(n){case"input":i=Z1(t,i),r=Z1(t,r),o=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),o=[];break;case"textarea":i=tm(t,i),r=tm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Af)}rm(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vl.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vl.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ge("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};tI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pu(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iP(t,e,n){var r=e.pendingProps;switch(_0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return On(e.type)&&Cf(),tn(e),null;case 3:return r=e.stateNode,xa(),Ye(Pn),Ye(un),R0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fr!==null&&(Bm(fr),fr=null))),Om(t,e),tn(e),null;case 5:b0(e);var i=rs(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)eI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return tn(e),null}if(t=rs(Lr.current),dh(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Pr]=e,r[Rl]=o,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<ju.length;i++)Ge(ju[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":S2(r,o),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ge("invalid",r);break;case"textarea":R2(r,o),Ge("invalid",r)}rm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&fh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&fh(r.textContent,a,t),i=["children",""+a]):vl.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ge("scroll",r)}switch(n){case"input":ih(r),b2(r,o,!0);break;case"textarea":ih(r),P2(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Af)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Pr]=e,t[Rl]=r,J4(t,e,!1,!1),e.stateNode=t;e:{switch(s=im(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<ju.length;i++)Ge(ju[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":S2(t,r),i=Z1(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":R2(t,r),i=tm(t,r),Ge("invalid",t);break;default:i=r}rm(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?DC(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&OC(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_l(t,u):typeof u=="number"&&_l(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ge("scroll",t):u!=null&&i0(t,o,u,s))}switch(n){case"input":ih(t),b2(t,r,!1);break;case"textarea":ih(t),P2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+uo(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?va(t,!!r.multiple,o,!1):r.defaultValue!=null&&va(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Af)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)tI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=rs(Ol.current),rs(Lr.current),dh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pr]=e,(o=r.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:fh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fh(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pr]=e,e.stateNode=r}return tn(e),null;case 13:if(Ye(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Fn!==null&&e.mode&1&&!(e.flags&128))_4(),Na(),e.flags|=98560,o=!1;else if(o=dh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[Pr]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),o=!1}else fr!==null&&(Bm(fr),fr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?Tt===0&&(Tt=3):j0())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return xa(),Om(t,e),t===null&&Sl(e.stateNode.containerInfo),tn(e),null;case 10:return C0(e.type._context),tn(e),null;case 17:return On(e.type)&&Cf(),tn(e),null;case 19:if(Ye(rt),o=e.memoizedState,o===null)return tn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Pu(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Of(t),s!==null){for(e.flags|=128,Pu(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(rt,rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&dt()>Ma&&(e.flags|=128,r=!0,Pu(o,!1),e.lanes=4194304)}else{if(!r)if(t=Of(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Qe)return tn(e),null}else 2*dt()-o.renderingStartTime>Ma&&n!==1073741824&&(e.flags|=128,r=!0,Pu(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dt(),e.sibling=null,n=rt.current,ze(rt,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return F0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bn&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function oP(t,e){switch(_0(e),e.tag){case 1:return On(e.type)&&Cf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xa(),Ye(Pn),Ye(un),R0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return b0(e),null;case 13:if(Ye(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(rt),null;case 4:return xa(),null;case 10:return C0(e.type._context),null;case 22:case 23:return F0(),null;case 24:return null;default:return null}}var gh=!1,sn=!1,sP=typeof WeakSet=="function"?WeakSet:Set,Q=null;function sa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function Nm(t,e,n){try{n()}catch(r){ht(t,e,r)}}var v_=!1;function aP(t,e){if(pm=_f,t=s4(),y0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,l=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(u=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++l===i&&(a=s),d===o&&++c===r&&(u=s),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mm={focusedElem:t,selectionRange:n},_f=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:cr(e.type,y),w);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(S){ht(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return m=v_,v_=!1,m}function ol(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Nm(e,n,o)}i=i.next}while(i!==r)}}function Rd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nI(t){var e=t.alternate;e!==null&&(t.alternate=null,nI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pr],delete e[Rl],delete e[vm],delete e[zR],delete e[WR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rI(t){return t.tag===5||t.tag===3||t.tag===4}function __(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Af));else if(r!==4&&(t=t.child,t!==null))for(xm(t,e,n),t=t.sibling;t!==null;)xm(t,e,n),t=t.sibling}function km(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(km(t,e,n),t=t.sibling;t!==null;)km(t,e,n),t=t.sibling}var Ht=null,hr=!1;function Ri(t,e,n){for(n=n.child;n!==null;)iI(t,e,n),n=n.sibling}function iI(t,e,n){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(wd,n)}catch{}switch(n.tag){case 5:sn||sa(n,e);case 6:var r=Ht,i=hr;Ht=null,Ri(t,e,n),Ht=r,hr=i,Ht!==null&&(hr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(hr?(t=Ht,n=n.stateNode,t.nodeType===8?e1(t.parentNode,n):t.nodeType===1&&e1(t,n),Cl(t)):e1(Ht,n.stateNode));break;case 4:r=Ht,i=hr,Ht=n.stateNode.containerInfo,hr=!0,Ri(t,e,n),Ht=r,hr=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Nm(n,e,s),i=i.next}while(i!==r)}Ri(t,e,n);break;case 1:if(!sn&&(sa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}Ri(t,e,n);break;case 21:Ri(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,Ri(t,e,n),sn=r):Ri(t,e,n);break;default:Ri(t,e,n)}}function w_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sP),e.forEach(function(r){var i=gP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,hr=!1;break e;case 3:Ht=a.stateNode.containerInfo,hr=!0;break e;case 4:Ht=a.stateNode.containerInfo,hr=!0;break e}a=a.return}if(Ht===null)throw Error($(160));iI(o,s,i),Ht=null,hr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){ht(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oI(e,t),e=e.sibling}function oI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ar(e,t),Sr(t),r&4){try{ol(3,t,t.return),Rd(3,t)}catch(y){ht(t,t.return,y)}try{ol(5,t,t.return)}catch(y){ht(t,t.return,y)}}break;case 1:ar(e,t),Sr(t),r&512&&n!==null&&sa(n,n.return);break;case 5:if(ar(e,t),Sr(t),r&512&&n!==null&&sa(n,n.return),t.flags&32){var i=t.stateNode;try{_l(i,"")}catch(y){ht(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&bC(i,o),im(a,s);var l=im(a,o);for(s=0;s<u.length;s+=2){var c=u[s],h=u[s+1];c==="style"?DC(i,h):c==="dangerouslySetInnerHTML"?OC(i,h):c==="children"?_l(i,h):i0(i,c,h,l)}switch(a){case"input":J1(i,o);break;case"textarea":RC(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?va(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?va(i,!!o.multiple,o.defaultValue,!0):va(i,!!o.multiple,o.multiple?[]:"",!1))}i[Rl]=o}catch(y){ht(t,t.return,y)}}break;case 6:if(ar(e,t),Sr(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){ht(t,t.return,y)}}break;case 3:if(ar(e,t),Sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(y){ht(t,t.return,y)}break;case 4:ar(e,t),Sr(t);break;case 13:ar(e,t),Sr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(V0=dt())),r&4&&w_(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(l=sn)||c,ar(e,t),sn=l):ar(e,t),Sr(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(h=Q=c;Q!==null;){switch(d=Q,p=d.child,d.tag){case 0:case 11:case 14:case 15:ol(4,d,d.return);break;case 1:sa(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ht(r,n,y)}}break;case 5:sa(d,d.return);break;case 22:if(d.memoizedState!==null){A_(h);continue}}p!==null?(p.return=d,Q=p):A_(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=NC("display",s))}catch(y){ht(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){ht(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ar(e,t),Sr(t),r&4&&w_(t);break;case 21:break;default:ar(e,t),Sr(t)}}function Sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rI(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_l(i,""),r.flags&=-33);var o=__(t);km(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=__(t);xm(t,a,s);break;default:throw Error($(161))}}catch(u){ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uP(t,e,n){Q=t,sI(t)}function sI(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||gh;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||sn;a=gh;var l=sn;if(gh=s,(sn=u)&&!l)for(Q=i;Q!==null;)s=Q,u=s.child,s.tag===22&&s.memoizedState!==null?C_(i):u!==null?(u.return=s,Q=u):C_(i);for(;o!==null;)Q=o,sI(o),o=o.sibling;Q=i,gh=a,sn=l}E_(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):E_(t)}}function E_(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||Rd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:cr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&o_(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o_(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Cl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}sn||e.flags&512&&Dm(e)}catch(d){ht(e,e.return,d)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function A_(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function C_(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rd(4,e)}catch(u){ht(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ht(e,i,u)}}var o=e.return;try{Dm(e)}catch(u){ht(e,o,u)}break;case 5:var s=e.return;try{Dm(e)}catch(u){ht(e,s,u)}}}catch(u){ht(e,e.return,u)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var lP=Math.ceil,xf=Ii.ReactCurrentDispatcher,M0=Ii.ReactCurrentOwner,nr=Ii.ReactCurrentBatchConfig,Te=0,Vt=null,vt=null,Xt=0,Bn=0,aa=wo(0),Tt=0,kl=null,ms=0,Pd=0,L0=0,sl=null,Sn=null,V0=0,Ma=1/0,ei=null,kf=!1,Mm=null,eo=null,yh=!1,$i=null,Mf=0,al=0,Lm=null,Kh=-1,Yh=0;function _n(){return Te&6?dt():Kh!==-1?Kh:Kh=dt()}function to(t){return t.mode&1?Te&2&&Xt!==0?Xt&-Xt:GR.transition!==null?(Yh===0&&(Yh=WC()),Yh):(t=Me,t!==0||(t=window.event,t=t===void 0?16:QC(t.type)),t):1}function vr(t,e,n,r){if(50<al)throw al=0,Lm=null,Error($(185));nc(t,n,r),(!(Te&2)||t!==Vt)&&(t===Vt&&(!(Te&2)&&(Pd|=n),Tt===4&&Fi(t,Xt)),Nn(t,r),n===1&&Te===0&&!(e.mode&1)&&(Ma=dt()+500,Td&&Eo()))}function Nn(t,e){var n=t.callbackNode;Gb(t,e);var r=vf(t,t===Vt?Xt:0);if(r===0)n!==null&&D2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&D2(n),e===1)t.tag===0?$R(I_.bind(null,t)):g4(I_.bind(null,t)),UR(function(){!(Te&6)&&Eo()}),n=null;else{switch($C(r)){case 1:n=l0;break;case 4:n=HC;break;case 16:n=yf;break;case 536870912:n=zC;break;default:n=yf}n=pI(n,aI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aI(t,e){if(Kh=-1,Yh=0,Te&6)throw Error($(327));var n=t.callbackNode;if(Ca()&&t.callbackNode!==n)return null;var r=vf(t,t===Vt?Xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lf(t,r);else{e=r;var i=Te;Te|=2;var o=lI();(Vt!==t||Xt!==e)&&(ei=null,Ma=dt()+500,as(t,e));do try{fP();break}catch(a){uI(t,a)}while(!0);A0(),xf.current=o,Te=i,vt!==null?e=0:(Vt=null,Xt=0,e=Tt)}if(e!==0){if(e===2&&(i=lm(t),i!==0&&(r=i,e=Vm(t,i))),e===1)throw n=kl,as(t,0),Fi(t,r),Nn(t,dt()),n;if(e===6)Fi(t,r);else{if(i=t.current.alternate,!(r&30)&&!cP(i)&&(e=Lf(t,r),e===2&&(o=lm(t),o!==0&&(r=o,e=Vm(t,o))),e===1))throw n=kl,as(t,0),Fi(t,r),Nn(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Yo(t,Sn,ei);break;case 3:if(Fi(t,r),(r&130023424)===r&&(e=V0+500-dt(),10<e)){if(vf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ym(Yo.bind(null,t,Sn,ei),e);break}Yo(t,Sn,ei);break;case 4:if(Fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-yr(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lP(r/1960))-r,10<r){t.timeoutHandle=ym(Yo.bind(null,t,Sn,ei),r);break}Yo(t,Sn,ei);break;case 5:Yo(t,Sn,ei);break;default:throw Error($(329))}}}return Nn(t,dt()),t.callbackNode===n?aI.bind(null,t):null}function Vm(t,e){var n=sl;return t.current.memoizedState.isDehydrated&&(as(t,e).flags|=256),t=Lf(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&Bm(e)),t}function Bm(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function cP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fi(t,e){for(e&=~L0,e&=~Pd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yr(e),r=1<<n;t[n]=-1,e&=~r}}function I_(t){if(Te&6)throw Error($(327));Ca();var e=vf(t,0);if(!(e&1))return Nn(t,dt()),null;var n=Lf(t,e);if(t.tag!==0&&n===2){var r=lm(t);r!==0&&(e=r,n=Vm(t,r))}if(n===1)throw n=kl,as(t,0),Fi(t,e),Nn(t,dt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yo(t,Sn,ei),Nn(t,dt()),null}function B0(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(Ma=dt()+500,Td&&Eo())}}function gs(t){$i!==null&&$i.tag===0&&!(Te&6)&&Ca();var e=Te;Te|=1;var n=nr.transition,r=Me;try{if(nr.transition=null,Me=1,t)return t()}finally{Me=r,nr.transition=n,Te=e,!(Te&6)&&Eo()}}function F0(){Bn=aa.current,Ye(aa)}function as(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jR(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(_0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cf();break;case 3:xa(),Ye(Pn),Ye(un),R0();break;case 5:b0(r);break;case 4:xa();break;case 13:Ye(rt);break;case 19:Ye(rt);break;case 10:C0(r.type._context);break;case 22:case 23:F0()}n=n.return}if(Vt=t,vt=t=no(t.current,null),Xt=Bn=e,Tt=0,kl=null,L0=Pd=ms=0,Sn=sl=null,ns!==null){for(e=0;e<ns.length;e++)if(n=ns[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ns=null}return t}function uI(t,e){do{var n=vt;try{if(A0(),$h.current=Df,Nf){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nf=!1}if(ps=0,xt=Ct=st=null,il=!1,Nl=0,M0.current=null,n===null||n.return===null){Tt=1,kl=e,vt=null;break}e:{var o=t,s=n.return,a=n,u=e;if(e=Xt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=h_(s);if(p!==null){p.flags&=-257,f_(p,s,a,o,e),p.mode&1&&c_(o,l,e),e=p,u=l;var m=e.updateQueue;if(m===null){var y=new Set;y.add(u),e.updateQueue=y}else m.add(u);break e}else{if(!(e&1)){c_(o,l,e),j0();break e}u=Error($(426))}}else if(Qe&&a.mode&1){var w=h_(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),f_(w,s,a,o,e),w0(ka(u,a));break e}}o=u=ka(u,a),Tt!==4&&(Tt=2),sl===null?sl=[o]:sl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=$4(o,u,e);i_(o,_);break e;case 1:a=u;var v=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(eo===null||!eo.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=G4(o,a,e);i_(o,S);break e}}o=o.return}while(o!==null)}hI(n)}catch(x){e=x,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function lI(){var t=xf.current;return xf.current=Df,t===null?Df:t}function j0(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Vt===null||!(ms&268435455)&&!(Pd&268435455)||Fi(Vt,Xt)}function Lf(t,e){var n=Te;Te|=2;var r=lI();(Vt!==t||Xt!==e)&&(ei=null,as(t,e));do try{hP();break}catch(i){uI(t,i)}while(!0);if(A0(),Te=n,xf.current=r,vt!==null)throw Error($(261));return Vt=null,Xt=0,Tt}function hP(){for(;vt!==null;)cI(vt)}function fP(){for(;vt!==null&&!Vb();)cI(vt)}function cI(t){var e=dI(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?hI(t):vt=e,M0.current=null}function hI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oP(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,vt=null;return}}else if(n=iP(n,e,Bn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Yo(t,e,n){var r=Me,i=nr.transition;try{nr.transition=null,Me=1,dP(t,e,n,r)}finally{nr.transition=i,Me=r}return null}function dP(t,e,n,r){do Ca();while($i!==null);if(Te&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Xb(t,o),t===Vt&&(vt=Vt=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yh||(yh=!0,pI(yf,function(){return Ca(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=nr.transition,nr.transition=null;var s=Me;Me=1;var a=Te;Te|=4,M0.current=null,aP(t,n),oI(n,t),xR(mm),_f=!!pm,mm=pm=null,t.current=n,uP(n),Bb(),Te=a,Me=s,nr.transition=o}else t.current=n;if(yh&&(yh=!1,$i=t,Mf=i),o=t.pendingLanes,o===0&&(eo=null),Ub(n.stateNode),Nn(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kf)throw kf=!1,t=Mm,Mm=null,t;return Mf&1&&t.tag!==0&&Ca(),o=t.pendingLanes,o&1?t===Lm?al++:(al=0,Lm=t):al=0,Eo(),null}function Ca(){if($i!==null){var t=$C(Mf),e=nr.transition,n=Me;try{if(nr.transition=null,Me=16>t?16:t,$i===null)var r=!1;else{if(t=$i,$i=null,Mf=0,Te&6)throw Error($(331));var i=Te;for(Te|=4,Q=t.current;Q!==null;){var o=Q,s=o.child;if(Q.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Q=l;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:ol(8,c,o)}var h=c.child;if(h!==null)h.return=c,Q=h;else for(;Q!==null;){c=Q;var d=c.sibling,p=c.return;if(nI(c),c===l){Q=null;break}if(d!==null){d.return=p,Q=d;break}Q=p}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Q=s;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,Q=_;break e}Q=o.return}}var v=t.current;for(Q=v;Q!==null;){s=Q;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,Q=A;else e:for(s=v;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rd(9,a)}}catch(x){ht(a,a.return,x)}if(a===s){Q=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Q=S;break e}Q=a.return}}if(Te=i,Eo(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(wd,t)}catch{}r=!0}return r}finally{Me=n,nr.transition=e}}return!1}function T_(t,e,n){e=ka(n,e),e=$4(t,e,1),t=Ji(t,e,1),e=_n(),t!==null&&(nc(t,1,e),Nn(t,e))}function ht(t,e,n){if(t.tag===3)T_(t,t,n);else for(;e!==null;){if(e.tag===3){T_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(eo===null||!eo.has(r))){t=ka(n,t),t=G4(e,t,1),e=Ji(e,t,1),t=_n(),e!==null&&(nc(e,1,t),Nn(e,t));break}}e=e.return}}function pP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(Xt&n)===n&&(Tt===4||Tt===3&&(Xt&130023424)===Xt&&500>dt()-V0?as(t,0):L0|=n),Nn(t,e)}function fI(t,e){e===0&&(t.mode&1?(e=ah,ah<<=1,!(ah&130023424)&&(ah=4194304)):e=1);var n=_n();t=gi(t,e),t!==null&&(nc(t,e,n),Nn(t,n))}function mP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fI(t,n)}function gP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),fI(t,n)}var dI;dI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,rP(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,Qe&&e.flags&1048576&&y4(e,Sf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xh(t,e),t=e.pendingProps;var i=Oa(e,un.current);Aa(e,n),i=O0(null,e,r,t,i,n);var o=N0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(r)?(o=!0,If(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,T0(e),i.updater=bd,e.stateNode=i,i._reactInternals=e,Im(e,r,t,n),e=bm(null,e,r,!0,o,n)):(e.tag=0,Qe&&o&&v0(e),gn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vP(r),t=cr(r,t),i){case 0:e=Sm(null,e,r,t,n);break e;case 1:e=m_(null,e,r,t,n);break e;case 11:e=d_(null,e,r,t,n);break e;case 14:e=p_(null,e,r,cr(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),Sm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),m_(t,e,r,i,n);case 3:e:{if(q4(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,i=o.element,C4(t,e),Pf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ka(Error($(423)),e),e=g_(t,e,r,n,i);break e}else if(r!==i){i=ka(Error($(424)),e),e=g_(t,e,r,n,i);break e}else for(Fn=Zi(e.stateNode.containerInfo.firstChild),Un=e,Qe=!0,fr=null,n=E4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),r===i){e=yi(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 5:return I4(e),t===null&&Em(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,gm(r,i)?s=null:o!==null&&gm(r,o)&&(e.flags|=32),Y4(t,e),gn(t,e,s,n),e.child;case 6:return t===null&&Em(e),null;case 13:return Q4(t,e,n);case 4:return S0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Da(e,null,r,n):gn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),d_(t,e,r,i,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ze(bf,r._currentValue),r._currentValue=s,o!==null)if(wr(o.value,s)){if(o.children===i.children&&!Pn.current){e=yi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=ui(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Am(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Am(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}gn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Aa(e,n),i=ir(i),r=r(i),e.flags|=1,gn(t,e,r,n),e.child;case 14:return r=e.type,i=cr(r,e.pendingProps),i=cr(r.type,i),p_(t,e,r,i,n);case 15:return X4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),Xh(t,e),e.tag=1,On(r)?(t=!0,If(e)):t=!1,Aa(e,n),W4(e,r,i),Im(e,r,i,n),bm(null,e,r,!0,t,n);case 19:return Z4(t,e,n);case 22:return K4(t,e,n)}throw Error($(156,e.tag))};function pI(t,e){return UC(t,e)}function yP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new yP(t,e,n,r)}function U0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vP(t){if(typeof t=="function")return U0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===s0)return 11;if(t===a0)return 14}return 2}function no(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qh(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")U0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Qs:return us(n.children,i,o,e);case o0:s=8,i|=8;break;case K1:return t=tr(12,n,e,i|2),t.elementType=K1,t.lanes=o,t;case Y1:return t=tr(13,n,e,i),t.elementType=Y1,t.lanes=o,t;case q1:return t=tr(19,n,e,i),t.elementType=q1,t.lanes=o,t;case IC:return Od(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AC:s=10;break e;case CC:s=9;break e;case s0:s=11;break e;case a0:s=14;break e;case Mi:s=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=tr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function us(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function Od(t,e,n,r){return t=tr(22,t,r,e),t.elementType=IC,t.lanes=n,t.stateNode={isHidden:!1},t}function u1(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function l1(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _P(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zp(0),this.expirationTimes=zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function H0(t,e,n,r,i,o,s,a,u){return t=new _P(t,e,n,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T0(o),t}function wP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mI(t){if(!t)return lo;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(On(n))return m4(t,n,e)}return e}function gI(t,e,n,r,i,o,s,a,u){return t=H0(n,r,!0,t,i,o,s,a,u),t.context=mI(null),n=t.current,r=_n(),i=to(n),o=ui(r,i),o.callback=e??null,Ji(n,o,i),t.current.lanes=i,nc(t,i,r),Nn(t,r),t}function Nd(t,e,n,r){var i=e.current,o=_n(),s=to(i);return n=mI(n),e.context===null?e.context=n:e.pendingContext=n,e=ui(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ji(i,e,s),t!==null&&(vr(t,i,s,o),Wh(t,i,s)),s}function Vf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z0(t,e){S_(t,e),(t=t.alternate)&&S_(t,e)}function EP(){return null}var yI=typeof reportError=="function"?reportError:function(t){console.error(t)};function W0(t){this._internalRoot=t}Dd.prototype.render=W0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Nd(t,e,null,null)};Dd.prototype.unmount=W0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Nd(null,t,null,null)}),e[mi]=null}};function Dd(t){this._internalRoot=t}Dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=KC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bi.length&&e!==0&&e<Bi[n].priority;n++);Bi.splice(n,0,t),n===0&&qC(t)}};function $0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b_(){}function AP(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Vf(s);o.call(l)}}var s=gI(e,r,t,0,null,!1,!1,"",b_);return t._reactRootContainer=s,t[mi]=s.current,Sl(t.nodeType===8?t.parentNode:t),gs(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Vf(u);a.call(l)}}var u=H0(t,0,!1,null,null,!1,!1,"",b_);return t._reactRootContainer=u,t[mi]=u.current,Sl(t.nodeType===8?t.parentNode:t),gs(function(){Nd(e,u,n,r)}),u}function kd(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=Vf(s);a.call(u)}}Nd(e,s,t,i)}else s=AP(n,e,t,i,r);return Vf(s)}GC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fu(e.pendingLanes);n!==0&&(c0(e,n|1),Nn(e,dt()),!(Te&6)&&(Ma=dt()+500,Eo()))}break;case 13:gs(function(){var r=gi(t,1);if(r!==null){var i=_n();vr(r,t,1,i)}}),z0(t,1)}};h0=function(t){if(t.tag===13){var e=gi(t,134217728);if(e!==null){var n=_n();vr(e,t,134217728,n)}z0(t,134217728)}};XC=function(t){if(t.tag===13){var e=to(t),n=gi(t,e);if(n!==null){var r=_n();vr(n,t,e,r)}z0(t,e)}};KC=function(){return Me};YC=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};sm=function(t,e,n){switch(e){case"input":if(J1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Id(r);if(!i)throw Error($(90));SC(r),J1(r,i)}}}break;case"textarea":RC(t,n);break;case"select":e=n.value,e!=null&&va(t,!!n.multiple,e,!1)}};MC=B0;LC=gs;var CP={usingClientEntryPoint:!1,Events:[ic,ta,Id,xC,kC,B0]},Ou={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IP={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FC(t),t===null?null:t.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||EP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{wd=vh.inject(IP),Mr=vh}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CP;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$0(e))throw Error($(200));return wP(t,e,null,n)};Wn.createRoot=function(t,e){if(!$0(t))throw Error($(299));var n=!1,r="",i=yI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=H0(t,1,!1,null,null,n,!1,r,i),t[mi]=e.current,Sl(t.nodeType===8?t.parentNode:t),new W0(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=FC(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return gs(t)};Wn.hydrate=function(t,e,n){if(!xd(e))throw Error($(200));return kd(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!$0(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=yI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=gI(e,null,t,1,n??null,i,!1,o,s),t[mi]=e.current,Sl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Dd(e)};Wn.render=function(t,e,n){if(!xd(e))throw Error($(200));return kd(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!xd(t))throw Error($(40));return t._reactRootContainer?(gs(function(){kd(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};Wn.unstable_batchedUpdates=B0;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xd(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return kd(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function vI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vI)}catch(t){console.error(t)}}vI(),vC.exports=Wn;var TP=vC.exports,R_=TP;G1.createRoot=R_.createRoot,G1.hydrateRoot=R_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ml.apply(this,arguments)}var Gi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gi||(Gi={}));const P_="popstate";function SP(t){t===void 0&&(t={});function e(i,o){let{pathname:s="/",search:a="",hash:u=""}=Ts(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Fm("",{pathname:s,search:a,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let u=i.location.href,l=u.indexOf("#");a=l===-1?u:u.slice(0,l)}return a+"#"+(typeof o=="string"?o:Bf(o))}function r(i,o){G0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return RP(e,n,r,t)}function wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function G0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bP(){return Math.random().toString(36).substr(2,8)}function O_(t,e){return{usr:t.state,key:t.key,idx:e}}function Fm(t,e,n,r){return n===void 0&&(n=null),Ml({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ts(e):e,{state:n,key:e&&e.key||r||bP()})}function Bf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ts(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Gi.Pop,u=null,l=c();l==null&&(l=0,s.replaceState(Ml({},s.state,{idx:l}),""));function c(){return(s.state||{idx:null}).idx}function h(){a=Gi.Pop;let w=c(),_=w==null?null:w-l;l=w,u&&u({action:a,location:y.location,delta:_})}function d(w,_){a=Gi.Push;let v=Fm(y.location,w,_);n&&n(v,w),l=c()+1;let A=O_(v,l),S=y.createHref(v);try{s.pushState(A,"",S)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(S)}o&&u&&u({action:a,location:y.location,delta:1})}function p(w,_){a=Gi.Replace;let v=Fm(y.location,w,_);n&&n(v,w),l=c();let A=O_(v,l),S=y.createHref(v);s.replaceState(A,"",S),o&&u&&u({action:a,location:y.location,delta:0})}function m(w){let _=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof w=="string"?w:Bf(w);return v=v.replace(/ $/,"%20"),wt(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let y={get action(){return a},get location(){return t(i,s)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(P_,h),u=w,()=>{i.removeEventListener(P_,h),u=null}},createHref(w){return e(i,w)},createURL:m,encodeLocation(w){let _=m(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:p,go(w){return s.go(w)}};return y}var N_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(N_||(N_={}));function PP(t,e,n){return n===void 0&&(n="/"),OP(t,e,n)}function OP(t,e,n,r){let i=typeof e=="string"?Ts(e):e,o=X0(i.pathname||"/",n);if(o==null)return null;let s=_I(t);NP(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let l=zP(o);a=jP(s[u],l)}return a}function _I(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(wt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=ro([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(wt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),_I(o.children,e,c,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:BP(l,o.index),routesMeta:c})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of wI(o.path))i(o,s,u)}),e}function wI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=wI(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function NP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DP=/^:[\w-]+$/,xP=3,kP=2,MP=1,LP=10,VP=-2,D_=t=>t==="*";function BP(t,e){let n=t.split("/"),r=n.length;return n.some(D_)&&(r+=VP),e&&(r+=kP),n.filter(i=>!D_(i)).reduce((i,o)=>i+(DP.test(o)?xP:o===""?MP:LP),r)}function FP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jP(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",h=UP({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:ro([o,h.pathname]),pathnameBase:XP(ro([o,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(o=ro([o,h.pathnameBase]))}return s}function UP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=HP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,h)=>{let{paramName:d,isOptional:p}=c;if(d==="*"){let y=a[h]||"";s=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?l[d]=void 0:l[d]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:t}}function HP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),G0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return G0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function X0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ts(t):t;return{pathname:n?n.startsWith("/")?n:$P(n,e):e,search:KP(r),hash:YP(i)}}function $P(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function c1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EI(t,e){let n=GP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AI(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ts(t):(i=Ml({},t),wt(!i.pathname||!i.pathname.includes("?"),c1("?","pathname","search",i)),wt(!i.pathname||!i.pathname.includes("#"),c1("#","pathname","hash",i)),wt(!i.search||!i.search.includes("#"),c1("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let u=WP(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const ro=t=>t.join("/").replace(/\/\/+/g,"/"),XP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CI=["post","put","patch","delete"];new Set(CI);const QP=["get",...CI];new Set(QP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ll.apply(this,arguments)}const K0=N.createContext(null),ZP=N.createContext(null),Ss=N.createContext(null),Md=N.createContext(null),Ao=N.createContext({outlet:null,matches:[],isDataRoute:!1}),II=N.createContext(null);function JP(t,e){let{relative:n}=e===void 0?{}:e;sc()||wt(!1);let{basename:r,navigator:i}=N.useContext(Ss),{hash:o,pathname:s,search:a}=SI(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:ro([r,s])),i.createHref({pathname:u,search:a,hash:o})}function sc(){return N.useContext(Md)!=null}function ac(){return sc()||wt(!1),N.useContext(Md).location}function TI(t){N.useContext(Ss).static||N.useLayoutEffect(t)}function Y0(){let{isDataRoute:t}=N.useContext(Ao);return t?d5():e5()}function e5(){sc()||wt(!1);let t=N.useContext(K0),{basename:e,future:n,navigator:r}=N.useContext(Ss),{matches:i}=N.useContext(Ao),{pathname:o}=ac(),s=JSON.stringify(EI(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return TI(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let h=AI(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ro([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,s,o,t])}function t5(){let{matches:t}=N.useContext(Ao),e=t[t.length-1];return e?e.params:{}}function SI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Ss),{matches:i}=N.useContext(Ao),{pathname:o}=ac(),s=JSON.stringify(EI(i,r.v7_relativeSplatPath));return N.useMemo(()=>AI(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function n5(t,e){return r5(t,e)}function r5(t,e,n,r){sc()||wt(!1);let{navigator:i}=N.useContext(Ss),{matches:o}=N.useContext(Ao),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let l=ac(),c;if(e){var h;let w=typeof e=="string"?Ts(e):e;u==="/"||(h=w.pathname)!=null&&h.startsWith(u)||wt(!1),c=w}else c=l;let d=c.pathname||"/",p=d;if(u!=="/"){let w=u.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=PP(t,{pathname:p}),y=u5(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:ro([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:ro([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return e&&y?N.createElement(Md.Provider,{value:{location:Ll({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Gi.Pop}},y):y}function i5(){let t=f5(),e=qP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const o5=N.createElement(i5,null);class s5 extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Ao.Provider,{value:this.props.routeContext},N.createElement(II.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a5(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(K0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Ao.Provider,{value:e},r)}function u5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=s.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);c>=0||wt(!1),s=s.slice(0,Math.min(s.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=c),h.route.id){let{loaderData:d,errors:p}=n,m=h.route.loader&&d[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){u=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,h,d)=>{let p,m=!1,y=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||o5,u&&(l<0&&d===0?(p5("route-fallback"),m=!0,w=null):l===d&&(m=!0,w=h.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,d+1)),v=()=>{let A;return p?A=y:m?A=w:h.route.Component?A=N.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=c,N.createElement(a5,{match:h,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?N.createElement(s5,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var bI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bI||{}),RI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(RI||{});function l5(t){let e=N.useContext(K0);return e||wt(!1),e}function c5(t){let e=N.useContext(ZP);return e||wt(!1),e}function h5(t){let e=N.useContext(Ao);return e||wt(!1),e}function PI(t){let e=h5(),n=e.matches[e.matches.length-1];return n.route.id||wt(!1),n.route.id}function f5(){var t;let e=N.useContext(II),n=c5(),r=PI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function d5(){let{router:t}=l5(bI.UseNavigateStable),e=PI(RI.UseNavigateStable),n=N.useRef(!1);return TI(()=>{n.current=!0}),N.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ll({fromRouteId:e},o)))},[t,e])}const x_={};function p5(t,e,n){x_[t]||(x_[t]=!0)}function m5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qn(t){wt(!1)}function g5(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gi.Pop,navigator:o,static:s=!1,future:a}=t;sc()&&wt(!1);let u=e.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:o,static:s,future:Ll({v7_relativeSplatPath:!1},a)}),[u,a,o,s]);typeof r=="string"&&(r=Ts(r));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:m="default"}=r,y=N.useMemo(()=>{let w=X0(c,u);return w==null?null:{location:{pathname:w,search:h,hash:d,state:p,key:m},navigationType:i}},[u,c,h,d,p,m,i]);return y==null?null:N.createElement(Ss.Provider,{value:l},N.createElement(Md.Provider,{children:n,value:y}))}function y5(t){let{children:e,location:n}=t;return n5(jm(e),n)}new Promise(()=>{});function jm(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let o=[...e,i];if(r.type===N.Fragment){n.push.apply(n,jm(r.props.children,o));return}r.type!==qn&&wt(!1),!r.props.index||!r.props.children||wt(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=jm(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Um.apply(this,arguments)}function v5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function w5(t,e){return t.button===0&&(!e||e==="_self")&&!_5(t)}function Hm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function E5(t,e){let n=Hm(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const A5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C5="6";try{window.__reactRouterVersion=C5}catch{}const I5="startTransition",k_=pb[I5];function T5(t){let{basename:e,children:n,future:r,window:i}=t,o=N.useRef();o.current==null&&(o.current=SP({window:i,v5Compat:!0}));let s=o.current,[a,u]=N.useState({action:s.action,location:s.location}),{v7_startTransition:l}=r||{},c=N.useCallback(h=>{l&&k_?k_(()=>u(h)):u(h)},[u,l]);return N.useLayoutEffect(()=>s.listen(c),[s,c]),N.useEffect(()=>m5(r),[r]),N.createElement(g5,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}const S5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nr=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:u,to:l,preventScrollReset:c,viewTransition:h}=e,d=v5(e,A5),{basename:p}=N.useContext(Ss),m,y=!1;if(typeof l=="string"&&b5.test(l)&&(m=l,S5))try{let A=new URL(window.location.href),S=l.startsWith("//")?new URL(A.protocol+l):new URL(l),x=X0(S.pathname,p);S.origin===A.origin&&x!=null?l=x+S.search+S.hash:y=!0}catch{}let w=JP(l,{relative:i}),_=R5(l,{replace:s,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:h});function v(A){r&&r(A),A.defaultPrevented||_(A)}return N.createElement("a",Um({},d,{href:m||w,onClick:y||o?r:v,ref:n,target:u}))});var M_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(M_||(M_={}));var L_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(L_||(L_={}));function R5(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=e===void 0?{}:e,u=Y0(),l=ac(),c=SI(t,{relative:s});return N.useCallback(h=>{if(w5(h,n)){h.preventDefault();let d=r!==void 0?r:Bf(l)===Bf(c);u(t,{replace:d,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[l,u,c,r,i,n,t,o,s,a])}function P5(t){let e=N.useRef(Hm(t)),n=N.useRef(!1),r=ac(),i=N.useMemo(()=>E5(r.search,n.current?null:e.current),[r.search]),o=Y0(),s=N.useCallback((a,u)=>{const l=Hm(typeof a=="function"?a(i):a);n.current=!0,o("?"+l,u)},[o,i]);return[i,s]}var V_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},O5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},NI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,h=(o&3)<<4|a>>4;let d=(a&15)<<2|l>>6,p=l&63;u||(p=64,s||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):O5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw new N5;const d=o<<2|a>>4;if(r.push(d),l!==64){const p=a<<4&240|l>>2;if(r.push(p),h!==64){const m=l<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D5=function(t){const e=OI(t);return NI.encodeByteArray(e,!0)},Ff=function(t){return D5(t).replace(/\./g,"")},DI=function(t){try{return NI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=()=>x5().__FIREBASE_DEFAULTS__,M5=()=>{if(typeof process>"u"||typeof V_>"u")return;const t=V_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DI(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return k5()||M5()||L5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xI=t=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kI=t=>{const e=xI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MI=()=>{var t;return(t=Ld())===null||t===void 0?void 0:t.config},LI=t=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ff(JSON.stringify(n)),Ff(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function F5(){var t;const e=(t=Ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function H5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z5(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function W5(){return!F5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $5(){try{return typeof indexedDB=="object"}catch{return!1}}function G5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="FirebaseError";class $r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=X5,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?K5(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new $r(i,a,r)}}function K5(t,e){return t.replace(Y5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Y5=/\{\$([^}]+)}/g;function q5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(B_(o)&&B_(s)){if(!jf(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Q5(t,e){const n=new Z5(t,e);return n.subscribe.bind(n)}class Z5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");J5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=h1),i.error===void 0&&(i.error=h1),i.complete===void 0&&(i.complete=h1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function h1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new V5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nO(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tO(t){return t===qo?void 0:t}function nO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const iO={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},oO=Ae.INFO,sO={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},aO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q0{constructor(e){this.name=e,this._logLevel=oO,this._logHandler=aO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const uO=(t,e)=>e.some(n=>t instanceof n);let F_,j_;function lO(){return F_||(F_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cO(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BI=new WeakMap,zm=new WeakMap,FI=new WeakMap,f1=new WeakMap,Q0=new WeakMap;function hO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(io(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&BI.set(n,t)}).catch(()=>{}),Q0.set(e,t),e}function fO(t){if(zm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});zm.set(t,e)}let Wm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dO(t){Wm=t(Wm)}function pO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(d1(this),e,...n);return FI.set(r,e.sort?e.sort():[e]),io(r)}:cO().includes(t)?function(...e){return t.apply(d1(this),e),io(BI.get(this))}:function(...e){return io(t.apply(d1(this),e))}}function mO(t){return typeof t=="function"?pO(t):(t instanceof IDBTransaction&&fO(t),uO(t,lO())?new Proxy(t,Wm):t)}function io(t){if(t instanceof IDBRequest)return hO(t);if(f1.has(t))return f1.get(t);const e=mO(t);return e!==t&&(f1.set(t,e),Q0.set(e,t)),e}const d1=t=>Q0.get(t);function gO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=io(s);return r&&s.addEventListener("upgradeneeded",u=>{r(io(s.result),u.oldVersion,u.newVersion,io(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const yO=["get","getKey","getAll","getAllKeys","count"],vO=["put","add","delete","clear"],p1=new Map;function U_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(p1.get(e))return p1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yO.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return p1.set(e,o),o}dO(t=>({...t,get:(e,n,r)=>U_(e,n)||t.get(e,n,r),has:(e,n)=>!!U_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",H_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new q0("@firebase/app"),EO="@firebase/app-compat",AO="@firebase/analytics-compat",CO="@firebase/analytics",IO="@firebase/app-check-compat",TO="@firebase/app-check",SO="@firebase/auth",bO="@firebase/auth-compat",RO="@firebase/database",PO="@firebase/data-connect",OO="@firebase/database-compat",NO="@firebase/functions",DO="@firebase/functions-compat",xO="@firebase/installations",kO="@firebase/installations-compat",MO="@firebase/messaging",LO="@firebase/messaging-compat",VO="@firebase/performance",BO="@firebase/performance-compat",FO="@firebase/remote-config",jO="@firebase/remote-config-compat",UO="@firebase/storage",HO="@firebase/storage-compat",zO="@firebase/firestore",WO="@firebase/vertexai-preview",$O="@firebase/firestore-compat",GO="firebase",XO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",KO={[$m]:"fire-core",[EO]:"fire-core-compat",[CO]:"fire-analytics",[AO]:"fire-analytics-compat",[TO]:"fire-app-check",[IO]:"fire-app-check-compat",[SO]:"fire-auth",[bO]:"fire-auth-compat",[RO]:"fire-rtdb",[PO]:"fire-data-connect",[OO]:"fire-rtdb-compat",[NO]:"fire-fn",[DO]:"fire-fn-compat",[xO]:"fire-iid",[kO]:"fire-iid-compat",[MO]:"fire-fcm",[LO]:"fire-fcm-compat",[VO]:"fire-perf",[BO]:"fire-perf-compat",[FO]:"fire-rc",[jO]:"fire-rc-compat",[UO]:"fire-gcs",[HO]:"fire-gcs-compat",[zO]:"fire-fst",[$O]:"fire-fst-compat",[WO]:"fire-vertex","fire-js":"fire-js",[GO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map,YO=new Map,Xm=new Map;function z_(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ys(t){const e=t.name;if(Xm.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,t);for(const n of Uf.values())z_(n,t);for(const n of YO.values())z_(n,t);return!0}function Vd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new uc("app","Firebase",qO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=XO;function Z0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw oo.create("bad-app-name",{appName:String(i)});if(n||(n=MI()),!n)throw oo.create("no-options");const o=Uf.get(i);if(o){if(jf(n,o.options)&&jf(r,o.config))return o;throw oo.create("duplicate-app",{appName:i})}const s=new rO(i);for(const u of Xm.values())s.addComponent(u);const a=new QO(n,r,s);return Uf.set(i,a),a}function J0(t=Gm){const e=Uf.get(t);if(!e&&t===Gm&&MI())return Z0();if(!e)throw oo.create("no-app",{appName:t});return e}function Vr(t,e,n){var r;let i=(r=KO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}ys(new co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="firebase-heartbeat-database",JO=1,Vl="firebase-heartbeat-store";let m1=null;function jI(){return m1||(m1=gO(ZO,JO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(t=>{throw oo.create("idb-open",{originalErrorMessage:t.message})})),m1}async function eN(t){try{const n=(await jI()).transaction(Vl),r=await n.objectStore(Vl).get(UI(t));return await n.done,r}catch(e){if(e instanceof $r)vi.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function W_(t,e){try{const r=(await jI()).transaction(Vl,"readwrite");await r.objectStore(Vl).put(e,UI(t)),await r.done}catch(n){if(n instanceof $r)vi.warn(n.message);else{const r=oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(r.message)}}}function UI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30*24*60*60*1e3;class rN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=nN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$_(),{heartbeatsToSend:r,unsentEntries:i}=iN(this._heartbeatsCache.heartbeats),o=Ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return vi.warn(n),""}}}function $_(){return new Date().toISOString().substring(0,10)}function iN(t,e=tN){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),G_(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),G_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $5()?G5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function G_(t){return Ff(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){ys(new co("platform-logger",e=>new _O(e),"PRIVATE")),ys(new co("heartbeat",e=>new rN(e),"PRIVATE")),Vr($m,H_,t),Vr($m,H_,"esm2017"),Vr("fire-js","")}sN("");function ey(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aN=HI,zI=new uc("auth","Firebase",HI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=new q0("@firebase/auth");function uN(t,...e){Hf.logLevel<=Ae.WARN&&Hf.warn(`Auth (${bs}): ${t}`,...e)}function Qh(t,...e){Hf.logLevel<=Ae.ERROR&&Hf.error(`Auth (${bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw ty(t,...e)}function Br(t,...e){return ty(t,...e)}function WI(t,e,n){const r=Object.assign(Object.assign({},aN()),{[e]:n});return new uc("auth","Firebase",r).create(e,{appName:t.name})}function li(t){return WI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ty(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zI.create(t,...e)}function ue(t,e,...n){if(!t)throw ty(e,...n)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qh(e),new Error(e)}function _i(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lN(){return X_()==="http:"||X_()==="https:"}function X_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lN()||U5()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=B5()||H5()}get(){return cN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e){_i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new cc(3e4,6e4);function Co(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Io(t,e,n,r,i={}){return GI(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=lc(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},o);return j5()||(l.referrerPolicy="no-referrer"),$I.fetch()(XI(t,t.config.apiHost,n,a),l)})}async function GI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fN),e);try{const i=new mN(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw _h(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw _h(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw _h(t,"user-disabled",s);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw WI(t,c,l);Er(t,c)}}catch(i){if(i instanceof $r)throw i;Er(t,"network-request-failed",{message:String(i)})}}async function hc(t,e,n,r,i={}){const o=await Io(t,e,n,r,i);return"mfaPendingCredential"in o&&Er(t,"multi-factor-auth-required",{_serverResponse:o}),o}function XI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ny(t.config,i):`${t.config.apiScheme}://${i}`}function pN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),dN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _h(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(t,e,r);return i.customData._tokenResponse=n,i}function K_(t){return t!==void 0&&t.enterprise!==void 0}class gN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function yN(t,e){return Io(t,"GET","/v2/recaptchaConfig",Co(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(t,e){return Io(t,"POST","/v1/accounts:delete",e)}async function KI(t,e){return Io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _N(t,e=!1){const n=Et(t),r=await n.getIdToken(e),i=ry(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ul(g1(i.auth_time)),issuedAtTime:ul(g1(i.iat)),expirationTime:ul(g1(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function g1(t){return Number(t)*1e3}function ry(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const i=DI(n);return i?JSON.parse(i):(Qh("Failed to decode base64 JWT payload"),null)}catch(i){return Qh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Y_(t){const e=ry(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $r&&wN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Bl(t,KI(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?YI(o.providerUserInfo):[],a=CN(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ym(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function AN(t){const e=Et(t);await zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YI(t){return t.map(e=>{var{providerId:n}=e,r=ey(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){const n=await GI(t,{},async()=>{const r=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=XI(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$I.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TN(t,e){return Io(t,"POST","/v2/accounts:revokeToken",Co(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Y_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await IN(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Ia;return r&&(ue(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ue(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ym(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _N(this,e)}reload(){return AN(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(li(this.auth));const e=await this.getIdToken();return await Bl(this,vN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:A,emailVerified:S,isAnonymous:x,providerData:M,stsTokenManager:T}=n;ue(A&&T,e,"internal-error");const I=Ia.fromJSON(this.name,T);ue(typeof A=="string",e,"internal-error"),Pi(h,e.name),Pi(d,e.name),ue(typeof S=="boolean",e,"internal-error"),ue(typeof x=="boolean",e,"internal-error"),Pi(p,e.name),Pi(m,e.name),Pi(y,e.name),Pi(w,e.name),Pi(_,e.name),Pi(v,e.name);const R=new oi({uid:A,auth:e,email:d,emailVerified:S,displayName:h,isAnonymous:x,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:I,createdAt:_,lastLoginAt:v});return M&&Array.isArray(M)&&(R.providerData=M.map(O=>Object.assign({},O))),w&&(R._redirectEventId=w),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ia;i.updateFromServerResponse(n);const o=new oi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?YI(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Ia;a.updateFromIdToken(r);const u=new oi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ym(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=new Map;function si(t){_i(t instanceof Function,"Expected a class definition");let e=q_.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,q_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qI.type="NONE";const Q_=qI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ta{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Zh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?oi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ta(si(Q_),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||si(Q_);const s=Zh(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const c=await l._get(s);if(c){const h=oi._fromJSON(e,c);l!==o&&(a=h),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Ta(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new Ta(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nT(e))return"Blackberry";if(rT(e))return"Webos";if(ZI(e))return"Safari";if((e.includes("chrome/")||JI(e))&&!e.includes("edge/"))return"Chrome";if(tT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QI(t=ln()){return/firefox\//i.test(t)}function ZI(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JI(t=ln()){return/crios\//i.test(t)}function eT(t=ln()){return/iemobile/i.test(t)}function tT(t=ln()){return/android/i.test(t)}function nT(t=ln()){return/blackberry/i.test(t)}function rT(t=ln()){return/webos/i.test(t)}function iy(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SN(t=ln()){var e;return iy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bN(){return z5()&&document.documentMode===10}function iT(t=ln()){return iy(t)||tT(t)||rT(t)||nT(t)||/windows phone/i.test(t)||eT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e=[]){let n;switch(t){case"Browser":n=Z_(ln());break;case"Worker":n=`${Z_(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e={}){return Io(t,"GET","/v2/passwordPolicy",Co(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=6;class NN{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:ON,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J_(this),this.idTokenSubscription=new J_(this),this.beforeStateQueue=new RN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=si(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KI(this,{idToken:e}),r=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(li(this));const n=e?Et(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PN(this),n=new NN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&si(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rs(t){return Et(t)}class J_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q5(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xN(t){Bd=t}function sT(t){return Bd.loadJS(t)}function kN(){return Bd.recaptchaEnterpriseScript}function MN(){return Bd.gapiScript}function LN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VN="recaptcha-enterprise",BN="NO_RECAPTCHA";class FN{constructor(e){this.type=VN,this.auth=Rs(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{yN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new gN(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){const u=window.grecaptcha;K_(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(BN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&K_(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=kN();u.length!==0&&(u+=a),sT(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}}async function ew(t,e,n,r=!1){const i=new FN(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function qm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ew(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await ew(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e){const n=Vd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(jf(o,e??{}))return i;Er(i,"already-initialized")}return n.initialize({options:e})}function UN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HN(t,e,n){const r=Rs(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=aT(e),{host:s,port:a}=zN(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),WN()}function aT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zN(t){const e=aT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:tw(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:tw(s)}}}function tw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function $N(t,e){return Io(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",Co(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",Co(t,e))}async function KN(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",Co(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends oy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Fl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qm(e,n,"signInWithPassword",GN);case"emailLink":return XN(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qm(e,r,"signUpPassword",$N);case"emailLink":return KN(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",Co(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="http://localhost";class vs extends oy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=ey(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new vs(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}buildRequest(){const e={requestUri:YN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QN(t){const e=Uu(Hu(t)).link,n=e?Uu(Hu(e)).deep_link_id:null,r=Uu(Hu(t)).deep_link_id;return(r?Uu(Hu(r)).link:null)||r||n||e||t}class sy{constructor(e){var n,r,i,o,s,a;const u=Uu(Hu(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,c=(r=u.oobCode)!==null&&r!==void 0?r:null,h=qN((i=u.mode)!==null&&i!==void 0?i:null);ue(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=QN(e);try{return new sy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return Fl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sy.parseLink(n);return ue(r,"argument-error"),Fl._fromEmailAndCode(e,r.code,r.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends uT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends fc{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ui.credential(n,r)}catch{return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com";Ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends fc{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends fc{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zi.credential(n,r)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return hc(t,"POST","/v1/accounts:signUp",Co(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await oi._fromIdTokenResponse(e,r,i),s=nw(r);return new _s({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=nw(r);return new _s({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function nw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends $r{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wf(e,n,r,i)}}function lT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wf._fromErrorAndOperation(t,o,e,r):o})}async function JN(t,e,n=!1){const r=await Bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _s._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(t,e,n=!1){const{auth:r}=t;if(Dr(r.app))return Promise.reject(li(r));const i="reauthenticate";try{const o=await Bl(t,lT(r,i,e,t),n);ue(o.idToken,r,"internal-error");const s=ry(o.idToken);ue(s,r,"internal-error");const{sub:a}=s;return ue(t.uid===a,r,"user-mismatch"),_s._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Er(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t,e,n=!1){if(Dr(t.app))return Promise.reject(li(t));const r="signIn",i=await lT(t,r,e),o=await _s._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function t9(t,e){return cT(Rs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t){const e=Rs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function n9(t,e,n){if(Dr(t.app))return Promise.reject(li(t));const r=Rs(t),s=await qm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&hT(t),u}),a=await _s._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function r9(t,e,n){return Dr(t.app)?Promise.reject(li(t)):t9(Et(t),Ya.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hT(t),r})}function i9(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function o9(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function Fd(t,e,n,r){return Et(t).onAuthStateChanged(e,n,r)}function s9(t){return Et(t).signOut()}const $f="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($f,"1"),this.storage.removeItem($f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=1e3,u9=10;class dT extends fT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);bN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,u9):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},a9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dT.type="LOCAL";const l9=dT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT extends fT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pT.type="SESSION";const mT=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new jd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async l=>l(n.origin,o)),u=await c9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const l=ay("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function f9(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function d9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function m9(){return gT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firebaseLocalStorageDb",g9=1,Gf="firebaseLocalStorage",vT="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ud(t,e){return t.transaction([Gf],e?"readwrite":"readonly").objectStore(Gf)}function y9(){const t=indexedDB.deleteDatabase(yT);return new dc(t).toPromise()}function Qm(){const t=indexedDB.open(yT,g9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gf,{keyPath:vT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gf)?e(r):(r.close(),await y9(),e(await Qm()))})})}async function rw(t,e,n){const r=Ud(t,!0).put({[vT]:e,value:n});return new dc(r).toPromise()}async function v9(t,e){const n=Ud(t,!1).get(e),r=await new dc(n).toPromise();return r===void 0?null:r.value}function iw(t,e){const n=Ud(t,!0).delete(e);return new dc(n).toPromise()}const _9=800,w9=3;class _T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>w9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(m9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await d9(),!this.activeServiceWorker)return;this.sender=new h9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await rw(e,$f,"1"),await iw(e,$f),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>v9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Ud(i,!1).getAll();return new dc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_T.type="LOCAL";const E9=_T;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t,e){return e?si(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends oy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C9(t){return cT(t.auth,new uy(t),t.bypassAuthState)}function I9(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),e9(n,new uy(t),t.bypassAuthState)}async function T9(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),JN(n,new uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C9;case"linkViaPopup":case"linkViaRedirect":return T9;case"reauthViaPopup":case"reauthViaRedirect":return I9;default:Er(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=new cc(2e3,1e4);class ua extends wT{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=ay();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S9.get())};e()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="pendingRedirect",Jh=new Map;class R9 extends wT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const r=await P9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P9(t,e){const n=D9(e),r=N9(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function O9(t,e){Jh.set(t._key(),e)}function N9(t){return si(t._redirectPersistence)}function D9(t){return Zh(b9,t.config.apiKey,t.name)}async function x9(t,e,n=!1){if(Dr(t.app))return Promise.reject(li(t));const r=Rs(t),i=A9(r,e),s=await new R9(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=10*60*1e3;class M9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ET(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k9&&this.cachedEventUids.clear(),this.cachedEventUids.has(ow(e))}saveEventToCache(e){this.cachedEventUids.add(ow(e)),this.lastProcessedEventTime=Date.now()}}function ow(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ET({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ET(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(t,e={}){return Io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F9=/^https?/;async function j9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V9(t);for(const n of e)try{if(U9(n))return}catch{}Er(t,"unauthorized-domain")}function U9(t){const e=Km(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!F9.test(n))return!1;if(B9.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=new cc(3e4,6e4);function sw(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function z9(t){return new Promise((e,n)=>{var r,i,o;function s(){sw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sw(),n(Br(t,"network-request-failed"))},timeout:H9.get()})}if(!((i=(r=Fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Fr().gapi)===null||o===void 0)&&o.load)s();else{const a=LN("iframefcb");return Fr()[a]=()=>{gapi.load?s():n(Br(t,"network-request-failed"))},sT(`${MN()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ef=null,e})}let ef=null;function W9(t){return ef=ef||z9(t),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=new cc(5e3,15e3),G9="__/auth/iframe",X9="emulator/auth/iframe",K9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q9(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ny(e,X9):`https://${t.config.authDomain}/${G9}`,r={apiKey:e.apiKey,appName:t.name,v:bs},i=Y9.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${lc(r).slice(1)}`}async function Q9(t){const e=await W9(t),n=Fr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:q9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K9,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Br(t,"network-request-failed"),a=Fr().setTimeout(()=>{o(s)},$9.get());function u(){Fr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J9=500,eD=600,tD="_blank",nD="http://localhost";class aw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rD(t,e,n,r=J9,i=eD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Z9),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ln().toLowerCase();n&&(a=JI(l)?tD:n),QI(l)&&(e=e||nD,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(SN(l)&&a!=="_self")return iD(e||"",a),new aw(null);const h=window.open(e||"",a,c);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new aw(h)}function iD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="__/auth/handler",sD="emulator/auth/handler",aD=encodeURIComponent("fac");async function uw(t,e,n,r,i,o){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bs,eventId:i};if(e instanceof uT){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",q5(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))s[c]=h}if(e instanceof fc){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await t._getAppCheckToken(),l=u?`#${aD}=${encodeURIComponent(u)}`:"";return`${uD(t)}?${lc(a).slice(1)}${l}`}function uD({config:t}){return t.emulator?ny(t,sD):`https://${t.authDomain}/${oD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="webStorageSupport";class lD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mT,this._completeRedirectFn=x9,this._overrideRedirectResult=O9}async _openPopup(e,n,r,i){var o;_i((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await uw(e,n,r,Km(),i);return rD(e,s,ay())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await uw(e,n,r,Km(),i);return f9(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(_i(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Q9(e),r=new M9(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(y1,{type:y1},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[y1];s!==void 0&&n(!!s),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iT()||ZI()||iy()}}const cD=lD;var lw="@firebase/auth",cw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dD(t){ys(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ue(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oT(t)},l=new DN(r,i,o,u);return UN(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ys(new co("auth-internal",e=>{const n=Rs(e.getProvider("auth").getImmediate());return(r=>new hD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(lw,cw,fD(t)),Vr(lw,cw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=5*60,mD=LI("authIdTokenMaxAge")||pD;let hw=null;const gD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mD)return;const i=n==null?void 0:n.token;hw!==i&&(hw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function AT(t=J0()){const e=Vd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jN(t,{popupRedirectResolver:cD,persistence:[E9,l9,mT]}),r=LI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=gD(o.toString());o9(n,s,()=>s(n.currentUser)),i9(n,a=>s(a))}}const i=xI("auth");return i&&HN(n,`http://${i}`),n}function yD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Br("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",yD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dD("Browser");var vD="firebase",_D="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(vD,_D,"app");var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,CT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,I){function R(){}R.prototype=I.prototype,T.D=I.prototype,T.prototype=new R,T.prototype.constructor=T,T.C=function(O,k,L){for(var D=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)D[ne-2]=arguments[ne];return I.prototype[k].apply(O,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)O[k]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(k=0;16>k;++k)O[k]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=T.g[0],R=T.g[1],k=T.g[2];var L=T.g[3],D=I+(L^R&(k^L))+O[0]+3614090360&4294967295;I=R+(D<<7&4294967295|D>>>25),D=L+(k^I&(R^k))+O[1]+3905402710&4294967295,L=I+(D<<12&4294967295|D>>>20),D=k+(R^L&(I^R))+O[2]+606105819&4294967295,k=L+(D<<17&4294967295|D>>>15),D=R+(I^k&(L^I))+O[3]+3250441966&4294967295,R=k+(D<<22&4294967295|D>>>10),D=I+(L^R&(k^L))+O[4]+4118548399&4294967295,I=R+(D<<7&4294967295|D>>>25),D=L+(k^I&(R^k))+O[5]+1200080426&4294967295,L=I+(D<<12&4294967295|D>>>20),D=k+(R^L&(I^R))+O[6]+2821735955&4294967295,k=L+(D<<17&4294967295|D>>>15),D=R+(I^k&(L^I))+O[7]+4249261313&4294967295,R=k+(D<<22&4294967295|D>>>10),D=I+(L^R&(k^L))+O[8]+1770035416&4294967295,I=R+(D<<7&4294967295|D>>>25),D=L+(k^I&(R^k))+O[9]+2336552879&4294967295,L=I+(D<<12&4294967295|D>>>20),D=k+(R^L&(I^R))+O[10]+4294925233&4294967295,k=L+(D<<17&4294967295|D>>>15),D=R+(I^k&(L^I))+O[11]+2304563134&4294967295,R=k+(D<<22&4294967295|D>>>10),D=I+(L^R&(k^L))+O[12]+1804603682&4294967295,I=R+(D<<7&4294967295|D>>>25),D=L+(k^I&(R^k))+O[13]+4254626195&4294967295,L=I+(D<<12&4294967295|D>>>20),D=k+(R^L&(I^R))+O[14]+2792965006&4294967295,k=L+(D<<17&4294967295|D>>>15),D=R+(I^k&(L^I))+O[15]+1236535329&4294967295,R=k+(D<<22&4294967295|D>>>10),D=I+(k^L&(R^k))+O[1]+4129170786&4294967295,I=R+(D<<5&4294967295|D>>>27),D=L+(R^k&(I^R))+O[6]+3225465664&4294967295,L=I+(D<<9&4294967295|D>>>23),D=k+(I^R&(L^I))+O[11]+643717713&4294967295,k=L+(D<<14&4294967295|D>>>18),D=R+(L^I&(k^L))+O[0]+3921069994&4294967295,R=k+(D<<20&4294967295|D>>>12),D=I+(k^L&(R^k))+O[5]+3593408605&4294967295,I=R+(D<<5&4294967295|D>>>27),D=L+(R^k&(I^R))+O[10]+38016083&4294967295,L=I+(D<<9&4294967295|D>>>23),D=k+(I^R&(L^I))+O[15]+3634488961&4294967295,k=L+(D<<14&4294967295|D>>>18),D=R+(L^I&(k^L))+O[4]+3889429448&4294967295,R=k+(D<<20&4294967295|D>>>12),D=I+(k^L&(R^k))+O[9]+568446438&4294967295,I=R+(D<<5&4294967295|D>>>27),D=L+(R^k&(I^R))+O[14]+3275163606&4294967295,L=I+(D<<9&4294967295|D>>>23),D=k+(I^R&(L^I))+O[3]+4107603335&4294967295,k=L+(D<<14&4294967295|D>>>18),D=R+(L^I&(k^L))+O[8]+1163531501&4294967295,R=k+(D<<20&4294967295|D>>>12),D=I+(k^L&(R^k))+O[13]+2850285829&4294967295,I=R+(D<<5&4294967295|D>>>27),D=L+(R^k&(I^R))+O[2]+4243563512&4294967295,L=I+(D<<9&4294967295|D>>>23),D=k+(I^R&(L^I))+O[7]+1735328473&4294967295,k=L+(D<<14&4294967295|D>>>18),D=R+(L^I&(k^L))+O[12]+2368359562&4294967295,R=k+(D<<20&4294967295|D>>>12),D=I+(R^k^L)+O[5]+4294588738&4294967295,I=R+(D<<4&4294967295|D>>>28),D=L+(I^R^k)+O[8]+2272392833&4294967295,L=I+(D<<11&4294967295|D>>>21),D=k+(L^I^R)+O[11]+1839030562&4294967295,k=L+(D<<16&4294967295|D>>>16),D=R+(k^L^I)+O[14]+4259657740&4294967295,R=k+(D<<23&4294967295|D>>>9),D=I+(R^k^L)+O[1]+2763975236&4294967295,I=R+(D<<4&4294967295|D>>>28),D=L+(I^R^k)+O[4]+1272893353&4294967295,L=I+(D<<11&4294967295|D>>>21),D=k+(L^I^R)+O[7]+4139469664&4294967295,k=L+(D<<16&4294967295|D>>>16),D=R+(k^L^I)+O[10]+3200236656&4294967295,R=k+(D<<23&4294967295|D>>>9),D=I+(R^k^L)+O[13]+681279174&4294967295,I=R+(D<<4&4294967295|D>>>28),D=L+(I^R^k)+O[0]+3936430074&4294967295,L=I+(D<<11&4294967295|D>>>21),D=k+(L^I^R)+O[3]+3572445317&4294967295,k=L+(D<<16&4294967295|D>>>16),D=R+(k^L^I)+O[6]+76029189&4294967295,R=k+(D<<23&4294967295|D>>>9),D=I+(R^k^L)+O[9]+3654602809&4294967295,I=R+(D<<4&4294967295|D>>>28),D=L+(I^R^k)+O[12]+3873151461&4294967295,L=I+(D<<11&4294967295|D>>>21),D=k+(L^I^R)+O[15]+530742520&4294967295,k=L+(D<<16&4294967295|D>>>16),D=R+(k^L^I)+O[2]+3299628645&4294967295,R=k+(D<<23&4294967295|D>>>9),D=I+(k^(R|~L))+O[0]+4096336452&4294967295,I=R+(D<<6&4294967295|D>>>26),D=L+(R^(I|~k))+O[7]+1126891415&4294967295,L=I+(D<<10&4294967295|D>>>22),D=k+(I^(L|~R))+O[14]+2878612391&4294967295,k=L+(D<<15&4294967295|D>>>17),D=R+(L^(k|~I))+O[5]+4237533241&4294967295,R=k+(D<<21&4294967295|D>>>11),D=I+(k^(R|~L))+O[12]+1700485571&4294967295,I=R+(D<<6&4294967295|D>>>26),D=L+(R^(I|~k))+O[3]+2399980690&4294967295,L=I+(D<<10&4294967295|D>>>22),D=k+(I^(L|~R))+O[10]+4293915773&4294967295,k=L+(D<<15&4294967295|D>>>17),D=R+(L^(k|~I))+O[1]+2240044497&4294967295,R=k+(D<<21&4294967295|D>>>11),D=I+(k^(R|~L))+O[8]+1873313359&4294967295,I=R+(D<<6&4294967295|D>>>26),D=L+(R^(I|~k))+O[15]+4264355552&4294967295,L=I+(D<<10&4294967295|D>>>22),D=k+(I^(L|~R))+O[6]+2734768916&4294967295,k=L+(D<<15&4294967295|D>>>17),D=R+(L^(k|~I))+O[13]+1309151649&4294967295,R=k+(D<<21&4294967295|D>>>11),D=I+(k^(R|~L))+O[4]+4149444226&4294967295,I=R+(D<<6&4294967295|D>>>26),D=L+(R^(I|~k))+O[11]+3174756917&4294967295,L=I+(D<<10&4294967295|D>>>22),D=k+(I^(L|~R))+O[2]+718787259&4294967295,k=L+(D<<15&4294967295|D>>>17),D=R+(L^(k|~I))+O[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+L&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var R=I-this.blockSize,O=this.B,k=this.h,L=0;L<I;){if(k==0)for(;L<=R;)i(this,T,L),L+=this.blockSize;if(typeof T=="string"){for(;L<I;)if(O[k++]=T.charCodeAt(L++),k==this.blockSize){i(this,O),k=0;break}}else for(;L<I;)if(O[k++]=T[L++],k==this.blockSize){i(this,O),k=0;break}}this.h=k,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var R=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=R&255,R/=256;for(this.u(T),T=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)T[R++]=this.g[I]>>>O&255;return T};function o(T,I){var R=a;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=I(T)}function s(T,I){this.h=I;for(var R=[],O=!0,k=T.length-1;0<=k;k--){var L=T[k]|0;O&&L==I||(R[k]=L,O=!1)}this.g=R}var a={};function u(T){return-128<=T&&128>T?o(T,function(I){return new s([I|0],0>I?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return w(l(-T));for(var I=[],R=1,O=0;T>=R;O++)I[O]=T/R|0,R*=4294967296;return new s(I,0)}function c(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return w(c(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=l(Math.pow(I,8)),O=h,k=0;k<T.length;k+=8){var L=Math.min(8,T.length-k),D=parseInt(T.substring(k,k+L),I);8>L?(L=l(Math.pow(I,L)),O=O.j(L).add(l(D))):(O=O.j(R),O=O.add(l(D)))}return O}var h=u(0),d=u(1),p=u(16777216);t=s.prototype,t.m=function(){if(y(this))return-w(this).m();for(var T=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);T+=(0<=O?O:4294967296+O)*I,I*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(y(this))return"-"+w(this).toString(T);for(var I=l(Math.pow(T,6)),R=this,O="";;){var k=S(R,I).g;R=_(R,k.j(I));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(T);if(R=k,m(R))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=_(this,T),y(T)?-1:m(T)?0:1};function w(T){for(var I=T.g.length,R=[],O=0;O<I;O++)R[O]=~T.g[O];return new s(R,~T.h).add(d)}t.abs=function(){return y(this)?w(this):this},t.add=function(T){for(var I=Math.max(this.g.length,T.g.length),R=[],O=0,k=0;k<=I;k++){var L=O+(this.i(k)&65535)+(T.i(k)&65535),D=(L>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);O=D>>>16,L&=65535,D&=65535,R[k]=D<<16|L}return new s(R,R[R.length-1]&-2147483648?-1:0)};function _(T,I){return T.add(w(I))}t.j=function(T){if(m(this)||m(T))return h;if(y(this))return y(T)?w(this).j(w(T)):w(w(this).j(T));if(y(T))return w(this.j(w(T)));if(0>this.l(p)&&0>T.l(p))return l(this.m()*T.m());for(var I=this.g.length+T.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<T.g.length;k++){var L=this.i(O)>>>16,D=this.i(O)&65535,ne=T.i(k)>>>16,ge=T.i(k)&65535;R[2*O+2*k]+=D*ge,v(R,2*O+2*k),R[2*O+2*k+1]+=L*ge,v(R,2*O+2*k+1),R[2*O+2*k+1]+=D*ne,v(R,2*O+2*k+1),R[2*O+2*k+2]+=L*ne,v(R,2*O+2*k+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new s(R,0)};function v(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function A(T,I){this.g=T,this.h=I}function S(T,I){if(m(I))throw Error("division by zero");if(m(T))return new A(h,h);if(y(T))return I=S(w(T),I),new A(w(I.g),w(I.h));if(y(I))return I=S(T,w(I)),new A(w(I.g),I.h);if(30<T.g.length){if(y(T)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var R=d,O=I;0>=O.l(T);)R=x(R),O=x(O);var k=M(R,1),L=M(O,1);for(O=M(O,2),R=M(R,2);!m(O);){var D=L.add(O);0>=D.l(T)&&(k=k.add(R),L=D),O=M(O,1),R=M(R,1)}return I=_(T,k.j(I)),new A(k,I)}for(k=h;0<=T.l(I);){for(R=Math.max(1,Math.floor(T.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=l(R),D=L.j(I);y(D)||0<D.l(T);)R-=O,L=l(R),D=L.j(I);m(L)&&(L=d),k=k.add(L),T=_(T,D)}return new A(k,T)}t.A=function(T){return S(this,T).h},t.and=function(T){for(var I=Math.max(this.g.length,T.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&T.i(O);return new s(R,this.h&T.h)},t.or=function(T){for(var I=Math.max(this.g.length,T.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|T.i(O);return new s(R,this.h|T.h)},t.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^T.i(O);return new s(R,this.h^T.h)};function x(T){for(var I=T.g.length+1,R=[],O=0;O<I;O++)R[O]=T.i(O)<<1|T.i(O-1)>>>31;return new s(R,T.h)}function M(T,I){var R=I>>5;I%=32;for(var O=T.g.length-R,k=[],L=0;L<O;L++)k[L]=0<I?T.i(L+R)>>>I|T.i(L+R+1)<<32-I:T.i(L+R);return new s(k,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CT=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=c,ls=s}).apply(typeof fw<"u"?fw:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IT,zu,TT,tf,Zm,ST,bT,RT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,E){return f==Array.prototype||f==Object.prototype||(f[g]=E.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var g=0;g<f.length;++g){var E=f[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function i(f,g){if(g)e:{var E=r;f=f.split(".");for(var b=0;b<f.length-1;b++){var V=f[b];if(!(V in E))break e;E=E[V]}f=f[f.length-1],b=E[f],g=g(b),g!=b&&g!=null&&e(E,f,{configurable:!0,writable:!0,value:g})}}function o(f,g){f instanceof String&&(f+="");var E=0,b=!1,V={next:function(){if(!b&&E<f.length){var F=E++;return{value:g(F,f[F]),done:!1}}return b=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(f){return f||function(){return o(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function l(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function c(f,g,E){return f.call.apply(f.bind,arguments)}function h(f,g,E){if(!f)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,b),f.apply(g,V)}}return function(){return f.apply(g,arguments)}}function d(f,g,E){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,d.apply(null,arguments)}function p(f,g){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),f.apply(this,b)}}function m(f,g){function E(){}E.prototype=g.prototype,f.aa=g.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(b,V,F){for(var K=Array(arguments.length-2),je=2;je<arguments.length;je++)K[je-2]=arguments[je];return g.prototype[V].apply(b,K)}}function y(f){const g=f.length;if(0<g){const E=Array(g);for(let b=0;b<g;b++)E[b]=f[b];return E}return[]}function w(f,g){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(u(b)){const V=f.length||0,F=b.length||0;f.length=V+F;for(let K=0;K<F;K++)f[V+K]=b[K]}else f.push(b)}}class _{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(f){return/^[\s\xa0]*$/.test(f)}function A(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function S(f){return S[" "](f),f}S[" "]=function(){};var x=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function M(f,g,E){for(const b in f)g.call(E,f[b],b,f)}function T(f,g){for(const E in f)g.call(void 0,f[E],E,f)}function I(f){const g={};for(const E in f)g[E]=f[E];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,g){let E,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(E in b)f[E]=b[E];for(let F=0;F<R.length;F++)E=R[F],Object.prototype.hasOwnProperty.call(b,E)&&(f[E]=b[E])}}function k(f){var g=1;f=f.split(":");const E=[];for(;0<g&&f.length;)E.push(f.shift()),g--;return f.length&&E.push(f.join(":")),E}function L(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Z;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,E){const b=ge.get();b.set(g,E),this.h?this.h.next=b:this.g=b,this.h=b}}var ge=new _(()=>new de,f=>f.reset());class de{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,G=!1,Z=new ne,J=()=>{const f=a.Promise.resolve(void 0);Fe=()=>{f.then(W)}};var W=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(E){L(E)}var g=ge;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}G=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,g),a.removeEventListener("test",E,g)}catch{}return f}();function We(f,g){if(se.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,b=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(x){e:{try{S(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else E=="mouseover"?g=f.fromElement:E=="mouseout"&&(g=f.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ve[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&We.aa.h.call(this)}}m(We,se);var ve={2:"touch",3:"pen",4:"mouse"};We.prototype.h=function(){We.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Xr=0;function Cn(f,g,E,b,V){this.listener=f,this.proxy=null,this.src=g,this.type=E,this.capture=!!b,this.ha=V,this.key=++Xr,this.da=this.fa=!1}function kn(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Qt(f){this.src=f,this.g={},this.h=0}Qt.prototype.add=function(f,g,E,b,V){var F=f.toString();f=this.g[F],f||(f=this.g[F]=[],this.h++);var K=No(f,g,b,V);return-1<K?(g=f[K],E||(g.fa=!1)):(g=new Cn(g,this.src,F,!!b,V),g.fa=E,f.push(g)),g};function Kr(f,g){var E=g.type;if(E in f.g){var b=f.g[E],V=Array.prototype.indexOf.call(b,g,void 0),F;(F=0<=V)&&Array.prototype.splice.call(b,V,1),F&&(kn(g),f.g[E].length==0&&(delete f.g[E],f.h--))}}function No(f,g,E,b){for(var V=0;V<f.length;++V){var F=f[V];if(!F.da&&F.listener==g&&F.capture==!!E&&F.ha==b)return V}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),Yr={};function hn(f,g,E,b,V){if(Array.isArray(g)){for(var F=0;F<g.length;F++)hn(f,g[F],E,b,V);return null}return E=Mc(E),f&&f[Ue]?f.K(g,E,l(b)?!!b.capture:!1,V):Ls(f,g,E,!1,b,V)}function Ls(f,g,E,b,V,F){if(!g)throw Error("Invalid event type");var K=l(V)?!!V.capture:!!V,je=Vs(f);if(je||(f[tt]=je=new Qt(f)),E=je.add(g,E,b,K,F),E.proxy)return E;if(b=xc(),E.proxy=b,b.src=f,b.listener=E,f.addEventListener)we||(V=K),V===void 0&&(V=!1),f.addEventListener(g.toString(),b,V);else if(f.attachEvent)f.attachEvent(kc(g.toString()),b);else if(f.addListener&&f.removeListener)f.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function xc(){function f(E){return g.call(f.src,f.listener,E)}const g=bp;return f}function ru(f,g,E,b,V){if(Array.isArray(g))for(var F=0;F<g.length;F++)ru(f,g[F],E,b,V);else b=l(b)?!!b.capture:!!b,E=Mc(E),f&&f[Ue]?(f=f.i,g=String(g).toString(),g in f.g&&(F=f.g[g],E=No(F,E,b,V),-1<E&&(kn(F[E]),Array.prototype.splice.call(F,E,1),F.length==0&&(delete f.g[g],f.h--)))):f&&(f=Vs(f))&&(g=f.g[g.toString()],f=-1,g&&(f=No(g,E,b,V)),(E=-1<f?g[f]:null)&&iu(E))}function iu(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[Ue])Kr(g.i,f);else{var E=f.type,b=f.proxy;g.removeEventListener?g.removeEventListener(E,b,f.capture):g.detachEvent?g.detachEvent(kc(E),b):g.addListener&&g.removeListener&&g.removeListener(b),(E=Vs(g))?(Kr(E,f),E.h==0&&(E.src=null,g[tt]=null)):kn(f)}}}function kc(f){return f in Yr?Yr[f]:Yr[f]="on"+f}function bp(f,g){if(f.da)f=!0;else{g=new We(g,this);var E=f.listener,b=f.ha||f.src;f.fa&&iu(f),f=E.call(b,g)}return f}function Vs(f){return f=f[tt],f instanceof Qt?f:null}var ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mc(f){return typeof f=="function"?f:(f[ou]||(f[ou]=function(g){return f.handleEvent(g)}),f[ou])}function Rt(){re.call(this),this.i=new Qt(this),this.M=this,this.F=null}m(Rt,re),Rt.prototype[Ue]=!0,Rt.prototype.removeEventListener=function(f,g,E,b){ru(this,f,g,E,b)};function Bt(f,g){var E,b=f.F;if(b)for(E=[];b;b=b.F)E.push(b);if(f=f.M,b=g.type||g,typeof g=="string")g=new se(g,f);else if(g instanceof se)g.target=g.target||f;else{var V=g;g=new se(b,f),O(g,V)}if(V=!0,E)for(var F=E.length-1;0<=F;F--){var K=g.g=E[F];V=Bs(K,b,!0,g)&&V}if(K=g.g=f,V=Bs(K,b,!0,g)&&V,V=Bs(K,b,!1,g)&&V,E)for(F=0;F<E.length;F++)K=g.g=E[F],V=Bs(K,b,!1,g)&&V}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var E=f.g[g],b=0;b<E.length;b++)kn(E[b]);delete f.g[g],f.h--}}this.F=null},Rt.prototype.K=function(f,g,E,b){return this.i.add(String(f),g,!1,E,b)},Rt.prototype.L=function(f,g,E,b){return this.i.add(String(f),g,!0,E,b)};function Bs(f,g,E,b){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,F=0;F<g.length;++F){var K=g[F];if(K&&!K.da&&K.capture==E){var je=K.listener,Ft=K.ha||K.src;K.fa&&Kr(f.i,K),V=je.call(Ft,b)!==!1&&V}}return V&&!b.defaultPrevented}function Fs(f,g,E){if(typeof f=="function")E&&(f=d(f,E));else if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function su(f){f.g=Fs(()=>{f.g=null,f.i&&(f.i=!1,su(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class Lc extends re{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:su(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Do(f){re.call(this),this.h=f,this.g={}}m(Do,re);var xo=[];function au(f){M(f.g,function(g,E){this.g.hasOwnProperty(E)&&iu(g)},f),f.g={}}Do.prototype.N=function(){Do.aa.N.call(this),au(this)},Do.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uu=a.JSON.stringify,Vc=a.JSON.parse,Bc=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function ko(){}ko.prototype.h=null;function Fc(f){return f.h||(f.h=f.i())}function lu(){}var Mo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function js(){se.call(this,"d")}m(js,se);function Pt(){se.call(this,"c")}m(Pt,se);var lt={},Lo=null;function Ve(){return Lo=Lo||new Rt}lt.La="serverreachability";function Mn(f){se.call(this,lt.La,f)}m(Mn,se);function Vo(f){const g=Ve();Bt(g,new Mn(g))}lt.STAT_EVENT="statevent";function Us(f,g){se.call(this,lt.STAT_EVENT,f),this.stat=g}m(Us,se);function Ot(f){const g=Ve();Bt(g,new Us(g,f))}lt.Ma="timingevent";function cu(f,g){se.call(this,lt.Ma,f),this.size=g}m(cu,se);function qr(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function Ir(){this.g=!0}Ir.prototype.xa=function(){this.g=!1};function hu(f,g,E,b,V,F){f.info(function(){if(f.g)if(F)for(var K="",je=F.split("&"),Ft=0;Ft<je.length;Ft++){var Se=je[Ft].split("=");if(1<Se.length){var Zt=Se[0];Se=Se[1];var Jt=Zt.split("_");K=2<=Jt.length&&Jt[1]=="type"?K+(Zt+"="+Se+"&"):K+(Zt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+g+`
`+E+`
`+K})}function fu(f,g,E,b,V,F,K){f.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+g+`
`+E+`
`+F+" "+K})}function Tr(f,g,E,b){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+du(f,E)+(b?" "+b:"")})}function Rp(f,g){f.info(function(){return"TIMEOUT: "+g})}Ir.prototype.info=function(){};function du(f,g){if(!f.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var b=E[f];if(!(2>b.length)){var V=b[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<V.length;K++)V[K]=""}}}}return uu(E)}catch{return g}}var Bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pu;function pe(){}m(pe,ko),pe.prototype.g=function(){return new XMLHttpRequest},pe.prototype.i=function(){return{}},pu=new pe;function Pe(f,g,E,b){this.j=f,this.i=g,this.l=E,this.R=b||1,this.U=new Do(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nt}function nt(){this.i=null,this.g="",this.h=!1}var In={},fn={};function Fo(f,g,E){f.L=1,f.v=Gc(Qr(g)),f.m=E,f.P=!0,Uc(f,null)}function Uc(f,g){f.F=Date.now(),zc(f),f.A=Qr(f.v);var E=f.A,b=f.R;Array.isArray(b)||(b=[String(b)]),Zv(E.i,"t",b),f.C=0,E=f.j.J,f.h=new nt,f.g=g2(f.j,E?g:null,!f.m),0<f.O&&(f.M=new Lc(d(f.Y,f,f.g),f.O)),g=f.U,E=f.g,b=f.ca;var V="readystatechange";Array.isArray(V)||(V&&(xo[0]=V.toString()),V=xo);for(var F=0;F<V.length;F++){var K=hn(E,V[F],b||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),Vo(),hu(f.i,f.u,f.A,f.l,f.R,f.m)}Pe.prototype.ca=function(f){f=f.target;const g=this.M;g&&Zr(f)==3?g.j():this.Y(f)},Pe.prototype.Y=function(f){try{if(f==this.g)e:{const Jt=Zr(this.g);var g=this.g.Ba();const Ws=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||o2(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=Ws?Vo(3):Vo(2)),Pp(this);var E=this.g.Z();this.X=E;t:if(Hc(this)){var b=o2(this.g);f="";var V=b.length,F=Zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jo(this),mu(this);var K="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,f+=this.h.i.decode(b[g],{stream:!(F&&g==V-1)});b.length=0,this.h.g+=f,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=E==200,fu(this.i,this.u,this.A,this.l,this.R,Jt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Ft=this.g;if((je=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(je)){var Se=je;break t}}Se=null}if(E=Se)Tr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Op(this,E);else{this.o=!1,this.s=3,Ot(12),jo(this),mu(this);break e}}if(this.P){E=!0;let sr;for(;!this.J&&this.C<K.length;)if(sr=x8(this,K),sr==fn){Jt==4&&(this.s=4,Ot(14),E=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==In){this.s=4,Ot(15),Tr(this.i,this.l,K,"[Invalid Chunk]"),E=!1;break}else Tr(this.i,this.l,sr,null),Op(this,sr);if(Hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||K.length!=0||this.h.h||(this.s=1,Ot(16),E=!1),this.o=this.o&&E,!E)Tr(this.i,this.l,K,"[Invalid Chunked Response]"),jo(this),mu(this);else if(0<K.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Lp(Zt),Zt.M=!0,Ot(11))}}else Tr(this.i,this.l,K,null),Op(this,K);Jt==4&&jo(this),this.o&&!this.J&&(Jt==4?f2(this.j,this):(this.o=!1,zc(this)))}else q8(this.g),E==400&&0<K.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),jo(this),mu(this)}}}catch{}finally{}};function Hc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function x8(f,g){var E=f.C,b=g.indexOf(`
`,E);return b==-1?fn:(E=Number(g.substring(E,b)),isNaN(E)?In:(b+=1,b+E>g.length?fn:(g=g.slice(b,b+E),f.C=b+E,g)))}Pe.prototype.cancel=function(){this.J=!0,jo(this)};function zc(f){f.S=Date.now()+f.I,jv(f,f.I)}function jv(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=qr(d(f.ba,f),g)}function Pp(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Pe.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Rp(this.i,this.A),this.L!=2&&(Vo(),Ot(17)),jo(this),this.s=2,mu(this)):jv(this,this.S-f)};function mu(f){f.j.G==0||f.J||f2(f.j,f)}function jo(f){Pp(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,au(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Op(f,g){try{var E=f.j;if(E.G!=0&&(E.g==f||Np(E.h,f))){if(!f.K&&Np(E.h,f)&&E.G==3){try{var b=E.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)Zc(E),qc(E);else break e;Mp(E),Ot(18)}}else E.za=V[1],0<E.za-E.T&&37500>V[2]&&E.F&&E.v==0&&!E.C&&(E.C=qr(d(E.Za,E),6e3));if(1>=zv(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ho(E,11)}else if((f.K||E.g==f)&&Zc(E),!v(g))for(V=E.Da.g.parse(g),g=0;g<V.length;g++){let Se=V[g];if(E.T=Se[0],Se=Se[1],E.G==2)if(Se[0]=="c"){E.K=Se[1],E.ia=Se[2];const Zt=Se[3];Zt!=null&&(E.la=Zt,E.j.info("VER="+E.la));const Jt=Se[4];Jt!=null&&(E.Aa=Jt,E.j.info("SVER="+E.Aa));const Ws=Se[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(b=1.5*Ws,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const sr=f.g;if(sr){const eh=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eh){var F=b.h;F.g||eh.indexOf("spdy")==-1&&eh.indexOf("quic")==-1&&eh.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Dp(F,F.h),F.h=null))}if(b.D){const Vp=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vp&&(b.ya=Vp,$e(b.I,b.D,Vp))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var K=f;if(b.qa=m2(b,b.J?b.ia:null,b.W),K.K){Wv(b.h,K);var je=K,Ft=b.L;Ft&&(je.I=Ft),je.B&&(Pp(je),zc(je)),b.g=K}else c2(b);0<E.i.length&&Qc(E)}else Se[0]!="stop"&&Se[0]!="close"||Ho(E,7);else E.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ho(E,7):kp(E):Se[0]!="noop"&&E.l&&E.l.ta(Se),E.v=0)}}Vo(4)}catch{}}var k8=class{constructor(f,g){this.g=f,this.map=g}};function Uv(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hv(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function zv(f){return f.h?1:f.g?f.g.size:0}function Np(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Dp(f,g){f.g?f.g.add(g):f.h=g}function Wv(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}Uv.prototype.cancel=function(){if(this.i=$v(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function $v(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const E of f.g.values())g=g.concat(E.D);return g}return y(f.i)}function M8(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var g=[],E=f.length,b=0;b<E;b++)g.push(f[b]);return g}g=[],E=0;for(b in f)g[E++]=f[b];return g}function L8(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var g=[];f=f.length;for(var E=0;E<f;E++)g.push(E);return g}g=[],E=0;for(const b in f)g[E++]=b;return g}}}function Gv(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var E=L8(f),b=M8(f),V=b.length,F=0;F<V;F++)g.call(void 0,b[F],E&&E[F],f)}var Xv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function V8(f,g){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var b=f[E].indexOf("="),V=null;if(0<=b){var F=f[E].substring(0,b);V=f[E].substring(b+1)}else F=f[E];g(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Uo(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Uo){this.h=f.h,Wc(this,f.j),this.o=f.o,this.g=f.g,$c(this,f.s),this.l=f.l;var g=f.i,E=new vu;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),Kv(this,E),this.m=f.m}else f&&(g=String(f).match(Xv))?(this.h=!1,Wc(this,g[1]||"",!0),this.o=gu(g[2]||""),this.g=gu(g[3]||"",!0),$c(this,g[4]),this.l=gu(g[5]||"",!0),Kv(this,g[6]||"",!0),this.m=gu(g[7]||"")):(this.h=!1,this.i=new vu(null,this.h))}Uo.prototype.toString=function(){var f=[],g=this.j;g&&f.push(yu(g,Yv,!0),":");var E=this.g;return(E||g=="file")&&(f.push("//"),(g=this.o)&&f.push(yu(g,Yv,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(yu(E,E.charAt(0)=="/"?j8:F8,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",yu(E,H8)),f.join("")};function Qr(f){return new Uo(f)}function Wc(f,g,E){f.j=E?gu(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function $c(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function Kv(f,g,E){g instanceof vu?(f.i=g,z8(f.i,f.h)):(E||(g=yu(g,U8)),f.i=new vu(g,f.h))}function $e(f,g,E){f.i.set(g,E)}function Gc(f){return $e(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function gu(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function yu(f,g,E){return typeof f=="string"?(f=encodeURI(f).replace(g,B8),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function B8(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Yv=/[#\/\?@]/g,F8=/[#\?:]/g,j8=/[#\?]/g,U8=/[#\?@]/g,H8=/#/g;function vu(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function Si(f){f.g||(f.g=new Map,f.h=0,f.i&&V8(f.i,function(g,E){f.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=vu.prototype,t.add=function(f,g){Si(this),this.i=null,f=Hs(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(g),this.h+=1,this};function qv(f,g){Si(f),g=Hs(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function Qv(f,g){return Si(f),g=Hs(f,g),f.g.has(g)}t.forEach=function(f,g){Si(this),this.g.forEach(function(E,b){E.forEach(function(V){f.call(g,V,b,this)},this)},this)},t.na=function(){Si(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let b=0;b<g.length;b++){const V=f[b];for(let F=0;F<V.length;F++)E.push(g[b])}return E},t.V=function(f){Si(this);let g=[];if(typeof f=="string")Qv(this,f)&&(g=g.concat(this.g.get(Hs(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)g=g.concat(f[E])}return g},t.set=function(f,g){return Si(this),this.i=null,f=Hs(this,f),Qv(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function Zv(f,g,E){qv(f,g),0<E.length&&(f.i=null,f.g.set(Hs(f,g),y(E)),f.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var b=g[E];const F=encodeURIComponent(String(b)),K=this.V(b);for(b=0;b<K.length;b++){var V=F;K[b]!==""&&(V+="="+encodeURIComponent(String(K[b]))),f.push(V)}}return this.i=f.join("&")};function Hs(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function z8(f,g){g&&!f.j&&(Si(f),f.i=null,f.g.forEach(function(E,b){var V=b.toLowerCase();b!=V&&(qv(this,b),Zv(this,V,E))},f)),f.j=g}function W8(f,g){const E=new Ir;if(a.Image){const b=new Image;b.onload=p(bi,E,"TestLoadImage: loaded",!0,g,b),b.onerror=p(bi,E,"TestLoadImage: error",!1,g,b),b.onabort=p(bi,E,"TestLoadImage: abort",!1,g,b),b.ontimeout=p(bi,E,"TestLoadImage: timeout",!1,g,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=f}else g(!1)}function $8(f,g){const E=new Ir,b=new AbortController,V=setTimeout(()=>{b.abort(),bi(E,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:b.signal}).then(F=>{clearTimeout(V),F.ok?bi(E,"TestPingServer: ok",!0,g):bi(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),bi(E,"TestPingServer: error",!1,g)})}function bi(f,g,E,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(E)}catch{}}function G8(){this.g=new Bc}function X8(f,g,E){const b=E||"";try{Gv(f,function(V,F){let K=V;l(V)&&(K=uu(V)),g.push(b+F+"="+encodeURIComponent(K))})}catch(V){throw g.push(b+"type="+encodeURIComponent("_badmap")),V}}function Xc(f){this.l=f.Ub||null,this.j=f.eb||!1}m(Xc,ko),Xc.prototype.g=function(){return new Kc(this.l,this.j)},Xc.prototype.i=function(f){return function(){return f}}({});function Kc(f,g){Rt.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Kc,Rt),t=Kc.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,wu(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_u(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,wu(this)),this.g&&(this.readyState=3,wu(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jv(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jv(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?_u(this):wu(this),this.readyState==3&&Jv(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,_u(this))},t.Qa=function(f){this.g&&(this.response=f,_u(this))},t.ga=function(){this.g&&_u(this)};function _u(f){f.readyState=4,f.l=null,f.j=null,f.v=null,wu(f)}t.setRequestHeader=function(f,g){this.u.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=g.next();return f.join(`\r
`)};function wu(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function e2(f){let g="";return M(f,function(E,b){g+=b,g+=":",g+=E,g+=`\r
`}),g}function xp(f,g,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=e2(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):$e(f,g,E))}function ct(f){Rt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ct,Rt);var K8=/^https?$/i,Y8=["POST","PUT"];t=ct.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,g,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pu.g(),this.v=this.o?Fc(this.o):Fc(pu),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(F){t2(this,F);return}if(f=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)E.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const F of b.keys())E.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Y8,g,void 0))||b||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of E)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{i2(this),this.u=!0,this.g.send(f),this.u=!1}catch(F){t2(this,F)}};function t2(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,n2(f),Yc(f)}function n2(f){f.A||(f.A=!0,Bt(f,"complete"),Bt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Bt(this,"complete"),Bt(this,"abort"),Yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yc(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?r2(this):this.bb())},t.bb=function(){r2(this)};function r2(f){if(f.h&&typeof s<"u"&&(!f.v[1]||Zr(f)!=4||f.Z()!=2)){if(f.u&&Zr(f)==4)Fs(f.Ea,0,f);else if(Bt(f,"readystatechange"),Zr(f)==4){f.h=!1;try{const K=f.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var b;if(b=K===0){var V=String(f.D).match(Xv)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),b=!K8.test(V?V.toLowerCase():"")}E=b}if(E)Bt(f,"complete"),Bt(f,"success");else{f.m=6;try{var F=2<Zr(f)?f.g.statusText:""}catch{F=""}f.l=F+" ["+f.Z()+"]",n2(f)}}finally{Yc(f)}}}}function Yc(f,g){if(f.g){i2(f);const E=f.g,b=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||Bt(f,"ready");try{E.onreadystatechange=b}catch{}}}function i2(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Zr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Zr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),Vc(g)}};function o2(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function q8(f){const g={};f=(f.g&&2<=Zr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<f.length;b++){if(v(f[b]))continue;var E=k(f[b]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const F=g[V]||[];g[V]=F,F.push(E)}T(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eu(f,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||g}function s2(f){this.Aa=0,this.i=[],this.j=new Ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eu("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eu("baseRetryDelayMs",5e3,f),this.cb=Eu("retryDelaySeedMs",1e4,f),this.Wa=Eu("forwardChannelMaxRetries",2,f),this.wa=Eu("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Uv(f&&f.concurrentRequestLimit),this.Da=new G8,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=s2.prototype,t.la=8,t.G=1,t.connect=function(f,g,E,b){Ot(0),this.W=f,this.H=g||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=m2(this,null,this.W),Qc(this)};function kp(f){if(a2(f),f.G==3){var g=f.U++,E=Qr(f.I);if($e(E,"SID",f.K),$e(E,"RID",g),$e(E,"TYPE","terminate"),Au(f,E),g=new Pe(f,f.j,g),g.L=2,g.v=Gc(Qr(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=g.v,E=!0),E||(g.g=g2(g.j,null),g.g.ea(g.v)),g.F=Date.now(),zc(g)}p2(f)}function qc(f){f.g&&(Lp(f),f.g.cancel(),f.g=null)}function a2(f){qc(f),f.u&&(a.clearTimeout(f.u),f.u=null),Zc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Qc(f){if(!Hv(f.h)&&!f.s){f.s=!0;var g=f.Ga;Fe||J(),G||(Fe(),G=!0),Z.add(g,f),f.B=0}}function Q8(f,g){return zv(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=qr(d(f.Ga,f,g),d2(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const V=new Pe(this,this.j,f);let F=this.o;if(this.S&&(F?(F=I(F),O(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=l2(this,V,g),E=Qr(this.I),$e(E,"RID",f),$e(E,"CVER",22),this.D&&$e(E,"X-HTTP-Session-Id",this.D),Au(this,E),F&&(this.O?g="headers="+encodeURIComponent(String(e2(F)))+"&"+g:this.m&&xp(E,this.m,F)),Dp(this.h,V),this.Ua&&$e(E,"TYPE","init"),this.P?($e(E,"$req",g),$e(E,"SID","null"),V.T=!0,Fo(V,E,null)):Fo(V,E,g),this.G=2}}else this.G==3&&(f?u2(this,f):this.i.length==0||Hv(this.h)||u2(this))};function u2(f,g){var E;g?E=g.l:E=f.U++;const b=Qr(f.I);$e(b,"SID",f.K),$e(b,"RID",E),$e(b,"AID",f.T),Au(f,b),f.m&&f.o&&xp(b,f.m,f.o),E=new Pe(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),g&&(f.i=g.D.concat(f.i)),g=l2(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Dp(f.h,E),Fo(E,b,g)}function Au(f,g){f.H&&M(f.H,function(E,b){$e(g,b,E)}),f.l&&Gv({},function(E,b){$e(g,b,E)})}function l2(f,g,E){E=Math.min(f.i.length,E);var b=f.l?d(f.l.Na,f.l,f):null;e:{var V=f.i;let F=-1;for(;;){const K=["count="+E];F==-1?0<E?(F=V[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let je=!0;for(let Ft=0;Ft<E;Ft++){let Se=V[Ft].g;const Zt=V[Ft].map;if(Se-=F,0>Se)F=Math.max(0,V[Ft].g-100),je=!1;else try{X8(Zt,K,"req"+Se+"_")}catch{b&&b(Zt)}}if(je){b=K.join("&");break e}}}return f=f.i.splice(0,E),g.D=f,b}function c2(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;Fe||J(),G||(Fe(),G=!0),Z.add(g,f),f.v=0}}function Mp(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=qr(d(f.Fa,f),d2(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,h2(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=qr(d(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),qc(this),h2(this))};function Lp(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function h2(f){f.g=new Pe(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=Qr(f.qa);$e(g,"RID","rpc"),$e(g,"SID",f.K),$e(g,"AID",f.T),$e(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&$e(g,"TO",f.ja),$e(g,"TYPE","xmlhttp"),Au(f,g),f.m&&f.o&&xp(g,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Gc(Qr(g)),E.m=null,E.P=!0,Uc(E,f)}t.Za=function(){this.C!=null&&(this.C=null,qc(this),Mp(this),Ot(19))};function Zc(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function f2(f,g){var E=null;if(f.g==g){Zc(f),Lp(f),f.g=null;var b=2}else if(Np(f.h,g))E=g.D,Wv(f.h,g),b=1;else return;if(f.G!=0){if(g.o)if(b==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var V=f.B;b=Ve(),Bt(b,new cu(b,E)),Qc(f)}else c2(f);else if(V=g.s,V==3||V==0&&0<g.X||!(b==1&&Q8(f,g)||b==2&&Mp(f)))switch(E&&0<E.length&&(g=f.h,g.i=g.i.concat(E)),V){case 1:Ho(f,5);break;case 4:Ho(f,10);break;case 3:Ho(f,6);break;default:Ho(f,2)}}}function d2(f,g){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*g}function Ho(f,g){if(f.j.info("Error code "+g),g==2){var E=d(f.fb,f),b=f.Xa;const V=!b;b=new Uo(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wc(b,"https"),Gc(b),V?W8(b.toString(),E):$8(b.toString(),E)}else Ot(2);f.G=0,f.l&&f.l.sa(g),p2(f),a2(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function p2(f){if(f.G=0,f.ka=[],f.l){const g=$v(f.h);(g.length!=0||f.i.length!=0)&&(w(f.ka,g),w(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function m2(f,g,E){var b=E instanceof Uo?Qr(E):new Uo(E);if(b.g!="")g&&(b.g=g+"."+b.g),$c(b,b.s);else{var V=a.location;b=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var F=new Uo(null);b&&Wc(F,b),g&&(F.g=g),V&&$c(F,V),E&&(F.l=E),b=F}return E=f.D,g=f.ya,E&&g&&$e(b,E,g),$e(b,"VER",f.la),Au(f,b),b}function g2(f,g,E){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new ct(new Xc({eb:E})):new ct(f.pa),g.Ha(f.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y2(){}t=y2.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jc(){}Jc.prototype.g=function(f,g){return new Ln(f,g)};function Ln(f,g){Rt.call(this),this.g=new s2(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!v(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new zs(this)}m(Ln,Rt),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){kp(this.g)},Ln.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=uu(f),f=E);g.i.push(new k8(g.Ya++,f)),g.G==3&&Qc(g)},Ln.prototype.N=function(){this.g.l=null,delete this.j,kp(this.g),delete this.g,Ln.aa.N.call(this)};function v2(f){js.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const E in g){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}m(v2,js);function _2(){Pt.call(this),this.status=1}m(_2,Pt);function zs(f){this.g=f}m(zs,y2),zs.prototype.ua=function(){Bt(this.g,"a")},zs.prototype.ta=function(f){Bt(this.g,new v2(f))},zs.prototype.sa=function(f){Bt(this.g,new _2)},zs.prototype.ra=function(){Bt(this.g,"b")},Jc.prototype.createWebChannel=Jc.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,RT=function(){return new Jc},bT=function(){return Ve()},ST=lt,Zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,tf=Bo,jc.COMPLETE="complete",TT=jc,lu.EventType=Mo,Mo.OPEN="a",Mo.CLOSE="b",Mo.ERROR="c",Mo.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,zu=lu,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,IT=ct}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const dw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new q0("@firebase/firestore");function Nu(){return ws.logLevel}function ee(t,...e){if(ws.logLevel<=Ae.DEBUG){const n=e.map(ly);ws.debug(`Firestore (${qa}): ${t}`,...n)}}function wi(t,...e){if(ws.logLevel<=Ae.ERROR){const n=e.map(ly);ws.error(`Firestore (${qa}): ${t}`,...n)}}function La(t,...e){if(ws.logLevel<=Ae.WARN){const n=e.map(ly);ws.warn(`Firestore (${qa}): ${t}`,...n)}}function ly(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${qa}) INTERNAL ASSERTION FAILED: `+t;throw wi(e),new Error(e)}function Le(t,e){t||le()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends $r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class ED{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AD{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ci,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ci)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new PT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new on(e)}}class CD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ID{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new TD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function Va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new bt(0,0))}static max(){return new he(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xe extends jl{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const RD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends jl{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return RD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new q(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new q(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Xe.fromString(e))}static fromName(e){return new ie(Xe.fromString(e).popFirst(5))}static empty(){return new ie(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Xe(e.slice()))}}function PD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new ho(i,ie.empty(),e)}function OD(t){return new ho(t.readTime,t.key,-1)}class ho{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ho(he.min(),ie.empty(),-1)}static max(){return new ho(he.max(),ie.empty(),-1)}}function ND(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==DD)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(c=>{s[l]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(e,n){return new z((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function kD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cy.oe=-1;function Hd(t){return t==null}function Xf(t){return t===0&&1/t==-1/0}function MD(t){return typeof t=="number"&&Number.isInteger(t)&&!Xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eh(this.root,e,this.comparator,!0)}}class Eh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=o??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,o){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mw(this.data.getIterator())}getIteratorFrom(e){return new mw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class mw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new jn([])}unionWith(e){let n=new Kt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new DT("Invalid base64 string: "+o):o}}(e);return new qt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const LD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(t){if(Le(!!t),typeof t=="string"){let e=0;const n=LD.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fy(t){const e=t.mapValue.fields.__previous_value__;return hy(e)?fy(e):e}function Ul(t){const e=fo(t.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Hl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah={mapValue:{}};function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hy(t)?4:FD(t)?9007199254740991:BD(t)?10:11:le()}function zr(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ul(t).isEqual(Ul(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=fo(i.timestampValue),a=fo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Es(i.bytesValue).isEqual(Es(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ft(i.geoPointValue.latitude)===ft(o.geoPointValue.latitude)&&ft(i.geoPointValue.longitude)===ft(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ft(i.integerValue)===ft(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ft(i.doubleValue),a=ft(o.doubleValue);return s===a?Xf(s)===Xf(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(pw(s)!==pw(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!zr(s[u],a[u])))return!1;return!0}(t,e);default:return le()}}function zl(t,e){return(t.values||[]).find(n=>zr(n,e))!==void 0}function Ba(t,e){if(t===e)return 0;const n=As(t),r=As(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ft(o.integerValue||o.doubleValue),u=ft(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return gw(t.timestampValue,e.timestampValue);case 4:return gw(Ul(t),Ul(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Es(o),u=Es(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Re(a[l],u[l]);if(c!==0)return c}return Re(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Re(ft(o.latitude),ft(s.latitude));return a!==0?a:Re(ft(o.longitude),ft(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yw(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,c;const h=o.fields||{},d=s.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,m=(u=d.value)===null||u===void 0?void 0:u.arrayValue,y=Re(((l=p==null?void 0:p.values)===null||l===void 0?void 0:l.length)||0,((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0);return y!==0?y:yw(p,m)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ah.mapValue&&s===Ah.mapValue)return 0;if(o===Ah.mapValue)return 1;if(s===Ah.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let h=0;h<u.length&&h<c.length;++h){const d=Re(u[h],c[h]);if(d!==0)return d;const p=Ba(a[u[h]],l[c[h]]);if(p!==0)return p}return Re(u.length,c.length)}(t.mapValue,e.mapValue);default:throw le()}}function gw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=fo(t),r=fo(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function yw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Ba(n[i],r[i]);if(o)return o}return Re(n.length,r.length)}function Fa(t){return Jm(t)}function Jm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Jm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Jm(n.fields[s])}`;return i+"}"}(t.mapValue):le()}function vw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eg(t){return!!t&&"integerValue"in t}function dy(t){return!!t&&"arrayValue"in t}function _w(t){return!!t&&"nullValue"in t}function ww(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nf(t){return!!t&&"mapValue"in t}function BD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ll(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=$t.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ll(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());nf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ps(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new bn(ll(this.value))}}function xT(t){const e=[];return Ps(t.fields,(n,r)=>{const i=new $t([n]);if(nf(r)){const o=xT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new an(e,0,he.min(),he.min(),he.min(),bn.empty(),0)}static newFoundDocument(e,n,r,i){return new an(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new an(e,2,n,he.min(),he.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,he.min(),he.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.position=e,this.inclusive=n}}function Ew(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),n.key):r=Ba(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Aw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function jD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{}class _t extends kT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HD(e,n,r):n==="array-contains"?new $D(e,r):n==="in"?new GD(e,r):n==="not-in"?new XD(e,r):n==="array-contains-any"?new KD(e,r):new _t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zD(e,r):new WD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ba(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends kT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ar(e,n)}matches(e){return MT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MT(t){return t.op==="and"}function LT(t){return UD(t)&&MT(t)}function UD(t){for(const e of t.filters)if(e instanceof Ar)return!1;return!0}function tg(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(LT(t))return t.filters.map(e=>tg(e)).join(",");{const e=t.filters.map(n=>tg(n)).join(",");return`${t.op}(${e})`}}function VT(t,e){return t instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&zr(r.value,i.value)}(t,e):t instanceof Ar?function(r,i){return i instanceof Ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&VT(s,i.filters[a]),!0):!1}(t,e):void le()}function BT(t){return t instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(t):t instanceof Ar?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(t):"Filter"}class HD extends _t{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class zD extends _t{constructor(e,n){super(e,"in",n),this.keys=FT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WD extends _t{constructor(e,n){super(e,"not-in",n),this.keys=FT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class $D extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dy(n)&&zl(n.arrayValue,this.value)}}class GD extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class XD extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!zl(this.value.arrayValue,n)}}class KD extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Cw(t,e=null,n=[],r=[],i=null,o=null,s=null){return new YD(t,e,n,r,i,o,s)}function py(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fa(r)).join(",")),e.ue=n}return e.ue}function my(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Aw(t.startAt,e.startAt)&&Aw(t.endAt,e.endAt)}function ng(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qD(t,e,n,r,i,o,s,a){return new Qa(t,e,n,r,i,o,s,a)}function zd(t){return new Qa(t)}function Iw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jT(t){return t.collectionGroup!==null}function cl(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Kt($t.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Wl(o,r))}),n.has($t.keyField().canonicalString())||e.ce.push(new Wl($t.keyField(),r))}return e.ce}function jr(t){const e=fe(t);return e.le||(e.le=QD(e,cl(t))),e.le}function QD(t,e){if(t.limitType==="F")return Cw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Wl(i.field,o)});const n=t.endAt?new Kf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kf(t.startAt.position,t.startAt.inclusive):null;return Cw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rg(t,e){const n=t.filters.concat([e]);return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ig(t,e,n){return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wd(t,e){return my(jr(t),jr(e))&&t.limitType===e.limitType}function UT(t){return`${py(jr(t))}|lt:${t.limitType}`}function Xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>BT(i)).join(", ")}]`),Hd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fa(i)).join(",")),`Target(${r})`}(jr(t))}; limitType=${t.limitType})`}function $d(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of cl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){const l=Ew(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,cl(r),i)||r.endAt&&!function(s,a,u){const l=Ew(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,cl(r),i))}(t,e)}function ZD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HT(t){return(e,n)=>{let r=!1;for(const i of cl(t)){const o=JD(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function JD(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ba(u,l):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new ut(ie.comparator);function Ei(){return e7}const zT=new ut(ie.comparator);function Wu(...t){let e=zT;for(const n of t)e=e.insert(n.key,n);return e}function WT(t){let e=zT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return hl()}function $T(){return hl()}function hl(){return new Za(t=>t.toString(),(t,e)=>t.isEqual(e))}const t7=new ut(ie.comparator),n7=new Kt(ie.comparator);function Ee(...t){let e=n7;for(const n of t)e=e.add(n);return e}const r7=new Kt(Re);function i7(){return r7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function GT(t){return{integerValue:""+t}}function o7(t,e){return MD(e)?GT(e):gy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function s7(t,e,n){return t instanceof Yf?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hy(o)&&(o=fy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof $l?KT(t,e):t instanceof Gl?YT(t,e):function(i,o){const s=XT(i,o),a=Tw(s)+Tw(i.Pe);return eg(s)&&eg(i.Pe)?GT(a):gy(i.serializer,a)}(t,e)}function a7(t,e,n){return t instanceof $l?KT(t,e):t instanceof Gl?YT(t,e):n}function XT(t,e){return t instanceof qf?function(r){return eg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Yf extends Gd{}class $l extends Gd{constructor(e){super(),this.elements=e}}function KT(t,e){const n=qT(e);for(const r of t.elements)n.some(i=>zr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gl extends Gd{constructor(e){super(),this.elements=e}}function YT(t,e){let n=qT(e);for(const r of t.elements)n=n.filter(i=>!zr(i,r));return{arrayValue:{values:n}}}class qf extends Gd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tw(t){return ft(t.integerValue||t.doubleValue)}function qT(t){return dy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function u7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $l&&i instanceof $l||r instanceof Gl&&i instanceof Gl?Va(r.elements,i.elements,zr):r instanceof qf&&i instanceof qf?zr(r.Pe,i.Pe):r instanceof Yf&&i instanceof Yf}(t.transform,e.transform)}class l7{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xd{}function QT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yy(t.key,_r.none()):new gc(t.key,t.data,_r.none());{const n=t.data,r=bn.empty();let i=new Kt($t.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new To(t.key,r,new jn(i.toArray()),_r.none())}}function c7(t,e,n){t instanceof gc?function(i,o,s){const a=i.value.clone(),u=bw(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof To?function(i,o,s){if(!rf(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=bw(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(ZT(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function fl(t,e,n,r){return t instanceof gc?function(o,s,a,u){if(!rf(o.precondition,s))return a;const l=o.value.clone(),c=Rw(o.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof To?function(o,s,a,u){if(!rf(o.precondition,s))return a;const l=Rw(o.fieldTransforms,u,s),c=s.data;return c.setAll(ZT(o)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,a){return rf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function h7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=XT(r.transform,i||null);o!=null&&(n===null&&(n=bn.empty()),n.set(r.field,o))}return n||null}function Sw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Va(r,i,(o,s)=>u7(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends Xd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class To extends Xd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bw(t,e,n){const r=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,a7(s,a,n[i]))}return r}function Rw(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,s7(o,s,e))}return r}class yy extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f7 extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&c7(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$T();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=QT(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>Sw(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>Sw(n,r))}}class vy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length);let i=function(){return t7}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new vy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Ce;function g7(t){switch(t){default:return le();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function JT(t){if(t===void 0)return wi("GRPC error has no .code"),H.UNKNOWN;switch(t){case gt.OK:return H.OK;case gt.CANCELLED:return H.CANCELLED;case gt.UNKNOWN:return H.UNKNOWN;case gt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case gt.INTERNAL:return H.INTERNAL;case gt.UNAVAILABLE:return H.UNAVAILABLE;case gt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case gt.NOT_FOUND:return H.NOT_FOUND;case gt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case gt.ABORTED:return H.ABORTED;case gt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case gt.DATA_LOSS:return H.DATA_LOSS;default:return le()}}(Ce=gt||(gt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=new ls([4294967295,4294967295],0);function Pw(t){const e=y7().encode(t),n=new CT;return n.update(e),new Uint8Array(n.digest())}function Ow(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ls([n,r],0),new ls([i,o],0)]}class _y{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ls.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ls.fromNumber(r)));return i.compare(v7)===1&&(i=new ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Pw(e),[r,i]=Ow(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new _y(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=Pw(e),[r,i]=Ow(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kd(he.min(),i,new ut(Re),Ei(),Ee())}}class yc{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yc(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class eS{constructor(e,n){this.targetId=e,this.me=n}}class tS{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Nw{constructor(){this.fe=0,this.ge=xw(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new yc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=xw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=Dw(),this.Qe=new ut(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(ng(o))if(r===0){const s=new ie(o.path);this.Ue(n,s,an.newNoDocument(s,he.min()))}else Le(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Es(r).toUint8Array()}catch(u){if(u instanceof DT)return La("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new _y(s,i,o)}catch(u){return La(u instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&ng(a.target)){const u=new ie(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,an.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Ee();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Kd(e,n,this.Qe,this.ke,r);return this.ke=Ei(),this.qe=Dw(),this.Qe=new ut(Re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Nw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Kt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Dw(){return new ut(ie.comparator)}function xw(){return new ut(ie.comparator)}const w7={asc:"ASCENDING",desc:"DESCENDING"},E7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A7={and:"AND",or:"OR"};class C7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function og(t,e){return t.useProto3Json||Hd(e)?e:{value:e}}function Qf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function I7(t,e){return Qf(t,e.toTimestamp())}function Ur(t){return Le(!!t),he.fromTimestamp(function(n){const r=fo(n);return new bt(r.seconds,r.nanos)}(t))}function wy(t,e){return sg(t,e).canonicalString()}function sg(t,e){const n=function(i){return new Xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rS(t){const e=Xe.fromString(t);return Le(uS(e)),e}function ag(t,e){return wy(t.databaseId,e.path)}function v1(t,e){const n=rS(e);if(n.get(1)!==t.databaseId.projectId)throw new q(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(oS(n))}function iS(t,e){return wy(t.databaseId,e)}function T7(t){const e=rS(t);return e.length===4?Xe.emptyPath():oS(e)}function ug(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oS(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kw(t,e,n){return{name:ag(t,e),fields:n.value.mapValue.fields}}function S7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(Le(c===void 0||typeof c=="string"),qt.fromBase64String(c||"")):(Le(c===void 0||c instanceof Buffer||c instanceof Uint8Array),qt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const c=l.code===void 0?H.UNKNOWN:JT(l.code);return new q(c,l.message||"")}(s);n=new tS(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=v1(t,r.document.name),o=Ur(r.document.updateTime),s=r.document.createTime?Ur(r.document.createTime):he.min(),a=new bn({mapValue:{fields:r.document.fields}}),u=an.newFoundDocument(i,o,s,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new of(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=v1(t,r.document),o=r.readTime?Ur(r.readTime):he.min(),s=an.newNoDocument(i,o),a=r.removedTargetIds||[];n=new of([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=v1(t,r.document),o=r.removedTargetIds||[];n=new of([],o,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new m7(i,o),a=r.targetId;n=new eS(a,s)}}return n}function b7(t,e){let n;if(e instanceof gc)n={update:kw(t,e.key,e.value)};else if(e instanceof yy)n={delete:ag(t,e.key)};else if(e instanceof To)n={update:kw(t,e.key,e.data),updateMask:L7(e.fieldMask)};else{if(!(e instanceof f7))return le();n={verify:ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Yf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $l)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qf)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:I7(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le()}(t,e.precondition)),n}function R7(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ur(i.updateTime):Ur(o);return s.isEqual(he.min())&&(s=Ur(o)),new l7(s,i.transformResults||[])}(n,e))):[]}function P7(t,e){return{documents:[iS(t,e.path)]}}function O7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iS(t,i);const o=function(l){if(l.length!==0)return aS(Ar.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Ks(d.field),direction:x7(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=og(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function N7(t){let e=T7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Le(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];n.where&&(o=function(h){const d=sS(h);return d instanceof Ar&&LT(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(d=>function(m){return new Wl(Ys(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Hd(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new Kf(p,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,p=h.values||[];return new Kf(p,d)}(n.endAt)),qD(e,i,s,o,a,"F",u,l)}function D7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ys(n.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ys(n.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ys(n.unaryFilter.field);return _t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ys(n.unaryFilter.field);return _t.create(s,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return _t.create(Ys(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ar.create(n.compositeFilter.filters.map(r=>sS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function x7(t){return w7[t]}function k7(t){return E7[t]}function M7(t){return A7[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Ys(t){return $t.fromServerFormat(t.fieldPath)}function aS(t){return t instanceof _t?function(n){if(n.op==="=="){if(ww(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(_w(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ww(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(_w(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:k7(n.op),value:n.value}}}(t):t instanceof Ar?function(n){const r=n.getFilters().map(i=>aS(i));return r.length===1?r[0]:{compositeFilter:{op:M7(n.op),filters:r}}}(t):le()}function L7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,i,o=he.min(),s=he.min(),a=qt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e){this.ct=e}}function B7(t){const e=N7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ig(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(){this.un=new j7}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ho.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class j7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(Xe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ja(0)}static kn(){return new ja(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(){this.changes=new Za(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fl(r.mutation,i,jn.empty(),bt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=is();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Wu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ei();const s=hl(),a=function(){return hl()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof To)?o=o.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),fl(c.mutation,l,c.mutation.getFieldMask(),bt.now())):s.set(l.key,jn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,c)=>s.set(l,c)),n.forEach((l,c)=>{var h;return a.set(l,new H7(c,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hl();let i=new ut((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||jn.empty();c=a.applyToLocalView(l,c),r.set(u,c);const h=(i.get(a.batchId)||Ee()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=$T();c.forEach(d=>{if(!o.has(d)){const p=QT(n.get(d),r.get(d));p!==null&&h.set(d,p),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):z.resolve(is());let a=-1,u=o;return s.next(l=>z.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(c)?z.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ee())).next(c=>({batchId:a,changes:WT(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=Wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Wu();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,u=>{const l=function(h,d){return new Qa(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(c=>{c.forEach((h,d)=>{s=s.insert(h,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,an.newInvalidDocument(c)))});let a=Wu();return s.forEach((u,l)=>{const c=o.get(u);c!==void 0&&fl(c.mutation,l,jn.empty(),bt.now()),$d(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:B7(i.bundledQuery),readTime:Ur(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this.overlays=new ut(ie.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return z.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=is(),o=n.length+1,s=new ie(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ut((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=o.get(l.largestBatchId);c===null&&(c=is(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=is(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return z.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new p7(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ee(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.Tr=new Kt(Dt.Er),this.dr=new Kt(Dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Xe([])),r=new Dt(n,e),i=new Dt(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Xe([])),r=new Dt(n,e),i=new Dt(n,e+1);let o=Ee();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Kt(Dt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new d7(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(Re);return n.forEach(i=>{const o=new Dt(i,0),s=new Dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ie.isDocumentKey(o)||(o=o.child(""));const s=new Dt(new ie(o),0);let a=new Kt(Re);return this.br.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,i=>{const o=new Dt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Dt(n,0),i=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.Mr=e,this.docs=function(){return new ut(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=Ei();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():an.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ei();const s=n.path,a=new ie(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ND(OD(c),r)<=0||(i.has(c.key)||$d(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Y7(this)}getSize(e){return z.resolve(this.size)}}class Y7 extends U7{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.persistence=e,this.Nr=new Za(n=>py(n),my),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ey,this.targetCount=0,this.kr=ja.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ja(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cy(0),this.Kr=!1,this.Kr=!0,this.$r=new G7,this.referenceDelegate=e(this),this.Ur=new q7(this),this.indexManager=new F7,this.remoteDocumentCache=function(i){return new K7(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new V7(n),this.Gr=new W7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new X7(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new Z7(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Z7 extends xD{constructor(e){super(),this.currentSequenceNumber=e}}class Ay{constructor(e){this.persistence=e,this.Jr=new Ey,this.Yr=null}static Zr(e){return new Ay(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ee(),i=Ee();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Cy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return W5()?8:kD(ln())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new J7;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Nu()<=Ae.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Nu()<=Ae.DEBUG&&ee("QueryEngine","Query:",Xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Nu()<=Ae.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):z.resolve())}Yi(e,n){if(Iw(n))return z.resolve(null);let r=jr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ig(n,null,"F"),r=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ee(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,ig(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return Iw(n)||i.isEqual(he.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?z.resolve(null):(Nu()<=Ae.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xs(n)),this.rs(e,s,n,PD(i,-1)).next(a=>a))})}ts(e,n){let r=new Kt(HT(e));return n.forEach((i,o)=>{$d(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Nu()<=Ae.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ho.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ut(Re),this._s=new Za(o=>py(o),my),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z7(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nx(t,e,n,r){return new tx(t,e,n,r)}async function lS(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Ee();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})}function rx(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const h=l.batch,d=h.keys();let p=z.resolve();return d.forEach(m=>{p=p.next(()=>c.getEntry(u,m)).next(y=>{const w=l.docVersions.get(m);Le(w!==null),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),c.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ee();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cS(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ix(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Ur.removeMatchingKeys(o,c.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(o,c.addedDocuments,h)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(qt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),function(y,w,_){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,p,c)&&a.push(n.Ur.updateTargetData(o,p))});let u=Ei(),l=Ee();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(ox(o,s,e.documentUpdates).next(c=>{u=c.Ps,l=c.Is})),!r.isEqual(he.min())){const c=n.Ur.getLastRemoteSnapshotVersion(o).next(h=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function ox(t,e,n){let r=Ee(),i=Ee();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ei();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(he.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function sx(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ax(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Xi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function lg(t,e,n){const r=fe(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!mc(s))throw s;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Mw(t,e,n){const r=fe(t);let i=he.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const h=fe(u),d=h._s.get(c);return d!==void 0?z.resolve(h.os.get(d)):h.Ur.getTargetData(l,c)}(r,s,jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:he.min(),n?o:Ee())).next(a=>(ux(r,ZD(e),a),{documents:a,Ts:o})))}function ux(t,e,n){let r=t.us.get(e)||he.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Lw{constructor(){this.activeTargetIds=i7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lx{constructor(){this.so=new Lw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function _1(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class dx extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=_1(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(c=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw La("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=hx[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=_1();return new Promise((s,a)=>{const u=new IT;u.setWithCredentials(!0),u.listenOnce(TT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case tf.NO_ERROR:const c=u.getResponseJson();ee(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(c)),s(c);break;case tf.TIMEOUT:ee(nn,`RPC '${e}' ${o} timed out`),a(new q(H.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const h=u.getStatus();if(ee(nn,`RPC '${e}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(_)>=0?_:H.UNKNOWN}(p.status);a(new q(m,p.message))}else a(new q(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new q(H.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{ee(nn,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);ee(nn,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){const i=_1(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=RT(),a=bT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=o.join("");ee(nn,`Creating RPC '${e}' stream ${i}: ${c}`,u);const h=s.createWebChannel(c,u);let d=!1,p=!1;const m=new fx({Io:w=>{p?ee(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(ee(nn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),ee(nn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},To:()=>h.close()}),y=(w,_,v)=>{w.listen(_,A=>{try{v(A)}catch(S){setTimeout(()=>{throw S},0)}})};return y(h,zu.EventType.OPEN,()=>{p||(ee(nn,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),y(h,zu.EventType.CLOSE,()=>{p||(p=!0,ee(nn,`RPC '${e}' stream ${i} transport closed`),m.So())}),y(h,zu.EventType.ERROR,w=>{p||(p=!0,La(nn,`RPC '${e}' stream ${i} transport errored:`,w),m.So(new q(H.UNAVAILABLE,"The operation could not be completed")))}),y(h,zu.EventType.MESSAGE,w=>{var _;if(!p){const v=w.data[0];Le(!!v);const A=v,S=A.error||((_=A[0])===null||_===void 0?void 0:_.error);if(S){ee(nn,`RPC '${e}' stream ${i} received error:`,S);const x=S.status;let M=function(R){const O=gt[R];if(O!==void 0)return JT(O)}(x),T=S.message;M===void 0&&(M=H.INTERNAL,T="Unknown error status: "+x+" with message "+S.message),p=!0,m.So(new q(M,T)),h.close()}else ee(nn,`RPC '${e}' stream ${i} received:`,v),m.bo(v)}}),y(a,ST.STAT_EVENT,w=>{w.stat===Zm.PROXY?ee(nn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Zm.NOPROXY&&ee(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function w1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){return new C7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(wi(n.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class px extends fS{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=S7(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?Ur(s.readTime):he.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ug(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=ng(u)?{documents:P7(o,u)}:{query:O7(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nS(o,s.resumeToken);const l=og(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=Qf(o,s.snapshotVersion.toTimestamp());const l=og(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=D7(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ug(this.serializer),n.removeTarget=e,this.a_(n)}}class mx extends fS{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=R7(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ug(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>b7(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,sg(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(H.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,sg(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(H.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wi(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Os(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=fe(u);l.L_.add(4),await vc(l),l.q_.set("Unknown"),l.L_.delete(4),await qd(l)}(this))})}),this.q_=new yx(r,i)}}async function qd(t){if(Os(t))for(const e of t.B_)await e(!0)}async function vc(t){for(const e of t.B_)await e(!1)}function dS(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),by(n)?Sy(n):Ja(n).r_()&&Ty(n,e))}function Iy(t,e){const n=fe(t),r=Ja(n);n.N_.delete(e),r.r_()&&pS(n,e),n.N_.size===0&&(r.r_()?r.o_():Os(n)&&n.q_.set("Unknown"))}function Ty(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(t).A_(e)}function pS(t,e){t.Q_.xe(e),Ja(t).R_(e)}function Sy(t){t.Q_=new _7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.q_.v_()}function by(t){return Os(t)&&!Ja(t).n_()&&t.N_.size>0}function Os(t){return fe(t).L_.size===0}function mS(t){t.Q_=void 0}async function _x(t){t.q_.set("Online")}async function wx(t){t.N_.forEach((e,n)=>{Ty(t,e)})}async function Ex(t,e){mS(t),by(t)?(t.q_.M_(e),Sy(t)):t.q_.set("Unknown")}async function Ax(t,e,n){if(t.q_.set("Online"),e instanceof tS&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zf(t,r)}else if(e instanceof of?t.Q_.Ke(e):e instanceof eS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const r=await cS(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.N_.get(l);c&&o.N_.set(l,c.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const c=o.N_.get(u);if(!c)return;o.N_.set(u,c.withResumeToken(qt.EMPTY_BYTE_STRING,c.snapshotVersion)),pS(o,u);const h=new Xi(c.target,u,l,c.sequenceNumber);Ty(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Zf(t,r)}}async function Zf(t,e,n){if(!mc(e))throw e;t.L_.add(1),await vc(t),t.q_.set("Offline"),n||(n=()=>cS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qd(t)})}function gS(t,e){return e().catch(n=>Zf(t,n,e))}async function Qd(t){const e=fe(t),n=po(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Cx(e);)try{const i=await sx(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Ix(e,i)}catch(i){await Zf(e,i)}yS(e)&&vS(e)}function Cx(t){return Os(t)&&t.O_.length<10}function Ix(t,e){t.O_.push(e);const n=po(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yS(t){return Os(t)&&!po(t).n_()&&t.O_.length>0}function vS(t){po(t).start()}async function Tx(t){po(t).p_()}async function Sx(t){const e=po(t);for(const n of t.O_)e.m_(n.mutations)}async function bx(t,e,n){const r=t.O_.shift(),i=vy.from(r,e,n);await gS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qd(t)}async function Rx(t,e){e&&po(t).V_&&await async function(r,i){if(function(s){return g7(s)&&s!==H.ABORTED}(i.code)){const o=r.O_.shift();po(r).s_(),await gS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Qd(r)}}(t,e),yS(t)&&vS(t)}async function Bw(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Os(n);n.L_.add(3),await vc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qd(n)}async function Px(t,e){const n=fe(t);e?(n.L_.delete(2),await qd(n)):e||(n.L_.add(2),await vc(n),n.q_.set("Unknown"))}function Ja(t){return t.K_||(t.K_=function(n,r,i){const o=fe(n);return o.w_(),new px(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:_x.bind(null,t),Ro:wx.bind(null,t),mo:Ex.bind(null,t),d_:Ax.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),by(t)?Sy(t):t.q_.set("Unknown")):(await t.K_.stop(),mS(t))})),t.K_}function po(t){return t.U_||(t.U_=function(n,r,i){const o=fe(n);return o.w_(),new mx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Tx.bind(null,t),mo:Rx.bind(null,t),f_:Sx.bind(null,t),g_:bx.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Qd(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new Ry(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(t,e){if(wi("AsyncQueue",`${e}: ${t}`),mc(t))return new q(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Wu(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new ba(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.W_=new ut(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Ua(e,n,ba.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Nx{constructor(){this.queries=jw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=fe(n),o=i.queries;i.queries=jw(),o.forEach((s,a)=>{for(const u of a.j_)u.onError(r)})})(this,new q(H.ABORTED,"Firestore shutting down"))}}function jw(){return new Za(t=>UT(t),Wd)}async function Oy(t,e){const n=fe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Ox,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=Py(s,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Dy(n)}async function Ny(t,e){const n=fe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dx(t,e){const n=fe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Dy(n)}function xx(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function Dy(t){t.Y_.forEach(e=>{e.next()})}var cg,Uw;(Uw=cg||(cg={})).ea="default",Uw.Cache="cache";class xy{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.key=e}}class wS{constructor(e){this.key=e}}class kx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=HT(e),this.Ra=new ba(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Fw,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=$d(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),w=!0):this.ga(d,p)||(r.track({type:2,doc:p}),w=!0,(u&&this.Aa(p,u)>0||l&&this.Aa(p,l)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),w=!0):d&&!p&&(r.track({type:1,doc:d}),w=!0,(u||l)&&(a=!0)),w&&(p?(s=s.add(p),o=y?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((c,h)=>function(p,m){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return y(p)-y(m)}(c.type,h.type)||this.Aa(c.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ua(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _S(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ua.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Mx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Lx{constructor(e){this.key=e,this.va=!1}}class Vx{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Za(a=>UT(a),Wd),this.Ma=new Map,this.xa=new Set,this.Oa=new ut(ie.comparator),this.Na=new Map,this.La=new Ey,this.Ba={},this.ka=new Map,this.qa=ja.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Bx(t,e,n=!0){const r=SS(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await ES(r,e,n,!0),i}async function Fx(t,e){const n=SS(t);await ES(n,e,!0,!1)}async function ES(t,e,n,r){const i=await ax(t.localStore,jr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await jx(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&dS(t.remoteStore,i),a}async function jx(t,e,n,r,i){t.Ka=(h,d,p)=>async function(y,w,_,v){let A=w.view.ma(_);A.ns&&(A=await Mw(y.localStore,w.query,!1).then(({documents:T})=>w.view.ma(T,A)));const S=v&&v.targetChanges.get(w.targetId),x=v&&v.targetMismatches.get(w.targetId)!=null,M=w.view.applyChanges(A,y.isPrimaryClient,S,x);return zw(y,w.targetId,M.wa),M.snapshot}(t,h,d,p);const o=await Mw(t.localStore,e,!0),s=new kx(e,o.Ts),a=s.ma(o.documents),u=yc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);zw(t,n,l.wa);const c=new Mx(e,n,s);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot}async function Ux(t,e,n){const r=fe(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Wd(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Iy(r.remoteStore,i.targetId),hg(r,i.targetId)}).catch(pc)):(hg(r,i.targetId),await lg(r.localStore,i.targetId,!0))}async function Hx(t,e){const n=fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iy(n.remoteStore,r.targetId))}async function zx(t,e,n){const r=qx(t);try{const i=await function(s,a){const u=fe(s),l=bt.now(),c=a.reduce((p,m)=>p.add(m.key),Ee());let h,d;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ei(),y=Ee();return u.cs.getEntries(p,c).next(w=>{m=w,m.forEach((_,v)=>{v.isValidDocument()||(y=y.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,m)).next(w=>{h=w;const _=[];for(const v of a){const A=h7(v,h.get(v.key).overlayedDocument);A!=null&&_.push(new To(v.key,A,xT(A.value.mapValue),_r.exists(!0)))}return u.mutationQueue.addMutationBatch(p,l,_,a)}).next(w=>{d=w;const _=w.applyToLocalDocumentSet(h,y);return u.documentOverlayCache.saveOverlays(p,w.batchId,_)})}).then(()=>({batchId:d.batchId,changes:WT(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new ut(Re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),await _c(r,i.changes),await Qd(r.remoteStore)}catch(i){const o=Py(i,"Failed to persist write");n.reject(o)}}async function AS(t,e){const n=fe(t);try{const r=await ix(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Le(s.va):i.removedDocuments.size>0&&(Le(s.va),s.va=!1))}),await _c(n,r,e)}catch(r){await pc(r)}}function Hw(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=fe(s);u.onlineState=a;let l=!1;u.queries.forEach((c,h)=>{for(const d of h.j_)d.Z_(a)&&(l=!0)}),l&&Dy(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Wx(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new ut(ie.comparator);s=s.insert(o,an.newNoDocument(o,he.min()));const a=Ee().add(o),u=new Kd(he.min(),new Map,new ut(Re),s,a);await AS(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),ky(r)}else await lg(r.localStore,e,!1).then(()=>hg(r,e,n)).catch(pc)}async function $x(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await rx(n.localStore,e);IS(n,r,null),CS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _c(n,i)}catch(i){await pc(i)}}async function Gx(t,e,n){const r=fe(t);try{const i=await function(s,a){const u=fe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(h=>(Le(h!==null),c=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,e);IS(r,e,n),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _c(r,i)}catch(i){await pc(i)}}function CS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function IS(t,e,n){const r=fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function hg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||TS(t,r)})}function TS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Iy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ky(t))}function zw(t,e,n){for(const r of n)r instanceof _S?(t.La.addReference(r.key,e),Xx(t,r)):r instanceof wS?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TS(t,r.key)):le()}function Xx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),ky(t))}function ky(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Xe.fromString(e)),r=t.qa.next();t.Na.set(r,new Lx(n)),t.Oa=t.Oa.insert(n,r),dS(t.remoteStore,new Xi(jr(zd(n.path)),r,"TargetPurposeLimboResolution",cy.oe))}}async function _c(t,e,n){const r=fe(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);const h=Cy.Wi(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(u,l){const c=fe(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(l,d=>z.forEach(d.$i,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>z.forEach(d.Ui,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!mc(h))throw h;ee("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=c.os.get(d),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);c.os=c.os.insert(d,y)}}}(r.localStore,o))}async function Kx(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await lS(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new q(H.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _c(n,r.hs)}}function Yx(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let i=Ee();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function SS(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wx.bind(null,e),e.Ca.d_=Dx.bind(null,e.eventManager),e.Ca.$a=xx.bind(null,e.eventManager),e}function qx(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$x.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gx.bind(null,e),e}class Jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nx(this.persistence,new ex,e.initialUser,this.serializer)}Ga(e){return new Q7(Ay.Zr,this.serializer)}Wa(e){return new lx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jf.provider={build:()=>new Jf};class fg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kx.bind(null,this.syncEngine),await Px(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Nx}()}createDatastore(e){const n=Yd(e.databaseInfo.databaseId),r=function(o){return new dx(o)}(e.databaseInfo);return function(o,s,a,u){return new gx(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new vx(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Hw(this.syncEngine,n,0),function(){return Vw.D()?new Vw:new cx}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,c){const h=new Vx(i,o,s,a,u,l);return c&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=fe(i);ee("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await vc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fg.provider={build:()=>new fg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=OT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{ee("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Py(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function E1(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await lS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ww(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zx(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Bw(e.remoteStore,i)),t._onlineComponents=e}async function Zx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await E1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await E1(t,new Jf)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await E1(t,new Jf);return t._offlineComponents}async function bS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Ww(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Ww(t,new fg))),t._onlineComponents}function Jx(t){return bS(t).then(e=>e.syncEngine)}async function ed(t){const e=await bS(t),n=e.eventManager;return n.onListen=Bx.bind(null,e.syncEngine),n.onUnlisten=Ux.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Fx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Hx.bind(null,e.syncEngine),n}function ek(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new My({next:d=>{c.Za(),s.enqueueAndForget(()=>Ny(o,h));const p=d.docs.has(a);!p&&d.fromCache?l.reject(new q(H.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&u&&u.source==="server"?l.reject(new q(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new xy(zd(a.path),c,{includeMetadataChanges:!0,_a:!0});return Oy(o,h)}(await ed(t),t.asyncQueue,e,n,r)),r.promise}function tk(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new My({next:d=>{c.Za(),s.enqueueAndForget(()=>Ny(o,h)),d.fromCache&&u.source==="server"?l.reject(new q(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new xy(a,c,{includeMetadataChanges:!0,_a:!0});return Oy(o,h)}(await ed(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t,e,n){if(!n)throw new q(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nk(t,e,n,r){if(e===!0&&r===!0)throw new q(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gw(t){if(!ie.isDocumentKey(t))throw new q(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xw(t){if(ie.isDocumentKey(t))throw new q(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zd(t);throw new q(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wD;switch(r.type){case"firstParty":return new ID(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$w.get(n);r&&(ee("ComponentProvider","Removing Datastore"),$w.delete(n),r.terminate())}(this),Promise.resolve()}}function rk(t,e,n,r={}){var i;const o=(t=rr(t,Jd))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=on.MOCK_USER;else{a=VI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new q(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new on(l)}t._authCredentials=new ED(new PT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class so extends So{constructor(e,n,r){super(e,n,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ie(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function xe(t,e,...n){if(t=Et(t),PS("collection","path",e),t instanceof Jd){const r=Xe.fromString(e,...n);return Xw(r),new so(t,null,r)}{if(!(t instanceof wn||t instanceof so))throw new q(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return Xw(r),new so(t.firestore,null,r)}}function Cr(t,e,...n){if(t=Et(t),arguments.length===1&&(e=OT.newId()),PS("doc","path",e),t instanceof Jd){const r=Xe.fromString(e,...n);return Gw(r),new wn(t,null,new ie(r))}{if(!(t instanceof wn||t instanceof so))throw new q(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return Gw(r),new wn(t.firestore,t instanceof so?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hS(this,"async_queue_retry"),this.Vu=()=>{const r=w1();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=w1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=w1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ci;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mc(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw wi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ry.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function qw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class mo extends Jd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Yw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yw(e),this._firestoreClient=void 0,await e}}}function ik(t,e){const n=typeof t=="object"?t:J0(),r=typeof t=="string"?t:"(default)",i=Vd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=kI("firestore");o&&rk(i,...o)}return i}function ep(t){if(t._terminated)throw new q(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ok(t),t._firestoreClient}function ok(t){var e,n,r;const i=t._freezeSettings(),o=function(a,u,l,c){return new VD(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,RS(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Qx(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(qt.fromBase64String(e))}catch(n){throw new q(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ha(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=/^__.*__$/;class ak{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}class OS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new To(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Fy{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return td(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NS(this.Cu)&&sk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yd(e)}Qu(e,n,r,i=!1){return new Fy({Cu:e,methodName:n,qu:r,path:$t.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jy(t){const e=t._freezeSettings(),n=Yd(t._databaseId);return new uk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lk(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);Uy("Data must be an object, but it was:",s,r);const a=DS(r,s);let u,l;if(o.merge)u=new jn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const h of o.mergeFields){const d=dg(e,h,n);if(!s.contains(d))throw new q(H.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);kS(c,d)||c.push(d)}u=new jn(c),l=s.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=s.fieldTransforms;return new ak(new bn(a),u,l)}class np extends Ly{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof np}}function ck(t,e,n,r){const i=t.Qu(1,e,n);Uy("Data must be an object, but it was:",i,r);const o=[],s=bn.empty();Ps(r,(u,l)=>{const c=Hy(e,u,n);l=Et(l);const h=i.Nu(c);if(l instanceof np)o.push(c);else{const d=wc(l,h);d!=null&&(o.push(c),s.set(c,d))}});const a=new jn(o);return new OS(s,a,i.fieldTransforms)}function hk(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[dg(e,r,n)],u=[i];if(o.length%2!=0)throw new q(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(dg(e,o[d])),u.push(o[d+1]);const l=[],c=bn.empty();for(let d=a.length-1;d>=0;--d)if(!kS(l,a[d])){const p=a[d];let m=u[d];m=Et(m);const y=s.Nu(p);if(m instanceof np)l.push(p);else{const w=wc(m,y);w!=null&&(l.push(p),c.set(p,w))}}const h=new jn(l);return new OS(c,h,s.fieldTransforms)}function fk(t,e,n,r=!1){return wc(n,t.Qu(r?4:3,e))}function wc(t,e){if(xS(t=Et(t)))return Uy("Unsupported field value:",e,t),DS(t,e);if(t instanceof Ly)return function(r,i){if(!NS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=wc(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=bt.fromDate(r);return{timestampValue:Qf(i.serializer,o)}}if(r instanceof bt){const o=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qf(i.serializer,o)}}if(r instanceof Vy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ha)return{bytesValue:nS(i.serializer,r._byteString)};if(r instanceof wn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof By)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return gy(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zd(r)}`)}(t,e)}function DS(t,e){const n={};return NT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(t,(r,i)=>{const o=wc(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function xS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof Vy||t instanceof Ha||t instanceof wn||t instanceof Ly||t instanceof By)}function Uy(t,e,n){if(!xS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function dg(t,e,n){if((e=Et(e))instanceof tp)return e._internalPath;if(typeof e=="string")return Hy(t,e);throw td("Field path arguments must be of type string or ",t,!1,void 0,n)}const dk=new RegExp("[~\\*/\\[\\]]");function Hy(t,e,n){if(e.search(dk)>=0)throw td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tp(...e.split("."))._internalPath}catch{throw td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function td(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new q(H.INVALID_ARGUMENT,a+t+u)}function kS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pk extends MS{data(){return super.data()}}function rp(t,e){return typeof e=="string"?Hy(t,e):e instanceof tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zy{}class VS extends zy{}function vn(t,e,...n){let r=[];e instanceof zy&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Wy).length,a=o.filter(u=>u instanceof ip).length;if(s>1||s>0&&a>0)throw new q(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ip extends VS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ip(e,n,r)}_apply(e){const n=this._parse(e);return BS(e._query,n),new So(e.firestore,e.converter,rg(e._query,n))}_parse(e){const n=jy(e.firestore);return function(o,s,a,u,l,c,h){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new q(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Zw(h,c);const p=[];for(const m of h)p.push(Qw(u,o,m));d={arrayValue:{values:p}}}else d=Qw(u,o,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Zw(h,c),d=fk(a,s,h,c==="in"||c==="not-in");return _t.create(l,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kt(t,e,n){const r=e,i=rp("where",t);return ip._create(i,r,n)}class Wy extends zy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ar.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)BS(s,u),s=rg(s,u)}(e._query,n),new So(e.firestore,e.converter,rg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $y extends VS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $y(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new q(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(o,s)}(e._query,this._field,this._direction);return new So(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Qa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function mk(t,e="asc"){const n=e,r=rp("orderBy",t);return $y._create(r,n)}function Qw(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new q(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(e)&&n.indexOf("/")!==-1)throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xe.fromString(n));if(!ie.isDocumentKey(r))throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vw(t,new ie(r))}if(n instanceof wn)return vw(t,n._key);throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(n)}.`)}function Zw(t,e){if(!Array.isArray(t)||t.length===0)throw new q(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BS(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gk{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ps(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ft(s.doubleValue));return new By(o)}convertGeoPoint(e){return new Vy(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const n=fo(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xe.fromString(e);Le(uS(r));const i=new Hl(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(n)||wi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FS extends MS{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sf extends FS{data(e={}){return super.data(e)}}class jS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sf(this._firestore,this._userDataWriter,r.key,r,new Gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new sf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new sf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:vk(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){t=rr(t,wn);const e=rr(t.firestore,mo);return ek(ep(e),t._key).then(n=>HS(e,t,n))}class Gy extends gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function US(t){t=rr(t,So);const e=rr(t.firestore,mo),n=ep(e),r=new Gy(e);return LS(t._query),tk(n,t._query).then(i=>new jS(e,r,t,i))}function Ec(t,e,n,...r){t=rr(t,wn);const i=rr(t.firestore,mo),o=jy(i);let s;return s=typeof(e=Et(e))=="string"||e instanceof tp?hk(o,"updateDoc",t._key,e,n,r):ck(o,"updateDoc",t._key,e),Xy(i,[s.toMutation(t._key,_r.exists(!0))])}function Ac(t){return Xy(rr(t.firestore,mo),[new yy(t._key,_r.none())])}function op(t,e){const n=rr(t.firestore,mo),r=Cr(t),i=yk(t.converter,e);return Xy(n,[lk(jy(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}function Ze(t,...e){var n,r,i;t=Et(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qw(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(qw(e[s])){const h=e[s];e[s]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,l,c;if(t instanceof wn)l=rr(t.firestore,mo),c=zd(t._key.path),u={next:h=>{e[s]&&e[s](HS(l,t,h))},error:e[s+1],complete:e[s+2]};else{const h=rr(t,So);l=rr(h.firestore,mo),c=h._query;const d=new Gy(l);u={next:p=>{e[s]&&e[s](new jS(l,d,h,p))},error:e[s+1],complete:e[s+2]},LS(t._query)}return function(d,p,m,y){const w=new My(y),_=new xy(p,w,m);return d.asyncQueue.enqueueAndForget(async()=>Oy(await ed(d),_)),()=>{w.Za(),d.asyncQueue.enqueueAndForget(async()=>Ny(await ed(d),_))}}(ep(l),c,a,u)}function Xy(t,e){return function(r,i){const o=new ci;return r.asyncQueue.enqueueAndForget(async()=>zx(await Jx(r),i,o)),o.promise}(ep(t),e)}function HS(t,e,n){const r=n.docs.get(e._key),i=new Gy(t);return new FS(t,i,e._key,r,new Gu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qa=i})(bs),ys(new co("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new mo(new AD(r.getProvider("auth-internal")),new SD(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(l.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Vr(dw,"4.7.3",e),Vr(dw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firebasestorage.googleapis.com",wk="storageBucket",Ek=2*60*1e3,Ak=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends $r{constructor(e,n,r=0){super(A1(e),`Firebase Storage: ${n} (${A1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return A1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wr||(Wr={}));function A1(t){return"storage/"+t}function Ck(){const t="An unknown error occurred, please check the error payload for server response.";return new Gr(Wr.UNKNOWN,t)}function Ik(){return new Gr(Wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Tk(){return new Gr(Wr.CANCELED,"User canceled the upload/download.")}function Sk(t){return new Gr(Wr.INVALID_URL,"Invalid URL '"+t+"'.")}function bk(t){return new Gr(Wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jw(t){return new Gr(Wr.INVALID_ARGUMENT,t)}function WS(){return new Gr(Wr.APP_DELETED,"The Firebase app was deleted.")}function Rk(t){return new Gr(Wr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gr.makeFromUrl(e,n)}catch{return new gr(e,"")}if(r.path==="")return r;throw bk(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(S){S.path_=decodeURIComponent(S.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},y=n===zS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",_=new RegExp(`^https?://${y}/${i}/${w}`,"i"),A=[{regex:a,indices:u,postModify:o},{regex:p,indices:m,postModify:l},{regex:_,indices:{bucket:1,path:2},postModify:l}];for(let S=0;S<A.length;S++){const x=A[S],M=x.regex.exec(e);if(M){const T=M[x.indices.bucket];let I=M[x.indices.path];I||(I=""),r=new gr(T,I),x.postModify(r);break}}if(r==null)throw Sk(e);return r}}class Pk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function c(...w){l||(l=!0,e.apply(null,w))}function h(w){i=setTimeout(()=>{i=null,t(p,u())},w)}function d(){o&&clearTimeout(o)}function p(w,..._){if(l){d();return}if(w){d(),c.call(null,w,..._);return}if(u()||s){d(),c.call(null,w,..._);return}r<64&&(r*=2);let A;a===1?(a=2,A=0):A=(r+Math.random())*1e3,h(A)}let m=!1;function y(w){m||(m=!0,d(),!l&&(i!==null?(w||(a=2),clearTimeout(i),h(0)):w||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,y(!0)},n),y}function Nk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){return t!==void 0}function eE(t,e,n,r){if(r<e)throw Jw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jw(`Invalid value for '${t}'. Expected ${n} or less.`)}function xk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var nd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nd||(nd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,i,o,s,a,u,l,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ih(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===nd.NO_ERROR,u=o.getStatus();if(!a||kk(u,this.additionalRetryCodes_)&&this.retry){const c=o.getErrorCode()===nd.ABORT;r(!1,new Ih(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new Ih(l,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Dk(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=Ck();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?WS():Tk();s(u)}else{const u=Ik();s(u)}};this.canceled_?n(!1,new Ih(!1,null,!0)):this.backoffId_=Ok(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ih{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Lk(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Vk(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Bk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fk(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jk(t,e,n,r,i,o,s=!0){const a=xk(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return Bk(l,e),Lk(l,n),Vk(l,o),Fk(l,r),new Mk(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Hk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this._service=e,n instanceof gr?this._location=n:this._location=gr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rd(e,n)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hk(this._location.path)}get storage(){return this._service}get parent(){const e=Uk(this._location.path);if(e===null)return null;const n=new gr(this._location.bucket,e);return new rd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Rk(e)}}function tE(t,e){const n=e==null?void 0:e[wk];return n==null?null:gr.makeFromBucketSpec(n,t)}function zk(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:VI(i,t.app.options.projectId))}class Wk{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=zS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ek,this._maxUploadRetryTime=Ak,this._requests=new Set,i!=null?this._bucket=gr.makeFromBucketSpec(i,this._host):this._bucket=tE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=tE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rd(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Pk(WS());{const s=jk(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const nE="@firebase/storage",rE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="storage";function $k(t=J0(),e){t=Et(t);const r=Vd(t,$S).getImmediate({identifier:e}),i=kI("storage");return i&&Gk(r,...i),r}function Gk(t,e,n,r={}){zk(t,e,n,r)}function Xk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Wk(n,r,i,e,bs)}function Kk(){ys(new co($S,Xk,"PUBLIC").setMultipleInstances(!0)),Vr(nE,rE,""),Vr(nE,rE,"esm2017")}Kk();const GS={apiKey:"AIzaSyDNDrRYhZ8Z5rCeSg7wC8grJUCiudY2wN0",authDomain:"barberia-turnos-65776.firebaseapp.com",projectId:"barberia-turnos-65776",storageBucket:"barberia-turnos-65776.appspot.com",messagingSenderId:"136280564495",appId:"1:136280564495:web:f65016f9f0bac316ec947a"},Ky=Z0(GS),go=AT(Ky),me=ik(Ky);$k(Ky);const Yk=["super@hotmail.com"];function qk(){const[t,e]=N.useState(""),[n,r]=N.useState(""),i=Y0(),o=async s=>{s.preventDefault();try{await r9(go,t,n);let a="/";if(Yk.includes(t.toLowerCase()))a="/admin";else{const u=vn(xe(me,"barberos"),kt("email","==",t));(await US(u)).empty||(a="/barbero")}i(a)}catch{alert("Error de autenticación")}};return C.jsxs("form",{onSubmit:o,className:"flex flex-col space-y-4",children:[C.jsx("input",{className:"input input-bordered w-full",type:"email",value:t,onChange:s=>e(s.target.value),placeholder:"Email"}),C.jsx("input",{className:"input input-bordered w-full",type:"password",value:n,onChange:s=>r(s.target.value),placeholder:"Contraseña"}),C.jsx("button",{type:"submit",className:"btn btn-primary",children:"Ingresar"})]})}const XS="/barberia-turnos/assets/barber-CVio9kJA.svg";function Qk(){return C.jsx("div",{className:"hero min-h-screen bg-base-200",children:C.jsxs("div",{className:"hero-content flex-col w-full max-w-md",children:[C.jsx("img",{src:XS,alt:"Logo Barbería",className:"w-32 mb-4 logo-main"}),C.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Bienvenido a la Barbería"}),C.jsx("div",{className:"card w-full shadow-2xl bg-base-100",children:C.jsx("div",{className:"card-body",children:C.jsx(qk,{})})}),C.jsx("a",{href:"#/agendar",className:"text-blue-600 hover:underline mt-4",children:"Agendar un turno sin registrarse"})]})})}const KS=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),sp=N.createContext({}),Yy=N.createContext(null),ap=typeof document<"u",Zk=ap?N.useLayoutEffect:N.useEffect,YS=N.createContext({strict:!1}),qy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Jk="framerAppearId",qS="data-"+qy(Jk);function eM(t,e,n,r){const{visualElement:i}=N.useContext(sp),o=N.useContext(YS),s=N.useContext(Yy),a=N.useContext(KS).reducedMotion,u=N.useRef();r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const l=u.current;N.useInsertionEffect(()=>{l&&l.update(n,s)});const c=N.useRef(!!(n[qS]&&!window.HandoffComplete));return Zk(()=>{l&&(l.render(),c.current&&l.animationState&&l.animationState.animateChanges())}),N.useEffect(()=>{l&&(l.updateFeatures(),!c.current&&l.animationState&&l.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),l}function la(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tM(t,e,n){return N.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):la(n)&&(n.current=r))},[e])}function Xl(t){return typeof t=="string"||Array.isArray(t)}function up(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zy=["initial",...Qy];function lp(t){return up(t.animate)||Zy.some(e=>Xl(t[e]))}function QS(t){return!!(lp(t)||t.variants)}function nM(t,e){if(lp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Xl(n)?n:void 0,animate:Xl(r)?r:void 0}}return t.inherit!==!1?e:{}}function rM(t){const{initial:e,animate:n}=nM(t,N.useContext(sp));return N.useMemo(()=>({initial:e,animate:n}),[iE(e),iE(n)])}function iE(t){return Array.isArray(t)?t.join(" "):t}const oE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kl={};for(const t in oE)Kl[t]={isEnabled:e=>oE[t].some(n=>!!e[n])};function iM(t){for(const e in t)Kl[e]={...Kl[e],...t[e]}}const ZS=N.createContext({}),JS=N.createContext({}),oM=Symbol.for("motionComponentSymbol");function sM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&iM(t);function o(a,u){let l;const c={...N.useContext(KS),...a,layoutId:aM(a)},{isStatic:h}=c,d=rM(a),p=r(a,h);if(!h&&ap){d.visualElement=eM(i,p,c,e);const m=N.useContext(JS),y=N.useContext(YS).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,y,t,m))}return N.createElement(sp.Provider,{value:d},l&&d.visualElement?N.createElement(l,{visualElement:d.visualElement,...c}):null,n(i,a,tM(p,d.visualElement,u),p,h,d.visualElement))}const s=N.forwardRef(o);return s[oM]=i,s}function aM({layoutId:t}){const e=N.useContext(ZS).id;return e&&t!==void 0?e+"-"+t:t}function uM(t){function e(r,i={}){return sM(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const lM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jy(t){return typeof t!="string"||t.includes("-")?!1:!!(lM.indexOf(t)>-1||/[A-Z]/.test(t))}const id={};function cM(t){Object.assign(id,t)}const Cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ns=new Set(Cc);function e3(t,{layout:e,layoutId:n}){return Ns.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!id[t]||t==="opacity")}const Dn=t=>!!(t&&t.getVelocity),hM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fM=Cc.length;function dM(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<fM;s++){const a=Cc[s];if(t[a]!==void 0){const u=hM[a]||a;o+=`${u}(${t[a]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const t3=t=>e=>typeof e=="string"&&e.startsWith(t),n3=t3("--"),pg=t3("var(--"),pM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,mM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,yo=(t,e,n)=>Math.min(Math.max(n,t),e),Ds={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},dl={...Ds,transform:t=>yo(0,1,t)},Th={...Ds,default:1},pl=t=>Math.round(t*1e5)/1e5,cp=/(-)?([\d]*\.?[\d])+/g,r3=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,gM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ic(t){return typeof t=="string"}const Tc=t=>({test:e=>Ic(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ki=Tc("deg"),Hr=Tc("%"),ae=Tc("px"),yM=Tc("vh"),vM=Tc("vw"),sE={...Hr,parse:t=>Hr.parse(t)/100,transform:t=>Hr.transform(t*100)},aE={...Ds,transform:Math.round},i3={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,size:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,rotate:ki,rotateX:ki,rotateY:ki,rotateZ:ki,scale:Th,scaleX:Th,scaleY:Th,scaleZ:Th,skew:ki,skewX:ki,skewY:ki,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:dl,originX:sE,originY:sE,originZ:ae,zIndex:aE,fillOpacity:dl,strokeOpacity:dl,numOctaves:aE};function ev(t,e,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=t;let u=!1,l=!1,c=!0;for(const h in e){const d=e[h];if(n3(h)){o[h]=d;continue}const p=i3[h],m=mM(d,p);if(Ns.has(h)){if(u=!0,s[h]=m,!c)continue;d!==(p.default||0)&&(c=!1)}else h.startsWith("origin")?(l=!0,a[h]=m):i[h]=m}if(e.transform||(u||r?i.transform=dM(t.transform,n,c,r):i.transform&&(i.transform="none")),l){const{originX:h="50%",originY:d="50%",originZ:p=0}=a;i.transformOrigin=`${h} ${d} ${p}`}}const tv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function o3(t,e,n){for(const r in e)!Dn(e[r])&&!e3(r,n)&&(t[r]=e[r])}function _M({transformTemplate:t},e,n){return N.useMemo(()=>{const r=tv();return ev(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function wM(t,e,n){const r=t.style||{},i={};return o3(i,r,t),Object.assign(i,_M(t,e,n)),t.transformValues?t.transformValues(i):i}function EM(t,e,n){const r={},i=wM(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const AM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function od(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AM.has(t)}let s3=t=>!od(t);function CM(t){t&&(s3=e=>e.startsWith("on")?!od(e):t(e))}try{CM(require("@emotion/is-prop-valid").default)}catch{}function IM(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(s3(i)||n===!0&&od(i)||!e&&!od(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function uE(t,e,n){return typeof t=="string"?t:ae.transform(e+n*t)}function TM(t,e,n){const r=uE(e,t.x,t.width),i=uE(n,t.y,t.height);return`${r} ${i}`}const SM={offset:"stroke-dashoffset",array:"stroke-dasharray"},bM={offset:"strokeDashoffset",array:"strokeDasharray"};function RM(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?SM:bM;t[o.offset]=ae.transform(-r);const s=ae.transform(e),a=ae.transform(n);t[o.array]=`${s} ${a}`}function nv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:u=0,...l},c,h,d){if(ev(t,l,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:y}=t;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(i!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=TM(y,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&RM(p,s,a,u,!1)}const a3=()=>({...tv(),attrs:{}}),rv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PM(t,e,n,r){const i=N.useMemo(()=>{const o=a3();return nv(o,e,{enableHardwareAcceleration:!1},rv(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};o3(o,t.style,t),i.style={...o,...i.style}}return i}function OM(t=!1){return(n,r,i,{latestValues:o},s)=>{const u=(Jy(n)?PM:EM)(r,o,s,n),c={...IM(r,typeof n=="string",t),...u,ref:i},{children:h}=r,d=N.useMemo(()=>Dn(h)?h.get():h,[h]);return N.createElement(n,{...c,children:d})}}function u3(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const l3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function c3(t,e,n,r){u3(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(l3.has(i)?i:qy(i),e.attrs[i])}function iv(t,e){const{style:n}=t,r={};for(const i in n)(Dn(n[i])||e.style&&Dn(e.style[i])||e3(i,t))&&(r[i]=n[i]);return r}function h3(t,e){const n=iv(t,e);for(const r in t)if(Dn(t[r])||Dn(e[r])){const i=Cc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function ov(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function NM(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const sd=t=>Array.isArray(t),DM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),xM=t=>sd(t)?t[t.length-1]||0:t;function af(t){const e=Dn(t)?t.get():t;return DM(e)?e.toValue():e}function kM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const s={latestValues:MM(r,i,o,t),renderState:e()};return n&&(s.mount=a=>n(r,a,s)),s}const f3=t=>(e,n)=>{const r=N.useContext(sp),i=N.useContext(Yy),o=()=>kM(t,e,r,i);return n?o():NM(o)};function MM(t,e,n,r){const i={},o=r(t,{});for(const d in o)i[d]=af(o[d]);let{initial:s,animate:a}=t;const u=lp(t),l=QS(t);e&&l&&!u&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const h=c?a:s;return h&&typeof h!="boolean"&&!up(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const m=ov(t,p);if(!m)return;const{transitionEnd:y,transition:w,..._}=m;for(const v in _){let A=_[v];if(Array.isArray(A)){const S=c?A.length-1:0;A=A[S]}A!==null&&(i[v]=A)}for(const v in y)i[v]=y[v]}),i}const pt=t=>t;class lE{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function LM(t){let e=new lE,n=new lE,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(u,l=!1,c=!1)=>{const h=c&&i,d=h?e:n;return l&&s.add(u),d.add(u)&&h&&i&&(r=e.order.length),u},cancel:u=>{n.remove(u),s.delete(u)},process:u=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let l=0;l<r;l++){const c=e.order[l];c(u),s.has(c)&&(a.schedule(c),t())}i=!1,o&&(o=!1,a.process(u))}};return a}const Sh=["prepare","read","update","preRender","render","postRender"],VM=40;function BM(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Sh.reduce((h,d)=>(h[d]=LM(()=>n=!0),h),{}),s=h=>o[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,VM),1),i.timestamp=h,i.isProcessing=!0,Sh.forEach(s),i.isProcessing=!1,n&&e&&(r=!1,t(a))},u=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Sh.reduce((h,d)=>{const p=o[d];return h[d]=(m,y=!1,w=!1)=>(n||u(),p.schedule(m,y,w)),h},{}),cancel:h=>Sh.forEach(d=>o[d].cancel(h)),state:i,steps:o}}const{schedule:qe,cancel:Ai,state:rn,steps:C1}=BM(typeof requestAnimationFrame<"u"?requestAnimationFrame:pt,!0),FM={useVisualState:f3({scrapeMotionValuesFromProps:h3,createRenderState:a3,onMount:(t,e,{renderState:n,latestValues:r})=>{qe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),qe.render(()=>{nv(n,r,{enableHardwareAcceleration:!1},rv(e.tagName),t.transformTemplate),c3(e,n)})}})},jM={useVisualState:f3({scrapeMotionValuesFromProps:iv,createRenderState:tv})};function UM(t,{forwardMotionProps:e=!1},n,r){return{...Jy(t)?FM:jM,preloadedFeatures:n,useRender:OM(e),createVisualElement:r,Component:t}}function ai(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const d3=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function hp(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const HM=t=>e=>d3(e)&&t(e,hp(e));function hi(t,e,n,r){return ai(t,e,HM(n),r)}const zM=(t,e)=>n=>e(t(n)),ao=(...t)=>t.reduce(zM);function p3(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const cE=p3("dragHorizontal"),hE=p3("dragVertical");function m3(t){let e=!1;if(t==="y")e=hE();else if(t==="x")e=cE();else{const n=cE(),r=hE();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function g3(){const t=m3(!0);return t?(t(),!1):!0}class bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function fE(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||g3())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&qe.update(()=>a[r](o,s))};return hi(t.current,n,i,{passive:!t.getProps()[r]})}class WM extends bo{mount(){this.unmount=ao(fE(this.node,!0),fE(this.node,!1))}unmount(){}}class $M extends bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ao(ai(this.node.current,"focus",()=>this.onFocus()),ai(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const y3=(t,e)=>e?t===e?!0:y3(t,e.parentElement):!1;function I1(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,hp(n))}class GM extends bo{constructor(){super(...arguments),this.removeStartListeners=pt,this.removeEndListeners=pt,this.removeAccessibleListeners=pt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=hi(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:c,globalTapTarget:h}=this.node.getProps();qe.update(()=>{!h&&!y3(this.node.current,a.target)?c&&c(a,u):l&&l(a,u)})},{passive:!(r.onTap||r.onPointerUp)}),s=hi(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ao(o,s),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||I1("up",(u,l)=>{const{onTap:c}=this.node.getProps();c&&qe.update(()=>c(u,l))})};this.removeEndListeners(),this.removeEndListeners=ai(this.node.current,"keyup",s),I1("down",(a,u)=>{this.startPress(a,u)})},n=ai(this.node.current,"keydown",e),r=()=>{this.isPressing&&I1("cancel",(o,s)=>this.cancelPress(o,s))},i=ai(this.node.current,"blur",r);this.removeAccessibleListeners=ao(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&qe.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!g3()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&qe.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=hi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ai(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ao(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const mg=new WeakMap,T1=new WeakMap,XM=t=>{const e=mg.get(t.target);e&&e(t)},KM=t=>{t.forEach(XM)};function YM({root:t,...e}){const n=t||document;T1.has(n)||T1.set(n,{});const r=T1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(KM,{root:t,...e})),r[i]}function qM(t,e,n){const r=YM(e);return mg.set(t,n),r.observe(t),()=>{mg.delete(t),r.unobserve(t)}}const QM={some:0,all:1};class ZM extends bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:QM[i]},a=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,o&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=l?c:h;d&&d(u)};return qM(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(JM(e,n))&&this.startObserver()}unmount(){}}function JM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const eL={inView:{Feature:ZM},tap:{Feature:GM},focus:{Feature:$M},hover:{Feature:WM}};function v3(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function tL(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function nL(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function fp(t,e,n){const r=t.getProps();return ov(r,e,n!==void 0?n:r.custom,tL(t),nL(t))}let sv=pt;const cs=t=>t*1e3,fi=t=>t/1e3,rL={current:!1},_3=t=>Array.isArray(t)&&typeof t[0]=="number";function w3(t){return!!(!t||typeof t=="string"&&E3[t]||_3(t)||Array.isArray(t)&&t.every(w3))}const Xu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,E3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xu([0,.65,.55,1]),circOut:Xu([.55,0,1,.45]),backIn:Xu([.31,.01,.66,-.59]),backOut:Xu([.33,1.53,.69,.99])};function A3(t){if(t)return _3(t)?Xu(t):Array.isArray(t)?t.map(A3):E3[t]}function iL(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:u}={}){const l={[e]:n};u&&(l.offset=u);const c=A3(a);return Array.isArray(c)&&(l.easing=c),t.animate(l,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function oL(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const C3=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,sL=1e-7,aL=12;function uL(t,e,n,r,i){let o,s,a=0;do s=e+(n-e)/2,o=C3(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>sL&&++a<aL);return s}function Sc(t,e,n,r){if(t===e&&n===r)return pt;const i=o=>uL(o,0,1,t,n);return o=>o===0||o===1?o:C3(i(o),e,r)}const lL=Sc(.42,0,1,1),cL=Sc(0,0,.58,1),I3=Sc(.42,0,.58,1),hL=t=>Array.isArray(t)&&typeof t[0]!="number",T3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,S3=t=>e=>1-t(1-e),av=t=>1-Math.sin(Math.acos(t)),b3=S3(av),fL=T3(av),R3=Sc(.33,1.53,.69,.99),uv=S3(R3),dL=T3(uv),pL=t=>(t*=2)<1?.5*uv(t):.5*(2-Math.pow(2,-10*(t-1))),mL={linear:pt,easeIn:lL,easeInOut:I3,easeOut:cL,circIn:av,circInOut:fL,circOut:b3,backIn:uv,backInOut:dL,backOut:R3,anticipate:pL},dE=t=>{if(Array.isArray(t)){sv(t.length===4);const[e,n,r,i]=t;return Sc(e,n,r,i)}else if(typeof t=="string")return mL[t];return t},lv=(t,e)=>n=>!!(Ic(n)&&gM.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),P3=(t,e,n)=>r=>{if(!Ic(r))return r;const[i,o,s,a]=r.match(cp);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},gL=t=>yo(0,255,t),S1={...Ds,transform:t=>Math.round(gL(t))},os={test:lv("rgb","red"),parse:P3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+S1.transform(t)+", "+S1.transform(e)+", "+S1.transform(n)+", "+pl(dl.transform(r))+")"};function yL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const gg={test:lv("#"),parse:yL,transform:os.transform},ca={test:lv("hsl","hue"),parse:P3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hr.transform(pl(e))+", "+Hr.transform(pl(n))+", "+pl(dl.transform(r))+")"},mn={test:t=>os.test(t)||gg.test(t)||ca.test(t),parse:t=>os.test(t)?os.parse(t):ca.test(t)?ca.parse(t):gg.parse(t),transform:t=>Ic(t)?t:t.hasOwnProperty("red")?os.transform(t):ca.transform(t)},it=(t,e,n)=>-n*t+n*e+t;function b1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function vL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=b1(u,a,t+1/3),o=b1(u,a,t),s=b1(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const R1=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},_L=[gg,os,ca],wL=t=>_L.find(e=>e.test(t));function pE(t){const e=wL(t);let n=e.parse(t);return e===ca&&(n=vL(n)),n}const O3=(t,e)=>{const n=pE(t),r=pE(e),i={...n};return o=>(i.red=R1(n.red,r.red,o),i.green=R1(n.green,r.green,o),i.blue=R1(n.blue,r.blue,o),i.alpha=it(n.alpha,r.alpha,o),os.transform(i))};function EL(t){var e,n;return isNaN(t)&&Ic(t)&&(((e=t.match(cp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(r3))===null||n===void 0?void 0:n.length)||0)>0}const N3={regex:pM,countKey:"Vars",token:"${v}",parse:pt},D3={regex:r3,countKey:"Colors",token:"${c}",parse:mn.parse},x3={regex:cp,countKey:"Numbers",token:"${n}",parse:Ds.parse};function P1(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function ad(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&P1(n,N3),P1(n,D3),P1(n,x3),n}function k3(t){return ad(t).values}function M3(t){const{values:e,numColors:n,numVars:r,tokenised:i}=ad(t),o=e.length;return s=>{let a=i;for(let u=0;u<o;u++)u<r?a=a.replace(N3.token,s[u]):u<r+n?a=a.replace(D3.token,mn.transform(s[u])):a=a.replace(x3.token,pl(s[u]));return a}}const AL=t=>typeof t=="number"?0:t;function CL(t){const e=k3(t);return M3(t)(e.map(AL))}const vo={test:EL,parse:k3,createTransformer:M3,getAnimatableNone:CL},L3=(t,e)=>n=>`${n>0?e:t}`;function V3(t,e){return typeof t=="number"?n=>it(t,e,n):mn.test(t)?O3(t,e):t.startsWith("var(")?L3(t,e):F3(t,e)}const B3=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,s)=>V3(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},IL=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=V3(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},F3=(t,e)=>{const n=vo.createTransformer(e),r=ad(t),i=ad(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ao(B3(r.values,i.values),n):L3(t,e)},Yl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},mE=(t,e)=>n=>it(t,e,n);function TL(t){return typeof t=="number"?mE:typeof t=="string"?mn.test(t)?O3:F3:Array.isArray(t)?B3:typeof t=="object"?IL:mE}function SL(t,e,n){const r=[],i=n||TL(t[0]),o=t.length-1;for(let s=0;s<o;s++){let a=i(t[s],t[s+1]);if(e){const u=Array.isArray(e)?e[s]||pt:e;a=ao(u,a)}r.push(a)}return r}function j3(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(sv(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=SL(e,r,i),a=s.length,u=l=>{let c=0;if(a>1)for(;c<t.length-2&&!(l<t[c+1]);c++);const h=Yl(t[c],t[c+1],l);return s[c](h)};return n?l=>u(yo(t[0],t[o-1],l)):u}function bL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Yl(0,e,r);t.push(it(n,1,i))}}function RL(t){const e=[0];return bL(e,t.length-1),e}function PL(t,e){return t.map(n=>n*e)}function OL(t,e){return t.map(()=>e||I3).splice(0,t.length-1)}function ud({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=hL(r)?r.map(dE):dE(r),o={done:!1,value:e[0]},s=PL(n&&n.length===e.length?n:RL(e),t),a=j3(s,e,{ease:Array.isArray(i)?i:OL(e,i)});return{calculatedDuration:t,next:u=>(o.value=a(u),o.done=u>=t,o)}}function U3(t,e){return e?t*(1e3/e):0}const NL=5;function H3(t,e,n){const r=Math.max(e-NL,0);return U3(n-t(r),e-r)}const O1=.001,DL=.01,xL=10,kL=.05,ML=1;function LL({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o,s=1-e;s=yo(kL,ML,s),t=yo(DL,xL,fi(t)),s<1?(i=l=>{const c=l*s,h=c*t,d=c-n,p=yg(l,s),m=Math.exp(-h);return O1-d/p*m},o=l=>{const h=l*s*t,d=h*n+n,p=Math.pow(s,2)*Math.pow(l,2)*t,m=Math.exp(-h),y=yg(Math.pow(l,2),s);return(-i(l)+O1>0?-1:1)*((d-p)*m)/y}):(i=l=>{const c=Math.exp(-l*t),h=(l-n)*t+1;return-O1+c*h},o=l=>{const c=Math.exp(-l*t),h=(n-l)*(t*t);return c*h});const a=5/t,u=BL(i,o,a);if(t=cs(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:s*2*Math.sqrt(r*l),duration:t}}}const VL=12;function BL(t,e,n){let r=n;for(let i=1;i<VL;i++)r=r-t(r)/e(r);return r}function yg(t,e){return t*Math.sqrt(1-e*e)}const FL=["duration","bounce"],jL=["stiffness","damping","mass"];function gE(t,e){return e.some(n=>t[n]!==void 0)}function UL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!gE(t,jL)&&gE(t,FL)){const n=LL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function z3({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],s={done:!1,value:i},{stiffness:a,damping:u,mass:l,duration:c,velocity:h,isResolvedFromDuration:d}=UL({...r,velocity:-fi(r.velocity||0)}),p=h||0,m=u/(2*Math.sqrt(a*l)),y=o-i,w=fi(Math.sqrt(a/l)),_=Math.abs(y)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let v;if(m<1){const A=yg(w,m);v=S=>{const x=Math.exp(-m*w*S);return o-x*((p+m*w*y)/A*Math.sin(A*S)+y*Math.cos(A*S))}}else if(m===1)v=A=>o-Math.exp(-w*A)*(y+(p+w*y)*A);else{const A=w*Math.sqrt(m*m-1);v=S=>{const x=Math.exp(-m*w*S),M=Math.min(A*S,300);return o-x*((p+m*w*y)*Math.sinh(M)+A*y*Math.cosh(M))/A}}return{calculatedDuration:d&&c||null,next:A=>{const S=v(A);if(d)s.done=A>=c;else{let x=p;A!==0&&(m<1?x=H3(v,A,S):x=0);const M=Math.abs(x)<=n,T=Math.abs(o-S)<=e;s.done=M&&T}return s.value=s.done?o:S,s}}}function yE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:u,restDelta:l=.5,restSpeed:c}){const h=t[0],d={done:!1,value:h},p=I=>a!==void 0&&I<a||u!==void 0&&I>u,m=I=>a===void 0?u:u===void 0||Math.abs(a-I)<Math.abs(u-I)?a:u;let y=n*e;const w=h+y,_=s===void 0?w:s(w);_!==w&&(y=_-h);const v=I=>-y*Math.exp(-I/r),A=I=>_+v(I),S=I=>{const R=v(I),O=A(I);d.done=Math.abs(R)<=l,d.value=d.done?_:O};let x,M;const T=I=>{p(d.value)&&(x=I,M=z3({keyframes:[d.value,m(d.value)],velocity:H3(A,I,d.value),damping:i,stiffness:o,restDelta:l,restSpeed:c}))};return T(0),{calculatedDuration:null,next:I=>{let R=!1;return!M&&x===void 0&&(R=!0,S(I),T(I)),x!==void 0&&I>x?M.next(I-x):(!R&&S(I),d)}}}const HL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>qe.update(e,!0),stop:()=>Ai(e),now:()=>rn.isProcessing?rn.timestamp:performance.now()}},vE=2e4;function _E(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<vE;)e+=n,r=t.next(e);return e>=vE?1/0:e}const zL={decay:yE,inertia:yE,tween:ud,keyframes:ud,spring:z3};function ld({autoplay:t=!0,delay:e=0,driver:n=HL,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:u,onStop:l,onComplete:c,onUpdate:h,...d}){let p=1,m=!1,y,w;const _=()=>{w=new Promise(W=>{y=W})};_();let v;const A=zL[i]||ud;let S;A!==ud&&typeof r[0]!="number"&&(S=j3([0,100],r,{clamp:!1}),r=[0,100]);const x=A({...d,keyframes:r});let M;a==="mirror"&&(M=A({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let T="idle",I=null,R=null,O=null;x.calculatedDuration===null&&o&&(x.calculatedDuration=_E(x));const{calculatedDuration:k}=x;let L=1/0,D=1/0;k!==null&&(L=k+s,D=L*(o+1)-s);let ne=0;const ge=W=>{if(R===null)return;p>0&&(R=Math.min(R,W)),p<0&&(R=Math.min(W-D/p,R)),I!==null?ne=I:ne=Math.round(W-R)*p;const re=ne-e*(p>=0?1:-1),se=p>=0?re<0:re>D;ne=Math.max(re,0),T==="finished"&&I===null&&(ne=D);let we=ne,We=x;if(o){const Cn=Math.min(ne,D)/L;let kn=Math.floor(Cn),Qt=Cn%1;!Qt&&Cn>=1&&(Qt=1),Qt===1&&kn--,kn=Math.min(kn,o+1),!!(kn%2)&&(a==="reverse"?(Qt=1-Qt,s&&(Qt-=s/L)):a==="mirror"&&(We=M)),we=yo(0,1,Qt)*L}const ve=se?{done:!1,value:r[0]}:We.next(we);S&&(ve.value=S(ve.value));let{done:Ue}=ve;!se&&k!==null&&(Ue=p>=0?ne>=D:ne<=0);const Xr=I===null&&(T==="finished"||T==="running"&&Ue);return h&&h(ve.value),Xr&&G(),ve},de=()=>{v&&v.stop(),v=void 0},Fe=()=>{T="idle",de(),y(),_(),R=O=null},G=()=>{T="finished",c&&c(),de(),y()},Z=()=>{if(m)return;v||(v=n(ge));const W=v.now();u&&u(),I!==null?R=W-I:(!R||T==="finished")&&(R=W),T==="finished"&&_(),O=R,I=null,T="running",v.start()};t&&Z();const J={then(W,re){return w.then(W,re)},get time(){return fi(ne)},set time(W){W=cs(W),ne=W,I!==null||!v||p===0?I=W:R=v.now()-W/p},get duration(){const W=x.calculatedDuration===null?_E(x):x.calculatedDuration;return fi(W)},get speed(){return p},set speed(W){W===p||!v||(p=W,J.time=fi(ne))},get state(){return T},play:Z,pause:()=>{T="paused",I=ne},stop:()=>{m=!0,T!=="idle"&&(T="idle",l&&l(),Fe())},cancel:()=>{O!==null&&ge(O),Fe()},complete:()=>{T="finished"},sample:W=>(R=0,ge(W))};return J}function WL(t){let e;return()=>(e===void 0&&(e=t()),e)}const $L=WL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),GL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),bh=10,XL=2e4,KL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!w3(e.ease);function YL(t,e,{onUpdate:n,onComplete:r,...i}){if(!($L()&&GL.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,u,l=!1;const c=()=>{u=new Promise(A=>{a=A})};c();let{keyframes:h,duration:d=300,ease:p,times:m}=i;if(KL(e,i)){const A=ld({...i,repeat:0,delay:0});let S={done:!1,value:h[0]};const x=[];let M=0;for(;!S.done&&M<XL;)S=A.sample(M),x.push(S.value),M+=bh;m=void 0,h=x,d=M-bh,p="linear"}const y=iL(t.owner.current,e,h,{...i,duration:d,ease:p,times:m}),w=()=>{l=!1,y.cancel()},_=()=>{l=!0,qe.update(w),a(),c()};return y.onfinish=()=>{l||(t.set(oL(h,i)),r&&r(),_())},{then(A,S){return u.then(A,S)},attachTimeline(A){return y.timeline=A,y.onfinish=null,pt},get time(){return fi(y.currentTime||0)},set time(A){y.currentTime=cs(A)},get speed(){return y.playbackRate},set speed(A){y.playbackRate=A},get duration(){return fi(d)},play:()=>{s||(y.play(),Ai(w))},pause:()=>y.pause(),stop:()=>{if(s=!0,y.playState==="idle")return;const{currentTime:A}=y;if(A){const S=ld({...i,autoplay:!1});t.setWithVelocity(S.sample(A-bh).value,S.sample(A).value,bh)}_()},complete:()=>{l||y.finish()},cancel:_}}function qL({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:pt,pause:pt,stop:pt,then:o=>(o(),Promise.resolve()),cancel:pt,complete:pt});return e?ld({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const QL={type:"spring",stiffness:500,damping:25,restSpeed:10},ZL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),JL={type:"keyframes",duration:.8},eV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tV=(t,{keyframes:e})=>e.length>2?JL:Ns.has(t)?t.startsWith("scale")?ZL(e[1]):QL:eV,vg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vo.test(e)||e==="0")&&!e.startsWith("url(")),nV=new Set(["brightness","contrast","saturate","opacity"]);function rV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(cp)||[];if(!r)return t;const i=n.replace(r,"");let o=nV.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const iV=/([a-z-]*)\(.*?\)/g,_g={...vo,getAnimatableNone:t=>{const e=t.match(iV);return e?e.map(rV).join(" "):t}},oV={...i3,color:mn,backgroundColor:mn,outlineColor:mn,fill:mn,stroke:mn,borderColor:mn,borderTopColor:mn,borderRightColor:mn,borderBottomColor:mn,borderLeftColor:mn,filter:_g,WebkitFilter:_g},cv=t=>oV[t];function W3(t,e){let n=cv(t);return n!==_g&&(n=vo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $3=t=>/^0[^.\s]+$/.test(t);function sV(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||$3(t)}function aV(t,e,n,r){const i=vg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:t.get();let a;const u=[];for(let l=0;l<o.length;l++)o[l]===null&&(o[l]=l===0?s:o[l-1]),sV(o[l])&&u.push(l),typeof o[l]=="string"&&o[l]!=="none"&&o[l]!=="0"&&(a=o[l]);if(i&&u.length&&a)for(let l=0;l<u.length;l++){const c=u[l];o[c]=W3(e,a)}return o}function uV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:u,elapsed:l,...c}){return!!Object.keys(c).length}function hv(t,e){return t[e]||t.default||t}const lV={skipAnimations:!1},fv=(t,e,n,r={})=>i=>{const o=hv(r,t)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-cs(s);const u=aV(e,t,n,o),l=u[0],c=u[u.length-1],h=vg(t,l),d=vg(t,c);let p={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(uV(o)||(p={...p,...tV(t,p)}),p.duration&&(p.duration=cs(p.duration)),p.repeatDelay&&(p.repeatDelay=cs(p.repeatDelay)),!h||!d||rL.current||o.type===!1||lV.skipAnimations)return qL(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const m=YL(e,t,p);if(m)return m}return ld(p)};function cd(t){return!!(Dn(t)&&t.add)}const G3=t=>/^\-?\d*\.?\d+$/.test(t);function dv(t,e){t.indexOf(e)===-1&&t.push(e)}function pv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class mv{constructor(){this.subscriptions=[]}add(e){return dv(this.subscriptions,e),()=>pv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const cV=t=>!isNaN(parseFloat(t));class hV{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=rn;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,qe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>qe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=cV(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new mv);const r=this.events[e].add(n);return e==="change"?()=>{r(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?U3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function za(t,e){return new hV(t,e)}const X3=t=>e=>e.test(t),fV={test:t=>t==="auto",parse:t=>t},K3=[Ds,ae,Hr,ki,vM,yM,fV],Du=t=>K3.find(X3(t)),dV=[...K3,mn,vo],pV=t=>dV.find(X3(t));function mV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,za(n))}function gV(t,e){const n=fp(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){const a=xM(o[s]);mV(t,s,a)}}function yV(t,e,n){var r,i;const o=Object.keys(e).filter(a=>!t.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const u=o[a],l=e[u];let c=null;Array.isArray(l)&&(c=l[0]),c===null&&(c=(i=(r=n[u])!==null&&r!==void 0?r:t.readValue(u))!==null&&i!==void 0?i:e[u]),c!=null&&(typeof c=="string"&&(G3(c)||$3(c))?c=parseFloat(c):!pV(c)&&vo.test(l)&&(c=W3(u,l)),t.addValue(u,za(c,{owner:t})),n[u]===void 0&&(n[u]=c),c!==null&&t.setBaseTarget(u,c))}}function vV(t,e){return e?(e[t]||e.default||e).from:void 0}function _V(t,e,n){const r={};for(const i in t){const o=vV(i,e);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function wV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function EV(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function Y3(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:s,...a}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");r&&(o=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const d=t.getValue(h),p=a[h];if(!d||p===void 0||c&&wV(c,h))continue;const m={delay:n,elapsed:0,...hv(o||{},h)};if(window.HandoffAppearAnimations){const _=t.getProps()[qS];if(_){const v=window.HandoffAppearAnimations(_,h,d,qe);v!==null&&(m.elapsed=v,m.isHandoff=!0)}}let y=!m.isHandoff&&!EV(d,p);if(m.type==="spring"&&(d.getVelocity()||m.velocity)&&(y=!1),d.animation&&(y=!1),y)continue;d.start(fv(h,d,p,t.shouldReduceMotion&&Ns.has(h)?{type:!1}:m));const w=d.animation;cd(u)&&(u.add(h),w.then(()=>u.remove(h))),l.push(w)}return s&&Promise.all(l).then(()=>{s&&gV(t,s)}),l}function wg(t,e,n={}){const r=fp(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Y3(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:c,staggerDirection:h}=i;return AV(t,e,l+u,c,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,l]=a==="beforeChildren"?[o,s]:[s,o];return u().then(()=>l())}else return Promise.all([o(),s(n.delay)])}function AV(t,e,n=0,r=0,i=1,o){const s=[],a=(t.variantChildren.size-1)*r,u=i===1?(l=0)=>l*r:(l=0)=>a-l*r;return Array.from(t.variantChildren).sort(CV).forEach((l,c)=>{l.notify("AnimationStart",e),s.push(wg(l,e,{...o,delay:n+u(c)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(s)}function CV(t,e){return t.sortNodePosition(e)}function IV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>wg(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=wg(t,e,n);else{const i=typeof e=="function"?fp(t,e,n.custom):e;r=Promise.all(Y3(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const TV=[...Qy].reverse(),SV=Qy.length;function bV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>IV(t,n,r)))}function RV(t){let e=bV(t);const n=OV();let r=!0;const i=(u,l)=>{const c=fp(t,l);if(c){const{transition:h,transitionEnd:d,...p}=c;u={...u,...p,...d}}return u};function o(u){e=u(t)}function s(u,l){const c=t.getProps(),h=t.getVariantContext(!0)||{},d=[],p=new Set;let m={},y=1/0;for(let _=0;_<SV;_++){const v=TV[_],A=n[v],S=c[v]!==void 0?c[v]:h[v],x=Xl(S),M=v===l?A.isActive:null;M===!1&&(y=_);let T=S===h[v]&&S!==c[v]&&x;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),A.protectedKeys={...m},!A.isActive&&M===null||!S&&!A.prevProp||up(S)||typeof S=="boolean")continue;let R=PV(A.prevProp,S)||v===l&&A.isActive&&!T&&x||_>y&&x,O=!1;const k=Array.isArray(S)?S:[S];let L=k.reduce(i,{});M===!1&&(L={});const{prevResolvedValues:D={}}=A,ne={...D,...L},ge=de=>{R=!0,p.has(de)&&(O=!0,p.delete(de)),A.needsAnimating[de]=!0};for(const de in ne){const Fe=L[de],G=D[de];if(m.hasOwnProperty(de))continue;let Z=!1;sd(Fe)&&sd(G)?Z=!v3(Fe,G):Z=Fe!==G,Z?Fe!==void 0?ge(de):p.add(de):Fe!==void 0&&p.has(de)?ge(de):A.protectedKeys[de]=!0}A.prevProp=S,A.prevResolvedValues=L,A.isActive&&(m={...m,...L}),r&&t.blockInitialAnimation&&(R=!1),R&&(!T||O)&&d.push(...k.map(de=>({animation:de,options:{type:v,...u}})))}if(p.size){const _={};p.forEach(v=>{const A=t.getBaseTarget(v);A!==void 0&&(_[v]=A)}),d.push({animation:_})}let w=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(d):Promise.resolve()}function a(u,l,c){var h;if(n[u].isActive===l)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(u,l)}),n[u].isActive=l;const d=s(c,u);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function PV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!v3(e,t):!1}function zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OV(){return{animate:zo(!0),whileInView:zo(),whileHover:zo(),whileTap:zo(),whileDrag:zo(),whileFocus:zo(),exit:zo()}}class NV extends bo{constructor(e){super(e),e.animationState||(e.animationState=RV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),up(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let DV=0;class xV extends bo{constructor(){super(...arguments),this.id=DV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const kV={animation:{Feature:NV},exit:{Feature:xV}},wE=(t,e)=>Math.abs(t-e);function MV(t,e){const n=wE(t.x,e.x),r=wE(t.y,e.y);return Math.sqrt(n**2+r**2)}class q3{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=D1(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,p=MV(h.offset,{x:0,y:0})>=3;if(!d&&!p)return;const{point:m}=h,{timestamp:y}=rn;this.history.push({...m,timestamp:y});const{onStart:w,onMove:_}=this.handlers;d||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=N1(d,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=D1(h.type==="pointercancel"?this.lastMoveEventInfo:N1(d,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),m&&m(h,w)},!d3(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=hp(e),a=N1(s,this.transformPagePoint),{point:u}=a,{timestamp:l}=rn;this.history=[{...u,timestamp:l}];const{onSessionStart:c}=n;c&&c(e,D1(a,this.history)),this.removeListeners=ao(hi(this.contextWindow,"pointermove",this.handlePointerMove),hi(this.contextWindow,"pointerup",this.handlePointerUp),hi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ai(this.updatePoint)}}function N1(t,e){return e?{point:e(t.point)}:t}function EE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function D1({point:t},e){return{point:t,delta:EE(t,Q3(e)),offset:EE(t,LV(e)),velocity:VV(e,.1)}}function LV(t){return t[0]}function Q3(t){return t[t.length-1]}function VV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Q3(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>cs(e)));)n--;if(!r)return{x:0,y:0};const o=fi(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function zn(t){return t.max-t.min}function Eg(t,e=0,n=.01){return Math.abs(t-e)<=n}function AE(t,e,n,r=.5){t.origin=r,t.originPoint=it(e.min,e.max,t.origin),t.scale=zn(n)/zn(e),(Eg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(Eg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ml(t,e,n,r){AE(t.x,e.x,n.x,r?r.originX:void 0),AE(t.y,e.y,n.y,r?r.originY:void 0)}function CE(t,e,n){t.min=n.min+e.min,t.max=t.min+zn(e)}function BV(t,e,n){CE(t.x,e.x,n.x),CE(t.y,e.y,n.y)}function IE(t,e,n){t.min=e.min-n.min,t.max=t.min+zn(e)}function gl(t,e,n){IE(t.x,e.x,n.x),IE(t.y,e.y,n.y)}function FV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?it(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?it(n,t,r.max):Math.min(t,n)),t}function TE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jV(t,{top:e,left:n,bottom:r,right:i}){return{x:TE(t.x,n,i),y:TE(t.y,e,r)}}function SE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function UV(t,e){return{x:SE(t.x,e.x),y:SE(t.y,e.y)}}function HV(t,e){let n=.5;const r=zn(t),i=zn(e);return i>r?n=Yl(e.min,e.max-r,t.min):r>i&&(n=Yl(t.min,t.max-i,e.min)),yo(0,1,n)}function zV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ag=.35;function WV(t=Ag){return t===!1?t=0:t===!0&&(t=Ag),{x:bE(t,"left","right"),y:bE(t,"top","bottom")}}function bE(t,e,n){return{min:RE(t,e),max:RE(t,n)}}function RE(t,e){return typeof t=="number"?t:t[e]||0}const PE=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:PE(),y:PE()}),OE=()=>({min:0,max:0}),yt=()=>({x:OE(),y:OE()});function Qn(t){return[t("x"),t("y")]}function Z3({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $V({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function GV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function x1(t){return t===void 0||t===1}function Cg({scale:t,scaleX:e,scaleY:n}){return!x1(t)||!x1(e)||!x1(n)}function Qo(t){return Cg(t)||J3(t)||t.z||t.rotate||t.rotateX||t.rotateY}function J3(t){return NE(t.x)||NE(t.y)}function NE(t){return t&&t!=="0%"}function hd(t,e,n){const r=t-n,i=e*r;return n+i}function DE(t,e,n,r,i){return i!==void 0&&(t=hd(t,i,r)),hd(t,n,r)+e}function Ig(t,e=0,n=1,r,i){t.min=DE(t.min,e,n,r,i),t.max=DE(t.max,e,n,r,i)}function e6(t,{x:e,y:n}){Ig(t.x,e.translate,e.scale,e.originPoint),Ig(t.y,n.translate,n.scale,n.originPoint)}function XV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const u=o.instance;u&&u.style&&u.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&fa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,e6(t,s)),r&&Qo(o.latestValues)&&fa(t,o.latestValues))}e.x=xE(e.x),e.y=xE(e.y)}function xE(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Vi(t,e){t.min=t.min+e,t.max=t.max+e}function kE(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,s=it(t.min,t.max,o);Ig(t,e[n],e[r],s,e.scale)}const KV=["x","scaleX","originX"],YV=["y","scaleY","originY"];function fa(t,e){kE(t.x,e,KV),kE(t.y,e,YV)}function t6(t,e){return Z3(GV(t.getBoundingClientRect(),e))}function qV(t,e,n){const r=t6(t,n),{scroll:i}=e;return i&&(Vi(r.x,i.offset.x),Vi(r.y,i.offset.y)),r}const n6=({current:t})=>t?t.ownerDocument.defaultView:null,QV=new WeakMap;class ZV{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hp(c,"page").point)},o=(c,h)=>{const{drag:d,dragPropagation:p,onDragStart:m}=this.getProps();if(d&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=m3(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(w=>{let _=this.getAxisMotionValue(w).get()||0;if(Hr.test(_)){const{projection:v}=this.visualElement;if(v&&v.layout){const A=v.layout.layoutBox[w];A&&(_=zn(A)*(parseFloat(_)/100))}}this.originPoint[w]=_}),m&&qe.update(()=>m(c,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},s=(c,h)=>{const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:m,onDrag:y}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:w}=h;if(p&&this.currentDirection===null){this.currentDirection=JV(w),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),y&&y(c,h)},a=(c,h)=>this.stop(c,h),u=()=>Qn(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new q3(e,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:n6(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&qe.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Rh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=FV(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&la(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=jV(i.layoutBox,n):this.constraints=!1,this.elastic=WV(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qn(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=zV(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!la(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=qV(r,i.root,this.visualElement.getTransformPagePoint());let s=UV(i.layout.layoutBox,o);if(n){const a=n($V(s));this.hasMutatedConstraints=!!a,a&&(s=Z3(a))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},l=Qn(c=>{if(!Rh(c,n,this.currentDirection))return;let h=u&&u[c]||{};s&&(h={min:0,max:0});const d=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(l).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(fv(e,r,0,n))}stopAnimation(){Qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qn(n=>{const{drag:r}=this.getProps();if(!Rh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(e[n]-it(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!la(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Qn(s=>{const a=this.getAxisMotionValue(s);if(a){const u=a.get();i[s]=HV({min:u,max:u},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qn(s=>{if(!Rh(s,e,null))return;const a=this.getAxisMotionValue(s),{min:u,max:l}=this.constraints[s];a.set(it(u,l,i[s]))})}addListeners(){if(!this.visualElement.current)return;QV.set(this.visualElement,this);const e=this.visualElement.current,n=hi(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();la(u)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=ai(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Qn(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=u[c].translate,h.set(h.get()+u[c].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=Ag,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Rh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function JV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eB extends bo{constructor(e){super(e),this.removeGroupControls=pt,this.removeListeners=pt,this.controls=new ZV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ME=t=>(e,n)=>{t&&qe.update(()=>t(e,n))};class tB extends bo{constructor(){super(...arguments),this.removePointerDownListener=pt}onPointerDown(e){this.session=new q3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:n6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ME(e),onStart:ME(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&qe.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=hi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function nB(){const t=N.useContext(Yy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=N.useId();return N.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const uf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=LE(t,e.target.x),r=LE(t,e.target.y);return`${n}% ${r}%`}},rB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=vo.parse(t);if(i.length>5)return r;const o=vo.createTransformer(t),s=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+s]/=a,i[1+s]/=u;const l=it(a,u,.5);return typeof i[2+s]=="number"&&(i[2+s]/=l),typeof i[3+s]=="number"&&(i[3+s]/=l),o(i)}};class iB extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;cM(oB),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),uf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||qe.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function r6(t){const[e,n]=nB(),r=N.useContext(ZS);return Y.createElement(iB,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(JS),isPresent:e,safeToRemove:n})}const oB={borderRadius:{...xu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xu,borderTopRightRadius:xu,borderBottomLeftRadius:xu,borderBottomRightRadius:xu,boxShadow:rB},i6=["TopLeft","TopRight","BottomLeft","BottomRight"],sB=i6.length,VE=t=>typeof t=="string"?parseFloat(t):t,BE=t=>typeof t=="number"||ae.test(t);function aB(t,e,n,r,i,o){i?(t.opacity=it(0,n.opacity!==void 0?n.opacity:1,uB(r)),t.opacityExit=it(e.opacity!==void 0?e.opacity:1,0,lB(r))):o&&(t.opacity=it(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<sB;s++){const a=`border${i6[s]}Radius`;let u=FE(e,a),l=FE(n,a);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||BE(u)===BE(l)?(t[a]=Math.max(it(VE(u),VE(l),r),0),(Hr.test(l)||Hr.test(u))&&(t[a]+="%")):t[a]=l}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,r))}function FE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const uB=o6(0,.5,b3),lB=o6(.5,.95,pt);function o6(t,e,n){return r=>r<t?0:r>e?1:n(Yl(t,e,r))}function jE(t,e){t.min=e.min,t.max=e.max}function Xn(t,e){jE(t.x,e.x),jE(t.y,e.y)}function UE(t,e,n,r,i){return t-=e,t=hd(t,1/n,r),i!==void 0&&(t=hd(t,1/i,r)),t}function cB(t,e=0,n=1,r=.5,i,o=t,s=t){if(Hr.test(e)&&(e=parseFloat(e),e=it(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=it(o.min,o.max,r);t===o&&(a-=e),t.min=UE(t.min,e,n,a,i),t.max=UE(t.max,e,n,a,i)}function HE(t,e,[n,r,i],o,s){cB(t,e[n],e[r],e[i],e.scale,o,s)}const hB=["x","scaleX","originX"],fB=["y","scaleY","originY"];function zE(t,e,n,r){HE(t.x,e,hB,n?n.x:void 0,r?r.x:void 0),HE(t.y,e,fB,n?n.y:void 0,r?r.y:void 0)}function WE(t){return t.translate===0&&t.scale===1}function s6(t){return WE(t.x)&&WE(t.y)}function dB(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function a6(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function $E(t){return zn(t.x)/zn(t.y)}class pB{constructor(){this.members=[]}add(e){dv(this.members,e),e.scheduleRender()}remove(e){if(pv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GE(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:u,rotateX:l,rotateY:c}=n;u&&(r+=`rotate(${u}deg) `),l&&(r+=`rotateX(${l}deg) `),c&&(r+=`rotateY(${c}deg) `)}const s=t.x.scale*e.x,a=t.y.scale*e.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const mB=(t,e)=>t.depth-e.depth;class gB{constructor(){this.children=[],this.isDirty=!1}add(e){dv(this.children,e),this.isDirty=!0}remove(e){pv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mB),this.isDirty=!1,this.children.forEach(e)}}function yB(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Ai(r),t(o-e))};return qe.read(r,!0),()=>Ai(r)}function vB(t){window.MotionDebug&&window.MotionDebug.record(t)}function _B(t){return t instanceof SVGElement&&t.tagName!=="svg"}function wB(t,e,n){const r=Dn(t)?t:za(t);return r.start(fv("",r,e,n)),r.animation}const XE=["","X","Y","Z"],EB={visibility:"hidden"},KE=1e3;let AB=0;const Zo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function u6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e==null?void 0:e()){this.id=AB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zo.totalNodes=Zo.resolvedTargetDeltas=Zo.recalculatedProjection=0,this.nodes.forEach(TB),this.nodes.forEach(OB),this.nodes.forEach(NB),this.nodes.forEach(SB),vB(Zo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new gB)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new mv),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const u=this.eventHandlers.get(s);u&&u.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_B(s),this.instance=s;const{layoutId:u,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||u)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=yB(d,250),uf.hasAnimatedSinceResize&&(uf.hasAnimatedSinceResize=!1,this.nodes.forEach(qE))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||LB,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=c.getProps(),v=!this.targetLayout||!a6(this.targetLayout,m)||p,A=!d&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,A);const S={...hv(y,"layout"),onPlay:w,onComplete:_};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else d||qE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ai(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DB),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YE);return}this.isUpdating||this.nodes.forEach(RB),this.isUpdating=!1,this.nodes.forEach(PB),this.nodes.forEach(CB),this.nodes.forEach(IB),this.clearAllSnapshots();const a=performance.now();rn.delta=yo(0,1e3/60,a-rn.timestamp),rn.timestamp=a,rn.isProcessing=!0,C1.update.process(rn),C1.preRender.process(rn),C1.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(bB),this.sharedNodes.forEach(xB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!s6(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;s&&(a||Qo(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return s&&(u=this.removeTransform(u)),VB(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return yt();const a=s.measureViewportBox(),{scroll:u}=this.root;return u&&(Vi(a.x,u.offset.x),Vi(a.y,u.offset.y)),a}removeElementScroll(s){const a=yt();Xn(a,s);for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:c,options:h}=l;if(l!==this.root&&c&&h.layoutScroll){if(c.isRoot){Xn(a,s);const{scroll:d}=this.root;d&&(Vi(a.x,-d.offset.x),Vi(a.y,-d.offset.y))}Vi(a.x,c.offset.x),Vi(a.y,c.offset.y)}}return a}applyTransform(s,a=!1){const u=yt();Xn(u,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&fa(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Qo(c.latestValues)&&fa(u,c.latestValues)}return Qo(this.latestValues)&&fa(u,this.latestValues),u}removeTransform(s){const a=yt();Xn(a,s);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Qo(l.latestValues))continue;Cg(l.latestValues)&&l.updateSnapshot();const c=yt(),h=l.measurePageBox();Xn(c,h),zE(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Qo(this.latestValues)&&zE(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=rn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),gl(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),BV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xn(this.target,this.layout.layoutBox),e6(this.target,this.targetDelta)):Xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),gl(this.relativeTargetOrigin,this.target,p.target),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Cg(this.parent.latestValues)||J3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Xn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;XV(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:m}=a;if(!m){this.projectionTransform&&(this.projectionDelta=ha(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha());const y=this.projectionTransform;ml(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=GE(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==d||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),Zo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},h=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=yt(),p=u?u.source:void 0,m=this.layout?this.layout.source:void 0,y=p!==m,w=this.getStack(),_=!w||w.members.length<=1,v=!!(y&&!_&&this.options.crossfade===!0&&!this.path.some(MB));this.animationProgress=0;let A;this.mixTargetDelta=S=>{const x=S/1e3;QE(h.x,s.x,x),QE(h.y,s.y,x),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gl(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kB(this.relativeTarget,this.relativeTargetOrigin,d,x),A&&dB(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=yt()),Xn(A,this.relativeTarget)),y&&(this.animationValues=c,aB(c,l,this.latestValues,x,v,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ai(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{uf.hasAnimatedSinceResize=!0,this.currentAnimation=wB(0,KE,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:u,layout:l,latestValues:c}=s;if(!(!a||!u||!l)){if(this!==s&&this.layout&&l&&l6(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||yt();const h=zn(this.layout.layoutBox.x);u.x.min=s.target.x.min,u.x.max=u.x.min+h;const d=zn(this.layout.layoutBox.y);u.y.min=s.target.y.min,u.y.max=u.y.min+d}Xn(a,u),fa(a,c),ml(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new pB),this.sharedNodes.get(s).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:u}=s;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const l={};for(let c=0;c<XE.length;c++){const h="rotate"+XE[c];u[h]&&(l[h]=u[h],s.setStaticValue(h,0))}s.render();for(const c in l)s.setStaticValue(c,l[c]);s.scheduleRender()}getProjectionStyles(s){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return EB;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=af(s==null?void 0:s.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=af(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Qo(this.latestValues)&&(y.transform=c?c({},""):"none",this.hasProjected=!1),y}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),l.transform=GE(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:p,y:m}=this.projectionDelta;l.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,h.animationValues?l.opacity=h===this?(u=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in id){if(d[y]===void 0)continue;const{correct:w,applyTo:_}=id[y],v=l.transform==="none"?d[y]:w(d[y],h);if(_){const A=_.length;for(let S=0;S<A;S++)l[_[S]]=v}else l[y]=v}return this.options.layoutId&&(l.pointerEvents=h===this?af(s==null?void 0:s.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(YE),this.root.sharedNodes.clear()}}}function CB(t){t.updateLayout()}function IB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?Qn(h=>{const d=s?n.measuredBox[h]:n.layoutBox[h],p=zn(d);d.min=r[h].min,d.max=d.min+p}):l6(o,n.layoutBox,r)&&Qn(h=>{const d=s?n.measuredBox[h]:n.layoutBox[h],p=zn(r[h]);d.max=d.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=ha();ml(a,r,n.layoutBox);const u=ha();s?ml(u,t.applyTransform(i,!0),n.measuredBox):ml(u,r,n.layoutBox);const l=!s6(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:p}=h;if(d&&p){const m=yt();gl(m,n.layoutBox,d.layoutBox);const y=yt();gl(y,r,p.layoutBox),a6(m,y)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TB(t){Zo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bB(t){t.clearSnapshot()}function YE(t){t.clearMeasurements()}function RB(t){t.isLayoutDirty=!1}function PB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function qE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function OB(t){t.resolveTargetDelta()}function NB(t){t.calcProjection()}function DB(t){t.resetRotation()}function xB(t){t.removeLeadSnapshot()}function QE(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ZE(t,e,n,r){t.min=it(e.min,n.min,r),t.max=it(e.max,n.max,r)}function kB(t,e,n,r){ZE(t.x,e.x,n.x,r),ZE(t.y,e.y,n.y,r)}function MB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LB={duration:.45,ease:[.4,0,.1,1]},JE=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),eA=JE("applewebkit/")&&!JE("chrome/")?Math.round:pt;function tA(t){t.min=eA(t.min),t.max=eA(t.max)}function VB(t){tA(t.x),tA(t.y)}function l6(t,e,n){return t==="position"||t==="preserve-aspect"&&!Eg($E(e),$E(n),.2)}const BB=u6({attachResizeListener:(t,e)=>ai(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),k1={current:void 0},c6=u6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!k1.current){const t=new BB({});t.mount(window),t.setOptions({layoutScroll:!0}),k1.current=t}return k1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FB={pan:{Feature:tB},drag:{Feature:eB,ProjectionNode:c6,MeasureLayout:r6}},jB=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function UB(t){const e=jB.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Tg(t,e,n=1){const[r,i]=UB(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return G3(s)?parseFloat(s):s}else return pg(i)?Tg(i,e,n+1):i}function HB(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const o=i.get();if(!pg(o))return;const s=Tg(o,r);s&&i.set(s)});for(const i in e){const o=e[i];if(!pg(o))continue;const s=Tg(o,r);s&&(e[i]=s,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:e,transitionEnd:n}}const zB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),h6=t=>zB.has(t),WB=t=>Object.keys(t).some(h6),nA=t=>t===Ds||t===ae,rA=(t,e)=>parseFloat(t.split(", ")[e]),iA=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return rA(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?rA(o[1],t):0}},$B=new Set(["x","y","z"]),GB=Cc.filter(t=>!$B.has(t));function XB(t){const e=[];return GB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Wa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:iA(4,13),y:iA(5,14)};Wa.translateX=Wa.x;Wa.translateY=Wa.y;const KB=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(l=>{a[l]=Wa[l](r,o)}),e.render();const u=e.measureViewportBox();return n.forEach(l=>{const c=e.getValue(l);c&&c.jump(a[l]),t[l]=Wa[l](u,o)}),t},YB=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(h6);let o=[],s=!1;const a=[];if(i.forEach(u=>{const l=t.getValue(u);if(!t.hasValue(u))return;let c=n[u],h=Du(c);const d=e[u];let p;if(sd(d)){const m=d.length,y=d[0]===null?1:0;c=d[y],h=Du(c);for(let w=y;w<m&&d[w]!==null;w++)p?sv(Du(d[w])===p):p=Du(d[w])}else p=Du(d);if(h!==p)if(nA(h)&&nA(p)){const m=l.get();typeof m=="string"&&l.set(parseFloat(m)),typeof d=="string"?e[u]=parseFloat(d):Array.isArray(d)&&p===ae&&(e[u]=d.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(c===0||d===0)?c===0?l.set(p.transform(c)):e[u]=h.transform(d):(s||(o=XB(t),s=!0),a.push(u),r[u]=r[u]!==void 0?r[u]:e[u],l.jump(d))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,l=KB(e,t,a);return o.length&&o.forEach(([c,h])=>{t.getValue(c).set(h)}),t.render(),ap&&u!==null&&window.scrollTo({top:u}),{target:l,transitionEnd:r}}else return{target:e,transitionEnd:r}};function qB(t,e,n,r){return WB(e)?YB(t,e,n,r):{target:e,transitionEnd:r}}const QB=(t,e,n,r)=>{const i=HB(t,e,r);return e=i.target,r=i.transitionEnd,qB(t,e,n,r)},Sg={current:null},f6={current:!1};function ZB(){if(f6.current=!0,!!ap)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Sg.current=t.matches;t.addListener(e),e()}else Sg.current=!1}function JB(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],s=n[i];if(Dn(o))t.addValue(i,o),cd(r)&&r.add(i);else if(Dn(s))t.addValue(i,za(o,{owner:t})),cd(r)&&r.remove(i);else if(s!==o)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=t.getStaticValue(i);t.addValue(i,za(a!==void 0?a:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const oA=new WeakMap,d6=Object.keys(Kl),eF=d6.length,sA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tF=Zy.length;class nF{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qe.render(this.render,!1,!0);const{latestValues:a,renderState:u}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=lp(n),this.isVariantNode=QS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(n,{});for(const h in c){const d=c[h];a[h]!==void 0&&Dn(d)&&(d.set(a[h],!1),cd(l)&&l.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,oA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),f6.current||ZB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oA.delete(this.current),this.projection&&this.projection.unmount(),Ai(this.notifyUpdate),Ai(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ns.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&qe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,o){let s,a;for(let u=0;u<eF;u++){const l=d6[u],{isEnabled:c,Feature:h,ProjectionNode:d,MeasureLayout:p}=Kl[l];d&&(s=d),c(n)&&(!this.features[l]&&h&&(this.features[l]=new h(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:p}=n;this.projection.setOptions({layoutId:u,layout:l,alwaysMeasureLayout:!!c||h&&la(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:o,layoutScroll:d,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<sA.length;r++){const i=sA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=JB(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<tF;r++){const i=Zy[r],o=this.props[i];(Xl(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=za(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=ov(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Dn(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new mv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class p6 extends nF{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},o){let s=_V(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),s&&(s=i(s))),o){yV(this,r,s);const a=QB(this,r,s,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function rF(t){return window.getComputedStyle(t)}class iF extends p6{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ns.has(n)){const r=cv(n);return r&&r.default||0}else{const r=rF(e),i=(n3(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return t6(e,n)}build(e,n,r,i){ev(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return iv(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){u3(e,n,r,i)}}class oF extends p6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ns.has(n)){const r=cv(n);return r&&r.default||0}return n=l3.has(n)?n:qy(n),e.getAttribute(n)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,n){return h3(e,n)}build(e,n,r,i){nv(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){c3(e,n,r,i)}mount(e){this.isSVGTag=rv(e.tagName),super.mount(e)}}const sF=(t,e)=>Jy(t)?new oF(e,{enableHardwareAcceleration:!1}):new iF(e,{enableHardwareAcceleration:!0}),aF={layout:{ProjectionNode:c6,MeasureLayout:r6}},uF={...kV,...eL,...FB,...aF},aA=uM((t,e)=>UM(t,e,uF,sF));function m6(){const[t,e]=N.useState(!1);return N.useEffect(()=>{const n=()=>e(window.scrollY>10);return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),C.jsxs("header",{className:`navbar bg-base-200 justify-between px-4 fixed top-0 left-0 right-0 z-50 transition-shadow ${t?"shadow-lg":""}`,children:[C.jsx(Nr,{to:"/",className:"btn btn-ghost text-xl",children:"Barber Shop BEXS"}),C.jsxs("nav",{className:"space-x-2",children:[C.jsx(Nr,{to:"/servicios",className:"btn btn-ghost btn-sm",children:"Servicios"}),C.jsx(Nr,{to:"/barberos",className:"btn btn-ghost btn-sm",children:"Barberos"}),C.jsx(Nr,{to:"/agendar",className:"btn btn-primary btn-sm",children:"Agendar"}),C.jsx("a",{href:"#/login",className:"btn btn-ghost btn-sm",children:"Iniciar sesión"})]})]})}function lF(){const[t,e]=N.useState([]),[n,r]=N.useState([]);return N.useEffect(()=>{const i=Ze(xe(me,"servicios"),s=>{e(s.docs.map(a=>({id:a.id,...a.data()})))}),o=Ze(xe(me,"barberos"),s=>{r(s.docs.map(a=>({id:a.id,...a.data()})))});return()=>{i(),o()}},[]),C.jsxs("div",{children:[C.jsx(m6,{}),C.jsxs("div",{className:"pt-16",children:[C.jsxs("section",{className:"relative hero min-h-[60vh] overflow-hidden",children:[C.jsx("img",{src:"https://images.pexels.com/photos/1813272/pexels-photo-1813272.jpeg",alt:"Barbería",className:"absolute inset-0 w-full h-full object-cover opacity-40"}),C.jsx("div",{className:"absolute inset-0 bg-black/60"}),C.jsx("div",{className:"relative hero-content text-center text-neutral-content",children:C.jsxs(aA.div,{className:"max-w-md",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[C.jsx("h1",{className:"mb-4 text-5xl font-bold",children:"Barber Shop BEXS"}),C.jsx("p",{className:"mb-4",children:"Los mejores estilos y cortes profesionales para ti."}),C.jsx(aA.a,{href:"#/agendar",className:"btn btn-primary",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Agendar Turno"})]})})]}),C.jsxs("section",{id:"servicios",className:"py-16 px-6 max-w-6xl mx-auto space-y-6",children:[C.jsx("h2",{className:"text-3xl font-bold text-center",children:"Nuestros Servicios"}),C.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.slice(0,4).map(i=>C.jsx("div",{className:"card bg-base-200 rounded-lg shadow transition-transform duration-300 hover:scale-105 hover:shadow-lg",children:C.jsxs("div",{className:"card-body flex-row items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"card-title",children:i.nombre}),i.precio&&C.jsxs("p",{className:"text-lg",children:["$",i.precio]})]}),C.jsx("img",{className:"w-32 h-32",src:i.imagen||"https://cdn-icons-png.flaticon.com/512/7338/7338646.png",alt:i.nombre})]})},i.id))}),C.jsx("div",{className:"text-center",children:C.jsx(Nr,{to:"/servicios",className:"btn btn-primary",children:"Ver todos"})})]}),C.jsxs("section",{className:"bg-gray-100 py-16 px-6 space-y-6",children:[C.jsx("h2",{className:"text-3xl font-bold text-center",children:"Conoce a Nuestros Barberos"}),C.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-6 justify-center",children:n.slice(0,3).map(i=>C.jsx(Nr,{to:`/barberos/${i.id}`,className:"card bg-base-200 rounded-lg shadow transition-transform duration-300 hover:scale-105 hover:shadow-lg",children:C.jsxs("div",{className:"card-body items-center text-center",children:[C.jsx("div",{className:"avatar",children:C.jsx("div",{className:"w-24 rounded-full",children:C.jsx("img",{src:i.imagen})})}),C.jsx("h3",{className:"card-title",children:i.nombre})]})},i.id))}),C.jsx("div",{className:"text-center",children:C.jsx(Nr,{to:"/barberos",className:"btn btn-primary",children:"Ver todos"})})]})]})]})}function cF(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,o]=N.useState(""),[s,a]=N.useState(""),u=async()=>{!t||!n||(await op(xe(me,"servicios"),{nombre:t,precio:parseFloat(n),descripcion:i,imagen:s,timestamp:new Date}),e(""),r(""),o(""),a(""))};return C.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[C.jsx("input",{className:"border p-2 rounded",value:t,onChange:l=>e(l.target.value),placeholder:"Nombre del servicio"}),C.jsx("input",{className:"border p-2 rounded",type:"number",value:n,onChange:l=>r(l.target.value),placeholder:"Precio"}),C.jsx("textarea",{className:"border p-2 rounded",value:i,onChange:l=>o(l.target.value),placeholder:"Descripción"}),C.jsx("input",{className:"border p-2 rounded",value:s,onChange:l=>a(l.target.value),placeholder:"URL de la imagen"}),C.jsx("button",{onClick:u,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Guardar servicio"})]})}function hF(){const[t,e]=N.useState([]),[n,r]=N.useState(null),[i,o]=N.useState({nombre:"",precio:"",descripcion:"",imagen:"",categoria:""});N.useEffect(()=>{const h=Ze(xe(me,"servicios"),d=>{e(d.docs.map(p=>({id:p.id,...p.data()})))});return()=>h()},[]);const s=h=>{r(h),o({nombre:h.nombre||"",precio:h.precio||"",descripcion:h.descripcion||"",imagen:h.imagen||"",categoria:h.categoria||""})},a=()=>r(null),u=async()=>{!i.nombre||!i.precio||(await Ec(Cr(me,"servicios",n.id),{nombre:i.nombre,precio:parseFloat(i.precio),descripcion:i.descripcion,imagen:i.imagen,categoria:i.categoria}),a())},l=async h=>{await Ac(Cr(me,"servicios",h))},c=h=>{switch(h){case"Corte":return"badge-primary";case"Afeitado":return"badge-secondary";case"Color":return"badge-accent";default:return"badge-ghost"}};return C.jsxs("div",{className:"overflow-x-auto",children:[C.jsxs("table",{className:"table table-zebra",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{children:"Servicio"}),C.jsx("th",{children:"Categoría"}),C.jsx("th",{className:"text-right",children:"$"}),C.jsx("th",{})]})}),C.jsx("tbody",{children:t.map(h=>C.jsxs("tr",{children:[C.jsx("td",{children:h.nombre}),C.jsx("td",{children:h.categoria?C.jsx("span",{className:`badge ${c(h.categoria)}`,children:h.categoria}):"-"}),C.jsx("td",{className:"text-right",children:h.precio?`$${h.precio}`:"-"}),C.jsxs("td",{className:"space-x-2",children:[C.jsx("button",{onClick:()=>s(h),className:"btn btn-xs btn-outline",children:"Editar"}),C.jsx("button",{onClick:()=>l(h.id),className:"btn btn-xs btn-ghost text-red-600",children:"Eliminar"})]})]},h.id))})]}),n&&C.jsx("div",{className:"modal modal-open",children:C.jsxs("div",{className:"modal-box space-y-2",children:[C.jsx("h3",{className:"font-bold text-lg mb-2",children:"Editar servicio"}),C.jsx("input",{className:"input input-bordered w-full",value:i.nombre,onChange:h=>o({...i,nombre:h.target.value}),placeholder:"Nombre"}),C.jsx("input",{className:"input input-bordered w-full",type:"number",value:i.precio,onChange:h=>o({...i,precio:h.target.value}),placeholder:"Precio"}),C.jsx("input",{className:"input input-bordered w-full",value:i.categoria,onChange:h=>o({...i,categoria:h.target.value}),placeholder:"Categoría"}),C.jsx("textarea",{className:"textarea textarea-bordered w-full",value:i.descripcion,onChange:h=>o({...i,descripcion:h.target.value}),placeholder:"Descripción"}),C.jsx("input",{className:"input input-bordered w-full",value:i.imagen,onChange:h=>o({...i,imagen:h.target.value}),placeholder:"URL de la imagen"}),C.jsxs("div",{className:"modal-action",children:[C.jsx("button",{onClick:u,className:"btn btn-primary btn-sm",children:"Guardar"}),C.jsx("button",{onClick:a,className:"btn btn-sm",children:"Cancelar"})]})]})})]})}function g6({sections:t=[],current:e="",onSelect:n}){const[r,i]=N.useState(t.map(()=>!0)),o=s=>{i(a=>a.map((u,l)=>l===s?!u:u))};return C.jsx("aside",{className:"w-64 bg-base-200 min-h-screen p-4 space-y-4",children:t.map((s,a)=>C.jsxs("div",{className:"border border-base-300 rounded",children:[C.jsxs("button",{className:"w-full px-4 py-2 flex justify-between items-center font-semibold",onClick:()=>o(a),children:[C.jsx("span",{children:s.label}),C.jsx("span",{children:r[a]?"-":"+"})]}),r[a]&&C.jsx("ul",{className:"menu px-2 py-2",children:s.items.map(u=>C.jsx("li",{children:u.href?C.jsxs("a",{href:u.href,className:"flex items-center gap-2",children:[C.jsx(u.icon,{}),u.label]}):C.jsxs("a",{onClick:()=>n(u.id),className:`flex items-center gap-2 ${e===u.id?"active":""}`,children:[C.jsx(u.icon,{}),u.label]})},u.id))})]},s.label))})}function y6(){const[t,e]=N.useState("");N.useEffect(()=>Fd(go,async i=>{if(i){const o=vn(xe(me,"barberos"),kt("email","==",i.email)),s=await US(o);s.empty?e(i.email):e(s.docs[0].data().nombre)}}),[]);const n=async()=>{await s9(go),window.location.hash="/"};return C.jsxs("div",{className:"dropdown dropdown-end",children:[C.jsxs("div",{tabIndex:0,role:"button",className:"btn btn-ghost flex items-center gap-2",children:[C.jsx("div",{className:"avatar placeholder",children:C.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-10",children:C.jsx("span",{className:"text-lg",children:t?t.charAt(0).toUpperCase():"?"})})}),C.jsx("span",{children:t})]}),C.jsxs("ul",{tabIndex:0,className:"mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52",children:[C.jsx("li",{className:"px-4 py-2 font-semibold",children:t}),C.jsx("li",{children:C.jsx("button",{onClick:n,children:"Cerrar sesión"})})]})]})}function gv({sections:t,current:e,onSelect:n,children:r}){return C.jsxs("div",{className:"flex",children:[C.jsx(g6,{sections:t,current:e,onSelect:n}),C.jsxs("div",{className:"p-4 space-y-6 flex-1",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("h2",{className:"text-2xl font-bold",children:"Panel de Administración"}),C.jsx(y6,{})]}),r]})]})}function v6(t){return C.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[C.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),C.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),C.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),C.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}function _6(t){return C.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[C.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),C.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),C.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),C.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"6"}),C.jsx("line",{x1:"3",y1:"12",x2:"3",y2:"12"}),C.jsx("line",{x1:"3",y1:"18",x2:"3",y2:"18"})]})}function uA(t){return C.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[C.jsx("path",{d:"M17 21v-2a4 4 0 0 0-3-3.87"}),C.jsx("path",{d:"M9 21v-2a4 4 0 0 1 3-3.87"}),C.jsx("path",{d:"M16 3.13a4 4 0 1 1-2.82 2.82"}),C.jsx("path",{d:"M6 3.13a4 4 0 1 0 2.82 2.82"})]})}function w6(t){return C.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[C.jsx("circle",{cx:"12",cy:"12",r:"10"}),C.jsx("polyline",{points:"12 6 12 12 16 14"})]})}function E6(t){return C.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",...t,children:[C.jsx("path",{d:"M16 4H9a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),C.jsx("rect",{x:"9",y:"2",width:"6",height:"4",rx:"1",ry:"1"})]})}const yv=[{label:"Turnos",items:[{id:"nuevo",label:"Nuevo turno",icon:v6},{id:"recientes",label:"Turnos recientes",icon:_6},{id:"porBarbero",label:"Turnos por barbero",icon:uA},{id:"horarios",label:"Horarios cargados",icon:w6}]},{label:"Gestionar",items:[{id:"servicios",label:"Servicios",href:"#/admin/servicios",icon:E6},{id:"barberos",label:"Barberos",href:"#/admin/barberos",icon:uA}]}];function fF(){const t=yv,e=n=>{n==="servicios"||n==="barberos"?window.location.hash=`/admin/${n}`:window.location.hash="/admin"};return C.jsxs(gv,{sections:t,current:"servicios",onSelect:e,children:[C.jsx("h2",{className:"text-xl font-semibold",children:"Gestionar Servicios"}),C.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Nuevo servicio"}),C.jsx(cF,{})]})}),C.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Servicios existentes"}),C.jsx(hF,{})]})})]})}function dF(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,o]=N.useState(""),[s,a]=N.useState(""),[u,l]=N.useState(""),c=async()=>{if(!t||!n||!i||!s)return;const h=Z0(GS,"aux"),d=AT(h);await n9(d,n,s),await op(xe(me,"barberos"),{nombre:t,email:n,telefono:i,imagen:u,timestamp:new Date}),e(""),r(""),o(""),a(""),l("")};return C.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[C.jsx("input",{className:"border p-2 rounded",value:t,onChange:h=>e(h.target.value),placeholder:"Nombre del barbero"}),C.jsx("input",{className:"border p-2 rounded",type:"email",value:n,onChange:h=>r(h.target.value),placeholder:"Correo electrónico"}),C.jsx("input",{className:"border p-2 rounded",value:i,onChange:h=>o(h.target.value),placeholder:"Teléfono"}),C.jsx("input",{className:"border p-2 rounded",value:u,onChange:h=>l(h.target.value),placeholder:"URL de la imagen"}),C.jsx("input",{className:"border p-2 rounded",type:"password",value:s,onChange:h=>a(h.target.value),placeholder:"Contraseña"}),C.jsx("button",{onClick:c,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Guardar barbero"})]})}function pF(){const[t,e]=N.useState([]),[n,r]=N.useState(null),[i,o]=N.useState(""),[s,a]=N.useState(""),[u,l]=N.useState(""),[c,h]=N.useState("");N.useEffect(()=>{const w=Ze(xe(me,"barberos"),_=>{e(_.docs.map(v=>({id:v.id,...v.data()})))});return()=>w()},[]);const d=async w=>{await Ac(Cr(me,"barberos",w))},p=w=>{r(w.id),o(w.nombre),a(w.email||""),l(w.telefono||""),h(w.imagen||"")},m=()=>{r(null),o(""),a(""),l(""),h("")},y=async()=>{!i||!s||!u||(await Ec(Cr(me,"barberos",n),{nombre:i,email:s,telefono:u,imagen:c}),m())};return C.jsx("div",{className:"grid gap-4",children:t.map(w=>C.jsx("div",{className:"card bg-base-100 shadow-md p-4",children:n===w.id?C.jsxs("div",{className:"space-y-2",children:[C.jsx("input",{className:"border p-1 rounded w-full",value:i,onChange:_=>o(_.target.value)}),C.jsx("input",{className:"border p-1 rounded w-full",type:"email",value:s,onChange:_=>a(_.target.value)}),C.jsx("input",{className:"border p-1 rounded w-full",value:u,onChange:_=>l(_.target.value)}),C.jsx("input",{className:"border p-1 rounded w-full",value:c,onChange:_=>h(_.target.value),placeholder:"URL de la imagen"}),C.jsxs("div",{className:"flex justify-end space-x-2",children:[C.jsx("button",{onClick:y,className:"btn btn-xs btn-primary",children:"Guardar"}),C.jsx("button",{onClick:m,className:"btn btn-xs",children:"Cancelar"})]})]}):C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"avatar placeholder",children:w.imagen?C.jsx("div",{className:"w-12 rounded-full",children:C.jsx("img",{src:w.imagen,alt:w.nombre})}):C.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-12 flex items-center justify-center",children:C.jsx("span",{className:"text-lg",children:w.nombre.charAt(0).toUpperCase()})})}),C.jsxs("div",{children:[C.jsx("p",{className:"font-semibold",children:w.nombre}),w.email&&C.jsx("p",{children:w.email}),w.telefono&&C.jsx("p",{children:w.telefono})]})]}),C.jsxs("div",{className:"space-x-2",children:[C.jsx("button",{onClick:()=>p(w),className:"btn btn-xs",children:"Editar"}),C.jsx("button",{onClick:()=>d(w.id),className:"btn btn-xs btn-error",children:"Eliminar"})]})]})},w.id))})}function mF(){const t=yv,e=n=>{n==="servicios"||n==="barberos"?window.location.hash=`/admin/${n}`:window.location.hash="/admin"};return C.jsxs(gv,{sections:t,current:"barberos",onSelect:e,children:[C.jsx("h2",{className:"text-xl font-semibold",children:"Gestionar Barberos"}),C.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Nuevo barbero"}),C.jsx(dF,{})]})}),C.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Barberos existentes"}),C.jsx(pF,{})]})})]})}function gF(){const[t,e]=N.useState([]);return N.useEffect(()=>Ze(xe(me,"servicios"),r=>{e(r.docs.map(i=>({id:i.id,...i.data()})))}),[]),C.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[C.jsx("h1",{className:"text-3xl font-bold text-center",children:"Servicios"}),C.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>C.jsxs("div",{className:"card bg-base-200 shadow hover:shadow-lg transition",children:[C.jsx("figure",{className:"px-4 pt-4",children:C.jsx("img",{className:"w-24 h-24 object-contain",src:n.imagen||"https://cdn-icons-png.flaticon.com/512/7338/7338646.png",alt:n.nombre})}),C.jsxs("div",{className:"card-body items-center text-center space-y-2",children:[C.jsx("h2",{className:"card-title",children:n.nombre}),n.precio&&C.jsxs("p",{className:"opacity-70",children:["$",n.precio]}),n.descripcion&&C.jsx("p",{className:"text-sm opacity-80",children:n.descripcion}),C.jsx("div",{className:"card-actions mt-2",children:C.jsx(Nr,{to:`/agendar?servicio=${encodeURIComponent(n.nombre)}`,className:"btn btn-primary btn-sm",children:"Reservar"})})]})]},n.id))})]})}function yF(){const[t,e]=N.useState([]);return N.useEffect(()=>Ze(xe(me,"barberos"),r=>{e(r.docs.map(i=>({id:i.id,...i.data()})))}),[]),C.jsxs("div",{children:[C.jsx(m6,{}),C.jsxs("div",{className:"pt-16 space-y-6",children:[C.jsx("section",{className:"hero min-h-[40vh] bg-base-200",children:C.jsx("div",{className:"hero-content text-center",children:C.jsxs("div",{className:"max-w-md space-y-4",children:[C.jsx("h1",{className:"text-4xl font-bold",children:"Nuestro Equipo"}),C.jsx("p",{className:"opacity-80",children:"Profesionales listos para darte el mejor estilo."}),C.jsx(Nr,{to:"/agendar",className:"btn btn-primary",children:"Agendar Turno"})]})})}),C.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[C.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"Barberos"}),C.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map(n=>C.jsx(Nr,{to:`/barberos/${n.id}`,className:"card bg-base-200 rounded-lg shadow transition-transform duration-300 hover:scale-105 hover:shadow-lg",children:C.jsxs("div",{className:"card-body items-center text-center space-y-2",children:[C.jsx("div",{className:"avatar",children:C.jsx("div",{className:"w-24 rounded-full",children:C.jsx("img",{src:n.imagen||"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp"})})}),C.jsx("h3",{className:"card-title",children:n.nombre}),n.telefono&&C.jsx("p",{className:"text-sm opacity-80",children:n.telefono}),n.email&&C.jsx("p",{className:"text-sm opacity-80",children:n.email})]})},n.id))})]})]})]})}function vF(){const{id:t}=t5(),[e,n]=N.useState(null);return N.useEffect(()=>{async function r(){const i=await _k(Cr(me,"barberos",t));i.exists()&&n({id:i.id,...i.data()})}r()},[t]),e?C.jsxs("div",{className:"p-6 flex flex-col items-center space-y-4",children:[C.jsx("div",{className:"avatar",children:C.jsx("div",{className:"w-32 rounded-full",children:C.jsx("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp"})})}),C.jsx("h1",{className:"text-3xl font-bold",children:e.nombre}),e.email&&C.jsx("p",{className:"text-lg",children:e.email}),e.telefono&&C.jsx("p",{className:"text-lg",children:e.telefono})]}):C.jsx("div",{className:"p-6 text-center",children:"Cargando..."})}var dp={},A6={exports:{}},_F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wF=_F,EF=wF;function C6(){}function I6(){}I6.resetWarningCache=C6;var AF=function(){function t(r,i,o,s,a,u){if(u!==EF){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:I6,resetWarningCache:C6};return n.PropTypes=n,n};A6.exports=AF();var vv=A6.exports;const U=vd(vv);var T6={L:1,M:0,Q:3,H:2},S6={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},CF=S6;function b6(t){this.mode=CF.MODE_8BIT_BYTE,this.data=t}b6.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var IF=b6,Ph=T6;function Or(t,e){this.totalCount=t,this.dataCount=e}Or.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Or.getRSBlocks=function(t,e){var n=Or.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=new Array,o=0;o<r;o++)for(var s=n[o*3+0],a=n[o*3+1],u=n[o*3+2],l=0;l<s;l++)i.push(new Or(a,u));return i};Or.getRsBlockTable=function(t,e){switch(e){case Ph.L:return Or.RS_BLOCK_TABLE[(t-1)*4+0];case Ph.M:return Or.RS_BLOCK_TABLE[(t-1)*4+1];case Ph.Q:return Or.RS_BLOCK_TABLE[(t-1)*4+2];case Ph.H:return Or.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var TF=Or;function R6(){this.buffer=new Array,this.length=0}R6.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var SF=R6,dr={glog:function(t){if(t<1)throw new Error("glog("+t+")");return dr.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return dr.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Wt=0;Wt<8;Wt++)dr.EXP_TABLE[Wt]=1<<Wt;for(var Wt=8;Wt<256;Wt++)dr.EXP_TABLE[Wt]=dr.EXP_TABLE[Wt-4]^dr.EXP_TABLE[Wt-5]^dr.EXP_TABLE[Wt-6]^dr.EXP_TABLE[Wt-8];for(var Wt=0;Wt<255;Wt++)dr.LOG_TABLE[dr.EXP_TABLE[Wt]]=Wt;var P6=dr,Wo=P6;function lf(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}lf.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=Wo.gexp(Wo.glog(this.get(n))+Wo.glog(t.get(r)));return new lf(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=Wo.glog(this.get(0))-Wo.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<t.getLength();r++)n[r]^=Wo.gexp(Wo.glog(t.get(r))+e);return new lf(n,0).mod(t)}};var O6=lf,Kn=S6,lA=O6,bF=P6,Oi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},jt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;jt.getBCHDigit(e)-jt.getBCHDigit(jt.G15)>=0;)e^=jt.G15<<jt.getBCHDigit(e)-jt.getBCHDigit(jt.G15);return(t<<10|e)^jt.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;jt.getBCHDigit(e)-jt.getBCHDigit(jt.G18)>=0;)e^=jt.G18<<jt.getBCHDigit(e)-jt.getBCHDigit(jt.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return jt.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case Oi.PATTERN000:return(e+n)%2==0;case Oi.PATTERN001:return e%2==0;case Oi.PATTERN010:return n%3==0;case Oi.PATTERN011:return(e+n)%3==0;case Oi.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case Oi.PATTERN101:return e*n%2+e*n%3==0;case Oi.PATTERN110:return(e*n%2+e*n%3)%2==0;case Oi.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new lA([1],0),n=0;n<t;n++)e=e.multiply(new lA([1,bF.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Kn.MODE_NUMBER:return 10;case Kn.MODE_ALPHA_NUM:return 9;case Kn.MODE_8BIT_BYTE:return 8;case Kn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Kn.MODE_NUMBER:return 12;case Kn.MODE_ALPHA_NUM:return 11;case Kn.MODE_8BIT_BYTE:return 16;case Kn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Kn.MODE_NUMBER:return 14;case Kn.MODE_ALPHA_NUM:return 13;case Kn.MODE_8BIT_BYTE:return 16;case Kn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var o=0,s=t.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||e<=r+a))for(var u=-1;u<=1;u++)i+u<0||e<=i+u||a==0&&u==0||s==t.isDark(r+a,i+u)&&o++;o>5&&(n+=3+o-5)}for(var r=0;r<e-1;r++)for(var i=0;i<e-1;i++){var l=0;t.isDark(r,i)&&l++,t.isDark(r+1,i)&&l++,t.isDark(r,i+1)&&l++,t.isDark(r+1,i+1)&&l++,(l==0||l==4)&&(n+=3)}for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);for(var c=0,i=0;i<e;i++)for(var r=0;r<e;r++)t.isDark(r,i)&&c++;var h=Math.abs(100*c/e/e-50)/5;return n+=h*10,n}},RF=jt,PF=IF,N6=TF,D6=SF,Ro=RF,OF=O6;function xr(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Gn=xr.prototype;Gn.addData=function(t){var e=new PF(t);this.dataList.push(e),this.dataCache=null};Gn.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};Gn.getModuleCount=function(){return this.moduleCount};Gn.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=N6.getRSBlocks(t,this.errorCorrectLevel),n=new D6,r=0,i=0;i<e.length;i++)r+=e[i].dataCount;for(var i=0;i<this.dataList.length;i++){var o=this.dataList[i];n.put(o.mode,4),n.put(o.getLength(),Ro.getLengthInBits(o.mode,t)),o.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};Gn.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=xr.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};Gn.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[t+n][e+r]=!0:this.modules[t+n][e+r]=!1)};Gn.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=Ro.getLostPoint(this);(n==0||t>r)&&(t=r,e=n)}return e};Gn.createMovieClip=function(t,e,n){var r=t.createEmptyMovieClip(e,n),i=1;this.make();for(var o=0;o<this.modules.length;o++)for(var s=o*i,a=0;a<this.modules[o].length;a++){var u=a*i,l=this.modules[o][a];l&&(r.beginFill(0,100),r.moveTo(u,s),r.lineTo(u+i,s),r.lineTo(u+i,s+i),r.lineTo(u,s+i),r.endFill())}return r};Gn.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};Gn.setupPositionAdjustPattern=function(){for(var t=Ro.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(this.modules[r][i]==null)for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)o==-2||o==2||s==-2||s==2||o==0&&s==0?this.modules[r+o][i+s]=!0:this.modules[r+o][i+s]=!1}};Gn.setupTypeNumber=function(t){for(var e=Ro.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}};Gn.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=Ro.getBCHTypeInfo(n),i=0;i<15;i++){var o=!t&&(r>>i&1)==1;i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;i<15;i++){var o=!t&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!t};Gn.mapData=function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(var a=0;a<2;a++)if(this.modules[r][s-a]==null){var u=!1;o<t.length&&(u=(t[o]>>>i&1)==1);var l=Ro.getMask(e,r,s-a);l&&(u=!u),this.modules[r][s-a]=u,i--,i==-1&&(o++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}};xr.PAD0=236;xr.PAD1=17;xr.createData=function(t,e,n){for(var r=N6.getRSBlocks(t,e),i=new D6,o=0;o<n.length;o++){var s=n[o];i.put(s.mode,4),i.put(s.getLength(),Ro.getLengthInBits(s.mode,t)),s.write(i)}for(var a=0,o=0;o<r.length;o++)a+=r[o].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(xr.PAD0,8),i.getLengthInBits()>=a*8));)i.put(xr.PAD1,8);return xr.createBytes(i,r)};xr.createBytes=function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a++){var u=e[a].dataCount,l=e[a].totalCount-u;r=Math.max(r,u),i=Math.max(i,l),o[a]=new Array(u);for(var c=0;c<o[a].length;c++)o[a][c]=255&t.buffer[c+n];n+=u;var h=Ro.getErrorCorrectPolynomial(l),d=new OF(o[a],h.getLength()-1),p=d.mod(h);s[a]=new Array(h.getLength()-1);for(var c=0;c<s[a].length;c++){var m=c+p.getLength()-s[a].length;s[a][c]=m>=0?p.get(m):0}}for(var y=0,c=0;c<e.length;c++)y+=e[c].totalCount;for(var w=new Array(y),_=0,c=0;c<r;c++)for(var a=0;a<e.length;a++)c<o[a].length&&(w[_++]=o[a][c]);for(var c=0;c<i;c++)for(var a=0;a<e.length;a++)c<s[a].length&&(w[_++]=s[a][c]);return w};var NF=xr,_v={};Object.defineProperty(_v,"__esModule",{value:!0});var DF=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xF=vv,Yn=k6(xF),x6=N,Oh=k6(x6);function k6(t){return t&&t.__esModule?t:{default:t}}function kF(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var MF={bgColor:Yn.default.oneOfType([Yn.default.object,Yn.default.string]).isRequired,bgD:Yn.default.string.isRequired,fgColor:Yn.default.oneOfType([Yn.default.object,Yn.default.string]).isRequired,fgD:Yn.default.string.isRequired,size:Yn.default.number.isRequired,title:Yn.default.string,viewBoxSize:Yn.default.number.isRequired,xmlns:Yn.default.string},wv=(0,x6.forwardRef)(function(t,e){var n=t.bgColor,r=t.bgD,i=t.fgD,o=t.fgColor,s=t.size,a=t.title,u=t.viewBoxSize,l=t.xmlns,c=l===void 0?"http://www.w3.org/2000/svg":l,h=kF(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Oh.default.createElement("svg",DF({},h,{height:s,ref:e,viewBox:"0 0 "+u+" "+u,width:s,xmlns:c}),a?Oh.default.createElement("title",null,a):null,Oh.default.createElement("path",{d:r,fill:n}),Oh.default.createElement("path",{d:i,fill:o}))});wv.displayName="QRCodeSvg";wv.propTypes=MF;_v.default=wv;Object.defineProperty(dp,"__esModule",{value:!0});dp.QRCode=void 0;var LF=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VF=vv,Jr=bc(VF),BF=T6,FF=bc(BF),jF=NF,UF=bc(jF),M6=N,HF=bc(M6),zF=_v,WF=bc(zF);function bc(t){return t&&t.__esModule?t:{default:t}}function $F(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var GF={bgColor:Jr.default.oneOfType([Jr.default.object,Jr.default.string]),fgColor:Jr.default.oneOfType([Jr.default.object,Jr.default.string]),level:Jr.default.string,size:Jr.default.number,value:Jr.default.string.isRequired},pp=(0,M6.forwardRef)(function(t,e){var n=t.bgColor,r=n===void 0?"#FFFFFF":n,i=t.fgColor,o=i===void 0?"#000000":i,s=t.level,a=s===void 0?"L":s,u=t.size,l=u===void 0?256:u,c=t.value,h=$F(t,["bgColor","fgColor","level","size","value"]),d=new UF.default(-1,FF.default[a]);d.addData(c),d.make();var p=d.modules;return HF.default.createElement(WF.default,LF({},h,{bgColor:r,bgD:p.map(function(m,y){return m.map(function(w,_){return w?"":"M "+_+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:p.map(function(m,y){return m.map(function(w,_){return w?"M "+_+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:l,viewBoxSize:p.length}))});dp.QRCode=pp;pp.displayName="QRCode";pp.propTypes=GF;var L6=dp.default=pp;function XF(){return new Date().toLocaleDateString("en-CA",{timeZone:"America/Bogota"})}function xs(t){return t?new Date(`1970-01-01T${t}:00`).toLocaleTimeString("es-CO",{timeZone:"America/Bogota",hour:"2-digit",minute:"2-digit",hour12:!0}):""}function V6({showSteps:t=!1}){const[e]=P5(),n=e.get("servicio")||"",[r,i]=N.useState(n),[o,s]=N.useState(""),[a,u]=N.useState(""),[l,c]=N.useState(""),[h,d]=N.useState(""),[p,m]=N.useState(""),[y,w]=N.useState(""),[_,v]=N.useState([]),[A,S]=N.useState([]),[x,M]=N.useState([]),[T,I]=N.useState({}),[R,O]=N.useState({}),[k,L]=N.useState([]),[D,ne]=N.useState(!1),[ge,de]=N.useState(""),Fe=N.useRef(null),G=r?o?a?y?5:4:3:2:1;N.useEffect(()=>{n&&i(n)},[n]),N.useEffect(()=>{const W=Ze(xe(me,"servicios"),re=>{v(re.docs.map(se=>({id:se.id,...se.data()})))});return()=>W()},[]),N.useEffect(()=>{if(o){const W=vn(xe(me,"turnos"),kt("fecha","==",o)),re=Ze(W,se=>{const we={};se.forEach(We=>{const{hora:ve,barbero:Ue}=We.data();we[ve]||(we[ve]=[]),we[ve].push(Ue)}),O(we)});return()=>re()}O({})},[o]),N.useEffect(()=>{if(r&&o){const W=vn(xe(me,"disponibilidades"),kt("servicio","==",r),kt("fecha","==",o)),re=Ze(W,se=>{const we={};se.forEach(We=>{const{hora:ve,barbero:Ue}=We.data();we[ve]||(we[ve]=[]),we[ve].push(Ue)}),I(we)});return()=>re()}I({})},[r,o]),N.useEffect(()=>{const re=Object.keys(T).filter(se=>{const we=R[se]||[];return T[se].filter(ve=>!we.includes(ve)).length>0});S(re)},[T,R]),N.useEffect(()=>{if(o&&a){const W=vn(xe(me,"turnos"),kt("fecha","==",o),kt("hora","==",a)),re=Ze(W,se=>{L(se.docs.map(we=>we.data().barbero))});return()=>re()}else L([])},[o,a]),N.useEffect(()=>{if(r&&o&&a){const W=vn(xe(me,"disponibilidades"),kt("servicio","==",r),kt("fecha","==",o),kt("hora","==",a)),re=Ze(W,se=>{const We=[...new Set(se.docs.map(ve=>ve.data().barbero))].filter(ve=>!k.includes(ve));M(We)});return()=>re()}else M([])},[r,o,a,k]);const Z=async()=>{if(!l||!o||!a||!r||!y||!h||!p)return;const W=go.currentUser?go.currentUser.uid:null,re={nombre:l,fecha:o,hora:a,servicio:r,barbero:y,email:h,telefono:p,estado:"pendiente",userId:W,timestamp:new Date},se=await op(xe(me,"turnos"),re);await Ec(se,{qrId:se.id}),de(se.id);try{await fetch("https://hook.us2.make.com/307slkl4v8t4p76yy91sugd5uql87t6d",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...re,id:se.id})})}catch(we){console.error("Error calling webhook",we)}ne(!0),setTimeout(()=>ne(!1),3e3),c(""),s(""),u(""),i(""),w(""),d(""),m("")},J=()=>{const W=Fe.current;if(!W)return;const re=W.querySelector("svg");if(!re)return;const we=new XMLSerializer().serializeToString(re),We=new Blob([we],{type:"image/svg+xml"}),ve=URL.createObjectURL(We),Ue=document.createElement("a");Ue.href=ve,Ue.download=`turno-${ge}.svg`,Ue.click(),URL.revokeObjectURL(ve)};return C.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[t&&C.jsx("div",{"data-theme":"corporate",children:C.jsxs("ul",{className:"steps w-full mb-4",children:[C.jsx("li",{className:`step ${G>=1?"step-primary":""}`,children:"Servicio"}),C.jsx("li",{className:`step ${G>=2?"step-primary":""}`,children:"Fecha"}),C.jsx("li",{className:`step ${G>=3?"step-primary":""}`,children:"Hora"}),C.jsx("li",{className:`step ${G>=4?"step-primary":""}`,children:"Barbero"}),C.jsx("li",{className:`step ${G>=5?"step-primary":""}`,children:"Datos"})]})}),r&&o&&A.length===0&&C.jsx("div",{role:"alert",className:"alert alert-warning",children:C.jsx("span",{children:"Sin turnos disponibles para ese día"})}),C.jsxs("select",{className:"border p-2 rounded",value:r,onChange:W=>i(W.target.value),children:[C.jsx("option",{value:"",children:"Seleccione un servicio"}),_.map(W=>C.jsx("option",{value:W.nombre,children:W.nombre},W.id))]}),r&&C.jsx("input",{type:"date",className:"border p-2 rounded",value:o,onChange:W=>s(W.target.value)}),A.length>0&&C.jsxs("select",{className:"border p-2 rounded",value:a,onChange:W=>u(W.target.value),children:[C.jsx("option",{value:"",children:"Seleccione una hora"}),A.map(W=>C.jsx("option",{value:W,children:xs(W)},W))]}),x.length>0&&C.jsxs("select",{className:"border p-2 rounded",value:y,onChange:W=>w(W.target.value),children:[C.jsx("option",{value:"",children:"Seleccione un barbero"}),x.map(W=>C.jsx("option",{value:W,children:W},W))]}),y&&C.jsx("input",{className:"border p-2 rounded",value:l,onChange:W=>c(W.target.value),placeholder:"Nombre del cliente"}),y&&C.jsx("input",{className:"border p-2 rounded",type:"email",value:h,onChange:W=>d(W.target.value),placeholder:"Correo del cliente"}),y&&C.jsx("input",{className:"border p-2 rounded",value:p,onChange:W=>m(W.target.value),placeholder:"Teléfono del cliente"}),y&&C.jsx("button",{onClick:Z,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Guardar turno"}),D&&C.jsx("div",{role:"alert",className:"alert alert-success",children:C.jsx("span",{children:"Turno guardado"})}),ge&&C.jsxs("div",{className:"flex flex-col items-center pt-4",ref:Fe,children:[C.jsx(L6,{value:ge}),C.jsx("button",{onClick:J,className:"btn btn-sm mt-2",children:"Descargar QR"})]})]})}function KF(){const[t,e]=N.useState([]),[n,r]=N.useState(""),[i,o]=N.useState(""),s=N.useRef(null),a=d=>{d.current&&d.current.scrollBy({left:-150,behavior:"smooth"})},u=d=>{d.current&&d.current.scrollBy({left:150,behavior:"smooth"})};N.useEffect(()=>{const d=vn(xe(me,"turnos"),mk("timestamp","desc")),p=Ze(d,m=>{e(m.docs.map(y=>({id:y.id,...y.data()})))});return()=>p()},[]);const l=N.useMemo(()=>Array.from(new Set(t.map(d=>d.fecha))).sort(),[t]);N.useEffect(()=>{l.length>0&&!l.includes(n)&&r(l[0])},[l,n]);const c=N.useMemo(()=>Array.from(new Set(t.filter(d=>d.fecha===n).map(d=>d.barbero))),[t,n]);N.useEffect(()=>{c.length>0&&!c.includes(i)&&o(c[0])},[c,i]);const h=async d=>{await Ac(Cr(me,"turnos",d))};return t.length===0?C.jsx("p",{children:"No hay turnos registrados."}):C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("button",{onClick:()=>a(s),className:"btn btn-square btn-sm mr-2",children:"❮"}),C.jsx("div",{ref:s,role:"tablist",className:"tabs tabs-boxed flex-1 overflow-x-auto whitespace-nowrap scroll-smooth",children:l.map(d=>C.jsx("button",{role:"tab",className:`tab ${n===d?"tab-active":""}`,onClick:()=>r(d),children:d},d))}),C.jsx("button",{onClick:()=>u(s),className:"btn btn-square btn-sm ml-2",children:"❯"})]}),C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{role:"tablist",className:"tabs tabs-boxed overflow-x-auto",children:c.map(d=>C.jsx("button",{role:"tab",className:`tab ${i===d?"tab-active":""}`,onClick:()=>o(d),children:d},d))})}),C.jsx("div",{className:"grid gap-4",children:t.filter(d=>d.fecha===n).filter(d=>d.barbero===i).map(d=>C.jsx("div",{className:"card bg-base-100 shadow-md",children:C.jsxs("div",{className:"card-body",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsx("h2",{className:"card-title",children:d.nombre}),C.jsx("span",{className:`badge ${(d.estado||"pendiente")==="pendiente"?"badge-info":(d.estado||"pendiente")==="atendido"?"badge-success":"badge-error"}`,children:d.estado||"pendiente"})]}),C.jsxs("p",{children:["Fecha: ",d.fecha]}),C.jsxs("p",{children:["Hora: ",xs(d.hora)]}),C.jsxs("p",{children:["Servicio: ",d.servicio]}),C.jsxs("p",{children:["Barbero: ",d.barbero]}),d.email&&C.jsxs("p",{children:["Correo: ",d.email]}),d.telefono&&C.jsxs("p",{children:["Teléfono: ",d.telefono]}),C.jsx("div",{className:"pt-2",children:C.jsx("button",{onClick:()=>h(d.id),className:"btn btn-xs btn-error",children:"Eliminar"})})]})},d.id))})]})}function YF(){const[t,e]=N.useState([]),[n,r]=N.useState([]),[i,o]=N.useState(""),[s,a]=N.useState(""),u=N.useRef(null),l=N.useRef(null),c=y=>{y.current&&y.current.scrollBy({left:-150,behavior:"smooth"})},h=y=>{y.current&&y.current.scrollBy({left:150,behavior:"smooth"})};N.useEffect(()=>{const y=Ze(xe(me,"barberos"),_=>{e(_.docs.map(v=>({id:v.id,...v.data()})))}),w=Ze(xe(me,"turnos"),_=>{r(_.docs.map(v=>({id:v.id,...v.data()})))});return()=>{y(),w()}},[]);const d=N.useMemo(()=>Array.from(new Set(n.map(y=>y.fecha))).sort(),[n]),p=N.useMemo(()=>t.map(y=>y.nombre),[t]);N.useEffect(()=>{d.length>0&&!d.includes(i)&&o(d[0])},[d,i]),N.useEffect(()=>{p.length>0&&!p.includes(s)&&a(p[0])},[p,s]);const m=n.filter(y=>y.barbero===s&&y.fecha===i);return d.length===0?C.jsx("p",{children:"No hay turnos registrados."}):C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("button",{onClick:()=>c(u),className:"btn btn-square btn-sm mr-2",children:"❮"}),C.jsx("div",{ref:u,role:"tablist",className:"tabs tabs-boxed flex-1 overflow-x-auto whitespace-nowrap scroll-smooth",children:d.map(y=>C.jsx("button",{role:"tab",className:`tab ${i===y?"tab-active":""}`,onClick:()=>o(y),children:y},y))}),C.jsx("button",{onClick:()=>h(u),className:"btn btn-square btn-sm ml-2",children:"❯"})]}),C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{role:"tablist",className:"tabs tabs-boxed overflow-x-auto",ref:l,children:p.map(y=>C.jsx("button",{role:"tab",className:`tab ${s===y?"tab-active":""}`,onClick:()=>a(y),children:y},y))})}),C.jsxs("div",{className:"space-y-6 mt-4",children:[C.jsx("h3",{className:"font-bold mb-2",children:s}),m.length===0?C.jsx("p",{className:"text-sm italic",children:"Sin turnos"}):C.jsx("div",{className:"grid gap-2",children:m.map(y=>C.jsxs("div",{className:"card bg-base-100 shadow-md p-4",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsxs("p",{className:"font-semibold",children:[xs(y.hora)," - ",y.nombre]}),C.jsx("span",{className:`badge ${(y.estado||"pendiente")==="pendiente"?"badge-info":(y.estado||"pendiente")==="atendido"?"badge-success":"badge-error"}`,children:y.estado||"pendiente"})]}),C.jsxs("p",{className:"text-sm",children:["Servicio: ",y.servicio]})]},y.id))})]})]})}function B6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=B6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mp(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=B6(t))&&(r&&(r+=" "),r+=e);return r}const qF=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),o=Object.getOwnPropertyDescriptor(e,n);!QF(i,o)&&r||Object.defineProperty(t,n,o)},QF=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},ZF=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},JF=(t,e)=>`/* Wrapped ${t}*/
${e}`,ej=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),tj=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),nj=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=JF.bind(null,r,e.toString());Object.defineProperty(i,"name",tj),Object.defineProperty(t,"toString",{...ej,value:i})},rj=(t,e,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=t;for(const i of Reflect.ownKeys(e))qF(t,e,i,n);return ZF(t,e),nj(t,e,r),t};var ij=rj,bg={exports:{}},oj=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};(function(t,e){var n=th&&th.__awaiter||function(s,a,u,l){return new(u||(u=Promise))(function(c,h){function d(y){try{m(l.next(y))}catch(w){h(w)}}function p(y){try{m(l.throw(y))}catch(w){h(w)}}function m(y){y.done?c(y.value):new u(function(w){w(y.value)}).then(d,p)}m((l=l.apply(s,a||[])).next())})},r=th&&th.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(oj);function o(s,a="maxAge"){let u,l,c;const h=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const m=y=>n(this,void 0,void 0,function*(){c=i.default();const w=y[1][a]-Date.now();if(w<=0){s.delete(y[0]),c.resolve();return}return u=y[0],l=setTimeout(()=>{s.delete(y[0]),c&&c.resolve()},w),typeof l.unref=="function"&&l.unref(),c.promise});try{for(const y of s)yield m(y)}catch{}u=void 0}),d=()=>{u=void 0,l!==void 0&&(clearTimeout(l),l=void 0),c!==void 0&&(c.reject(void 0),c=void 0)},p=s.set.bind(s);return s.set=(m,y)=>{s.has(m)&&s.delete(m);const w=p(m,y);return u&&u===m&&d(),h(),w},h(),s}e.default=o,t.exports=o,t.exports.default=o})(bg,bg.exports);var sj=bg.exports;const aj=ij,uj=sj,M1=new WeakMap,F6=new WeakMap,fd=(t,{cacheKey:e,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&uj(n);const i=function(...o){const s=e?e(o):o[0],a=n.get(s);if(a)return a.data;const u=t.apply(this,o);return n.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return aj(i,t,{ignoreNonConfigurable:!0}),F6.set(i,n),i};fd.decorator=(t={})=>(e,n,r)=>{const i=e[n];if(typeof i!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!M1.has(this)){const o=fd(i,t);return M1.set(this,o),o}return M1.get(this)}};fd.clear=t=>{const e=F6.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var lj=fd;const j6=vd(lj);function cj(t){return typeof t=="string"}function hj(t,e,n){return n.indexOf(t)===e}function fj(t){return t.toLowerCase()===t}function cA(t){return t.indexOf(",")===-1?t:t.split(",")}function Rg(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return Rg(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return Rg(n)}if(t.indexOf("-")===-1||!fj(t))return t;var i=t.split("-"),o=i[0],s=i[1],a=s===void 0?"":s;return"".concat(o,"-").concat(a.toUpperCase())}function dj(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,o=i===void 0?"en-US":i,s=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],u=[],l=0,c=a;l<c.length;l++){var h=c[l];u=u.concat(cA(h))}var d=navigator.language,p=d&&cA(d);s=s.concat(u,p)}return r&&s.push(o),s.filter(cj).map(Rg).filter(hj)}var pj=j6(dj,{cacheKey:JSON.stringify});function mj(t){return pj(t)[0]||null}var U6=j6(mj,{cacheKey:JSON.stringify});function Ti(t,e,n){return function(i,o){o===void 0&&(o=n);var s=t(i)+o;return e(s)}}function Rc(t){return function(n){return new Date(t(n).getTime()-1)}}function Pc(t,e){return function(r){return[t(r),e(r)]}}function et(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function Po(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function gp(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function eu(t){var e=et(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var gj=Ti(et,eu,-100),H6=Ti(et,eu,100),Ev=Rc(H6),yj=Ti(et,Ev,-100),z6=Pc(eu,Ev);function Oo(t){var e=et(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var W6=Ti(et,Oo,-10),Av=Ti(et,Oo,10),yp=Rc(Av),$6=Ti(et,yp,-10),G6=Pc(Oo,yp);function tu(t){var e=et(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var X6=Ti(et,tu,-1),Cv=Ti(et,tu,1),vp=Rc(Cv),K6=Ti(et,vp,-1),vj=Pc(tu,vp);function Iv(t,e){return function(r,i){i===void 0&&(i=e);var o=et(r),s=Po(r)+i,a=new Date;return a.setFullYear(o,s,1),a.setHours(0,0,0,0),t(a)}}function ks(t){var e=et(t),n=Po(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}var Y6=Iv(ks,-1),Tv=Iv(ks,1),Oc=Rc(Tv),q6=Iv(Oc,-1),_j=Pc(ks,Oc);function wj(t,e){return function(r,i){i===void 0&&(i=e);var o=et(r),s=Po(r),a=gp(r)+i,u=new Date;return u.setFullYear(o,s,a),u.setHours(0,0,0,0),t(u)}}function Nc(t){var e=et(t),n=Po(t),r=gp(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}var Ej=wj(Nc,1),Sv=Rc(Ej),Aj=Pc(Nc,Sv);function Q6(t){return gp(Oc(t))}var ku,Ke={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},da={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},Cj=(ku={},ku[Ke.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],ku[Ke.HEBREW]=["he","he-IL"],ku[Ke.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],ku),bv=[0,1,2,3,4,5,6],L1=new Map;function Ij(t){return function(n,r){var i=n||U6();L1.has(i)||L1.set(i,new Map);var o=L1.get(i);return o.has(t)||o.set(t,new Intl.DateTimeFormat(i||void 0,t).format),o.get(t)(r)}}function Tj(t){var e=new Date(t);return new Date(e.setHours(12))}function Ms(t){return function(e,n){return Ij(t)(e,Tj(n))}}var Sj={day:"numeric"},bj={day:"numeric",month:"long",year:"numeric"},Rj={month:"long"},Pj={month:"long",year:"numeric"},Oj={weekday:"short"},Nj={weekday:"long"},Dj={year:"numeric"},xj=Ms(Sj),kj=Ms(bj),Mj=Ms(Rj),Z6=Ms(Pj),Lj=Ms(Oj),Vj=Ms(Nj),_p=Ms(Dj),Bj=bv[0],Fj=bv[5],hA=bv[6];function ql(t,e){e===void 0&&(e=Ke.ISO_8601);var n=t.getDay();switch(e){case Ke.ISO_8601:return(n+6)%7;case Ke.ISLAMIC:return(n+1)%7;case Ke.HEBREW:case Ke.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function jj(t){var e=eu(t);return et(e)}function Uj(t){var e=Oo(t);return et(e)}function Pg(t,e){e===void 0&&(e=Ke.ISO_8601);var n=et(t),r=Po(t),i=t.getDate()-ql(t,e);return new Date(n,r,i)}function Hj(t,e){e===void 0&&(e=Ke.ISO_8601);var n=e===Ke.GREGORY?Ke.GREGORY:Ke.ISO_8601,r=Pg(t,e),i=et(t)+1,o,s;do o=new Date(i,0,n===Ke.ISO_8601?4:1),s=Pg(o,e),i-=1;while(t<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function hs(t,e){switch(t){case"century":return eu(e);case"decade":return Oo(e);case"year":return tu(e);case"month":return ks(e);case"day":return Nc(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function zj(t,e){switch(t){case"century":return gj(e);case"decade":return W6(e);case"year":return X6(e);case"month":return Y6(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function J6(t,e){switch(t){case"century":return H6(e);case"decade":return Av(e);case"year":return Cv(e);case"month":return Tv(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Wj(t,e){switch(t){case"decade":return W6(e,-100);case"year":return X6(e,-10);case"month":return Y6(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function $j(t,e){switch(t){case"decade":return Av(e,100);case"year":return Cv(e,10);case"month":return Tv(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function e8(t,e){switch(t){case"century":return Ev(e);case"decade":return yp(e);case"year":return vp(e);case"month":return Oc(e);case"day":return Sv(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Gj(t,e){switch(t){case"century":return yj(e);case"decade":return $6(e);case"year":return K6(e);case"month":return q6(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Xj(t,e){switch(t){case"decade":return $6(e,-100);case"year":return K6(e,-10);case"month":return q6(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function fA(t,e){switch(t){case"century":return z6(e);case"decade":return G6(e);case"year":return vj(e);case"month":return _j(e);case"day":return Aj(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Kj(t,e,n){var r=[e,n].sort(function(i,o){return i.getTime()-o.getTime()});return[hs(t,r[0]),e8(t,r[1])]}function t8(t,e,n){return e===void 0&&(e=_p),n.map(function(r){return e(t,r)}).join(" – ")}function Yj(t,e,n){return t8(t,e,z6(n))}function n8(t,e,n){return t8(t,e,G6(n))}function qj(t){return t.getDay()===new Date().getDay()}function r8(t,e){e===void 0&&(e=Ke.ISO_8601);var n=t.getDay();switch(e){case Ke.ISLAMIC:case Ke.HEBREW:return n===Fj||n===hA;case Ke.ISO_8601:case Ke.GREGORY:return n===hA||n===Bj;default:throw new Error("Unsupported calendar type.")}}var br="react-calendar__navigation";function Qj(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?Z6:r,o=t.formatYear,s=o===void 0?_p:o,a=t.locale,u=t.maxDate,l=t.minDate,c=t.navigationAriaLabel,h=c===void 0?"":c,d=t.navigationAriaLive,p=t.navigationLabel,m=t.next2AriaLabel,y=m===void 0?"":m,w=t.next2Label,_=w===void 0?"»":w,v=t.nextAriaLabel,A=v===void 0?"":v,S=t.nextLabel,x=S===void 0?"›":S,M=t.prev2AriaLabel,T=M===void 0?"":M,I=t.prev2Label,R=I===void 0?"«":I,O=t.prevAriaLabel,k=O===void 0?"":O,L=t.prevLabel,D=L===void 0?"‹":L,ne=t.setActiveStartDate,ge=t.showDoubleView,de=t.view,Fe=t.views,G=Fe.indexOf(de)>0,Z=de!=="century",J=zj(de,e),W=Z?Wj(de,e):void 0,re=J6(de,e),se=Z?$j(de,e):void 0,we=function(){if(J.getFullYear()<0)return!0;var tt=Gj(de,e);return l&&l>=tt}(),We=Z&&function(){if(W.getFullYear()<0)return!0;var tt=Xj(de,e);return l&&l>=tt}(),ve=u&&u<re,Ue=Z&&u&&u<se;function Xr(){ne(J,"prev")}function Cn(){ne(W,"prev2")}function kn(){ne(re,"next")}function Qt(){ne(se,"next2")}function Kr(tt){var Yr=function(){switch(de){case"century":return Yj(a,s,tt);case"decade":return n8(a,s,tt);case"year":return s(a,tt);case"month":return i(a,tt);default:throw new Error("Invalid view: ".concat(de,"."))}}();return p?p({date:tt,label:Yr,locale:a||U6()||void 0,view:de}):Yr}function No(){var tt="".concat(br,"__label");return Y.createElement("button",{"aria-label":h,"aria-live":d,className:tt,disabled:!G,onClick:n,style:{flexGrow:1},type:"button"},Y.createElement("span",{className:"".concat(tt,"__labelText ").concat(tt,"__labelText--from")},Kr(e)),ge?Y.createElement(Y.Fragment,null,Y.createElement("span",{className:"".concat(tt,"__divider")}," – "),Y.createElement("span",{className:"".concat(tt,"__labelText ").concat(tt,"__labelText--to")},Kr(re))):null)}return Y.createElement("div",{className:br},R!==null&&Z?Y.createElement("button",{"aria-label":T,className:"".concat(br,"__arrow ").concat(br,"__prev2-button"),disabled:We,onClick:Cn,type:"button"},R):null,D!==null&&Y.createElement("button",{"aria-label":k,className:"".concat(br,"__arrow ").concat(br,"__prev-button"),disabled:we,onClick:Xr,type:"button"},D),No(),x!==null&&Y.createElement("button",{"aria-label":A,className:"".concat(br,"__arrow ").concat(br,"__next-button"),disabled:ve,onClick:kn,type:"button"},x),_!==null&&Z?Y.createElement("button",{"aria-label":y,className:"".concat(br,"__arrow ").concat(br,"__next2-button"),disabled:Ue,onClick:Qt,type:"button"},_):null)}var pa=function(){return pa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pa.apply(this,arguments)},Zj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function dA(t){return"".concat(t,"%")}function Rv(t){var e=t.children,n=t.className,r=t.count,i=t.direction,o=t.offset,s=t.style,a=t.wrap,u=Zj(t,["children","className","count","direction","offset","style","wrap"]);return Y.createElement("div",pa({className:n,style:pa({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},s)},u),Y.Children.map(e,function(l,c){var h=o&&c===0?dA(100*o/r):null;return Y.cloneElement(l,pa(pa({},l.props),{style:{flexBasis:dA(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:h,marginInlineStart:h,marginInlineEnd:0}}))}))}var Jj=function(){},eU=Jj;const tU=vd(eU);var Gs;function nU(t,e,n){return e&&e>t?e:n&&n<t?n:t}function Ql(t,e){return e[0]<=t&&e[1]>=t}function rU(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function i8(t,e){return Ql(t[0],e)||Ql(t[1],e)}function pA(t,e,n){var r=i8(e,t),i=[];if(r){i.push(n);var o=Ql(t[0],e),s=Ql(t[1],e);o&&i.push("".concat(n,"Start")),s&&i.push("".concat(n,"End")),o&&s&&i.push("".concat(n,"BothEnds"))}return i}function iU(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function oU(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",o=[i];if(!n)return o;var s=new Date,a=function(){if(Array.isArray(n))return n;var p=t.dateType;if(!p)throw new Error("dateType is required when date is not an array of two dates");return fA(p,n)}();if(Ql(s,a)&&o.push("".concat(i,"--now")),!e||!iU(e))return o;var u=function(){if(Array.isArray(e))return e;var p=t.valueType;if(!p)throw new Error("valueType is required when value is not an array of two dates");return fA(p,e)}();rU(u,a)?o.push("".concat(i,"--active")):i8(u,a)&&o.push("".concat(i,"--hasActive"));var l=pA(u,a,"".concat(i,"--range"));o.push.apply(o,l);var c=Array.isArray(e)?e:[e];if(r&&c.length===1){var h=r>u[0]?[u[0],r]:[r,u[0]],d=pA(h,a,"".concat(i,"--hover"));o.push.apply(o,d)}return o}var sU=(Gs={},Gs[da.ARABIC]=Ke.ISLAMIC,Gs[da.HEBREW]=Ke.HEBREW,Gs[da.ISO_8601]=Ke.ISO_8601,Gs[da.US]=Ke.GREGORY,Gs);function aU(t){return t!==void 0&&t in da}var mA=!1;function wp(t){if(aU(t)){var e=sU[t];return tU(mA,'Specifying calendarType="'.concat(t,'" is deprecated. Use calendarType="').concat(e,'" instead.')),mA=!0,e}return t}function Ep(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,o=t.dateType,s=t.end,a=t.hover,u=t.offset,l=t.renderTile,c=t.start,h=t.step,d=h===void 0?1:h,p=t.value,m=t.valueType,y=[],w=c;w<=s;w+=d){var _=i(w);y.push(l({classes:oU({date:_,dateType:o,hover:a,value:p,valueType:m}),date:_}))}return Y.createElement(Rv,{className:e,count:r,offset:u,wrap:!0},y)}function Ap(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,o=t.formatAbbr,s=t.locale,a=t.maxDate,u=t.maxDateTransform,l=t.minDate,c=t.minDateTransform,h=t.onClick,d=t.onMouseOver,p=t.style,m=t.tileClassName,y=t.tileContent,w=t.tileDisabled,_=t.view,v=N.useMemo(function(){var S={activeStartDate:e,date:i,view:_};return typeof m=="function"?m(S):m},[e,i,m,_]),A=N.useMemo(function(){var S={activeStartDate:e,date:i,view:_};return typeof y=="function"?y(S):y},[e,i,y,_]);return Y.createElement("button",{className:mp(r,v),disabled:l&&c(l)>i||a&&u(a)<i||w&&w({activeStartDate:e,date:i,view:_}),onClick:h?function(S){return h(i,S)}:void 0,onFocus:d?function(){return d(i)}:void 0,onMouseOver:d?function(){return d(i)}:void 0,style:p,type:"button"},o?Y.createElement("abbr",{"aria-label":o(s,i)},n):n,A)}var Og=function(){return Og=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Og.apply(this,arguments)},uU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},gA="react-calendar__century-view__decades__decade";function lU(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,o=i===void 0?_p:i,s=uU(t,["classes","currentCentury","formatYear"]),a=s.date,u=s.locale,l=[];return n&&l.push.apply(l,n),l.push(gA),eu(a).getFullYear()!==r&&l.push("".concat(gA,"--neighboringCentury")),Y.createElement(Ap,Og({},s,{classes:l,maxDateTransform:yp,minDateTransform:Oo,view:"century"}),n8(u,o,a))}var Ng=function(){return Ng=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ng.apply(this,arguments)},yA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function cU(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,o=t.valueType,s=yA(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=jj(e),u=a+(r?119:99);return Y.createElement(Ep,{className:"react-calendar__century-view__decades",dateTransform:Oo,dateType:"decade",end:u,hover:n,renderTile:function(l){var c=l.date,h=yA(l,["date"]);return Y.createElement(lU,Ng({key:c.getTime()},s,h,{activeStartDate:e,currentCentury:a,date:c}))},start:a,step:10,value:i,valueType:o})}var vA=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},hU=Object.values(Ke),fU=Object.values(da),Dg=["century","decade","year","month"],o8=U.oneOf(vA(vA([],hU,!0),fU,!0)),dd=U.oneOfType([U.string,U.arrayOf(U.string)]),s8=function(e,n,r){var i=e,o=n,s=i[o];if(!s)return null;if(!(s instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(r,"`, expected instance of `Date`."));var a=e.maxDate;return a&&s>a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(r,"`, minDate cannot be larger than maxDate.")):null},a8=function(e,n,r){var i=e,o=n,s=i[o];if(!s)return null;if(!(s instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(r,"`, expected instance of `Date`."));var a=e.minDate;return a&&s<a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(r,"`, maxDate cannot be smaller than minDate.")):null},dU=U.oneOfType([U.func,U.exact({current:U.any})]),pU=U.arrayOf(U.oneOfType([U.instanceOf(Date),U.oneOf([null])]).isRequired),mU=U.oneOfType([U.instanceOf(Date),U.oneOf([null]),pU]);U.arrayOf(U.oneOf(Dg));var pd=function(e,n,r){var i=e,o=n,s=i[o];return s!==void 0&&(typeof s!="string"||Dg.indexOf(s)===-1)?new Error("Invalid prop `".concat(n,"` of value `").concat(s,"` supplied to `").concat(r,"`, expected one of [").concat(Dg.map(function(a){return'"'.concat(a,'"')}).join(", "),"].")):null};pd.isRequired=function(e,n,r,i,o){var s=e,a=n,u=s[a];return u?pd(e,n,r):new Error("The prop `".concat(n,"` is marked as required in `").concat(r,"`, but its value is `").concat(u,"`."))};var gU=function(t){return U.arrayOf(t)},Cp={activeStartDate:U.instanceOf(Date).isRequired,hover:U.instanceOf(Date),locale:U.string,maxDate:a8,minDate:s8,onClick:U.func,onMouseOver:U.func,tileClassName:U.oneOfType([U.func,dd]),tileContent:U.oneOfType([U.func,U.node]),value:mU,valueType:U.oneOf(["century","decade","year","month","day"]).isRequired};U.instanceOf(Date).isRequired,U.arrayOf(U.string.isRequired).isRequired,U.instanceOf(Date).isRequired,U.string,U.func,U.func,U.objectOf(U.oneOfType([U.string,U.number])),U.oneOfType([U.func,dd]),U.oneOfType([U.func,U.node]),U.func;var Zl=function(){return Zl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zl.apply(this,arguments)},u8=function(e){function n(){return Y.createElement(cU,Zl({},e))}return Y.createElement("div",{className:"react-calendar__century-view"},n())};u8.propTypes=Zl(Zl({},Cp),{showNeighboringCentury:U.bool});var xg=function(){return xg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xg.apply(this,arguments)},yU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},_A="react-calendar__decade-view__years__year";function vU(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,o=i===void 0?_p:i,s=yU(t,["classes","currentDecade","formatYear"]),a=s.date,u=s.locale,l=[];return n&&l.push.apply(l,n),l.push(_A),Oo(a).getFullYear()!==r&&l.push("".concat(_A,"--neighboringDecade")),Y.createElement(Ap,xg({},s,{classes:l,maxDateTransform:vp,minDateTransform:tu,view:"decade"}),o(u,a))}var kg=function(){return kg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kg.apply(this,arguments)},wA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function _U(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,o=t.valueType,s=wA(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=Uj(e),u=a+(r?11:9);return Y.createElement(Ep,{className:"react-calendar__decade-view__years",dateTransform:tu,dateType:"year",end:u,hover:n,renderTile:function(l){var c=l.date,h=wA(l,["date"]);return Y.createElement(vU,kg({key:c.getTime()},s,h,{activeStartDate:e,currentDecade:a,date:c}))},start:a,value:i,valueType:o})}var Jl=function(){return Jl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jl.apply(this,arguments)},l8=function(e){function n(){return Y.createElement(_U,Jl({},e))}return Y.createElement("div",{className:"react-calendar__decade-view"},n())};l8.propTypes=Jl(Jl({},Cp),{showNeighboringDecade:U.bool});var Mg=function(){return Mg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mg.apply(this,arguments)},wU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},EA=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},EU="react-calendar__year-view__months__month";function AU(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?Mj:r,o=t.formatMonthYear,s=o===void 0?Z6:o,a=wU(t,["classes","formatMonth","formatMonthYear"]),u=a.date,l=a.locale;return Y.createElement(Ap,Mg({},a,{classes:EA(EA([],n,!0),[EU],!1),formatAbbr:s,maxDateTransform:Oc,minDateTransform:ks,view:"year"}),i(l,u))}var Lg=function(){return Lg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lg.apply(this,arguments)},AA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function CU(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,o=AA(t,["activeStartDate","hover","value","valueType"]),s=0,a=11,u=et(e);return Y.createElement(Ep,{className:"react-calendar__year-view__months",dateTransform:function(l){var c=new Date;return c.setFullYear(u,l,1),ks(c)},dateType:"month",end:a,hover:n,renderTile:function(l){var c=l.date,h=AA(l,["date"]);return Y.createElement(AU,Lg({key:c.getTime()},o,h,{activeStartDate:e,date:c}))},start:s,value:r,valueType:i})}var md=function(){return md=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},md.apply(this,arguments)},c8=function(e){function n(){return Y.createElement(CU,md({},e))}return Y.createElement("div",{className:"react-calendar__year-view"},n())};c8.propTypes=md({},Cp);var Vg=function(){return Vg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vg.apply(this,arguments)},IU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},V1="react-calendar__month-view__days__day";function TU(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,o=t.formatDay,s=o===void 0?xj:o,a=t.formatLongDate,u=a===void 0?kj:a,l=IU(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),c=wp(e),h=l.date,d=l.locale,p=[];return r&&p.push.apply(p,r),p.push(V1),r8(h,c)&&p.push("".concat(V1,"--weekend")),h.getMonth()!==i&&p.push("".concat(V1,"--neighboringMonth")),Y.createElement(Ap,Vg({},l,{classes:p,formatAbbr:u,maxDateTransform:Sv,minDateTransform:Nc,view:"month"}),s(d,h))}var Bg=function(){return Bg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bg.apply(this,arguments)},CA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function SU(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,o=t.showNeighboringMonth,s=t.value,a=t.valueType,u=CA(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),l=wp(n),c=et(e),h=Po(e),d=i||o,p=ql(e,l),m=d?0:p,y=(d?-p:0)+1,w=function(){if(i)return y+6*7-1;var _=Q6(e);if(o){var v=new Date;v.setFullYear(c,h,_),v.setHours(0,0,0,0);var A=7-ql(v,l)-1;return _+A}return _}();return Y.createElement(Ep,{className:"react-calendar__month-view__days",count:7,dateTransform:function(_){var v=new Date;return v.setFullYear(c,h,_),Nc(v)},dateType:"day",hover:r,end:w,renderTile:function(_){var v=_.date,A=CA(_,["date"]);return Y.createElement(TU,Bg({key:v.getTime()},u,A,{activeStartDate:e,calendarType:n,currentMonthIndex:h,date:v}))},offset:m,start:y,value:s,valueType:a})}var h8="react-calendar__month-view__weekdays",B1="".concat(h8,"__weekday");function bU(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?Lj:n,i=t.formatWeekday,o=i===void 0?Vj:i,s=t.locale,a=t.onMouseLeave,u=wp(e),l=new Date,c=ks(l),h=et(c),d=Po(c),p=[],m=1;m<=7;m+=1){var y=new Date(h,d,m-ql(c,u)),w=o(s,y);p.push(Y.createElement("div",{key:m,className:mp(B1,qj(y)&&"".concat(B1,"--current"),r8(y,u)&&"".concat(B1,"--weekend"))},Y.createElement("abbr",{"aria-label":w,title:w},r(s,y).replace(".",""))))}return Y.createElement(Rv,{className:h8,count:7,onFocus:a,onMouseOver:a},p)}var gd=function(){return gd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gd.apply(this,arguments)},IA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},TA="react-calendar__tile";function RU(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=Y.createElement("span",null,n);if(e){var i=t.date,o=t.onClickWeekNumber,s=t.weekNumber,a=IA(t,["date","onClickWeekNumber","weekNumber"]);return Y.createElement("button",gd({},a,{className:TA,onClick:function(u){return o(s,i,u)},type:"button"}),r)}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=IA(t,["date","onClickWeekNumber","weekNumber"]);return Y.createElement("div",gd({},a,{className:TA}),r)}}function PU(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,o=t.showFixedNumberOfWeeks,s=wp(n),a=function(){if(o)return 6;var c=Q6(e),h=ql(e,s),d=c-(7-h);return 1+Math.ceil(d/7)}(),u=function(){for(var c=et(e),h=Po(e),d=gp(e),p=[],m=0;m<a;m+=1)p.push(Pg(new Date(c,h,d+m*7),s));return p}(),l=u.map(function(c){return Hj(c,s)});return Y.createElement(Rv,{className:"react-calendar__month-view__weekNumbers",count:a,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},l.map(function(c,h){var d=u[h];if(!d)throw new Error("date is not defined");return Y.createElement(RU,{key:c,date:d,onClickWeekNumber:r,weekNumber:c})}))}var ec=function(){return ec=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ec.apply(this,arguments)},OU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function NU(t){if(t)for(var e=0,n=Object.entries(Cj);e<n.length;e++){var r=n[e],i=r[0],o=r[1];if(o.includes(t))return i}return Ke.ISO_8601}var f8=function(e){var n=e.activeStartDate,r=e.locale,i=e.onMouseLeave,o=e.showFixedNumberOfWeeks,s=e.calendarType,a=s===void 0?NU(r):s,u=e.formatShortWeekday,l=e.formatWeekday,c=e.onClickWeekNumber,h=e.showWeekNumbers,d=OU(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function p(){return Y.createElement(bU,{calendarType:a,formatShortWeekday:u,formatWeekday:l,locale:r,onMouseLeave:i})}function m(){return h?Y.createElement(PU,{activeStartDate:n,calendarType:a,onClickWeekNumber:c,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function y(){return Y.createElement(SU,ec({calendarType:a},d))}var w="react-calendar__month-view";return Y.createElement("div",{className:mp(w,h?"".concat(w,"--weekNumbers"):"")},Y.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},m(),Y.createElement("div",{style:{flexGrow:1,width:"100%"}},p(),y())))};f8.propTypes=ec(ec({},Cp),{calendarType:o8,formatDay:U.func,formatLongDate:U.func,formatShortWeekday:U.func,formatWeekday:U.func,onClickWeekNumber:U.func,onMouseLeave:U.func,showFixedNumberOfWeeks:U.bool,showNeighboringMonth:U.bool,showWeekNumbers:U.bool});var ma=function(){return ma=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ma.apply(this,arguments)},Nh="react-calendar",Ra=["century","decade","year","month"],DU=["decade","year","month","day"],Pv=new Date;Pv.setFullYear(1,0,1);Pv.setHours(0,0,0,0);var xU=new Date(864e13);function Ku(t){return t instanceof Date?t:new Date(t)}function d8(t,e){return Ra.slice(Ra.indexOf(t),Ra.indexOf(e)+1)}function kU(t,e,n){var r=d8(e,n);return r.indexOf(t)!==-1}function Ov(t,e,n){return t&&kU(t,e,n)?t:n}function p8(t){var e=Ra.indexOf(t);return DU[e]}function MU(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=Ku(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function m8(t,e){var n=t.value,r=t.minDate,i=t.maxDate,o=t.maxDetail,s=MU(n,e);if(!s)return null;var a=p8(o),u=function(){switch(e){case 0:return hs(a,s);case 1:return e8(a,s);default:throw new Error("Invalid index value: ".concat(e))}}();return nU(u,r,i)}var Nv=function(t){return m8(t,0)},g8=function(t){return m8(t,1)},LU=function(t){return[Nv,g8].map(function(e){return e(t)})};function y8(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,o=t.value,s=t.view,a=Ov(s,i,n),u=Nv({value:o,minDate:r,maxDate:e,maxDetail:n})||new Date;return hs(a,u)}function VU(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,o=t.maxDate,s=t.maxDetail,a=t.minDate,u=t.minDetail,l=t.value,c=t.view,h=Ov(c,u,s),d=e||n;return d?hs(h,d):y8({maxDate:o,maxDetail:s,minDate:a,minDetail:u,value:l||r,view:c||i})}function F1(t){return t&&(!Array.isArray(t)||t.length===1)}function Dh(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var Dv=N.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,o=e.calendarType,s=e.className,a=e.defaultActiveStartDate,u=e.defaultValue,l=e.defaultView,c=e.formatDay,h=e.formatLongDate,d=e.formatMonth,p=e.formatMonthYear,m=e.formatShortWeekday,y=e.formatWeekday,w=e.formatYear,_=e.goToRangeStartOnSelect,v=_===void 0?!0:_,A=e.inputRef,S=e.locale,x=e.maxDate,M=x===void 0?xU:x,T=e.maxDetail,I=T===void 0?"month":T,R=e.minDate,O=R===void 0?Pv:R,k=e.minDetail,L=k===void 0?"century":k,D=e.navigationAriaLabel,ne=e.navigationAriaLive,ge=e.navigationLabel,de=e.next2AriaLabel,Fe=e.next2Label,G=e.nextAriaLabel,Z=e.nextLabel,J=e.onActiveStartDateChange,W=e.onChange,re=e.onClickDay,se=e.onClickDecade,we=e.onClickMonth,We=e.onClickWeekNumber,ve=e.onClickYear,Ue=e.onDrillDown,Xr=e.onDrillUp,Cn=e.onViewChange,kn=e.prev2AriaLabel,Qt=e.prev2Label,Kr=e.prevAriaLabel,No=e.prevLabel,tt=e.returnValue,Yr=tt===void 0?"start":tt,hn=e.selectRange,Ls=e.showDoubleView,xc=e.showFixedNumberOfWeeks,ru=e.showNavigation,iu=ru===void 0?!0:ru,kc=e.showNeighboringCentury,bp=e.showNeighboringDecade,Vs=e.showNeighboringMonth,ou=Vs===void 0?!0:Vs,Mc=e.showWeekNumbers,Rt=e.tileClassName,Bt=e.tileContent,Bs=e.tileDisabled,Fs=e.value,su=e.view,Lc=N.useState(a),Do=Lc[0],xo=Lc[1],au=N.useState(null),uu=au[0],Vc=au[1],Bc=N.useState(Array.isArray(u)?u.map(function(pe){return pe!==null?Ku(pe):null}):u!=null?Ku(u):null),ko=Bc[0],Fc=Bc[1],lu=N.useState(l),Mo=lu[0],js=lu[1],Pt=r||Do||VU({activeStartDate:r,defaultActiveStartDate:a,defaultValue:u,defaultView:l,maxDate:M,maxDetail:I,minDate:O,minDetail:L,value:Fs,view:su}),lt=function(){var pe=function(){return hn&&F1(ko)?ko:Fs!==void 0?Fs:ko}();return pe?Array.isArray(pe)?pe.map(function(Pe){return Pe!==null?Ku(Pe):null}):pe!==null?Ku(pe):null:null}(),Lo=p8(I),Ve=Ov(su||Mo,L,I),Mn=d8(L,I),Vo=hn?uu:null,Us=Mn.indexOf(Ve)<Mn.length-1,Ot=Mn.indexOf(Ve)>0,cu=N.useCallback(function(pe){var Pe=function(){switch(Yr){case"start":return Nv;case"end":return g8;case"range":return LU;default:throw new Error("Invalid returnValue.")}}();return Pe({maxDate:M,maxDetail:I,minDate:O,value:pe})},[M,I,O,Yr]),qr=N.useCallback(function(pe,Pe){xo(pe);var nt={action:Pe,activeStartDate:pe,value:lt,view:Ve};J&&!Dh(Pt,pe)&&J(nt)},[Pt,J,lt,Ve]),Ir=N.useCallback(function(pe,Pe){var nt=function(){switch(Ve){case"century":return se;case"decade":return ve;case"year":return we;case"month":return re;default:throw new Error("Invalid view: ".concat(Ve,"."))}}();nt&&nt(pe,Pe)},[re,se,we,ve,Ve]),hu=N.useCallback(function(pe,Pe){if(Us){Ir(pe,Pe);var nt=Mn[Mn.indexOf(Ve)+1];if(!nt)throw new Error("Attempted to drill down from the lowest view.");xo(pe),js(nt);var In={action:"drillDown",activeStartDate:pe,value:lt,view:nt};J&&!Dh(Pt,pe)&&J(In),Cn&&Ve!==nt&&Cn(In),Ue&&Ue(In)}},[Pt,Us,J,Ir,Ue,Cn,lt,Ve,Mn]),fu=N.useCallback(function(){if(Ot){var pe=Mn[Mn.indexOf(Ve)-1];if(!pe)throw new Error("Attempted to drill up from the highest view.");var Pe=hs(pe,Pt);xo(Pe),js(pe);var nt={action:"drillUp",activeStartDate:Pe,value:lt,view:pe};J&&!Dh(Pt,Pe)&&J(nt),Cn&&Ve!==pe&&Cn(nt),Xr&&Xr(nt)}},[Pt,Ot,J,Xr,Cn,lt,Ve,Mn]),Tr=N.useCallback(function(pe,Pe){var nt=lt;Ir(pe,Pe);var In=hn&&!F1(nt),fn;if(hn)if(In)fn=hs(Lo,pe);else{if(!nt)throw new Error("previousValue is required");if(Array.isArray(nt))throw new Error("previousValue must not be an array");fn=Kj(Lo,nt,pe)}else fn=cu(pe);var Fo=!hn||In||v?y8({maxDate:M,maxDetail:I,minDate:O,minDetail:L,value:fn,view:Ve}):null;Pe.persist(),xo(Fo),Fc(fn);var Uc={action:"onChange",activeStartDate:Fo,value:fn,view:Ve};if(J&&!Dh(Pt,Fo)&&J(Uc),W)if(hn){var Hc=F1(fn);if(!Hc)W(fn||null,Pe);else if(i){if(Array.isArray(fn))throw new Error("value must not be an array");W([fn||null,null],Pe)}}else W(fn||null,Pe)},[Pt,i,cu,v,M,I,O,L,J,W,Ir,hn,lt,Lo,Ve]);function Rp(pe){Vc(pe)}function du(){Vc(null)}N.useImperativeHandle(n,function(){return{activeStartDate:Pt,drillDown:hu,drillUp:fu,onChange:Tr,setActiveStartDate:qr,value:lt,view:Ve}},[Pt,hu,fu,Tr,qr,lt,Ve]);function Bo(pe){var Pe=pe?J6(Ve,Pt):hs(Ve,Pt),nt=Us?hu:Tr,In={activeStartDate:Pe,hover:Vo,locale:S,maxDate:M,minDate:O,onClick:nt,onMouseOver:hn?Rp:void 0,tileClassName:Rt,tileContent:Bt,tileDisabled:Bs,value:lt,valueType:Lo};switch(Ve){case"century":return Y.createElement(u8,ma({formatYear:w,showNeighboringCentury:kc},In));case"decade":return Y.createElement(l8,ma({formatYear:w,showNeighboringDecade:bp},In));case"year":return Y.createElement(c8,ma({formatMonth:d,formatMonthYear:p},In));case"month":return Y.createElement(f8,ma({calendarType:o,formatDay:c,formatLongDate:h,formatShortWeekday:m,formatWeekday:y,onClickWeekNumber:We,onMouseLeave:hn?du:void 0,showFixedNumberOfWeeks:typeof xc<"u"?xc:Ls,showNeighboringMonth:ou,showWeekNumbers:Mc},In));default:throw new Error("Invalid view: ".concat(Ve,"."))}}function jc(){return iu?Y.createElement(Qj,{activeStartDate:Pt,drillUp:fu,formatMonthYear:p,formatYear:w,locale:S,maxDate:M,minDate:O,navigationAriaLabel:D,navigationAriaLive:ne,navigationLabel:ge,next2AriaLabel:de,next2Label:Fe,nextAriaLabel:G,nextLabel:Z,prev2AriaLabel:kn,prev2Label:Qt,prevAriaLabel:Kr,prevLabel:No,setActiveStartDate:qr,showDoubleView:Ls,view:Ve,views:Mn}):null}var pu=Array.isArray(lt)?lt:[lt];return Y.createElement("div",{className:mp(Nh,hn&&pu.length===1&&"".concat(Nh,"--selectRange"),Ls&&"".concat(Nh,"--doubleView"),s),ref:A},jc(),Y.createElement("div",{className:"".concat(Nh,"__viewContainer"),onBlur:hn?du:void 0,onMouseLeave:hn?du:void 0},Bo(),Ls?Bo(!0):null))}),SA=U.instanceOf(Date),bA=U.oneOfType([U.string,U.instanceOf(Date)]),RA=U.oneOfType([bA,gU(bA)]);Dv.propTypes={activeStartDate:SA,allowPartialRange:U.bool,calendarType:o8,className:dd,defaultActiveStartDate:SA,defaultValue:RA,defaultView:pd,formatDay:U.func,formatLongDate:U.func,formatMonth:U.func,formatMonthYear:U.func,formatShortWeekday:U.func,formatWeekday:U.func,formatYear:U.func,goToRangeStartOnSelect:U.bool,inputRef:dU,locale:U.string,maxDate:a8,maxDetail:U.oneOf(Ra),minDate:s8,minDetail:U.oneOf(Ra),navigationAriaLabel:U.string,navigationAriaLive:U.oneOf(["off","polite","assertive"]),navigationLabel:U.func,next2AriaLabel:U.string,next2Label:U.node,nextAriaLabel:U.string,nextLabel:U.node,onActiveStartDateChange:U.func,onChange:U.func,onClickDay:U.func,onClickDecade:U.func,onClickMonth:U.func,onClickWeekNumber:U.func,onClickYear:U.func,onDrillDown:U.func,onDrillUp:U.func,onViewChange:U.func,prev2AriaLabel:U.string,prev2Label:U.node,prevAriaLabel:U.string,prevLabel:U.node,returnValue:U.oneOf(["start","end","range"]),selectRange:U.bool,showDoubleView:U.bool,showFixedNumberOfWeeks:U.bool,showNavigation:U.bool,showNeighboringCentury:U.bool,showNeighboringDecade:U.bool,showNeighboringMonth:U.bool,showWeekNumbers:U.bool,tileClassName:U.oneOfType([U.func,dd]),tileContent:U.oneOfType([U.func,U.node]),tileDisabled:U.func,value:RA,view:pd};function BU(){const[t,e]=N.useState([]),[n,r]=N.useState(""),[i,o]=N.useState([]),[s,a]=N.useState([]),[u,l]=N.useState("");N.useEffect(()=>Ze(xe(me,"barberos"),y=>{const w=y.docs.map(_=>_.data().nombre);e(w),w.length>0&&!w.includes(n)&&r(w[0])}),[n]),N.useEffect(()=>{if(!n)return;const m=vn(xe(me,"disponibilidades"),kt("barbero","==",n)),y=vn(xe(me,"turnos"),kt("barbero","==",n)),w=Ze(m,v=>{o(v.docs.map(A=>({id:A.id,...A.data()})))}),_=Ze(y,v=>{a(v.docs.map(A=>({id:A.id,...A.data()})))});return()=>{w(),_()}},[n]);const c=m=>{l(m.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}))},h=({date:m,view:y})=>{if(y!=="month")return null;const w=m.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}),_=i.filter(S=>S.fecha===w);if(_.length===0)return null;const v=_.filter(S=>s.some(x=>x.fecha===S.fecha&&x.hora===S.hora)).length,A=_.length-v;return C.jsxs("div",{className:"mt-1 text-[10px]",children:[A>0&&C.jsx("span",{className:"text-green-600",children:"●"}),v>0&&C.jsx("span",{className:"text-red-600 ml-1",children:"●"})]})},d=N.useMemo(()=>i.filter(m=>m.fecha===u),[i,u]),p=async m=>{await Ac(Cr(me,"disponibilidades",m))};return C.jsxs("div",{className:"space-y-4",children:[C.jsx("select",{className:"select select-bordered",value:n,onChange:m=>r(m.target.value),children:t.map(m=>C.jsx("option",{value:m,children:m},m))}),C.jsx(Dv,{onClickDay:c,tileContent:h}),u&&C.jsxs("div",{className:"space-y-2",children:[C.jsxs("h4",{className:"font-semibold",children:["Horarios para ",u]}),d.length===0&&C.jsx("p",{children:"No hay horarios cargados."}),d.map(m=>{const y=s.some(w=>w.fecha===m.fecha&&w.hora===m.hora);return C.jsxs("div",{className:"card bg-base-100 shadow-md p-4 flex justify-between items-start",children:[C.jsxs("div",{children:[C.jsxs("p",{className:"font-semibold",children:[xs(m.hora)," - ",m.servicio]}),y&&C.jsx("span",{className:"badge badge-success mt-2",children:"Agendado"})]}),C.jsx("button",{onClick:()=>p(m.id),className:"btn btn-xs btn-error",children:"Eliminar"})]},m.id)})]})]})}function FU(){const[t,e]=N.useState("nuevo"),n=yv,r=i=>{i==="servicios"||i==="barberos"?window.location.hash=`/admin/${i}`:e(i)};return C.jsxs(gv,{sections:n,current:t,onSelect:r,children:[t==="nuevo"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Nuevo turno"}),C.jsx(V6,{})]})}),t==="recientes"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-4xl mx-auto",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Turnos recientes"}),C.jsx(KF,{})]})}),t==="porBarbero"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-4xl mx-auto",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Turnos por barbero"}),C.jsx(YF,{})]})}),t==="horarios"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Horarios cargados"}),C.jsx(BU,{})]})})]})}function jU(){return C.jsx("div",{className:"hero min-h-screen bg-base-200 p-4",children:C.jsxs("div",{className:"hero-content flex-col w-full max-w-md",children:[C.jsx("img",{src:XS,alt:"Logo Barbería",className:"w-32 mb-4 logo-main"}),C.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Agendar Turno"}),C.jsx("div",{className:"card w-full shadow-2xl bg-base-100",children:C.jsx("div",{className:"card-body",children:C.jsx(V6,{showSteps:!0})})})]})})}function UU(){const[t,e]=N.useState([]),[n,r]=N.useState(""),[i,o]=N.useState("pendiente"),s=N.useRef(null),a=()=>{s.current&&s.current.scrollBy({left:-150,behavior:"smooth"})},u=()=>{s.current&&s.current.scrollBy({left:150,behavior:"smooth"})},l=N.useMemo(()=>{const m=XF();return Array.from(new Set(t.map(w=>w.fecha))).filter(w=>w>=m).sort()},[t]);N.useEffect(()=>{l.length>0&&!l.includes(n)&&r(l[0])},[l,n]),N.useEffect(()=>{let m,y;const w=Fd(go,_=>{if(_){const v=vn(xe(me,"barberos"),kt("email","==",_.email));y=Ze(v,A=>{if(A.empty)e([]);else{const S=A.docs[0].data().nombre,x=vn(xe(me,"turnos"),kt("barbero","==",S));m=Ze(x,M=>{e(M.docs.map(T=>({id:T.id,...T.data()})))})}})}else e([])});return()=>{m&&m(),y&&y(),w()}},[]);const c=async(m,y)=>{await Ec(Cr(me,"turnos",m),{estado:y})},h=N.useMemo(()=>t.filter(m=>m.fecha===n),[t,n]),d=h.filter(m=>(m.estado||"pendiente")==="pendiente").length,p=h.filter(m=>(m.estado||"pendiente")==="atendido").length;return t.length===0?C.jsx("p",{children:"No tienes turnos asignados."}):C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("button",{onClick:a,className:"btn btn-square btn-sm mr-2",children:"❮"}),C.jsx("div",{ref:s,role:"tablist",className:"tabs tabs-boxed flex-1 overflow-x-auto whitespace-nowrap scroll-smooth",children:l.map(m=>C.jsx("button",{role:"tab",className:`tab ${n===m?"tab-active":""}`,onClick:()=>r(m),children:m},m))}),C.jsx("button",{onClick:u,className:"btn btn-square btn-sm ml-2",children:"❯"})]}),C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{role:"tablist",className:"tabs tabs-boxed",children:[{key:"pendiente",label:"Pendientes"},{key:"todos",label:"Todos"},{key:"atendido",label:"Atendidos"},{key:"cancelado",label:"Cancelados"}].map(m=>C.jsx("button",{role:"tab",className:`tab ${i===m.key?"tab-active":""}`,onClick:()=>o(m.key),children:m.label},m.key))})}),C.jsxs("div",{role:"alert",className:"alert alert-info justify-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-6 w-6 shrink-0 stroke-current",children:C.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsxs("span",{children:["Tienes ",h.length," turnos hoy. Pendientes: ",d," – ","Atendidos: ",p]})]}),C.jsx("div",{className:"grid gap-4",children:t.filter(m=>m.fecha===n).filter(m=>i==="todos"?!0:(m.estado||"pendiente")===i).map(m=>C.jsxs("div",{className:"card bg-base-100 shadow-md p-4 space-y-2",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsx("p",{className:"font-semibold",children:m.nombre}),C.jsx("span",{className:`badge ${(m.estado||"pendiente")==="pendiente"?"badge-info":(m.estado||"pendiente")==="atendido"?"badge-success":"badge-error"}`,children:m.estado||"pendiente"})]}),C.jsxs("p",{children:[m.fecha," ",xs(m.hora)," - ",m.servicio]}),C.jsx("div",{className:"flex justify-center",children:C.jsx(L6,{value:m.id,size:64})}),C.jsxs("div",{className:"space-x-2",children:[C.jsx("button",{disabled:(m.estado||"pendiente")!=="pendiente",onClick:()=>c(m.id,"atendido"),className:"btn btn-xs btn-success",children:"✅ Marcar como atendido"}),C.jsx("button",{disabled:(m.estado||"pendiente")!=="pendiente",onClick:()=>confirm("¿Cancelar este turno?")&&c(m.id,"cancelado"),className:"btn btn-xs btn-error",children:"❌ Cancelar turno"})]})]},m.id))})]})}function HU(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,o]=N.useState(""),[s,a]=N.useState([]),[u,l]=N.useState([]),[c,h]=N.useState(!1),[d,p]=N.useState({message:"",type:""}),m=t&&n&&i&&s.length>0&&!c,y=[];for(let v=8;v<=20;v+=2)y.push(`${String(v).padStart(2,"0")}:00`);const w=v=>{a(A=>A.includes(v)?A.filter(S=>S!==v):[...A,v])};N.useEffect(()=>{const v=Ze(xe(me,"servicios"),x=>{l(x.docs.map(M=>({id:M.id,...M.data()})))});let A;const S=Fd(go,x=>{if(x){const M=vn(xe(me,"barberos"),kt("email","==",x.email));A=Ze(M,T=>{T.empty||e(T.docs[0].data().nombre)})}});return()=>{v(),S(),A&&A()}},[]),N.useEffect(()=>{if(d.message){const v=setTimeout(()=>p({message:"",type:""}),3e3);return()=>clearTimeout(v)}},[d]);const _=async()=>{if(!t||!n||!i||s.length===0){p({message:"Complete todos los campos",type:"error"});return}if(!c)try{h(!0),await Promise.all(s.map(v=>op(xe(me,"disponibilidades"),{barbero:t,servicio:n,fecha:i,hora:v,timestamp:new Date}))),p({message:"Horario guardado correctamente",type:"success"}),r(""),o(""),a([])}catch(v){console.error(v),p({message:"Hubo un error al guardar",type:"error"})}finally{h(!1)}};return C.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[C.jsxs("p",{className:"font-semibold",children:["Barbero: ",t||"Cargando..."]}),C.jsxs("select",{className:"border p-2 rounded",value:n,onChange:v=>r(v.target.value),children:[C.jsx("option",{value:"",children:"Seleccione un servicio"}),u.map(v=>C.jsx("option",{value:v.nombre,children:v.nombre},v.id))]}),C.jsx("input",{type:"date",className:"border p-2 rounded",value:i,onChange:v=>o(v.target.value)}),C.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(v=>C.jsx("button",{type:"button",onClick:()=>w(v),className:`btn btn-sm ${s.includes(v)?"btn-primary":"btn-outline"}`,children:xs(v)},v))}),C.jsx("button",{onClick:_,className:"btn btn-primary",disabled:!m,children:c?C.jsx("span",{className:"loading loading-spinner"}):"Agregar horario"}),d.message&&C.jsx("div",{className:"toast toast-top toast-end",children:C.jsx("div",{className:`alert ${d.type==="error"?"alert-error":"alert-success"}`,children:C.jsx("span",{children:d.message})})})]})}function zU(){const[t,e]=N.useState([]),[n,r]=N.useState([]),[i,o]=N.useState("");N.useEffect(()=>{let c,h,d;const p=Fd(go,m=>{if(m){const y=vn(xe(me,"barberos"),kt("email","==",m.email));d=Ze(y,w=>{if(w.empty)e([]);else{const _=w.docs[0].data().nombre,v=vn(xe(me,"disponibilidades"),kt("barbero","==",_));c=Ze(v,S=>{e(S.docs.map(x=>({id:x.id,...x.data()})))});const A=vn(xe(me,"turnos"),kt("barbero","==",_));h=Ze(A,S=>{r(S.docs.map(x=>({id:x.id,...x.data()})))})}})}else e([])});return()=>{c&&c(),h&&h(),d&&d(),p()}},[]);const s=c=>{o(c.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}))},a=({date:c,view:h})=>{if(h!=="month")return null;const d=c.toLocaleDateString("en-CA",{timeZone:"America/Bogota"}),p=t.filter(w=>w.fecha===d);if(p.length===0)return null;const m=p.filter(w=>n.some(_=>_.fecha===w.fecha&&_.hora===w.hora)).length,y=p.length-m;return C.jsxs("div",{className:"mt-1 text-[10px]",children:[y>0&&C.jsx("span",{className:"text-green-600",children:"●"}),m>0&&C.jsx("span",{className:"text-red-600 ml-1",children:"●"})]})},u=N.useMemo(()=>t.filter(c=>c.fecha===i),[t,i]),l=async c=>{await Ac(Cr(me,"disponibilidades",c))};return C.jsxs("div",{className:"space-y-4",children:[C.jsx(Dv,{onClickDay:s,tileContent:a}),i&&C.jsxs("div",{className:"space-y-2",children:[C.jsxs("h4",{className:"font-semibold",children:["Horarios para ",i]}),u.length===0&&C.jsx("p",{children:"No hay horarios cargados."}),u.map(c=>{const h=n.some(d=>d.fecha===c.fecha&&d.hora===c.hora);return C.jsxs("div",{className:"card bg-base-100 shadow-md p-4 flex justify-between items-start",children:[C.jsxs("div",{children:[C.jsxs("p",{className:"font-semibold",children:[xs(c.hora)," - ",c.servicio]}),h&&C.jsx("span",{className:"badge badge-success mt-2",children:"Agendado"})]}),C.jsx("button",{onClick:()=>l(c.id),className:"btn btn-xs btn-error",children:"Eliminar"})]},c.id)})]})]})}function WU(){const[t,e]=N.useState("cargar"),n=[{label:"Horarios",items:[{id:"cargar",label:"Cargar horario",icon:v6},{id:"cargados",label:"Horarios cargados",icon:w6}]},{label:"Turnos",items:[{id:"turnos",label:"Turnos asignados",icon:_6},{id:"scanner",label:"Escanear turno",href:"#/scanner",icon:E6}]}],r=i=>e(i);return C.jsxs("div",{className:"flex",children:[C.jsx(g6,{sections:n,current:t,onSelect:r}),C.jsxs("div",{className:"p-4 space-y-6 flex-1",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("h2",{className:"text-2xl font-bold",children:"Panel del Barbero"}),C.jsx(y6,{})]}),t==="cargar"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300 w-full max-w-md mx-auto",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Cargar horarios disponibles"}),C.jsx(HU,{})]})}),t==="cargados"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Horarios cargados"}),C.jsx(zU,{})]})}),t==="turnos"&&C.jsx("div",{className:"card bg-base-100 shadow border border-base-300",children:C.jsxs("div",{className:"card-body",children:[C.jsx("h3",{className:"card-title",children:"Mis turnos asignados"}),C.jsx(UU,{})]})})]})]})}var es=function(){return es=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},es.apply(this,arguments)};function Fg(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(h){h(c)})).then(s,a)}u((r=r.apply(t,[])).next())})}function jg(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(h){c=[6,h],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var v8={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},$U=typeof navigator<"u"&&navigator.mediaDevices?function(t){var e=N.useState([]),n=e[0],r=e[1];return N.useEffect(function(){var i,o={audio:!1,video:t??v8},s=function(){navigator.mediaDevices.getUserMedia(o).then(function(a){var u=[];i=a,a.getVideoTracks().forEach(function(l){u.push(l.getSettings())}),r(u)}).catch(function(a){return console.log(a)})};return function(a){for(var u=[],l=1;l<arguments.length;l++)u[l-1]=arguments[l];a&&a.addEventListener&&a.addEventListener.apply(a,u)}(navigator.mediaDevices,"devicechange",s),s(),function(){(function(a){for(var u=[],l=1;l<arguments.length;l++)u[l-1]=arguments[l];a&&a.removeEventListener&&a.removeEventListener.apply(a,u)})(navigator.mediaDevices,"devicechange",s),i!==void 0&&i.getVideoTracks().forEach(function(a){a.stop()})}},[]),n}:function(){return[]},GU=function(t){var e,n,r=t.result,i=t.video,o=t.constraints,s=t.deviceId,a=t.scanDelay,u=N.useRef(null),l=$U(o);return N.useEffect(function(){if(r!==void 0&&u.current!==null&&i!==null&&r.getBarcodeFormat()===11){var c=l[0];if(s!==void 0&&l.length>1){var h=l.find(function(S){return S.deviceId===s});h!==void 0&&(c=h)}if(c!==void 0&&c.width!==void 0){var d=c.width/i.clientWidth,p=u.current,m=p.getContext("2d");if(m!==null){var y=setTimeout(function(){m.clearRect(0,0,p.width,p.height)},a);m.strokeStyle="rgba(0, 255, 0, 0.5)",m.lineWidth=4;var w=r.getResultPoints()[0];m.beginPath(),m.arc(w.getX()/d,w.getY()/d,w.estimatedModuleSize,0,2*Math.PI),m.stroke(),m.closePath();var _=r.getResultPoints()[1];m.beginPath(),m.arc(_.getX()/d,_.getY()/d,_.estimatedModuleSize,0,2*Math.PI),m.stroke(),m.closePath();var v=r.getResultPoints()[2];if(m.beginPath(),m.arc(v.getX()/d,v.getY()/d,v.estimatedModuleSize,0,2*Math.PI),m.stroke(),m.closePath(),r.getResultPoints().length>=4){var A=r.getResultPoints()[3];m.beginPath(),m.arc(A.getX()/d,A.getY()/d,A.estimatedModuleSize,0,2*Math.PI),m.stroke(),m.closePath()}return function(){return clearTimeout(y)}}}}}),Y.createElement("canvas",{ref:u,width:(e=i==null?void 0:i.clientWidth)!==null&&e!==void 0?e:0,height:(n=i==null?void 0:i.clientHeight)!==null&&n!==void 0?n:0,style:{position:"absolute",top:0,zIndex:2}})},XU={count:{bottom:0,right:5,fontSize:30,color:"#fff",position:"absolute",zIndex:1}},KU=function(t){var e=t.scanCount;return Y.createElement("div",{style:XU.count},e)},YU=function(t){var e=t.scanCount,n=t.hideCount,r=t.tracker,i=t.border,o=i===void 0?80:i,s=t.result,a=t.video,u=t.constraints,l=t.deviceId,c=t.scanDelay,h=N.useState("rgba(255, 0, 0, 0.5)"),d=h[0],p=h[1];return N.useEffect(function(){if((s==null?void 0:s.getBarcodeFormat())!=11||!r){p("rgba(0, 255, 0, 0.5)");var m=setTimeout(function(){p("rgba(255, 0, 0, 0.5)")},c);return function(){clearTimeout(m)}}p("rgba(255, 0, 0, 0.5)")},[e]),Y.createElement(N.Fragment,null,!n&&Y.createElement(KU,{scanCount:e}),r&&Y.createElement(GU,{video:a,result:s,constraints:u,deviceId:l,scanDelay:c}),Y.createElement("svg",{viewBox:"0 0 100 100",style:{top:0,left:0,zIndex:1,boxSizing:"border-box",border:"".concat(o,"px solid rgba(0, 0, 0, 0.1)"),position:"absolute",width:"100%",height:"100%"}},Y.createElement("path",{fill:"none",d:"M23,0 L0,0 L0,23",stroke:d,strokeWidth:"5"}),Y.createElement("path",{fill:"none",d:"M0,77 L0,100 L23,100",stroke:d,strokeWidth:"5"}),Y.createElement("path",{fill:"none",d:"M77,100 L100,100 L100,77",stroke:d,strokeWidth:"5"}),Y.createElement("path",{fill:"none",d:"M100,23 L100,0 77,0",stroke:d,strokeWidth:"5"})))},xh,kh,Ug,qU=(xh=function(t,e){return xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},xh(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xh(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}),QU=function(t){function e(n,r){var i,o,s,a=this.constructor,u=t.call(this,n,r)||this;return Object.defineProperty(u,"name",{value:a.name,enumerable:!1,configurable:!0}),i=u,o=a.prototype,(s=Object.setPrototypeOf)?s(i,o):i.__proto__=o,function(l,c){c===void 0&&(c=l.constructor);var h=Error.captureStackTrace;h&&h(l,c)}(u),u}return qU(e,t),e}(Error),ZU=(kh=function(t,e){return kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},kh(t,e)},function(t,e){function n(){this.constructor=t}kh(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}),xn=function(t){function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return ZU(e,t),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}(QU),JU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lr=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return JU(e,t),e.kind="ArgumentException",e}(xn),eH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ce=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return eH(e,t),e.kind="IllegalArgumentException",e}(xn),tH=function(){function t(e){if(this.binarizer=e,e===null)throw new ce("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return this.matrix!==null&&this.matrix!==void 0||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var o=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),nH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mt=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return nH(e,t),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(xn),rH=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Je=function(){function t(){}return t.arraycopy=function(e,n,r,i,o){for(;o--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),iH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xv=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return iH(e,t),e.kind="IndexOutOfBoundsException",e}(xn),oH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),PA=function(t){function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return oH(e,t),e.kind="ArrayIndexOutOfBoundsException",e}(xv),sH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var o=n;o<r;o++)e[o]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new ce("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new PA(n);if(r>e)throw new PA(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){return Array.from({length:e}).map(function(i){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){return Array.from({length:e}).map(function(i){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var o=sH(e),s=o.next();!s.done;s=o.next())i=31*i+s.value}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,o=new Int32Array(i);return Je.arraycopy(e,n,o,0,i),o},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(n,e[s]);if(a>0)i=s+1;else{if(!(a<0))return s;o=s-1}}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),mt=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return(n=e<<16)!==0&&(r-=16,e=n),(n=e<<8)!==0&&(r-=8,e=n),(n=e<<4)!==0&&(r-=4,e=n),(n=e<<2)!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return!(e>>>16)&&(n+=16,e<<=16),!(e>>>24)&&(n+=8,e<<=8),!(e>>>28)&&(n+=4,e<<=4),!(e>>>30)&&(n+=2,e<<=2),n-=e>>>31},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),kr=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=n??t.makeArray(e))}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var n=t.makeArray(e);Je.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(31&e))!=0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(31&e))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=r[i]}var a=32*i+mt.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(31&e))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=~r[i]}var a=32*i+mt.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new ce;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),o=this.bits,s=r;s<=i;s++){var a=(2<<(s<i?31:31&n))-(1<<(s>r?0:31&e));o[s]|=a}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new ce;if(n===e)return!0;n--;for(var i=Math.floor(e/32),o=Math.floor(n/32),s=this.bits,a=i;a<=o;a++){var u=(2<<(a<o?31:31&n))-(1<<(a>i?0:31&e))&4294967295;if((s[a]&u)!==(r?u:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)==1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new ce("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;n[r+o]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=(s=(s=(s=(s=s>>1&1431655765|(1431655765&s)<<1)>>2&858993459|(858993459&s)<<2)>>4&252645135|(252645135&s)<<4)>>8&16711935|(16711935&s)<<8)>>16&65535|(65535&s)<<16,e[n-o]=s}if(this.size!==32*r){var a=32*r-this.size,u=e[0]>>>a;for(o=1;o<r;o++){var l=e[o];u|=l<<32-a,e[o-1]=u,u=l>>>a}e[r-1]=u}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&Lt.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+Lt.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)!(7&n)&&(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}();(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ug||(Ug={}));var ke,ot=Ug,aH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return aH(e,t),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(xn),uH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(ke||(ke={}));var Hg,yn=function(){function t(e,n,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,this.values=typeof n=="number"?Int32Array.from([n]):n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var u=this.values,l=0,c=u.length;l!==c;l++){var h=u[l];t.VALUES_TO_ECI.set(h,this)}try{for(var d=uH(s),p=d.next();!p.done;p=d.next()){var m=p.value;t.NAME_TO_ECI.set(m,this)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new X("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new X("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new X("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(ke.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(ke.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(ke.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(ke.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(ke.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(ke.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(ke.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(ke.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(ke.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(ke.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(ke.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(ke.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(ke.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(ke.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(ke.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(ke.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(ke.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(ke.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(ke.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(ke.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(ke.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(ke.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(ke.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(ke.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(ke.Big5,28,"Big5"),t.GB18030=new t(ke.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(ke.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),lH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cf=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return lH(e,t),e.kind="UnsupportedOperationException",e}(xn),di=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof yn?e:yn.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(yn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new cf("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(yn.UTF8)||e.equals(yn.ISO8859_1)||e.equals(yn.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))).split(""),r=[],i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)},t}(),He=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return di.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(ot.CHARACTER_SET)!==void 0)return n.get(ot.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,u=0,l=0,c=0,h=0,d=0,p=0,m=0,y=0,w=0,_=0,v=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,A=0;A<r&&(i||o||s);A++){var S=255&e[A];s&&(a>0?128&S?a--:s=!1:128&S&&(64&S?(a++,32&S?(a++,16&S?(a++,8&S?s=!1:c++):l++):u++):s=!1)),i&&(S>127&&S<160?i=!1:S>159&&(S<192||S===215||S===247)&&_++),o&&(h>0?S<64||S===127||S>252?o=!1:h--:S===128||S===160||S>239?o=!1:S>160&&S<224?(d++,m=0,++p>y&&(y=p)):S>127?(h++,p=0,++m>w&&(w=m)):(p=0,m=0))}return s&&a>0&&(s=!1),o&&h>0&&(o=!1),s&&(v||u+l+c>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||y>=3||w>=3)?t.SHIFT_JIS:i&&o?y===2&&d===2||10*_>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(o,s,a,u,l,c){if(o==="%%")return"%";if(n[++i]!==void 0){o=u?parseInt(u.substr(1)):void 0;var h,d=l?parseInt(l.substr(1)):void 0;switch(c){case"s":h=n[i];break;case"c":h=n[i][0];break;case"f":h=parseFloat(n[i]).toFixed(o);break;case"p":h=parseFloat(n[i]).toPrecision(o);break;case"e":h=parseFloat(n[i]).toExponential(o);break;case"x":h=parseInt(n[i]).toString(d||16);break;case"d":h=parseFloat(parseInt(n[i],d||10).toPrecision(o)).toFixed(0)}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var p=parseInt(a),m=a&&a[0]+""=="0"?"0":" ";h.length<p;)h=s!==void 0?h+m:m+h;return h}})},t.getBytes=function(e,n){return di.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=yn.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=yn.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=yn.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),ye=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=He.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),Ci=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new ce("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),o=0;o<n;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},t.parseFromString=function(e,n,r){if(e===null)throw new ce("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,u=0,l=0;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new ce("row lengths do not match");s=o,u++}l++}else if(e.substring(l,l+n.length)===n)l+=n.length,i[o]=!0,o++;else{if(e.substring(l,l+r.length)!==r)throw new ce("illegal character encountered: "+e.substring(l));l+=r.length,i[o]=!1,o++}if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new ce("row lengths do not match");u++}for(var c=new t(a,u),h=0;h<o;h++)i[h]&&c.set(Math.floor(h%a),Math.floor(h/a));return c},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(31&e)&1)!=0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new ce("input matrix dimensions do not match");for(var n=new kr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,u=e.getRow(o,n).getBitArray(),l=0;l<r;l++)i[a+l]^=u[l]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new ce("Left and top must be nonnegative");if(i<1||r<1)throw new ce("Height and width must be at least 1");var o=e+r,s=n+i;if(s>this.height||o>this.width)throw new ce("The region must fit inside the matrix");for(var a=this.rowSize,u=this.bits,l=n;l<s;l++)for(var c=l*a,h=e;h<o;h++)u[c+Math.floor(h/32)]|=1<<(31&h)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new kr(this.width):n.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)n.setBulk(32*s,i[o+s]);return n},t.prototype.setRow=function(e,n){Je.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new kr(e),i=new kr(e),o=0,s=Math.floor((n+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(n-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(n-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,o=e,s=n,a=-1,u=-1,l=0;l<n;l++)for(var c=0;c<r;c++){var h=i[l*r+c];if(h!==0){if(l<s&&(s=l),l>u&&(u=l),32*c<o){for(var d=0;!(h<<31-d&4294967295);)d++;32*c+d<o&&(o=32*c+d)}if(32*c+31>a){for(d=31;!(h>>>d);)d--;32*c+d>a&&(a=32*c+d)}}}return a<o||u<s?null:Int32Array.from([o,s,a-o+1,u-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,o=r%e*32,s=n[r],a=0;!(s<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=32*Math.floor(r%e),s=n[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Lt.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+Lt.hashCode(this.bits)},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new ye,o=0,s=this.height;o<s;o++){for(var a=0,u=this.width;a<u;a++)i.append(this.get(a,o)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),cH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return cH(e,t),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(xn),hH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fH=function(t){function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return hH(e,t),e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new kr(o):r.clear(),this.initArrays(o);for(var s=i.getRow(n,this.luminances),a=this.buckets,u=0;u<o;u++)a[(255&s[u])>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(a);if(o<3)for(u=0;u<o;u++)(255&s[u])<l&&r.set(u);else{var c=255&s[0],h=255&s[1];for(u=1;u<o-1;u++){var d=255&s[u+1];(4*h-c-d)/2<l&&r.set(u),c=h,h=d}}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new Ci(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var u=Math.floor(i*a/5),l=n.getRow(u,this.luminances),c=Math.floor(4*r/5),h=Math.floor(r/5);h<c;h++)s[(255&l[h])>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(s),p=n.getMatrix();for(a=0;a<i;a++){var m=a*r;for(h=0;h<r;h++)(255&p[m+h])<d&&o.set(h,a)}return o},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,o=0,s=0,a=0;a<r;a++)n[a]>s&&(o=a,s=n[a]),n[a]>i&&(i=n[a]);var u=0,l=0;for(a=0;a<r;a++){var c=a-o;(m=n[a]*c*c)>l&&(u=a,l=m)}if(o>u){var h=o;o=u,u=h}if(u-o<=r/16)throw new j;var d=u-1,p=-1;for(a=u-1;a>o;a--){var m,y=a-o;(m=y*y*(u-a)*(i-n[a]))>p&&(d=a,p=m)}return d<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(rH),dH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pH=function(t){function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return dH(e,t),e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&s++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var u=e.calculateBlackPoints(o,s,a,r,i),l=new Ci(r,i);e.calculateThresholdForBlock(o,s,a,r,i,u,l),this.matrix=l}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,o,s,a,u){for(var l=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>l&&(d=l);for(var p=e.cap(h,2,i-3),m=0;m<r;m++){var y=m<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var w=e.cap(m,2,r-3),_=0,v=-2;v<=2;v++){var A=a[p+v];_+=A[w-2]+A[w-1]+A[w]+A[w+1]+A[w+2]}var S=_/25;e.thresholdBlock(n,y,d,S,o,u)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,o,s,a){for(var u=0,l=i*s+r;u<e.BLOCK_SIZE;u++,l+=s)for(var c=0;c<e.BLOCK_SIZE;c++)(255&n[l+c])<=o&&a.set(r+c,i+u)},e.calculateBlackPoints=function(n,r,i,o,s){for(var a=s-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,l=new Array(i),c=0;c<i;c++){l[c]=new Int32Array(r);var h=c<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var d=0;d<r;d++){var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var m=0,y=255,w=0,_=0,v=h*o+p;_<e.BLOCK_SIZE;_++,v+=o){for(var A=0;A<e.BLOCK_SIZE;A++){var S=255&n[v+A];m+=S,S<y&&(y=S),S>w&&(w=S)}if(w-y>e.MIN_DYNAMIC_RANGE)for(_++,v+=o;_<e.BLOCK_SIZE;_++,v+=o)for(A=0;A<e.BLOCK_SIZE;A++)m+=255&n[v+A]}var x=m>>2*e.BLOCK_SIZE_POWER;if(w-y<=e.MIN_DYNAMIC_RANGE&&(x=y/2,c>0&&d>0)){var M=(l[c-1][d]+2*l[c][d-1]+l[c-1][d-1])/4;y<M&&(x=M)}l[c][d]=x}}return l},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(fH),Ip=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new cf("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new cf("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new cf("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new ye,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=255&i[o],a=void 0;a=s<64?"#":s<128?"+":s<192?".":" ",n.append(a)}n.append(`
`)}return n.toString()},t}(),mH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kv=function(t){function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return mH(e,t),e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(255&i[s]);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(255&n[o]);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,o){return new e(this.delegate.crop(n,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Ip),gH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yH=function(t){function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(n),r}return gH(e,t),e.makeBufferFromCanvasImageData=function(n){var r=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(r.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,r,i){var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,a=0,u=n.length;s<u;s+=4,a++){var l=void 0;n[s+3]===0?l=255:l=306*n[s]+601*n[s+1]+117*n[s+2]+512>>10,o[a]=l}else{s=0,a=0;for(var c=n.length;s<c;s+=4,a++)l=void 0,n[s+3]===0?l=255:l=306*n[s]+601*n[s+1]+117*n[s+2]+512>>10,o[a]=255-l}return o},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new ce("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),l=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=u,r.height=l,i.translate(u/2,l/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new kv(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Ip),vH=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),dn=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(h){h(c)})).then(s,a)}u((r=r.apply(t,[])).next())})},pn=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(h){c=[6,h],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}},_H=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nu=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return dn(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,l,c,h,d;return pn(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),n=[];try{for(r=_H(e),i=r.next();!i.done;i=r.next())o=i.value,(s=o.kind==="video"?"videoinput":o.kind)==="videoinput"&&(a=o.deviceId||o.id,u=o.label||"Video device "+(n.length+1),l=o.groupId,c={deviceId:a,label:u,kind:s,groupId:l},n.push(c))}catch(m){h={error:m}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(h)throw h.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return dn(this,void 0,void 0,function(){return pn(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map(function(n){return new vH(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return dn(this,void 0,void 0,function(){var n;return pn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(n=r.sent())?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return dn(this,void 0,void 0,function(){return pn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return dn(this,void 0,void 0,function(){var r;return pn(this,function(i){switch(i.label){case 0:return this.reset(),r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return dn(this,void 0,void 0,function(){var r;return pn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return dn(this,void 0,void 0,function(){var r;return pn(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=i.sent(),[4,this.decodeOnce(r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return dn(this,void 0,void 0,function(){return pn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return dn(this,void 0,void 0,function(){var i;return pn(this,function(o){switch(o.label){case 0:return i={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(i,n,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return dn(this,void 0,void 0,function(){var i;return pn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return dn(this,void 0,void 0,function(){var i;return pn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return dn(this,void 0,void 0,function(){var r;return pn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return dn(this,void 0,void 0,function(){return pn(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new lr("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new lr("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new lr("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new lr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new lr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new lr("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);return this.imageElement=n,this.isImageLoaded(n)?this.decodeOnce(n,!1,!0):this._decodeOnLoadImage(n)},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new lr("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new lr("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new lr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new lr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return dn(this,void 0,void 0,function(){return pn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return dn(this,void 0,void 0,function(){return pn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!!e.complete&&e.naturalWidth!==0},t.prototype.prepareImageElement=function(e){var n;return e===void 0&&((n=document.createElement("img")).width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return e||typeof document>"u"||((n=document.createElement("video")).width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode)return a(new j("Video stream has ended before any code could be detected.")),void(i._stopAsyncDecode=void 0);try{s(i.decode(e))}catch(u){if(n&&u instanceof j||(u instanceof Mt||u instanceof X)&&r)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(u)}};return new Promise(function(s,a){return o(s,a)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode)r._stopContinuousDecode=void 0;else try{var o=r.decode(e);n(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(s){n(null,s),(s instanceof Mt||s instanceof X||s instanceof j)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),r=new yH(n),i=new pH(r);return new tH(i)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n,r,i=document.createElement("canvas");return e!==void 0&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),i.style.width=n+"px",i.style.height=r+"px",i.width=n,i.height=r,i},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(this.videoEndedListener!==void 0&&this.videoElement.removeEventListener("ended",this.videoEndedListener),this.videoPlayingEventListener!==void 0&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),this.videoCanPlayListener!==void 0&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),cn=function(){function t(e,n,r,i,o,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=Je.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=n,this.numBits=r??(n==null?0:8*n.length),this.resultPoints=i,this.format=o,this.resultMetadata=null,this.timestamp=s??Je.currentTimeMillis()}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Je.arraycopy(n,0,r,0,n.length),Je.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}();(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Hg||(Hg={}));var zg,oe=Hg;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(zg||(zg={}));var Ut,Gt=zg,Tp=function(){function t(e,n,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Yu=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new ce;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),yl=function(){function t(e,n){if(n.length===0)throw new ce;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Je.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n,r=this.coefficients;if(e===1){n=0;for(var i=0,o=r.length;i!==o;i++){var s=r[i];n=Yu.addOrSubtract(n,s)}return n}n=r[0];var a=r.length,u=this.field;for(i=1;i<a;i++)n=Yu.addOrSubtract(u.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;Je.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=Yu.addOrSubtract(n[a-s],r[a]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,u=0;u<r;u++)for(var l=n[u],c=0;c<o;c++)s[u+c]=Yu.addOrSubtract(s[u+c],a.multiply(l,i[c]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(o[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new ce;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],n);return new t(s,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new ce("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=n.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),u=n.multiply(i.getCoefficient(i.getDegree()),s),l=e.multiplyByMonomial(a,u),c=n.buildMonomial(a,u);r=r.addOrSubtract(c),i=i.addOrSubtract(l)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),wH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_8=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return wH(e,t),e.kind="ArithmeticException",e}(xn),EH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ki=function(t){function e(n,r,i){var o=t.call(this)||this;o.primitive=n,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,u=0;u<r;u++)s[u]=a,(a*=2)>=r&&(a^=n,a&=r-1);o.expTable=s;var l=new Int32Array(r);for(u=0;u<r-1;u++)l[s[u]]=u;return o.logTable=l,o.zero=new yl(o,Int32Array.from([0])),o.one=new yl(o,Int32Array.from([1])),o}return EH(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new ce;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new yl(this,i)},e.prototype.inverse=function(n){if(n===0)throw new _8;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+mt.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Yu),AH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mh=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return AH(e,t),e.kind="ReedSolomonException",e}(xn),CH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dc=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return CH(e,t),e.kind="IllegalStateException",e}(xn),Sp=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new yl(r,e),o=new Int32Array(n),s=!0,a=0;a<n;a++){var u=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=u,u!==0&&(s=!1)}if(!s){var l=new yl(r,o),c=this.runEuclideanAlgorithm(r.buildMonomial(n,1),l,n),h=c[0],d=c[1],p=this.findErrorLocations(h),m=this.findErrorMagnitudes(d,p);for(a=0;a<p.length;a++){var y=e.length-1-r.log(p[a]);if(y<0)throw new Mh("Bad error location");e[y]=Ki.addOrSubtract(e[y],m[a])}}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=this.field,s=e,a=n,u=o.getZero(),l=o.getOne();a.getDegree()>=(r/2|0);){var c=s,h=u;if(u=l,(s=a).isZero())throw new Mh("r_{i-1} was zero");a=c;for(var d=o.getZero(),p=s.getCoefficient(s.getDegree()),m=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var y=a.getDegree()-s.getDegree(),w=o.multiply(a.getCoefficient(a.getDegree()),m);d=d.addOrSubtract(o.buildMonomial(y,w)),a=a.addOrSubtract(s.multiplyByMonomial(y,w))}if(l=d.multiply(u).addOrSubtract(h),a.getDegree()>=s.getDegree())throw new Dc("Division algorithm failed to reduce polynomial?")}var _=l.getCoefficient(0);if(_===0)throw new Mh("sigmaTilde(0) was zero");var v=o.inverse(_);return[l.multiplyScalar(v),a.multiplyScalar(v)]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,o=this.field,s=1;s<o.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==n)throw new Mh("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(n[s]),u=1,l=0;l<r;l++)if(s!==l){var c=o.multiply(n[l],a),h=1&c?-2&c:1|c;u=o.multiply(u,h)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(u)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},t}();(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Ut||(Ut={}));var OA=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),a=new Tp(o,s,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=Ut.UPPER,i=Ut.UPPER,o="",s=0;s<n;)if(i===Ut.BINARY){if(n-s<5)break;var a=t.readCode(e,s,5);if(s+=5,a===0){if(n-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var u=0;u<a;u++){if(n-s<8){s=n;break}var l=t.readCode(e,s,8);o+=He.castAsNonUtf8Char(l),s+=8}i=r}else{var c=i===Ut.DIGIT?4:5;if(n-s<c)break;l=t.readCode(e,s,c),s+=c;var h=t.getCharacter(i,l);h.startsWith("CTRL_")?(r=i,i=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(r=i)):(o+=h,i=r)}return o},t.getTable=function(e){switch(e){case"L":return Ut.LOWER;case"P":return Ut.PUNCT;case"M":return Ut.MIXED;case"D":return Ut.DIGIT;case"B":return Ut.BINARY;default:return Ut.UPPER}},t.getCharacter=function(e,n){switch(e){case Ut.UPPER:return t.UPPER_TABLE[n];case Ut.LOWER:return t.LOWER_TABLE[n];case Ut.MIXED:return t.MIXED_TABLE[n];case Ut.PUNCT:return t.PUNCT_TABLE[n];case Ut.DIGIT:return t.DIGIT_TABLE[n];default:throw new Dc("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=Ki.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=Ki.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=Ki.AZTEC_DATA_10):(r=12,n=Ki.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new X;for(var s=e.length%r,a=new Int32Array(o),u=0;u<o;u++,s+=r)a[u]=t.readCode(e,s,r);try{new Sp(n).decode(a,o-i)}catch(y){throw new X(y)}var l=(1<<r)-1,c=0;for(u=0;u<i;u++){if((p=a[u])===0||p===l)throw new X;p!==1&&p!==l-1||c++}var h=new Array(i*r-c),d=0;for(u=0;u<i;u++){var p;if((p=a[u])===1||p===l-1)h.fill(p>1,d,d+r-1),d+=r-1;else for(var m=r-1;m>=0;--m)h[d++]=(p&1<<m)!=0}return h},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+4*r,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var a=0;a<o.length;a++)o[a]=a;else{var u=i+1+2*mt.truncDivision(mt.truncDivision(i,2)-1,15),l=i/2,c=mt.truncDivision(u,2);for(a=0;a<l;a++){var h=a+mt.truncDivision(a,15);o[l-a-1]=c-h-1,o[l+a]=c+h+1}}a=0;for(var d=0;a<r;a++){for(var p=4*(r-a)+(n?9:12),m=2*a,y=i-1-m,w=0;w<p;w++)for(var _=2*w,v=0;v<2;v++)s[d+_+v]=e.get(o[m+v],o[m+w]),s[d+2*p+_+v]=e.get(o[m+w],o[y-v]),s[d+4*p+_+v]=e.get(o[y-v],o[y-w]),s[d+6*p+_+v]=e.get(o[y-w],o[m+v]);d+=8*p}return s},t.readCode=function(e,n,r){for(var i=0,o=n;o<n+r;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),be=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var o=e-r,s=n-i;return Math.sqrt(o*o+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++)n+=e[r];return n},t}(),Wg=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),te=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*Wg.floatToIntBits(this.x)+Wg.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n,r,i,o=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(s>=o&&s>=a?(r=e[0],n=e[1],i=e[2]):a>=s&&a>=o?(r=e[1],n=e[0],i=e[2]):(r=e[2],n=e[0],i=e[1]),this.crossProductZ(n,r,i)<0){var u=n;n=i,i=u}e[0]=n,e[1]=r,e[2]=i},t.distance=function(e,n){return be.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,o=n.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},t}(),Mv=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),IH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TH=function(t){function e(n,r,i,o,s){var a=t.call(this,n,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return IH(e,t),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Mv),$g=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,u=!1,l=!1,c=!1,h=!1,d=this.width,p=this.height;s;){s=!1;for(var m=!0;(m||!u)&&n<d;)(m=this.containsBlackPoint(r,i,n,!1))?(n++,s=!0,u=!0):u||n++;if(n>=d){o=!0;break}for(var y=!0;(y||!l)&&i<p;)(y=this.containsBlackPoint(e,n,i,!0))?(i++,s=!0,l=!0):l||i++;if(i>=p){o=!0;break}for(var w=!0;(w||!c)&&e>=0;)(w=this.containsBlackPoint(r,i,e,!1))?(e--,s=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var _=!0;(_||!h)&&r>=0;)(_=this.containsBlackPoint(e,n,r,!0))?(r--,s=!0,h=!0):h||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var v=n-e,A=null,S=1;A===null&&S<v;S++)A=this.getBlackPointOnSegment(e,i-S,e+S,i);if(A==null)throw new j;var x=null;for(S=1;x===null&&S<v;S++)x=this.getBlackPointOnSegment(e,r+S,e+S,r);if(x==null)throw new j;var M=null;for(S=1;M===null&&S<v;S++)M=this.getBlackPointOnSegment(n,r+S,n-S,r);if(M==null)throw new j;var T=null;for(S=1;T===null&&S<v;S++)T=this.getBlackPointOnSegment(n,i-S,n-S,i);if(T==null)throw new j;return this.centerEdges(T,A,M,x)}throw new j},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var o=be.round(be.distance(e,n,r,i)),s=(r-e)/o,a=(i-n)/o,u=this.image,l=0;l<o;l++){var c=be.round(e+l*s),h=be.round(n+l*a);if(u.get(c,h))return new te(c,h)}return null},t.prototype.centerEdges=function(e,n,r,i){var o=e.getX(),s=e.getY(),a=n.getX(),u=n.getY(),l=r.getX(),c=r.getY(),h=i.getX(),d=i.getY(),p=t.CORR;return o<this.width/2?[new te(h-p,d+p),new te(a+p,u+p),new te(l-p,c-p),new te(o+p,s-p)]:[new te(h+p,d+p),new te(a+p,u-p),new te(l-p,c+p),new te(o-p,s-p)]},t.prototype.containsBlackPoint=function(e,n,r,i){var o=this.image;if(i){for(var s=e;s<=n;s++)if(o.get(s,r))return!0}else for(var a=e;a<=n;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),NA=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<n.length&&o;s+=2){var a=Math.floor(n[s]),u=Math.floor(n[s+1]);if(a<-1||a>r||u<-1||u>i)throw new j;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),u===-1?(n[s+1]=0,o=!0):u===i&&(n[s+1]=i-1,o=!0)}for(o=!0,s=n.length-2;s>=0&&o;s-=2){if(a=Math.floor(n[s]),u=Math.floor(n[s+1]),a<-1||a>r||u<-1||u>i)throw new j;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),u===-1?(n[s+1]=0,o=!0):u===i&&(n[s+1]=i-1,o=!0)}},t}(),w8=function(){function t(e,n,r,i,o,s,a,u,l){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=u,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,n,r,i,o,s,a,u,l,c,h,d,p,m,y,w){var _=t.quadrilateralToSquare(e,n,r,i,o,s,a,u);return t.squareToQuadrilateral(l,c,h,d,p,m,y,w).times(_)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,u=this.a23,l=this.a31,c=this.a32,h=this.a33,d=0;d<n;d+=2){var p=e[d],m=e[d+1],y=o*p+u*m+h;e[d]=(r*p+s*m+l)/y,e[d+1]=(i*p+a*m+c)/y}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,u=this.a23,l=this.a31,c=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var m=e[p],y=n[p],w=o*m+u*y+h;e[p]=(r*m+s*y+l)/w,n[p]=(i*m+a*y+c)/w}},t.squareToQuadrilateral=function(e,n,r,i,o,s,a,u){var l=e-r+o-a,c=n-i+s-u;if(l===0&&c===0)return new t(r-e,o-r,e,i-n,s-i,n,0,0,1);var h=r-o,d=a-o,p=i-s,m=u-s,y=h*m-d*p,w=(l*m-d*c)/y,_=(h*c-l*p)/y;return new t(r-e+w*r,a-e+_*a,e,i-n+w*i,u-n+_*u,n,w,_,1)},t.quadrilateralToSquare=function(e,n,r,i,o,s,a,u){return t.squareToQuadrilateral(e,n,r,i,o,s,a,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),SH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bH=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return SH(e,t),e.prototype.sampleGrid=function(n,r,i,o,s,a,u,l,c,h,d,p,m,y,w,_,v,A,S){var x=w8.quadrilateralToQuadrilateral(o,s,a,u,l,c,h,d,p,m,y,w,_,v,A,S);return this.sampleGridWithTransform(n,r,i,x)},e.prototype.sampleGridWithTransform=function(n,r,i,o){if(r<=0||i<=0)throw new j;for(var s=new Ci(r,i),a=new Float32Array(2*r),u=0;u<i;u++){for(var l=a.length,c=u+.5,h=0;h<l;h+=2)a[h]=h/2+.5,a[h+1]=c;o.transformPoints(a),NA.checkAndNudgePoints(n,a);try{for(h=0;h<l;h+=2)n.get(Math.floor(a[h]),Math.floor(a[h+1]))&&s.set(h/2,u)}catch{throw new j}}return s},e}(NA),Lv=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new bH,t}(),Tn=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new te(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),RH=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new TH(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new j;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(o,s,a){r=(r<<3)+((o>>n-2<<1)+(1&o))}),r=((1&r)<<11)+(r>>1);for(var i=0;i<4;i++)if(mt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new j},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=15&e,e>>=4;try{new Sp(Ki.AZTEC_PARAM).decode(s,o)}catch{throw new j}var u=0;for(a=0;a<i;a++)u=(u<<4)+s[a];return u},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(n,s,1,-1),u=this.getFirstDifferent(r,s,1,1),l=this.getFirstDifferent(i,s,-1,1),c=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,n)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,u,l,c))break}n=a,r=u,i=l,o=c,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new j;this.compact=this.nbCenterLayers===5;var d=new te(n.getX()+.5,n.getY()-.5),p=new te(r.getX()+.5,r.getY()+.5),m=new te(i.getX()-.5,i.getY()+.5),y=new te(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,p,m,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{e=(l=new $g(this.image).detect())[0],n=l[1],r=l[2],i=l[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Tn(o+7,s-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Tn(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Tn(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Tn(o-7,s-7),!1,-1,-1).toResultPoint()}var a=be.round((e.getX()+i.getX()+n.getX()+r.getX())/4),u=be.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var l;e=(l=new $g(this.image,15,a,u).detect())[0],n=l[1],r=l[2],i=l[3]}catch{e=this.getFirstDifferent(new Tn(a+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Tn(a+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Tn(a-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Tn(a-7,u-7),!1,-1,-1).toResultPoint()}return a=be.round((e.getX()+i.getX()+n.getX()+r.getX())/4),u=be.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new Tn(a,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,o){var s=Lv.getInstance(),a=this.getDimension(),u=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,u,u,l,u,l,l,u,l,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,o=this.distanceResultPoint(e,n),s=o/r,a=e.getX(),u=e.getY(),l=s*(n.getX()-e.getX())/o,c=s*(n.getY()-e.getY())/o,h=0;h<r;h++)this.image.get(be.round(a+h*l),be.round(u+h*c))&&(i|=1<<r-h-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){e=new Tn(e.getX()-3,e.getY()+3),n=new Tn(n.getX()-3,n.getY()-3),r=new Tn(r.getX()+3,r.getY()-3),i=new Tn(i.getX()+3,i.getY()+3);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,n);return s===o&&(s=this.getColor(n,r))===o&&(s=this.getColor(r,i))===o},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,o=(n.getY()-e.getY())/r,s=0,a=e.getX(),u=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(r),h=0;h<c;h++)a+=i,u+=o,this.image.get(be.round(a),be.round(u))!==l&&s++;var d=s/r;return d>.1&&d<.9?0:d<=.1===l?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===n;)s+=i;return new Tn(o,s-=i)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,l=new te(a+i*o,u+i*s),c=new te(a-i*o,u-i*s);return o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2,[l,new te(a+i*o,u+i*s),c,new te(a-i*o,u-i*s)]},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=be.round(e.getX()),r=be.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return be.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return be.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(mt.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Gg=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new RH(e.getBlackMatrix()),o=null,s=null;try{o=(a=i.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(n,o),s=new OA().decode(a)}catch(h){r=h}if(s==null)try{var a;o=(a=i.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(n,o),s=new OA().decode(a)}catch(h){throw r??h}var u=new cn(s.getText(),s.getRawBytes(),s.getNumBits(),o,oe.AZTEC,Je.currentTimeMillis()),l=s.getByteSegments();l!=null&&u.putMetadata(Gt.BYTE_SEGMENTS,l);var c=s.getECLevel();return c!=null&&u.putMetadata(Gt.ERROR_CORRECTION_LEVEL,c),u},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(ot.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),PH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n){return n===void 0&&(n=500),t.call(this,new Gg,n)||this}PH(e,t)})(nu);var St=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(ot.TRY_HARDER)===!0&&e.isRotateSupported()){var r=e.rotateCounterClockwise(),i=this.doDecode(r,n),o=i.getResultMetadata(),s=270;o!==null&&o.get(Gt.ORIENTATION)===!0&&(s+=o.get(Gt.ORIENTATION)%360),i.putMetadata(Gt.ORIENTATION,s);var a=i.getResultPoints();if(a!==null)for(var u=r.getHeight(),l=0;l<a.length;l++)a[l]=new te(u-a[l].getY()-1,a[l].getX());return i}throw new j}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r,i=e.getWidth(),o=e.getHeight(),s=new kr(i),a=n&&n.get(ot.TRY_HARDER)===!0,u=Math.max(1,o>>(a?8:5));r=a?o:15;for(var l=Math.trunc(o/2),c=0;c<r;c++){var h=Math.trunc((c+1)/2),d=l+u*(1&c?-h:h);if(d<0||d>=o)break;try{s=e.getBlackRow(d,s)}catch{continue}for(var p=function(_){if(_===1&&(s.reverse(),n&&n.get(ot.NEED_RESULT_POINT_CALLBACK)===!0)){var v=new Map;n.forEach(function(x,M){return v.set(M,x)}),v.delete(ot.NEED_RESULT_POINT_CALLBACK),n=v}try{var A=m.decodeRow(d,s,n);if(_===1){A.putMetadata(Gt.ORIENTATION,180);var S=A.getResultPoints();S!==null&&(S[0]=new te(i-S[0].getX()-1,S[0].getY()),S[1]=new te(i-S[1].getX()-1,S[1].getY()))}return{value:A}}catch{}},m=this,y=0;y<2;y++){var w=p(y);if(typeof w=="object")return w.value}}throw new j},t.recordPattern=function(e,n,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(n>=s)throw new j;for(var a=!e.get(n),u=0,l=n;l<s;){if(e.get(l)!==a)r[u]++;else{if(++u===i)break;r[u]=1,a=!a}l++}if(u!==i&&(u!==i-1||l!==s))throw new j},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,o=e.get(n);n>0&&i>=0;)e.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new j;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return Number.POSITIVE_INFINITY;var u=o/s;r*=u;for(var l=0,c=0;c<i;c++){var h=e[c],d=n[c]*u,p=h>d?h-d:d-h;if(p>r)return Number.POSITIVE_INFINITY;l+=p}return l/o},t}(),OH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DA=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return OH(e,t),e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,u=!1,l=i;l<r;l++)if(n.get(l)!==u)s[o]++;else{if(o===5){for(var c=e.MAX_AVG_VARIANCE,h=-1,d=e.CODE_START_A;d<=e.CODE_START_C;d++){var p=St.patternMatchVariance(s,e.CODE_PATTERNS[d],e.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,h=d)}if(h>=0&&n.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,h]);a+=s[0]+s[1],(s=s.slice(2,s.length-1))[o-1]=0,s[o]=0,o--}else o++;s[o]=1,u=!u}throw new j},e.decodeCode=function(n,r,i){St.recordPattern(n,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var u=e.CODE_PATTERNS[a],l=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,s=a)}if(s>=0)return s;throw new j},e.prototype.decodeRow=function(n,r,i){var o,s=i&&i.get(ot.ASSUME_GS1)===!0,a=e.findStartPattern(r),u=a[2],l=0,c=new Uint8Array(20);switch(c[l++]=u,u){case e.CODE_START_A:o=e.CODE_CODE_A;break;case e.CODE_START_B:o=e.CODE_CODE_B;break;case e.CODE_START_C:o=e.CODE_CODE_C;break;default:throw new X}for(var h=!1,d=!1,p="",m=a[0],y=a[1],w=Int32Array.from([0,0,0,0,0,0]),_=0,v=0,A=u,S=0,x=!0,M=!1,T=!1;!h;){var I=d;switch(d=!1,_=v,v=e.decodeCode(r,w,y),c[l++]=v,v!==e.CODE_STOP&&(x=!0),v!==e.CODE_STOP&&(A+=++S*v),m=y,y+=w.reduce(function(Fe,G){return Fe+G},0),v){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new X}switch(o){case e.CODE_CODE_A:if(v<64)p+=T===M?String.fromCharCode(32+v):String.fromCharCode(32+v+128),T=!1;else if(v<96)p+=T===M?String.fromCharCode(v-64):String.fromCharCode(v+64),T=!1;else switch(v!==e.CODE_STOP&&(x=!1),v){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!M&&T?(M=!0,T=!1):M&&T?(M=!1,T=!1):T=!0;break;case e.CODE_SHIFT:d=!0,o=e.CODE_CODE_B;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0}break;case e.CODE_CODE_B:if(v<96)p+=T===M?String.fromCharCode(32+v):String.fromCharCode(32+v+128),T=!1;else switch(v!==e.CODE_STOP&&(x=!1),v){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!M&&T?(M=!0,T=!1):M&&T?(M=!1,T=!1):T=!0;break;case e.CODE_SHIFT:d=!0,o=e.CODE_CODE_A;break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0}break;case e.CODE_CODE_C:if(v<100)v<10&&(p+="0"),p+=v;else switch(v!==e.CODE_STOP&&(x=!1),v){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0}}I&&(o=o===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=y-m;if(y=r.getNextUnset(y),!r.isRange(y,Math.min(r.getSize(),y+(y-m)/2),!1))throw new j;if((A-=S*_)%103!==_)throw new Mt;var O=p.length;if(O===0)throw new j;O>0&&x&&(p=o===e.CODE_CODE_C?p.substring(0,O-2):p.substring(0,O-1));for(var k=(a[1]+a[0])/2,L=m+R/2,D=c.length,ne=new Uint8Array(D),ge=0;ge<D;ge++)ne[ge]=c[ge];var de=[new te(k,n),new te(L,n)];return new cn(p,ne,0,de,oe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(St),NH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xA=function(t){function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return NH(e,t),e.prototype.decodeRow=function(n,r,i){var o,s,a,u,l=this.counters;l.fill(0),this.decodeRowResult="";var c,h,d=e.findAsteriskPattern(r,l),p=r.getNextSet(d[1]),m=r.getSize();do{e.recordPattern(r,p,l);var y=e.toNarrowWidePattern(l);if(y<0)throw new j;c=e.patternToChar(y),this.decodeRowResult+=c,h=p;try{for(var w=(o=void 0,j1(l)),_=w.next();!_.done;_=w.next())p+=_.value}catch(k){o={error:k}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}p=r.getNextSet(p)}while(c!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var v,A=0;try{for(var S=j1(l),x=S.next();!x.done;x=S.next())A+=x.value}catch(k){a={error:k}}finally{try{x&&!x.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}if(p!==m&&2*(p-h-A)<A)throw new j;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,T=0,I=0;I<M;I++)T+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(T%43))throw new Mt;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new j;v=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var R=(d[1]+d[0])/2,O=h+A/2;return new cn(v,null,0,[new te(R,n),new te(O,n)],oe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),o=n.getNextSet(0),s=0,a=o,u=!1,l=r.length,c=o;c<i;c++)if(n.get(c)!==u)r[s]++;else{if(s===l-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,u=!u}throw new j},e.toNarrowWidePattern=function(n){var r,i,o,s=n.length,a=0;do{var u=2147483647;try{for(var l=(r=void 0,j1(n)),c=l.next();!c.done;c=l.next())(m=c.value)<u&&m>a&&(u=m)}catch(y){r={error:y}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}a=u,o=0;for(var h=0,d=0,p=0;p<s;p++)(m=n[p])>a&&(d|=1<<s-1-p,o++,h+=m);if(o===3){for(p=0;p<s&&o>0;p++){var m;if((m=n[p])>a&&(o--,2*m>=h))return-1}return d}}while(o>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new j},e.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=n.charAt(o+1),u="\0";switch(s){case"+":if(!(a>="A"&&a<="Z"))throw new X;u=String.fromCharCode(a.charCodeAt(0)+32);break;case"$":if(!(a>="A"&&a<="Z"))throw new X;u=String.fromCharCode(a.charCodeAt(0)-64);break;case"%":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else{if(a!=="X"&&a!=="Y"&&a!=="Z")throw new X;u=""}break;case"/":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else{if(a!=="Z")throw new X;u=":"}}i+=u,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(St),DH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),U1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kA=function(t){function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return DH(e,t),e.prototype.decodeRow=function(n,r,i){var o,s,a,u,l,c,h=this.findAsteriskPattern(r),d=r.getNextSet(h[1]),p=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";do{e.recordPattern(r,d,m);var y=this.toPattern(m);if(y<0)throw new j;l=this.patternToChar(y),this.decodeRowResult+=l,c=d;try{for(var w=(o=void 0,U1(m)),_=w.next();!_.done;_=w.next())d+=_.value}catch(I){o={error:I}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while(l!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var v=0;try{for(var A=U1(m),S=A.next();!S.done;S=A.next())v+=S.value}catch(I){a={error:I}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(a)throw a.error}}if(d===p||!r.get(d))throw new j;if(this.decodeRowResult.length<2)throw new j;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var x=this.decodeExtended(this.decodeRowResult),M=(h[1]+h[0])/2,T=c+v/2;return new cn(x,null,0,[new te(M,n),new te(T,n)],oe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,u=o.length,l=0,c=i;c<r;c++)if(n.get(c)!==a)o[l]++;else{if(l===u-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,c]);s+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,a=!a}throw new j},e.prototype.toPattern=function(n){var r,i,o=0;try{for(var s=U1(n),a=s.next();!a.done;a=s.next())o+=a.value}catch(p){r={error:p}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,l=n.length,c=0;c<l;c++){var h=Math.round(9*n[c]/o);if(h<1||h>4)return-1;if(1&c)u<<=h;else for(var d=0;d<h;d++)u=u<<1|1}return u},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new j},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new X;var a=n.charAt(o+1),u="\0";switch(s){case"d":if(!(a>="A"&&a<="Z"))throw new X;u=String.fromCharCode(a.charCodeAt(0)+32);break;case"a":if(!(a>="A"&&a<="Z"))throw new X;u=String.fromCharCode(a.charCodeAt(0)-64);break;case"b":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else{if(!(a>="X"&&a<="Z"))throw new X;u=""}break;case"c":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else{if(a!=="Z")throw new X;u=":"}}i+=u,o++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(n.charAt(a)),++o>i&&(o=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Mt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(St),xH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MA=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return xH(e,t),e.prototype.decodeRow=function(n,r,i){var o,s,a=this.decodeStart(r),u=this.decodeEnd(r),l=new ye;e.decodeMiddle(r,a[1],u[0],l);var c=l.toString(),h=null;i!=null&&(h=i.get(ot.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,p=!1,m=0;try{for(var y=kH(h),w=y.next();!w.done;w=y.next()){var _=w.value;if(d===_){p=!0;break}_>m&&(m=_)}}catch(A){o={error:A}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(!p&&d>m&&(p=!0),!p)throw new X;var v=[new te(a[1],n),new te(u[0],n)];return new cn(c,null,0,v,oe.ITF,new Date().getTime())},e.decodeMiddle=function(n,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),u=new Int32Array(5);for(s.fill(0),a.fill(0),u.fill(0);r<i;){St.recordPattern(n,r,s);for(var l=0;l<5;l++){var c=2*l;a[l]=s[c],u[l]=s[c+1]}var h=e.decodeDigit(a);o.append(h.toString()),h=this.decodeDigit(u),o.append(h.toString()),s.forEach(function(d){r+=d})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=10*this.narrowLineWidth;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new j},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new j;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof j&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var o=i.length,s=new Int32Array(o),a=n.getSize(),u=!1,l=0,c=r;s.fill(0);for(var h=r;h<a;h++)if(n.get(h)!==u)s[l]++;else{if(l===o-1){if(St.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,h];c+=s[0]+s[1],Je.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,u=!u}throw new j},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],u=St.patternMatchVariance(n,a,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=s):u===r&&(i=-1)}if(i>=0)return i%10;throw new j},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(St),MH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$a=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return MH(e,t),e.findStartGuardPattern=function(n){for(var r,i=!1,o=0,s=Int32Array.from([0,0,0]);!i;){s=Int32Array.from([0,0,0]);var a=(r=e.findGuardPattern(n,o,!1,this.START_END_PATTERN,s))[0],u=a-((o=r[1])-a);u>=0&&(i=n.isRange(u,a,!1))}return r},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){if((s=n.charAt(o).charCodeAt(0)-48)<0||s>9)throw new X;i+=s}for(i*=3,o=r-2;o>=0;o-=2){var s;if((s=n.charAt(o).charCodeAt(0)-48)<0||s>9)throw new X;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(n,r,i,o,s){for(var a=n.getSize(),u=0,l=r=i?n.getNextUnset(r):n.getNextSet(r),c=o.length,h=i,d=r;d<a;d++)if(n.get(d)!==h)s[u]++;else{if(u===c-1){if(St.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=s[0]+s[1];for(var p=s.slice(2,s.length),m=0;m<u-1;m++)s[m]=p[m];s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new j},e.decodeDigit=function(n,r,i,o){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,u=o.length,l=0;l<u;l++){var c=o[l],h=St.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=l)}if(a>=0)return a;throw new j},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(St),LH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VH=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),u=[new te((r[0]+r[1])/2,e),new te(o,e)],l=new cn(s,null,0,u,oe.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),u=n[1],l=0,c=0;c<5&&u<a;c++){var h=$a.decodeDigit(e,s,u,$a.L_AND_G_PATTERNS);r+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,LH(s)),p=d.next();!p.done;p=d.next())u+=p.value}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<4-c),c!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new j;var m=this.determineCheckDigit(l);if(t.extensionChecksum(r.toString())!==m)throw new j;return u},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;for(r*=3,i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return(r*=3)%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new j},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[Gt.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="£";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n=""}var r=parseInt(e.substring(1)),i=r%100;return n+(r/100).toString()+"."+(i<10?"0"+i:i.toString())},t}(),BH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FH=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),u=[new te((r[0]+r[1])/2,e),new te(o,e)],l=new cn(s,null,0,u,oe.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),u=n[1],l=0,c=0;c<2&&u<a;c++){var h=$a.decodeDigit(e,s,u,$a.L_AND_G_PATTERNS);r+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,BH(s)),p=d.next();!p.done;p=d.next())u+=p.value}catch(m){i={error:m}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<1-c),c!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new j;if(parseInt(r.toString())%4!==l)throw new j;return u},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Gt.ISSUE_NUMBER,parseInt(e)]])},t}(),jH=function(){function t(){}return t.decodeRow=function(e,n,r){var i=$a.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new VH().decodeRow(e,n,i)}catch{return new FH().decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),UH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),It=function(t){function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return n}return UH(e,t),e.prototype.decodeRow=function(n,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(ot.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new te((o[0]+o[1])/2,n);s.foundPossibleResultPoint(a)}var u=this.decodeMiddle(r,o,this.decodeRowStringBuffer),l=u.rowOffset,c=u.resultString;if(s!=null){var h=new te(l,n);s.foundPossibleResultPoint(h)}var d=e.decodeEnd(r,l);if(s!=null){var p=new te((d[0]+d[1])/2,n);s.foundPossibleResultPoint(p)}var m=d[1],y=m+(m-d[0]);if(y>=r.getSize()||!r.isRange(m,y,!1))throw new j;var w=c.toString();if(w.length<8)throw new X;if(!e.checkChecksum(w))throw new Mt;var _=(o[1]+o[0])/2,v=(d[1]+d[0])/2,A=this.getBarcodeFormat(),S=[new te(_,n),new te(v,n)],x=new cn(w,null,0,S,A,new Date().getTime()),M=0;try{var T=jH.decodeRow(n,r,d[1]);x.putMetadata(Gt.UPC_EAN_EXTENSION,T.getText()),x.putAllMetadata(T.getResultMetadata()),x.addResultPoints(T.getResultPoints()),M=T.getText().length}catch{}var I=i==null?null:i.get(ot.ALLOWED_EAN_EXTENSIONS);if(I!=null){var R=!1;for(var O in I)if(M.toString()===O){R=!0;break}if(!R)throw new j}return A===oe.EAN_13||oe.UPC_A,x},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){if((s=n.charAt(o).charCodeAt(0)-48)<0||s>9)throw new X;i+=s}for(i*=3,o=r-2;o>=0;o-=2){var s;if((s=n.charAt(o).charCodeAt(0)-48)<0||s>9)throw new X;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}($a),HH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xg=function(t){function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return HH(e,t),e.prototype.decodeMiddle=function(n,r,i){var o,s,a,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=n.getSize(),h=r[1],d=0,p=0;p<6&&h<c;p++){var m=It.decodeDigit(n,l,h,It.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(o=void 0,LA(l)),w=y.next();!w.done;w=y.next())h+=w.value}catch(A){o={error:A}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}m>=10&&(d|=1<<5-p)}for(i=e.determineFirstDigit(i,d),h=It.findGuardPattern(n,h,!0,It.MIDDLE_PATTERN,new Int32Array(It.MIDDLE_PATTERN.length).fill(0))[1],p=0;p<6&&h<c;p++){m=It.decodeDigit(n,l,h,It.L_PATTERNS),i+=String.fromCharCode(48+m);try{for(var _=(a=void 0,LA(l)),v=_.next();!v.done;v=_.next())h+=v.value}catch(A){a={error:A}}finally{try{v&&!v.done&&(u=_.return)&&u.call(_)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return oe.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n;throw new j},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(It),zH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BA=function(t){function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return zH(e,t),e.prototype.decodeMiddle=function(n,r,i){var o,s,a,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=n.getSize(),h=r[1],d=0;d<4&&h<c;d++){var p=It.decodeDigit(n,l,h,It.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(o=void 0,VA(l)),y=m.next();!y.done;y=m.next())h+=y.value}catch(v){o={error:v}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}for(h=It.findGuardPattern(n,h,!0,It.MIDDLE_PATTERN,new Int32Array(It.MIDDLE_PATTERN.length).fill(0))[1],d=0;d<4&&h<c;d++){p=It.decodeDigit(n,l,h,It.L_PATTERNS),i+=String.fromCharCode(48+p);try{for(var w=(a=void 0,VA(l)),_=w.next();!_.done;_=w.next())h+=_.value}catch(v){a={error:v}}finally{try{_&&!_.done&&(u=w.return)&&u.call(w)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return oe.EAN_8},e}(It),WH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FA=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new Xg,n}return WH(e,t),e.prototype.getBarcodeFormat=function(){return oe.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new cn(r.substring(1),null,null,n.getResultPoints(),oe.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}throw new j},e.prototype.reset=function(){this.ean13Reader.reset()},e}(It),$H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jA=function(t){function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return $H(e,t),e.prototype.decodeMiddle=function(n,r,i){var o,s,a=this.decodeMiddleCounters.map(function(y){return y});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var u=n.getSize(),l=r[1],c=0,h=0;h<6&&l<u;h++){var d=e.decodeDigit(n,a,l,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var p=(o=void 0,GH(a)),m=p.next();!m.done;m=p.next())l+=m.value}catch(y){o={error:y}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-h)}return e.determineNumSysAndCheckDigit(new ye(i),c),l},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return It.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o])return n.insert(0,"0"+i),void n.append("0"+o);throw j.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return oe.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new ye;i.append(n.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o)}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(It),XH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H1=function(t){function e(n){var r=t.call(this)||this,i=n==null?null:n.get(ot.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(oe.EAN_13)>-1&&o.push(new Xg),i.indexOf(oe.UPC_A)>-1&&o.push(new FA),i.indexOf(oe.EAN_8)>-1&&o.push(new BA),i.indexOf(oe.UPC_E)>-1&&o.push(new jA)),o.length===0&&(o.push(new Xg),o.push(new FA),o.push(new BA),o.push(new jA)),r.readers=o,r}return XH(e,t),e.prototype.decodeRow=function(n,r,i){var o,s;try{for(var a=UA(this.readers),u=a.next();!u.done;u=a.next()){var l=u.value;try{var c=l.decodeRow(n,r,i),h=c.getBarcodeFormat()===oe.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(ot.POSSIBLE_FORMATS),p=d==null||d.includes(oe.UPC_A);if(h&&p){var m=c.getRawBytes(),y=new cn(c.getText().substring(1),m,m?m.length:null,c.getResultPoints(),oe.UPC_A);return y.putAllMetadata(c.getResultMetadata()),y}return c}catch{}}}catch(w){o={error:w}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new j},e.prototype.reset=function(){var n,r;try{for(var i=UA(this.readers),o=i.next();!o.done;o=i.next())o.value.reset()}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(St),KH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YH=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return KH(e,t),e.prototype.decodeRow=function(n,r,i){var o=this.getValidRowData(r);if(!o)throw new j;var s=this.codaBarDecodeRow(o.row);if(!s)throw new j;return new cn(s,null,0,[new te(o.left,n),new te(o.right,n)],oe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;for(var s=[],a=(r=r.slice(i,o+1))[0],u=1,l=1;l<r.length;l++)r[l]===a?u++:(a=r[l],s.push(u),u=1);return s.push(u),s.length<23&&(s.length+1)%8!=0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(a,u){return(a+u)/2},0));n.length>0;){var o=n.splice(0,8).splice(0,7).map(function(a){return a<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(n){return/^[A-D].{1,}[A-D]$/.test(n)},e}(St),qH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo=function(t){function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return qH(e,t),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(St.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new j},e.count=function(n){return be.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]>o&&(o=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]<o&&(o=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,o=n[0]+n[1],s=o/(o+n[2]+n[3]);if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var l=QH(n),c=l.next();!c.done;c=l.next()){var h=c.value;h>u&&(u=h),h<a&&(a=h)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return u<10*a}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(St),yd=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),E8=function(){function t(e,n,r,i,o){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new te(r,o)),this.resultPoints.push(new te(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),ZH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ga=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,o,s=0;try{for(var a=ZH(e),u=a.next();!u.done;u=a.next())s+=u.value}catch(_){i={error:_}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var l=0,c=0,h=e.length,d=0;d<h-1;d++){var p=void 0;for(p=1,c|=1<<d;p<e[d];p++,c&=~(1<<d)){var m=t.combins(s-p-1,h-d-2);if(r&&c===0&&s-p-(h-d-1)>=h-d-1&&(m-=t.combins(s-p-(h-d),h-d-2)),h-d-1>1){for(var y=0,w=s-p-(h-d-2);w>n;w--)y+=t.combins(s-p-w-1,h-d-3);m-=y*(h-1-d)}else s-p>n&&m--;l+=m}s-=p}return l},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},t}(),JH=function(){function t(){}return t.buildBitArray=function(e){var n=2*e.length-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=new kr(12*n),i=0,o=e[0].getRightChar().getValue(),s=11;s>=0;--s)o&1<<s&&r.set(i),i++;for(s=1;s<e.length;++s){for(var a=e[s],u=a.getLeftChar().getValue(),l=11;l>=0;--l)u&1<<l&&r.set(i),i++;if(a.getRightChar()!==null){var c=a.getRightChar().getValue();for(l=11;l>=0;--l)c&1<<l&&r.set(i),i++}}return r},t}(),$o=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Vv=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),ez=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ur=function(t){function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return ez(e,t),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Vv),tz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Go=function(t){function e(n,r,i){var o=t.call(this,n)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return tz(e,t),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Vv),nz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lh=function(t){function e(n,r,i){var o=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new X;return o.firstDigit=r,o.secondDigit=i,o}return nz(e,t),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Vv),Vh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rz=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,o,s,a,u,l;if(!e)return null;if(e.length<2)throw new j;var c=e.substring(0,2);try{for(var h=Vh(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next())if((x=d.value)[0]===c)return x[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,x[2],e):t.processFixedAI(2,x[1],e)}catch(M){n={error:M}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}if(e.length<3)throw new j;var p=e.substring(0,3);try{for(var m=Vh(t.THREE_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next())if((x=y.value)[0]===p)return x[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,x[2],e):t.processFixedAI(3,x[1],e)}catch(M){i={error:M}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var w=Vh(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),_=w.next();!_.done;_=w.next())if((x=_.value)[0]===p)return x[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,x[2],e):t.processFixedAI(4,x[1],e)}catch(M){s={error:M}}finally{try{_&&!_.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}if(e.length<4)throw new j;var v=e.substring(0,4);try{for(var A=Vh(t.FOUR_DIGIT_DATA_LENGTH),S=A.next();!S.done;S=A.next()){var x;if((x=S.value)[0]===v)return x[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,x[2],e):t.processFixedAI(4,x[1],e)}}catch(M){u={error:M}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(u)throw u.error}}throw new j},t.processFixedAI=function(e,n,r){if(r.length<e)throw new j;var i=r.substring(0,e);if(r.length<e+n)throw new j;var o=r.substring(e,e+n),s=r.substring(e+n),a="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(s);return u==null?a:a+u},t.processVariableAI=function(e,n,r){var i,o=r.substring(0,e);i=r.length<e+n?r.length:e+n;var s=r.substring(e,i),a=r.substring(i),u="("+o+")"+s,l=t.parseFieldsInGeneralPurpose(a);return l==null?u:u+l},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),hf=function(){function t(e){this.buffer=new ye,this.information=e}return t.prototype.decodeAllCodes=function(e,n){for(var r=n,i=null;;){var o=this.decodeGeneralPurposeField(r,i),s=rz.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),i=o.isRemaining()?""+o.getRemainingValue():null,r===o.getNewPosition())break;r=o.getNewPosition()}return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return new Lh(this.information.getSize(),n===0?Lh.FNC1:n-1,Lh.FNC1)}var r=this.extractNumericValueFromBitArray(e,7);return new Lh(e+7,(r-8)/11,(r-8)%11)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,o=0;o<r;++o)e.get(n+o)&&(i|=1<<r-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Go(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Go(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();if(e=this.current.isAlpha()?(n=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(n=this.parseIsoIec646Block()).isFinished():(n=this.parseNumericBlock()).isFinished(),r===this.current.getPosition()&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return n=e.isSecondDigitFNC1()?new Go(this.current.getPosition(),this.buffer.toString()):new Go(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new $o(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return n=new Go(this.current.getPosition(),this.buffer.toString()),new $o(!0,n);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $o(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Go(this.current.getPosition(),this.buffer.toString());return new $o(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $o(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Go(this.current.getPosition(),this.buffer.toString());return new $o(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $o(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new ur(e+5,ur.FNC1);if(n>=5&&n<15)return new ur(e+5,"0"+(n-5));var r,i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new ur(e+7,""+(i+1));if(i>=90&&i<116)return new ur(e+7,""+(i+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new X}return new ur(e+8,r)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new ur(e+5,ur.FNC1);if(n>=5&&n<15)return new ur(e+5,"0"+(n-5));var r,i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new ur(e+6,""+(i+33));switch(i){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Dc("Decoding invalid alphanumeric value: "+i)}return new ur(e+6,r)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),A8=function(){function t(e){this.information=e,this.generalDecoder=new hf(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),iz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pr=function(t){function e(n){return t.call(this,n)||this}return iz(e,t),e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100==0&&n.append("0"),s/10==0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,o=0;o<13;o++){var s=n.charAt(o+r).charCodeAt(0)-48;i+=1&o?s:3*s}(i=10-i%10)===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(A8),oz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sz=function(t){function e(n){return t.call(this,n)||this}return oz(e,t),e.prototype.parseInformation=function(){var n=new ye;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(pr),az=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uz=function(t){function e(n){return t.call(this,n)||this}return az(e,t),e.prototype.parseInformation=function(){var n=new ye;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(A8),lz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ff=function(t){function e(n){return t.call(this,n)||this}return lz(e,t),e.prototype.encodeCompressedWeight=function(n,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);for(var s=this.checkWeight(o),a=1e5,u=0;u<5;++u)s/a==0&&n.append("0"),a/=10;n.append(s)},e}(pr),cz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C8=function(t){function e(n){return t.call(this,n)||this}return cz(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+ff.GTIN_SIZE+e.WEIGHT_SIZE)throw new j;var n=new ye;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+ff.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(ff),hz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fz=function(t){function e(n){return t.call(this,n)||this}return hz(e,t),e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(C8),dz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pz=function(t){function e(n){return t.call(this,n)||this}return dz(e,t),e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(C8),mz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gz=function(t){function e(n){return t.call(this,n)||this}return mz(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pr.GTIN_SIZE)throw new j;var n=new ye;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pr.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(pr),yz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vz=function(t){function e(n){return t.call(this,n)||this}return yz(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pr.GTIN_SIZE)throw new j;var n=new ye;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pr.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100==0&&n.append("0"),i/10==0&&n.append("0"),n.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(pr),_z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ni=function(t){function e(n,r,i){var o=t.call(this,n)||this;return o.dateCode=i,o.firstAIdigits=r,o}return _z(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new j;var n=new ye;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var o=i%32,s=(i/=32)%12+1,a=i/=12;a/10==0&&n.append("0"),n.append(a),s/10==0&&n.append("0"),n.append(s),o/10==0&&n.append("0"),n.append(o)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(ff),HA=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t&&t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern)},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},t}(),wz=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t&&this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed},t.prototype.checkEqualitity=function(e,n){var r;if(e&&n)return e.forEach(function(i,o){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r},t}(),Ez=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Di=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Az=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return Ez(e,t),e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i,o=!1;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(a){if(a instanceof j){if(!this.pairs.length)throw new j;o=!0}}if(this.checkChecksum())return this.pairs;if(i=!!this.rows.length,this.storeRow(n,!1),i){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0))!=null)return s}throw new j},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var u=(i=void 0,Di(n)),l=u.next();!l.done;l=u.next()){var c=l.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(n);h.push(a);try{return this.checkRows(h,s+1)}catch(d){console.log(d)}}}throw new j},e.isValidSequence=function(n){var r,i;try{for(var o=Di(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(n.length>a.length)){for(var u=!0,l=0;l<n.length;l++)if(n[l].getFinderPattern().getValue()!==a[l]){u=!1;break}if(u)return!0}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>n){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new wz(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,o,s,a,u,l;try{for(var c=Di(r),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.getPairs().length!==n.length)try{for(var p=(s=void 0,Di(d.getPairs())),m=p.next();!m.done;m=p.next()){var y=m.value,w=!1;try{for(var _=(u=void 0,Di(n)),v=_.next();!v.done;v=_.next()){var A=v.value;if(HA.equals(y,A)){w=!0;break}}}catch(S){u={error:S}}finally{try{v&&!v.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}}}catch(S){s={error:S}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}}}catch(S){i={error:S}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,o,s,a,u,l;try{for(var c=Di(r),h=c.next();!h.done;h=c.next()){var d=h.value,p=!0;try{for(var m=(s=void 0,Di(n)),y=m.next();!y.done;y=m.next()){var w=y.value,_=!1;try{for(var v=(u=void 0,Di(d.getPairs())),A=v.next();!A.done;A=v.next()){var S=A.value;if(w.equals(S)){_=!0;break}}}catch(x){u={error:x}}finally{try{A&&!A.done&&(l=v.return)&&l.call(v)}finally{if(u)throw u.error}}if(!_){p=!1;break}}}catch(x){s={error:x}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}if(p)return!0}}catch(x){i={error:x}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=function(a){try{if(a.get(1))return new sz(a);if(!a.get(2))return new uz(a);switch(hf.extractNumericValueFromBitArray(a,1,4)){case 4:return new fz(a);case 5:return new pz(a)}switch(hf.extractNumericValueFromBitArray(a,1,5)){case 12:return new gz(a);case 13:return new vz(a)}switch(hf.extractNumericValueFromBitArray(a,1,7)){case 56:return new Ni(a,"310","11");case 57:return new Ni(a,"320","11");case 58:return new Ni(a,"310","13");case 59:return new Ni(a,"320","13");case 60:return new Ni(a,"310","15");case 61:return new Ni(a,"320","15");case 62:return new Ni(a,"310","17");case 63:return new Ni(a,"320","17")}}catch(u){throw console.log(u),new Dc("unknown decoder: "+a)}}(JH.buildBitArray(n)).parseInformation(),i=n[0].getFinderPattern().getResultPoints(),o=n[n.length-1].getFinderPattern().getResultPoints(),s=[i[0],i[1],o[0],o[1]];return new cn(r,null,null,s,oe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var u=this.pairs.get(a);o+=u.getLeftChar().getChecksumPortion(),s++;var l=u.getRightChar();l!=null&&(o+=l.getChecksumPortion(),s++)}return 211*(s-4)+(o%=211)===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var o,s=r.length%2==0;this.startFromEven&&(s=!s);var a=!0,u=-1;do this.findNextPair(n,r,u),(o=this.parseFoundFinderPattern(n,i,s))===null?u=e.getNextSecondBar(n,this.startEnd[0]):a=!1;while(a);var l,c=this.decodeDataCharacter(n,o,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new j;try{l=this.decodeDataCharacter(n,o,s,!1)}catch(h){l=null,console.log(h)}return new HA(c,l,o,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s,a=n.getSize();i>=0?s=i:this.isEmptyPair(r)?s=0:s=r[r.length-1].getFinderPattern().getStartEnd()[1];var u=r.length%2!=0;this.startFromEven&&(u=!u);for(var l=!1;s<a&&(l=!n.get(s));)s++;for(var c=0,h=s,d=s;d<a;d++)if(n.get(d)!==l)o[c]++;else{if(c===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o))return this.startEnd[0]=h,void(this.startEnd[1]=d);u&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,c--}else c++;o[c]=1,l=!l}throw new j},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(n,r,i){var o,s,a;if(i){for(var u=this.startEnd[0]-1;u>=0&&!n.get(u);)u--;u++,o=this.startEnd[0]-u,s=u,a=this.startEnd[1]}else s=this.startEnd[0],o=(a=n.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var l,c=this.getDecodeFinderCounters();Je.arraycopy(c,0,c,1,c.length-1),c[0]=o;try{l=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new E8(l,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(n,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var u=0,l=s.length-1;u<l;u++,l--){var c=s[u];s[u]=s[l],s[l]=c}}var h=be.sum(new Int32Array(s))/17,d=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-d)/d>.3)throw new j;var p=this.getOddCounts(),m=this.getEvenCounts(),y=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(u=0;u<s.length;u++){var _=1*s[u]/h,v=_+.5;if(v<1){if(_<.3)throw new j;v=1}else if(v>8){if(_>8.7)throw new j;v=8}var A=u/2;1&u?(m[A]=v,w[A]=_-v):(p[A]=v,y[A]=_-v)}this.adjustOddEvenCounts(17);var S=4*r.getValue()+(i?0:2)+(o?0:1)-1,x=0,M=0;for(u=p.length-1;u>=0;u--){if(e.isNotA1left(r,i,o)){var T=e.WEIGHTS[S][2*u];M+=p[u]*T}x+=p[u]}var I=0;for(u=m.length-1;u>=0;u--)e.isNotA1left(r,i,o)&&(T=e.WEIGHTS[S][2*u+1],I+=m[u]*T);var R=M+I;if(1&x||x>13||x<4)throw new j;var O=(13-x)/2,k=e.SYMBOL_WIDEST[O],L=9-k,D=ga.getRSSvalue(p,k,!0),ne=ga.getRSSvalue(m,L,!1),ge=e.EVEN_TOTAL_SUBSET[O],de=e.GSUM[O];return new yd(D*ge+ne+de,R)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=be.sum(new Int32Array(this.getOddCounts())),i=be.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,u=!1;i>13?u=!0:i<4&&(a=!0);var l=r+i-n,c=(1&r)==1,h=(1&i)==0;if(l===1)if(c){if(h)throw new j;s=!0}else{if(!h)throw new j;u=!0}else if(l===-1)if(c){if(h)throw new j;o=!0}else{if(!h)throw new j;a=!0}else{if(l!==0)throw new j;if(c){if(!h)throw new j;r<i?(o=!0,u=!0):(s=!0,a=!0)}else if(h)throw new j}if(o){if(s)throw new j;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(u)throw new j;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Jo),Cz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Iz=function(t){function e(n,r,i){var o=t.call(this,n,r)||this;return o.count=0,o.finderPattern=i,o}return Cz(e,t),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(yd),Tz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),z1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zA=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return Tz(e,t),e.prototype.decodeRow=function(n,r,i){var o,s,a,u,l=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,l),r.reverse();var c=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var h=z1(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var m=(a=void 0,z1(this.possibleRightPairs)),y=m.next();!y.done;y=m.next()){var w=y.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(_){a={error:_}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}}}catch(_){o={error:_}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}throw new j},e.addOrTally=function(n,r){var i,o;if(r!=null){var s=!1;try{for(var a=z1(n),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),s=new ye,a=13-o.length;a>0;a--)s.append("0");s.append(o);var u=0;for(a=0;a<13;a++){var l=s.charAt(a).charCodeAt(0)-48;u+=1&a?l:3*l}(u=10-u%10)===10&&(u=0),s.append(u.toString());var c=n.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new cn(s.toString(),null,0,[c[0],c[1],h[0],h[1]],oe.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(n,r,i,o){try{var s=this.findFinderPattern(n,r),a=this.parseFoundFinderPattern(n,i,r,s),u=o==null?null:o.get(ot.NEED_RESULT_POINT_CALLBACK);if(u!=null){var l=(s[0]+s[1])/2;r&&(l=n.getSize()-1-l),u.foundPossibleResultPoint(new te(l,i))}var c=this.decodeDataCharacter(n,a,!0),h=this.decodeDataCharacter(n,a,!1);return new Iz(1597*c.getValue()+h.getValue(),c.getChecksumPortion()+4*h.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)St.recordPatternInReverse(n,r.getStartEnd()[0],o);else{St.recordPattern(n,r.getStartEnd()[1]+1,o);for(var a=0,u=o.length-1;a<u;a++,u--){var l=o[a];o[a]=o[u],o[u]=l}}var c=i?16:15,h=be.sum(new Int32Array(o))/c,d=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(a=0;a<o.length;a++){var w=o[a]/h,_=Math.floor(w+.5);_<1?_=1:_>8&&(_=8);var v=Math.floor(a/2);1&a?(p[v]=_,y[v]=w-_):(d[v]=_,m[v]=w-_)}this.adjustOddEvenCounts(i,c);var A=0,S=0;for(a=d.length-1;a>=0;a--)S*=9,S+=d[a],A+=d[a];var x=0,M=0;for(a=p.length-1;a>=0;a--)x*=9,x+=p[a],M+=p[a];var T=S+3*x;if(i){if(1&A||A>12||A<4)throw new j;var I=(12-A)/2,R=9-(ne=e.OUTSIDE_ODD_WIDEST[I]),O=ga.getRSSvalue(d,ne,!1),k=ga.getRSSvalue(p,R,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],D=e.OUTSIDE_GSUM[I];return new yd(O*L+k+D,T)}if(1&M||M>10||M<4)throw new j;I=(10-M)/2,R=9-(ne=e.INSIDE_ODD_WIDEST[I]),O=ga.getRSSvalue(d,ne,!0),k=ga.getRSSvalue(p,R,!1);var ne,ge=e.INSIDE_ODD_TOTAL_SUBSET[I];return D=e.INSIDE_GSUM[I],new yd(k*ge+O+D,T)},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=n.getSize(),s=!1,a=0;a<o&&r!==(s=!n.get(a));)a++;for(var u=0,l=a,c=a;c<o;c++)if(n.get(c)!==s)i[u]++;else{if(u===3){if(Jo.isFinderPattern(i))return[l,c];l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,s=!s}throw new j},e.prototype.parseFoundFinderPattern=function(n,r,i,o){for(var s=n.get(o[0]),a=o[0]-1;a>=0&&s!==n.get(a);)a--;a++;var u=o[0]-a,l=this.getDecodeFinderCounters(),c=new Int32Array(l.length);Je.arraycopy(l,0,c,1,l.length-1),c[0]=u;var h=this.parseFinderValue(c,e.FINDER_PATTERNS),d=a,p=o[1];return i&&(d=n.getSize()-1-d,p=n.getSize()-1-p),new E8(h,[a,o[1]],d,p,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=be.sum(new Int32Array(this.getOddCounts())),o=be.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,u=!1,l=!1;n?(i>12?a=!0:i<4&&(s=!0),o>12?l=!0:o<4&&(u=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?l=!0:o<4&&(u=!0));var c=i+o-r,h=(1&i)==(n?1:0),d=(1&o)==1;if(c===1)if(h){if(d)throw new j;a=!0}else{if(!d)throw new j;l=!0}else if(c===-1)if(h){if(d)throw new j;s=!0}else{if(!d)throw new j;u=!0}else{if(c!==0)throw new j;if(h){if(!d)throw new j;i<o?(s=!0,l=!0):(a=!0,u=!0)}else if(d)throw new j}if(s){if(a)throw new j;Jo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Jo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(l)throw new j;Jo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&Jo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Jo),Sz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qu=function(t){function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(ot.POSSIBLE_FORMATS):null,o=n&&n.get(ot.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(oe.EAN_13)||i.includes(oe.UPC_A)||i.includes(oe.EAN_8)||i.includes(oe.UPC_E))&&r.readers.push(new H1(n)),i.includes(oe.CODE_39)&&r.readers.push(new xA(o)),i.includes(oe.CODE_93)&&r.readers.push(new kA),i.includes(oe.CODE_128)&&r.readers.push(new DA),i.includes(oe.ITF)&&r.readers.push(new MA),i.includes(oe.CODABAR)&&r.readers.push(new YH),i.includes(oe.RSS_14)&&r.readers.push(new zA),i.includes(oe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Az))),r.readers.length===0&&(r.readers.push(new H1(n)),r.readers.push(new xA),r.readers.push(new kA),r.readers.push(new H1(n)),r.readers.push(new DA),r.readers.push(new MA),r.readers.push(new zA)),r}return Sz(e,t),e.prototype.decodeRow=function(n,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new j},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(St),bz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n,r){return n===void 0&&(n=500),t.call(this,new qu(r),n,r)||this}bz(e,t)})(nu);var At,WA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},De=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Oe=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Rz=function(){function t(e,n,r,i,o,s){var a,u;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var l=0,c=s.getECCodewords(),h=s.getECBlocks();try{for(var d=WA(h),p=d.next();!p.done;p=d.next()){var m=p.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(y){a={error:y}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(a)throw a.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if(1&e||1&n)throw new X;try{for(var o=WA(t.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===n)return a}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new X},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new De(5,new Oe(1,3))),new t(2,12,12,10,10,new De(7,new Oe(1,5))),new t(3,14,14,12,12,new De(10,new Oe(1,8))),new t(4,16,16,14,14,new De(12,new Oe(1,12))),new t(5,18,18,16,16,new De(14,new Oe(1,18))),new t(6,20,20,18,18,new De(18,new Oe(1,22))),new t(7,22,22,20,20,new De(20,new Oe(1,30))),new t(8,24,24,22,22,new De(24,new Oe(1,36))),new t(9,26,26,24,24,new De(28,new Oe(1,44))),new t(10,32,32,14,14,new De(36,new Oe(1,62))),new t(11,36,36,16,16,new De(42,new Oe(1,86))),new t(12,40,40,18,18,new De(48,new Oe(1,114))),new t(13,44,44,20,20,new De(56,new Oe(1,144))),new t(14,48,48,22,22,new De(68,new Oe(1,174))),new t(15,52,52,24,24,new De(42,new Oe(2,102))),new t(16,64,64,14,14,new De(56,new Oe(2,140))),new t(17,72,72,16,16,new De(36,new Oe(4,92))),new t(18,80,80,18,18,new De(48,new Oe(4,114))),new t(19,88,88,20,20,new De(56,new Oe(4,144))),new t(20,96,96,22,22,new De(68,new Oe(4,174))),new t(21,104,104,24,24,new De(56,new Oe(6,136))),new t(22,120,120,18,18,new De(68,new Oe(6,175))),new t(23,132,132,20,20,new De(62,new Oe(8,163))),new t(24,144,144,22,22,new De(62,new Oe(8,156),new Oe(2,155))),new t(25,8,18,6,16,new De(7,new Oe(1,5))),new t(26,8,32,6,14,new De(11,new Oe(1,10))),new t(27,12,26,10,24,new De(14,new Oe(1,16))),new t(28,12,36,10,16,new De(18,new Oe(1,22))),new t(29,16,36,14,16,new De(24,new Oe(1,32))),new t(30,16,48,14,22,new De(28,new Oe(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),Pz=function(){function t(e){var n=e.getHeight();if(n<8||n>144||1&n)throw new X;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ci(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return Rz.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,u=!1,l=!1,c=!1;do if(r!==o||i!==0||a)if(r!==o-2||i!==0||!(3&s)||u)if(r!==o+4||i!==2||7&s||l)if(r!==o-2||i!==0||(7&s)!=4||c){do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=255&this.readUtah(r,i,o,s)),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=255&this.readUtah(r,i,o,s)),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}else e[n++]=255&this.readCorner4(o,s),r-=2,i+=2,c=!0;else e[n++]=255&this.readCorner3(o,s),r-=2,i+=2,l=!0;else e[n++]=255&this.readCorner2(o,s),r-=2,i+=2,u=!0;else e[n++]=255&this.readCorner1(o,s),r-=2,i+=2,a=!0;while(r<o||i<s);if(n!==this.version.getTotalCodewords())throw new X;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var o=0;return this.readModule(e-2,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n,r,i)&&(o|=1),o<<=1,this.readModule(e,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e,n,r,i)&&(o|=1),o},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=n/i|0,a=r/o|0,u=new Ci(a*o,s*i),l=0;l<s;++l)for(var c=l*i,h=0;h<a;++h)for(var d=h*o,p=0;p<i;++p)for(var m=l*(i+2)+1+p,y=c+p,w=0;w<o;++w){var _=h*(o+2)+1+w;if(e.get(_,m)){var v=d+w;u.set(v,y)}}return u},t}(),$A=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oz=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,o,s,a=n.getECBlocks(),u=0,l=a.getECBlocks();try{for(var c=$A(l),h=c.next();!h.done;h=c.next())u+=(w=h.value).getCount()}catch(D){r={error:D}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var d=new Array(u),p=0;try{for(var m=$A(l),y=m.next();!y.done;y=m.next())for(var w=y.value,_=0;_<w.getCount();_++){var v=w.getDataCodewords(),A=a.getECCodewords()+v;d[p++]=new t(v,new Uint8Array(A))}}catch(D){o={error:D}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}var S=d[0].codewords.length-a.getECCodewords(),x=S-1,M=0;for(_=0;_<x;_++)for(var T=0;T<p;T++)d[T].codewords[_]=e[M++];var I=n.getVersionNumber()===24,R=I?8:p;for(T=0;T<R;T++)d[T].codewords[S-1]=e[M++];var O=d[0].codewords.length;for(_=S;_<O;_++)for(T=0;T<p;T++){var k=I?(T+8)%p:T,L=I&&k>7?_-1:_;d[k].codewords[L]=e[M++]}if(M!==e.length)throw new ce;return d},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),I8=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new ce(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,u=255>>8-a<<(l=s-a);n=(o[i]&u)>>l,e-=a,(r+=a)===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|255&o[i],i++,e-=8;if(e>0){var l;u=255>>(l=8-e)<<l,n=n<<e|(o[i]&u)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}();(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(At||(At={}));var ya,Nz=function(){function t(){}return t.decode=function(e){var n=new I8(e),r=new ye,i=new ye,o=new Array,s=At.ASCII_ENCODE;do if(s===At.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case At.C40_ENCODE:this.decodeC40Segment(n,r);break;case At.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case At.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case At.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case At.BASE256_ENCODE:this.decodeBase256Segment(n,r,o);break;default:throw new X}s=At.ASCII_ENCODE}while(s!==At.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new Tp(e,r.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new X;if(o<=128)return i&&(o+=128),n.append(String.fromCharCode(o-1)),At.ASCII_ENCODE;if(o===129)return At.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&n.append("0"),n.append(""+s)}else switch(o){case 230:return At.C40_ENCODE;case 231:return At.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:case 241:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return At.ANSIX12_ENCODE;case 239:return At.TEXT_ENCODE;case 240:return At.EDIFACT_ENCODE;default:if(o!==254||e.available()!==0)throw new X}}while(e.available()>0);return At.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var u=i[a];switch(o){case 0:if(u<3)o=u+1;else{if(!(u<this.C40_BASIC_SET_CHARS.length))throw new X;var l=this.C40_BASIC_SET_CHARS[u];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}break;case 1:r?(n.append(String.fromCharCode(u+128)),r=!1):n.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length)l=this.C40_SHIFT2_SET_CHARS[u],r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l);else switch(u){case 27:n.append("");break;case 30:r=!0;break;default:throw new X}o=0;break;case 3:r?(n.append(String.fromCharCode(u+224)),r=!1):n.append(String.fromCharCode(u+96)),o=0;break;default:throw new X}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var u=i[a];switch(o){case 0:if(u<3)o=u+1;else{if(!(u<this.TEXT_BASIC_SET_CHARS.length))throw new X;var l=this.TEXT_BASIC_SET_CHARS[u];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}break;case 1:r?(n.append(String.fromCharCode(u+128)),r=!1):n.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length)l=this.TEXT_SHIFT2_SET_CHARS[u],r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l);else switch(u){case 27:n.append("");break;case 30:r=!0;break;default:throw new X}o=0;break;case 3:if(!(u<this.TEXT_SHIFT3_SET_CHARS.length))throw new X;l=this.TEXT_SHIFT3_SET_CHARS[u],r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l),o=0;break;default:throw new X}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else{if(!(s<40))throw new X;n.append(String.fromCharCode(s+51))}}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,o=Math.floor(i/1600);r[0]=o,i-=1600*o,o=Math.floor(i/40),r[1]=o,r[2]=i-40*o},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();return void(o!==8&&e.readBits(o))}!(32&i)&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i,o=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),o++);if((i=s===0?e.available()/8|0:s<250?s:250*(s-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new X;for(var a=new Uint8Array(i),u=0;u<i;u++){if(e.available()<8)throw new X;a[u]=this.unrandomize255State(e.readBits(8),o++)}r.push(a);try{n.append(di.decode(a,He.ISO88591))}catch(l){throw new Dc("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(e,n){var r=e-(149*n%255+1);return r>=0?r:r+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),Dz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xz=function(){function t(){this.rsDecoder=new Sp(Ki.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new Pz(e),o=i.getVersion(),s=i.readCodewords(),a=Oz.getDataBlocks(s,o),u=0;try{for(var l=Dz(a),c=l.next();!c.done;c=l.next())u+=c.value.getNumDataCodewords()}catch(v){n={error:v}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}for(var h=new Uint8Array(u),d=a.length,p=0;p<d;p++){var m=a[p],y=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(y,w);for(var _=0;_<w;_++)h[_*d+p]=y[_]}return Nz.decode(h)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Mt}for(var i=0;i<n;i++)e[i]=r[i]},t}(),kz=function(){function t(e){this.image=e,this.rectangleDetector=new $g(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new j;var r=(n=this.shiftToModuleCenter(n))[0],i=n[1],o=n[2],s=n[3],a=this.transitionsBetween(r,s)+1,u=this.transitionsBetween(o,s)+1;(1&a)==1&&(a+=1),(1&u)==1&&(u+=1),4*a<7*u&&4*u<7*a&&(a=u=Math.max(a,u));var l=t.sampleGrid(this.image,r,i,o,s,a,u);return new Mv(l,[r,i,o,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),o=(n.getY()-e.getY())/(r+1);return new te(e.getX()+i,e.getY()+o)},t.moveAway=function(e,n,r){var i=e.getX(),o=e.getY();return i<n?i-=1:i+=1,o<r?o-=1:o+=1,new te(i,o)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),u=this.transitionsBetween(i,o),l=this.transitionsBetween(o,n),c=s,h=[o,n,r,i];return c>a&&(c=a,h[0]=n,h[1]=r,h[2]=i,h[3]=o),c>u&&(c=u,h[0]=r,h[1]=i,h[2]=o,h[3]=n),c>l&&(h[0]=i,h[1]=o,h[2]=n,h[3]=r),h},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=t.shiftPoint(r,i,4*(s+1)),u=t.shiftPoint(i,r,4*(s+1));return this.transitionsBetween(a,n)<this.transitionsBetween(u,o)?(e[0]=n,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=this.transitionsBetween(r,o),u=t.shiftPoint(n,r,4*(a+1)),l=t.shiftPoint(i,r,4*(s+1));s=this.transitionsBetween(u,o),a=this.transitionsBetween(l,o);var c=new te(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),h=new te(o.getX()+(n.getX()-r.getX())/(a+1),o.getY()+(n.getY()-r.getY())/(a+1));return this.isValid(c)?this.isValid(h)?this.transitionsBetween(u,c)+this.transitionsBetween(l,c)>this.transitionsBetween(u,h)+this.transitionsBetween(l,h)?c:h:c:this.isValid(h)?h:null},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1,u=t.shiftPoint(n,r,4*a),l=t.shiftPoint(i,r,4*s);(1&(s=this.transitionsBetween(u,o)+1))==1&&(s+=1),(1&(a=this.transitionsBetween(l,o)+1))==1&&(a+=1);var c,h,d=(n.getX()+r.getX()+i.getX()+o.getX())/4,p=(n.getY()+r.getY()+i.getY()+o.getY())/4;return n=t.moveAway(n,d,p),r=t.moveAway(r,d,p),i=t.moveAway(i,d,p),o=t.moveAway(o,d,p),u=t.shiftPoint(n,r,4*a),u=t.shiftPoint(u,o,4*s),c=t.shiftPoint(r,n,4*a),c=t.shiftPoint(c,i,4*s),l=t.shiftPoint(i,o,4*a),l=t.shiftPoint(l,r,4*s),h=t.shiftPoint(o,i,4*a),[u,c,l,h=t.shiftPoint(h,n,4*s)]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,o,s,a){return Lv.getInstance().sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,n.getX(),n.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(n.getX()),s=Math.trunc(n.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var u=r;r=i,i=u,u=o,o=s,s=u}for(var l=Math.abs(o-r),c=Math.abs(s-i),h=-l/2,d=i<s?1:-1,p=r<o?1:-1,m=0,y=this.image.get(a?i:r,a?r:i),w=r,_=i;w!==o;w+=p){var v=this.image.get(a?_:w,a?w:_);if(v!==y&&(m++,y=v),(h+=c)>0){if(_===s)break;_+=d,h-=l}}return m},t}(),Kg=function(){function t(){this.decoder=new xz}return t.prototype.decode=function(e,n){var r,i;if(n===void 0&&(n=null),n!=null&&n.has(ot.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=t.NO_POINTS}else{var s=new kz(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),u=new cn(r.getText(),a,8*a.length,i,oe.DATA_MATRIX,Je.currentTimeMillis()),l=r.getByteSegments();l!=null&&u.putMetadata(Gt.BYTE_SEGMENTS,l);var c=r.getECLevel();return c!=null&&u.putMetadata(Gt.ERROR_CORRECTION_LEVEL,c),u},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new j;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],u=(r[0]-a+1)/i,l=(s-o+1)/i;if(u<=0||l<=0)throw new j;var c=i/2;o+=c,a+=c;for(var h=new Ci(u,l),d=0;d<l;d++)for(var p=o+d*i,m=0;m<u;m++)e.get(a+m*i,p)&&h.set(m,d);return h},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],o=e[1];i<r&&n.get(i,o);)i++;if(i===r)throw new j;var s=i-e[0];if(s===0)throw new j;return s},t.NO_POINTS=[],t}(),Mz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n){return n===void 0&&(n=500),t.call(this,new Kg,n)||this}Mz(e,t)})(nu),function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(ya||(ya={}));var Nt,Lz=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new lr(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new ce;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(ya.L,"L",1),t.M=new t(ya.M,"M",0),t.Q=new t(ya.Q,"Q",3),t.H=new t(ya.H,"H",2),t}(),Vz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T8=function(){function t(e){this.errorCorrectionLevel=Lz.forBits(e>>3&3),this.dataMask=7&e}return t.numBitsDiffering=function(e,n){return mt.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=Vz(t.FORMAT_INFO_DECODE_LOOKUP),u=a.next();!u.done;u=a.next()){var l=u.value,c=l[0];if(c===e||c===n)return new t(l[1]);var h=t.numBitsDiffering(e,c);h<o&&(s=l[1],o=h),e!==n&&(h=t.numBitsDiffering(n,c))<o&&(s=l[1],o=h)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),Bz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var o=Bz(i),s=o.next();!s.done;s=o.next())r+=s.value.getCount()}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),P=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Fz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},df=function(){function t(e,n){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=o;var a=0,u=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var c=Fz(l),h=c.next();!h.done;h=c.next()){var d=h.value;a+=d.getCount()*(d.getDataCodewords()+u)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new X;try{return this.getVersionForNumber((e-17)/4)}catch{throw new X}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new ce;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var s=T8.numBitsDiffering(e,o);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Ci(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new B(7,new P(1,19)),new B(10,new P(1,16)),new B(13,new P(1,13)),new B(17,new P(1,9))),new t(2,Int32Array.from([6,18]),new B(10,new P(1,34)),new B(16,new P(1,28)),new B(22,new P(1,22)),new B(28,new P(1,16))),new t(3,Int32Array.from([6,22]),new B(15,new P(1,55)),new B(26,new P(1,44)),new B(18,new P(2,17)),new B(22,new P(2,13))),new t(4,Int32Array.from([6,26]),new B(20,new P(1,80)),new B(18,new P(2,32)),new B(26,new P(2,24)),new B(16,new P(4,9))),new t(5,Int32Array.from([6,30]),new B(26,new P(1,108)),new B(24,new P(2,43)),new B(18,new P(2,15),new P(2,16)),new B(22,new P(2,11),new P(2,12))),new t(6,Int32Array.from([6,34]),new B(18,new P(2,68)),new B(16,new P(4,27)),new B(24,new P(4,19)),new B(28,new P(4,15))),new t(7,Int32Array.from([6,22,38]),new B(20,new P(2,78)),new B(18,new P(4,31)),new B(18,new P(2,14),new P(4,15)),new B(26,new P(4,13),new P(1,14))),new t(8,Int32Array.from([6,24,42]),new B(24,new P(2,97)),new B(22,new P(2,38),new P(2,39)),new B(22,new P(4,18),new P(2,19)),new B(26,new P(4,14),new P(2,15))),new t(9,Int32Array.from([6,26,46]),new B(30,new P(2,116)),new B(22,new P(3,36),new P(2,37)),new B(20,new P(4,16),new P(4,17)),new B(24,new P(4,12),new P(4,13))),new t(10,Int32Array.from([6,28,50]),new B(18,new P(2,68),new P(2,69)),new B(26,new P(4,43),new P(1,44)),new B(24,new P(6,19),new P(2,20)),new B(28,new P(6,15),new P(2,16))),new t(11,Int32Array.from([6,30,54]),new B(20,new P(4,81)),new B(30,new P(1,50),new P(4,51)),new B(28,new P(4,22),new P(4,23)),new B(24,new P(3,12),new P(8,13))),new t(12,Int32Array.from([6,32,58]),new B(24,new P(2,92),new P(2,93)),new B(22,new P(6,36),new P(2,37)),new B(26,new P(4,20),new P(6,21)),new B(28,new P(7,14),new P(4,15))),new t(13,Int32Array.from([6,34,62]),new B(26,new P(4,107)),new B(22,new P(8,37),new P(1,38)),new B(24,new P(8,20),new P(4,21)),new B(22,new P(12,11),new P(4,12))),new t(14,Int32Array.from([6,26,46,66]),new B(30,new P(3,115),new P(1,116)),new B(24,new P(4,40),new P(5,41)),new B(20,new P(11,16),new P(5,17)),new B(24,new P(11,12),new P(5,13))),new t(15,Int32Array.from([6,26,48,70]),new B(22,new P(5,87),new P(1,88)),new B(24,new P(5,41),new P(5,42)),new B(30,new P(5,24),new P(7,25)),new B(24,new P(11,12),new P(7,13))),new t(16,Int32Array.from([6,26,50,74]),new B(24,new P(5,98),new P(1,99)),new B(28,new P(7,45),new P(3,46)),new B(24,new P(15,19),new P(2,20)),new B(30,new P(3,15),new P(13,16))),new t(17,Int32Array.from([6,30,54,78]),new B(28,new P(1,107),new P(5,108)),new B(28,new P(10,46),new P(1,47)),new B(28,new P(1,22),new P(15,23)),new B(28,new P(2,14),new P(17,15))),new t(18,Int32Array.from([6,30,56,82]),new B(30,new P(5,120),new P(1,121)),new B(26,new P(9,43),new P(4,44)),new B(28,new P(17,22),new P(1,23)),new B(28,new P(2,14),new P(19,15))),new t(19,Int32Array.from([6,30,58,86]),new B(28,new P(3,113),new P(4,114)),new B(26,new P(3,44),new P(11,45)),new B(26,new P(17,21),new P(4,22)),new B(26,new P(9,13),new P(16,14))),new t(20,Int32Array.from([6,34,62,90]),new B(28,new P(3,107),new P(5,108)),new B(26,new P(3,41),new P(13,42)),new B(30,new P(15,24),new P(5,25)),new B(28,new P(15,15),new P(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new B(28,new P(4,116),new P(4,117)),new B(26,new P(17,42)),new B(28,new P(17,22),new P(6,23)),new B(30,new P(19,16),new P(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new B(28,new P(2,111),new P(7,112)),new B(28,new P(17,46)),new B(30,new P(7,24),new P(16,25)),new B(24,new P(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new B(30,new P(4,121),new P(5,122)),new B(28,new P(4,47),new P(14,48)),new B(30,new P(11,24),new P(14,25)),new B(30,new P(16,15),new P(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new B(30,new P(6,117),new P(4,118)),new B(28,new P(6,45),new P(14,46)),new B(30,new P(11,24),new P(16,25)),new B(30,new P(30,16),new P(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new B(26,new P(8,106),new P(4,107)),new B(28,new P(8,47),new P(13,48)),new B(30,new P(7,24),new P(22,25)),new B(30,new P(22,15),new P(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new B(28,new P(10,114),new P(2,115)),new B(28,new P(19,46),new P(4,47)),new B(28,new P(28,22),new P(6,23)),new B(30,new P(33,16),new P(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new B(30,new P(8,122),new P(4,123)),new B(28,new P(22,45),new P(3,46)),new B(30,new P(8,23),new P(26,24)),new B(30,new P(12,15),new P(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new B(30,new P(3,117),new P(10,118)),new B(28,new P(3,45),new P(23,46)),new B(30,new P(4,24),new P(31,25)),new B(30,new P(11,15),new P(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new B(30,new P(7,116),new P(7,117)),new B(28,new P(21,45),new P(7,46)),new B(30,new P(1,23),new P(37,24)),new B(30,new P(19,15),new P(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new B(30,new P(5,115),new P(10,116)),new B(28,new P(19,47),new P(10,48)),new B(30,new P(15,24),new P(25,25)),new B(30,new P(23,15),new P(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new B(30,new P(13,115),new P(3,116)),new B(28,new P(2,46),new P(29,47)),new B(30,new P(42,24),new P(1,25)),new B(30,new P(23,15),new P(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new B(30,new P(17,115)),new B(28,new P(10,46),new P(23,47)),new B(30,new P(10,24),new P(35,25)),new B(30,new P(19,15),new P(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new B(30,new P(17,115),new P(1,116)),new B(28,new P(14,46),new P(21,47)),new B(30,new P(29,24),new P(19,25)),new B(30,new P(11,15),new P(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new B(30,new P(13,115),new P(6,116)),new B(28,new P(14,46),new P(23,47)),new B(30,new P(44,24),new P(7,25)),new B(30,new P(59,16),new P(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new B(30,new P(12,121),new P(7,122)),new B(28,new P(12,47),new P(26,48)),new B(30,new P(39,24),new P(14,25)),new B(30,new P(22,15),new P(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new B(30,new P(6,121),new P(14,122)),new B(28,new P(6,47),new P(34,48)),new B(30,new P(46,24),new P(10,25)),new B(30,new P(2,15),new P(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new B(30,new P(17,122),new P(4,123)),new B(28,new P(29,46),new P(14,47)),new B(30,new P(49,24),new P(10,25)),new B(30,new P(24,15),new P(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new B(30,new P(4,122),new P(18,123)),new B(28,new P(13,46),new P(32,47)),new B(30,new P(48,24),new P(14,25)),new B(30,new P(42,15),new P(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new B(30,new P(20,117),new P(4,118)),new B(28,new P(40,47),new P(7,48)),new B(30,new P(43,24),new P(22,25)),new B(30,new P(10,15),new P(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new B(30,new P(19,118),new P(6,119)),new B(28,new P(18,47),new P(31,48)),new B(30,new P(34,24),new P(34,25)),new B(30,new P(20,15),new P(61,16)))],t}();(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Nt||(Nt={}));var Zn,GA=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[Nt.DATA_MASK_000,new t(Nt.DATA_MASK_000,function(e,n){return(e+n&1)==0})],[Nt.DATA_MASK_001,new t(Nt.DATA_MASK_001,function(e,n){return(1&e)==0})],[Nt.DATA_MASK_010,new t(Nt.DATA_MASK_010,function(e,n){return n%3==0})],[Nt.DATA_MASK_011,new t(Nt.DATA_MASK_011,function(e,n){return(e+n)%3==0})],[Nt.DATA_MASK_100,new t(Nt.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)==0})],[Nt.DATA_MASK_101,new t(Nt.DATA_MASK_101,function(e,n){return e*n%6==0})],[Nt.DATA_MASK_110,new t(Nt.DATA_MASK_110,function(e,n){return e*n%6<3})],[Nt.DATA_MASK_111,new t(Nt.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)==0})]]),t}(),jz=function(){function t(e){var n=e.getHeight();if(n<21||(3&n)!=1)throw new X;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);var i=this.bitMatrix.getHeight(),o=0,s=i-7;for(r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(n=i-8;n<i;n++)o=this.copyBit(n,8,o);if(this.parsedFormatInfo=T8.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return df.getVersionForNumber(n);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=df.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;for(r=0,s=5;s>=0;s--)for(o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if((a=df.decodeVersionInformation(r))!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new X},t.prototype.copyBit=function(e,n,r){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=GA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=n.buildFunctionPattern(),s=!0,a=new Uint8Array(n.getTotalCodewords()),u=0,l=0,c=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=s?i-1-d:d,m=0;m<2;m++)o.get(h-m,p)||(c++,l<<=1,this.bitMatrix.get(h-m,p)&&(l|=1),c===8&&(a[u++]=l,c=0,l=0));s=!s}if(u!==n.getTotalCodewords())throw new X;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=GA.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,o=e.getHeight();i<o;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),XA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uz=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,o,s,a;if(e.length!==n.getTotalCodewords())throw new ce;var u=n.getECBlocksForLevel(r),l=0,c=u.getECBlocks();try{for(var h=XA(c),d=h.next();!d.done;d=h.next())l+=(_=d.value).getCount()}catch(L){i={error:L}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var p=new Array(l),m=0;try{for(var y=XA(c),w=y.next();!w.done;w=y.next())for(var _=w.value,v=0;v<_.getCount();v++){var A=_.getDataCodewords(),S=u.getECCodewordsPerBlock()+A;p[m++]=new t(A,new Uint8Array(S))}}catch(L){s={error:L}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}for(var x=p[0].codewords.length,M=p.length-1;M>=0&&p[M].codewords.length!==x;)M--;M++;var T=x-u.getECCodewordsPerBlock(),I=0;for(v=0;v<T;v++)for(var R=0;R<m;R++)p[R].codewords[v]=e[I++];for(R=M;R<m;R++)p[R].codewords[T]=e[I++];var O=p[0].codewords.length;for(v=T;v<O;v++)for(R=0;R<m;R++){var k=R<M?v:v+1;p[R].codewords[k]=e[I++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}();(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Zn||(Zn={}));var Be,Bh,Vn=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new ce;return n},t.prototype.getCharacterCountBits=function(e){var n,r=e.getVersionNumber();return n=r<=9?0:r<=26?1:2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Zn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Zn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Zn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Zn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Zn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Zn.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Zn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Zn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Zn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Zn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),Hz=function(){function t(){}return t.decode=function(e,n,r,i){var o=new I8(e),s=new ye,a=new Array,u=-1,l=-1;try{var c=null,h=!1,d=void 0;do{if(o.available()<4)d=Vn.TERMINATOR;else{var p=o.readBits(4);d=Vn.forBits(p)}switch(d){case Vn.TERMINATOR:break;case Vn.FNC1_FIRST_POSITION:case Vn.FNC1_SECOND_POSITION:h=!0;break;case Vn.STRUCTURED_APPEND:if(o.available()<16)throw new X;u=o.readBits(8),l=o.readBits(8);break;case Vn.ECI:var m=t.parseECIValue(o);if((c=yn.getCharacterSetECIByValue(m))===null)throw new X;break;case Vn.HANZI:var y=o.readBits(4),w=o.readBits(d.getCharacterCountBits(n));y===t.GB2312_SUBSET&&t.decodeHanziSegment(o,s,w);break;default:var _=o.readBits(d.getCharacterCountBits(n));switch(d){case Vn.NUMERIC:t.decodeNumericSegment(o,s,_);break;case Vn.ALPHANUMERIC:t.decodeAlphanumericSegment(o,s,_,h);break;case Vn.BYTE:t.decodeByteSegment(o,s,_,c,a,i);break;case Vn.KANJI:t.decodeKanjiSegment(o,s,_);break;default:throw new X}}}while(d!==Vn.TERMINATOR)}catch{throw new X}return new Tp(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),u,l)},t.decodeHanziSegment=function(e,n,r){if(13*r>e.available())throw new X;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a+=a<959?41377:42657,i[o]=a>>8&255,i[o+1]=255&a,o+=2,r--}try{n.append(di.decode(i,He.GB2312))}catch(u){throw new X(u)}},t.decodeKanjiSegment=function(e,n,r){if(13*r>e.available())throw new X;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a+=a<7936?33088:49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{n.append(di.decode(i,He.SHIFT_JIS))}catch(u){throw new X(u)}},t.decodeByteSegment=function(e,n,r,i,o,s){if(8*r>e.available())throw new X;for(var a,u=new Uint8Array(r),l=0;l<r;l++)u[l]=e.readBits(8);a=i===null?He.guessEncoding(u,s):i.getName();try{n.append(di.decode(u,a))}catch(c){throw new X(c)}o.push(u)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new X;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var o=n.length();r>1;){if(e.available()<11)throw new X;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new X;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<n.length();a++)n.charAt(a)==="%"&&(a<n.length()-1&&n.charAt(a+1)==="%"?n.deleteCharAt(a+1):n.setCharAt(a,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new X;var i=e.readBits(10);if(i>=1e3)throw new X;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new X;var o=e.readBits(7);if(o>=100)throw new X;n.append(t.toAlphaNumericChar(Math.floor(o/10))),n.append(t.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new X;var s=e.readBits(4);if(s>=10)throw new X;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if(!(128&n))return 127&n;if((192&n)==128)return(63&n)<<8&4294967295|e.readBits(8);if((224&n)==192)return(31&n)<<16&4294967295|e.readBits(16);throw new X},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),S8=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&e!==null&&!(e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),KA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zz=function(){function t(){this.rsDecoder=new Sp(Ki.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Ci.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new jz(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,n);return o.setOther(new S8(!0)),o}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,o,s,a=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=Uz.getDataBlocks(l,a,u),h=0;try{for(var d=KA(c),p=d.next();!p.done;p=d.next())h+=(v=p.value).getNumDataCodewords()}catch(M){r={error:M}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var m=new Uint8Array(h),y=0;try{for(var w=KA(c),_=w.next();!_.done;_=w.next()){var v,A=(v=_.value).getCodewords(),S=v.getNumDataCodewords();this.correctErrors(A,S);for(var x=0;x<S;x++)m[y++]=A[x]}}catch(M){o={error:M}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}return Hz.decode(m,a,u,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Mt}for(var i=0;i<n;i++)e[i]=r[i]},t}(),Wz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$z=function(t){function e(n,r,i){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o}return Wz(e,t),e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){return new e((this.getX()+r)/2,(this.getY()+n)/2,(this.estimatedModuleSize+i)/2)},e}(te),Gz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xz=function(){function t(e,n,r,i,o,s,a){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=e+this.width,i=this.startY+n/2,o=new Int32Array(3),s=this.image,a=0;a<n;a++){var u=i+(1&a?-Math.floor((a+1)/2):Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var l=e;l<r&&!s.get(l,u);)l++;for(var c=0;l<r;){if(s.get(l,u))if(c===1)o[1]++;else if(c===2){var h;if(this.foundPatternCross(o)&&(h=this.handlePossibleCenter(o,u,l))!==null)return h;o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++;else c===1&&c++,o[c]++;l++}if(this.foundPatternCross(o)&&(h=this.handlePossibleCenter(o,u,r))!==null)return h}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new j},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var u=e;u>=0&&o.get(n,u)&&a[1]<=r;)a[1]++,u--;if(u<0||a[1]>r)return NaN;for(;u>=0&&!o.get(n,u)&&a[0]<=r;)a[0]++,u--;if(a[0]>r)return NaN;for(u=e+1;u<s&&o.get(n,u)&&a[1]<=r;)a[1]++,u++;if(u===s||a[1]>r)return NaN;for(;u<s&&!o.get(n,u)&&a[2]<=r;)a[2]++,u++;if(a[2]>r)return NaN;var l=a[0]+a[1]+a[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,u):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,o,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,r),u=this.crossCheckVertical(n,a,2*e[1],s);if(!isNaN(u)){var l=(e[0]+e[1]+e[2])/3;try{for(var c=Gz(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.aboutEquals(l,u,a))return d.combineEstimate(u,a,l)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var p=new $z(a,u,l);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),Kz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yz=function(t){function e(n,r,i,o){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return Kz(e,t),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=this.count+1;return new e((this.count*this.getX()+r)/o,(this.count*this.getY()+n)/o,(this.count*this.estimatedModuleSize+i)/o,o)},e}(te),qz=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Mu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qz=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(ot.TRY_HARDER)!==void 0,r=e!=null&&e.get(ot.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*t.MAX_MODULES));(a<t.MIN_SKIP||n)&&(a=t.MIN_SKIP);for(var u=!1,l=new Int32Array(5),c=a-1;c<o&&!u;c+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var h=0,d=0;d<s;d++)if(i.get(d,c))(1&h)==1&&h++,l[h]++;else if(1&h)l[h]++;else if(h===4)if(t.foundPatternCross(l)){if(this.handlePossibleCenter(l,c,d,r)!==!0){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;continue}if(a=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>l[2]&&(c+=p-l[2]-a,d=s-1)}h=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;else l[++h]++;t.foundPatternCross(l)&&this.handlePossibleCenter(l,c,s,r)===!0&&(a=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}var m=this.selectBestPatterns();return te.orderBestPatterns(m),new qz(m)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var o=n/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&n>=s&&a.get(n-s,e-s);)o[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!a.get(n-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||n<s||o[1]>r)return!1;for(;e>=s&&n>=s&&a.get(n-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var u=a.getHeight(),l=a.getWidth();for(s=1;e+s<u&&n+s<l&&a.get(n+s,e+s);)o[2]++,s++;if(e+s>=u||n+s>=l)return!1;for(;e+s<u&&n+s<l&&!a.get(n+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=u||n+s>=l||o[3]>=r)return!1;for(;e+s<u&&n+s<l&&a.get(n+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(n,u);)a[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(n,u)&&a[1]<=r;)a[1]++,u--;if(u<0||a[1]>r)return NaN;for(;u>=0&&o.get(n,u)&&a[0]<=r;)a[0]++,u--;if(a[0]>r)return NaN;for(u=e+1;u<s&&o.get(n,u);)a[2]++,u++;if(u===s)return NaN;for(;u<s&&!o.get(n,u)&&a[3]<r;)a[3]++,u++;if(u===s||a[3]>=r)return NaN;for(;u<s&&o.get(n,u)&&a[4]<r;)a[4]++,u++;if(a[4]>=r)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,u):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(u,n);)a[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,n)&&a[1]<=r;)a[1]++,u--;if(u<0||a[1]>r)return NaN;for(;u>=0&&o.get(u,n)&&a[0]<=r;)a[0]++,u--;if(a[0]>r)return NaN;for(u=e+1;u<s&&o.get(u,n);)a[2]++,u++;if(u===s)return NaN;for(;u<s&&!o.get(u,n)&&a[3]<r;)a[3]++,u++;if(u===s||a[3]>=r)return NaN;for(;u<s&&o.get(u,n)&&a[4]<r;)a[4]++,u++;if(a[4]>=r)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,u):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),a=this.crossCheckVertical(n,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var u=o/7,l=!1,c=this.possibleCenters,h=0,d=c.length;h<d;h++){var p=c[h];if(p.aboutEquals(u,a,s)){c[h]=p.combineEstimate(a,s,u),l=!0;break}}if(!l){var m=new Yz(s,a,u);c.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var i=Mu(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM){if(r!=null)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);r=s}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var u=Mu(this.possibleCenters),l=u.next();!l.done;l=u.next())(m=l.value).getCount()>=t.CENTER_QUORUM&&(o++,s+=m.getEstimatedModuleSize())}catch(y){e={error:y}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}if(o<3)return!1;var c=s/a,h=0;try{for(var d=Mu(this.possibleCenters),p=d.next();!p.done;p=d.next()){var m=p.value;h+=Math.abs(m.getEstimatedModuleSize()-c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return h<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,o=this.possibleCenters.length;if(o<3)throw new j;var s,a=this.possibleCenters;if(o>3){var u=0,l=0;try{for(var c=Mu(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value.getEstimatedModuleSize();u+=d,l+=d*d}}catch(A){e={error:A}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}s=u/o;var p=Math.sqrt(l/o-s*s);a.sort(function(A,S){var x=Math.abs(S.getEstimatedModuleSize()-s),M=Math.abs(A.getEstimatedModuleSize()-s);return x<M?-1:x>M?1:0});for(var m=Math.max(.2*s,p),y=0;y<a.length&&a.length>3;y++){var w=a[y];Math.abs(w.getEstimatedModuleSize()-s)>m&&(a.splice(y,1),y--)}}if(a.length>3){u=0;try{for(var _=Mu(a),v=_.next();!v.done;v=_.next())u+=v.value.getEstimatedModuleSize()}catch(A){r={error:A}}finally{try{v&&!v.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}s=u/a.length,a.sort(function(A,S){if(S.getCount()===A.getCount()){var x=Math.abs(S.getEstimatedModuleSize()-s),M=Math.abs(A.getEstimatedModuleSize()-s);return x<M?1:x>M?-1:0}return S.getCount()-A.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),Zz=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ot.NEED_RESULT_POINT_CALLBACK);var n=new Qz(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new j("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,o),a=df.getProvisionalVersionForDimension(s),u=a.getDimensionForVersion()-7,l=null;if(a.getAlignmentPatternCenters().length>0)for(var c=r.getX()-n.getX()+i.getX(),h=r.getY()-n.getY()+i.getY(),d=1-3/u,p=Math.floor(n.getX()+d*(c-n.getX())),m=Math.floor(n.getY()+d*(h-n.getY())),y=4;y<=16;y<<=1)try{l=this.findAlignmentInRegion(o,p,m,y);break}catch(v){if(!(v instanceof j))throw v}var w=t.createTransform(n,r,i,l,s),_=t.sampleGrid(this.image,w,s);return new Mv(_,l===null?[i,n,r]:[i,n,r,l])},t.createTransform=function(e,n,r,i,o){var s,a,u,l,c=o-3.5;return i!==null?(s=i.getX(),a=i.getY(),l=u=c-3):(s=n.getX()-e.getX()+r.getX(),a=n.getY()-e.getY()+r.getY(),u=c,l=c),w8.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,u,l,3.5,c,e.getX(),e.getY(),n.getX(),n.getY(),s,a,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){return Lv.getInstance().sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var o=be.round(te.distance(e,n)/i),s=be.round(te.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new j("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var u=Math.floor(n-(i-n)*s);return s=1,u<0?(s=n/(n-u),u=0):u>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(u-n),u=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),(o+=this.sizeOfBlackWhiteBlackRun(e,n,a,u))-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var o=Math.abs(i-n)>Math.abs(r-e);if(o){var s=e;e=n,n=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),u=Math.abs(i-n),l=-a/2,c=e<r?1:-1,h=n<i?1:-1,d=0,p=r+c,m=e,y=n;m!==p;m+=c){var w=o?y:m,_=o?m:y;if(d===1===this.image.get(w,_)){if(d===2)return be.distance(m,y,e,n);d++}if((l+=u)>0){if(y===i)break;y+=h,l-=a}}return d===2?be.distance(r+c,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var o=Math.floor(i*e),s=Math.max(0,n-o),a=Math.min(this.image.getWidth()-1,n+o);if(a-s<3*e)throw new j("Alignment top exceeds estimated module size.");var u=Math.max(0,r-o),l=Math.min(this.image.getHeight()-1,r+o);if(l-u<3*e)throw new j("Alignment bottom exceeds estimated module size.");return new Xz(this.image,s,u,a-s,l-u,e,this.resultPointCallback).find()},t}(),Yg=function(){function t(){this.decoder=new zz}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(ot.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=t.NO_POINTS}else{var s=new Zz(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof S8&&r.getOther().applyMirroredCorrection(i);var a=new cn(r.getText(),r.getRawBytes(),void 0,i,oe.QR_CODE,void 0),u=r.getByteSegments();u!==null&&a.putMetadata(Gt.BYTE_SEGMENTS,u);var l=r.getECLevel();return l!==null&&a.putMetadata(Gt.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(a.putMetadata(Gt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Gt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new j;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],u=r[0];if(a>=u||o>=s)throw new j;if(s-o!=u-a&&(u=a+(s-o))>=e.getWidth())throw new j;var l=Math.round((u-a+1)/i),c=Math.round((s-o+1)/i);if(l<=0||c<=0)throw new j;if(c!==l)throw new j;var h=Math.floor(i/2);o+=h;var d=(a+=h)+Math.floor((l-1)*i)-u;if(d>0){if(d>h)throw new j;a-=d}var p=o+Math.floor((c-1)*i)-s;if(p>0){if(p>h)throw new j;o-=p}for(var m=new Ci(l,c),y=0;y<c;y++)for(var w=o+Math.floor(y*i),_=0;_<l;_++)e.get(a+Math.floor(_*i),w)&&m.set(_,y);return m},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),o=e[0],s=e[1],a=!0,u=0;o<i&&s<r;){if(a!==n.get(o,s)){if(++u==5)break;a=!a}o++,s++}if(o===i||s===r)throw new j;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),Jz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ie=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return be.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=Jz(e),a=s.next();!a.done;a=s.next()){var u=a.value;i[o++]=u}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=Lt.binarySearch(t.SYMBOL_TABLE,262143&e);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),eW=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),tW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nW=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),o=t.detect(r,i);return o.length||((i=i.clone()).rotate180(),o=t.detect(r,i)),new eW(i,o)},t.detect=function(e,n){for(var r,i,o=new Array,s=0,a=0,u=!1;s<n.getHeight();){var l=t.findVertices(n,s,a);if(l[0]!=null||l[3]!=null){if(u=!0,o.push(l),!e)break;l[2]!=null?(a=Math.trunc(l[2].getX()),s=Math.trunc(l[2].getY())):(a=Math.trunc(l[4].getX()),s=Math.trunc(l[4].getY()))}else{if(!u)break;u=!1,a=0;try{for(var c=(r=void 0,tW(o)),h=c.next();!h.done;h=c.next()){var d=h.value;d[1]!=null&&(s=Math.trunc(Math.max(s,d[1].getY()))),d[3]!=null&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}s+=t.ROW_STEP}}return o},t.findVertices=function(e,n,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,o,s){for(var a=new Array(4),u=!1,l=new Int32Array(s.length);i<n;i+=t.ROW_STEP)if((p=t.findGuardPattern(e,o,i,r,!1,s,l))!=null){for(;i>0;){if((d=t.findGuardPattern(e,o,--i,r,!1,s,l))==null){i++;break}p=d}a[0]=new te(p[0],i),a[1]=new te(p[1],i),u=!0;break}var c=i+1;if(u){for(var h=0,d=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);c<n;c++){var p;if((p=t.findGuardPattern(e,d[0],c,r,!1,s,l))!=null&&Math.abs(d[0]-p[0])<t.MAX_PATTERN_DRIFT&&Math.abs(d[1]-p[1])<t.MAX_PATTERN_DRIFT)d=p,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}c-=h+1,a[2]=new te(d[0],c),a[3]=new te(d[1],c)}return c-i<t.BARCODE_MIN_HEIGHT&&Lt.fill(a,null),a},t.findGuardPattern=function(e,n,r,i,o,s,a){Lt.fillWithin(a,0,a.length,0);for(var u=n,l=0;e.get(u,r)&&u>0&&l++<t.MAX_PIXEL_DRIFT;)u--;for(var c=u,h=0,d=s.length,p=o;c<i;c++)if(e.get(c,r)!==p)a[h]++;else{if(h===d-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,c]);u+=a[0]+a[1],Je.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}return h===d-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,c-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return 1/0;var u=o/s;r*=u;for(var l=0,c=0;c<i;c++){var h=e[c],d=n[c]*u,p=h>d?h-d:d-h;if(p>r)return 1/0;l+=p}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),rW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ss=function(){function t(e,n){if(n.length===0)throw new ce;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Je.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=rW(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}for(var u=this.coefficients[0],l=this.coefficients.length,c=1;c<l;c++)u=this.field.add(this.field.multiply(e,u),this.coefficients[c]);return u},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;Je.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(n[a-s],r[a]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var u=n[a],l=0;l<o;l++)s[a+l]=this.field.add(s[a+l],this.field.multiply(u,i[l]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new ce;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ye,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),n!==0&&r===1||e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),iW=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new ce;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new _8;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),oW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sW=function(t){function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var o=1,s=0;s<n;s++)i.expTable[s]=o,o=o*r%n;for(s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new ss(i,new Int32Array([0])),i.one=new ss(i,new Int32Array([1])),i}return oW(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new ce;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new ss(this,i)},e.PDF417_GF=new e(Ie.NUMBER_OF_CODEWORDS,3),e}(iW),aW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uW=function(){function t(){this.field=sW.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,o,s=new ss(this.field,e),a=new Int32Array(n),u=!1,l=n;l>0;l--){var c=s.evaluateAt(this.field.exp(l));a[n-l]=c,c!==0&&(u=!0)}if(!u)return 0;var h=this.field.getOne();if(r!=null)try{for(var d=aW(r),p=d.next();!p.done;p=d.next()){var m=p.value,y=this.field.exp(e.length-1-m),w=new ss(this.field,new Int32Array([this.field.subtract(0,y),1]));h=h.multiply(w)}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var _=new ss(this.field,a),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),_,n),A=v[0],S=v[1],x=this.findErrorLocations(A),M=this.findErrorMagnitudes(S,A,x);for(l=0;l<x.length;l++){var T=e.length-1-this.field.log(x[l]);if(T<0)throw Mt.getChecksumInstance();e[T]=this.field.subtract(e[T],M[l])}return x.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=e,s=n,a=this.field.getZero(),u=this.field.getOne();s.getDegree()>=Math.round(r/2);){var l=o,c=a;if(a=u,(o=s).isZero())throw Mt.getChecksumInstance();s=l;for(var h=this.field.getZero(),d=o.getCoefficient(o.getDegree()),p=this.field.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),y=this.field.multiply(s.getCoefficient(s.getDegree()),p);h=h.add(this.field.buildMonomial(m,y)),s=s.subtract(o.multiplyByMonomial(m,y))}u=h.multiply(a).subtract(c).negative()}var w=u.getCoefficient(0);if(w===0)throw Mt.getChecksumInstance();var _=this.field.inverse(w);return[u.multiply(_),s.multiply(_)]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,o=1;o<this.field.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==n)throw Mt.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,n.getCoefficient(s));var a=new ss(this.field,o),u=r.length,l=new Int32Array(u);for(s=0;s<u;s++){var c=this.field.inverse(r[s]),h=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(a.evaluateAt(c));l[s]=this.field.multiply(h,d)}return l},t}(),qg=function(){function t(e,n,r,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,o)}return t.prototype.constructor_1=function(e,n,r,i,o){var s=n==null||r==null,a=i==null||o==null;if(s&&a)throw new j;s?(n=new te(0,i.getY()),r=new te(0,o.getY())):a&&(i=new te(e.getWidth()-1,n.getY()),o=new te(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,l=Math.trunc(u.getY()-e);l<0&&(l=0);var c=new te(u.getX(),l);r?i=c:s=c}if(n>0){var h=r?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+n);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new te(h.getX(),d);r?o=p:a=p}return new t(this.image,i,o,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),lW=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Bv=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(i,o,s,a,u,l){if(i==="%%")return"%";if(n[++r]!==void 0){i=a?parseInt(a.substr(1)):void 0;var c,h=u?parseInt(u.substr(1)):void 0;switch(l){case"s":c=n[r];break;case"c":c=n[r][0];break;case"f":c=parseFloat(n[r]).toFixed(i);break;case"p":c=parseFloat(n[r]).toPrecision(i);break;case"e":c=parseFloat(n[r]).toExponential(i);break;case"x":c=parseInt(n[r]).toString(h||16);break;case"d":c=parseFloat(parseInt(n[r],h||10).toPrecision(i)).toFixed(0)}c=typeof c=="object"?JSON.stringify(c):(+c).toString(h);for(var d=parseInt(s),p=s&&s[0]+""=="0"?"0":" ";c.length<d;)c=o!==void 0?c+p:p+c;return c}})},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),cW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b8=function(){function t(e){this.boundingBox=new qg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i])!=null||(i=this.imageRowToCodewordIndex(e)+r)<this.codewords.length&&(n=this.codewords[i])!=null)return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Bv,i=0;try{for(var o=cW(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;a!=null?r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue()):r.format("%3d:    |   %n",i++)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),hW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(e===void 0||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Qu=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,o=function(l,c){var h=function(){return l},d=function(){return c};d()>r?(r=d(),(i=[]).push(h())):d()===r&&i.push(h())};try{for(var s=hW(this.values.entries()),a=s.next();!a.done;a=s.next()){var u=fW(a.value,2);o(u[0],u[1])}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return Ie.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),dW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YA=function(t){function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return dW(e,t),e.prototype.setRowNumbers=function(){var n,r;try{for(var i=W1(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=-1,c=1,h=0,d=a;d<u;d++)if(r[d]!=null){var p=r[d],m=p.getRowNumber()-l;if(m===0)h++;else if(m===1)c=Math.max(c,h),h=1,l=p.getRowNumber();else if(m<0||p.getRowNumber()>=n.getRowCount()||m>d)r[d]=null;else{for(var y=void 0,w=(y=c>2?(c-2)*m:m)>=d,_=1;_<=y&&!w;_++)w=r[d-_]!=null;w?r[d]=null:(l=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=W1(this.getCodewords()),a=s.next();!a.done;a=s.next()){var u=a.value;if(u!=null){var l=u.getRowNumber();if(l>=o.length)continue;o[l]++}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.getCodewords(),l=-1,c=s;c<a;c++)if(u[c]!=null){var h=u[c];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-l;d===0||(d===1?l=h.getRowNumber():h.getRowNumber()>=n.getRowCount()?u[c]=null:l=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),o=new Qu,s=new Qu,a=new Qu,u=new Qu;try{for(var l=W1(i),c=l.next();!c.done;c=l.next()){var h=c.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(3*d+1);break;case 1:u.setValue(d/3),a.setValue(d%3);break;case 2:o.setValue(d+1)}}}}catch(y){n={error:y}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Ie.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Ie.MAX_ROWS_IN_BARCODE)return null;var m=new lW(o.getValue()[0],s.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var o=n[i];if(n[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount())n[i]=null;else switch(this._isLeft||(a+=2),a%3){case 0:3*s+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:Math.trunc(s/3)===r.getErrorCorrectionLevel()&&s%3===r.getRowCountLowerPart()||(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(b8),pW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mW=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,n=Ie.MAX_CODEWORDS_IN_BARCODE;do e=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<e);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(this.detectionResultColumns[0]!=null&&this.detectionResultColumns[this.barcodeColumnCount+1]!=null){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[n],a=this.detectionResultColumns[e-1].getCodewords(),u=a;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var l=new Array(14);l[2]=a[n],l[3]=u[n],n>0&&(l[0]=r[n-1],l[4]=a[n-1],l[5]=u[n-1]),n>1&&(l[8]=r[n-2],l[10]=a[n-2],l[11]=u[n-2]),n<r.length-1&&(l[1]=r[n+1],l[6]=a[n+1],l[7]=u[n+1]),n<r.length-2&&(l[9]=r[n+2],l[12]=a[n+2],l[13]=u[n+2]);try{for(var c=pW(l),h=c.next();!h.done;h=c.next()){var d=h.value;if(t.adjustRowNumber(s,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n!=null&&!(!n.hasValidRowNumber()||n.getBucket()!==e.getBucket())&&(e.setRowNumber(n.getRowNumber()),!0)},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Bv,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++)if(this.detectionResultColumns[i]!=null){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null?n.format(" %3d|%3d",o.getRowNumber(),o.getValue()):n.format("    |   ")}else n.format("    |   ");n.format("%n")}return n.toString()},t}(),gW=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),yW=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ie.SYMBOL_TABLE.length;e++)for(var n=Ie.SYMBOL_TABLE[e],r=1&n,i=0;i<Ie.BARS_IN_MODULE;i++){for(var o=0;(1&n)===r;)o+=1,n>>=1;r=1&n,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ie.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ie.BARS_IN_MODULE-i-1]=Math.fround(o/Ie.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=be.sum(e),r=new Int32Array(Ie.BARS_IN_MODULE),i=0,o=0,s=0;s<Ie.MODULES_IN_CODEWORD;s++){var a=n/(2*Ie.MODULES_IN_CODEWORD)+s*n/Ie.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return Ie.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2==0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=be.sum(e),r=new Array(Ie.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var o=Wg.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var u=0,l=t.RATIOS_TABLE[a],c=0;c<Ie.BARS_IN_MODULE;c++){var h=Math.fround(l[c]-r[c]);if((u+=Math.fround(h*h))>=o)break}u<o&&(o=u,s=Ie.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ie.SYMBOL_TABLE.length).map(function(e){return new Array(Ie.BARS_IN_MODULE)}),t}(),vW=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),qA=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),_W=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wW=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return _W(e,t),e.kind="NullPointerException",e}(xn),EW=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new wW;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new xv;if(r!==0)for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),AW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CW=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return AW(e,t),e}(xn),IW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TW=function(t){function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new ce("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return IW(e,t),e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length<<1;if(r-n<0&&(r=n),r<0){if(n<0)throw new CW;r=mt.MAX_VALUE}this.buf=Lt.copyOfUint8Array(this.buf,r)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new xv;this.ensureCapacity(this.count+i),Je.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Lt.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(EW);function R8(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function xi(t){if(Bh===void 0&&(Bh=R8()),Bh===null)throw new Error("BigInt is not supported!");return Bh(t)}(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Be||(Be={}));var SW=function(){function t(){}return t.decode=function(e,n){var r=new ye(""),i=yn.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new vW;o<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(s,e,i,o,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,r);break;case t.ECI_CHARSET:yn.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new X;default:o--,o=t.textCompaction(e,o,r)}if(!(o<e.length))throw X.getFormatInstance();s=e[o++]}if(r.length()===0)throw X.getFormatInstance();var u=new Tp(null,r.toString(),null,n);return u.setOther(a),u},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw X.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=e[n];r.setSegmentIndex(mt.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new ye;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var a=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new ye;n=t.textCompaction(e,n+1,u),r.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new ye;n=t.textCompaction(e,n+1,l),r.setSender(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new ye;n=t.textCompaction(e,n+1,c),r.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new ye;n=t.numericCompaction(e,n+1,h),r.setSegmentCount(mt.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new ye;n=t.numericCompaction(e,n+1,d),r.setTimestamp(qA.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new ye;n=t.numericCompaction(e,n+1,p),r.setChecksum(mt.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new ye;n=t.numericCompaction(e,n+1,m),r.setFileSize(qA.parseLong(m.toString()));break;default:throw X.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(a!==-1){var y=n-a;r.isLastSegment()&&y--,r.setOptionalData(Lt.copyOfRange(e,a,a+y))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array(2*(e[0]-n)),o=new Int32Array(2*(e[0]-n)),s=0,a=!1;n<e[0]&&!a;){var u=e[n++];if(u<t.TEXT_COMPACTION_MODE_LATCH)i[s]=u/30,i[s+1]=u%30,s+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[n++],o[s]=u,s++}}return t.decodeTextCompaction(i,o,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var o=Be.ALPHA,s=Be.ALPHA,a=0;a<r;){var u=e[a],l="";switch(o){case Be.ALPHA:if(u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.LL:o=Be.LOWER;break;case t.ML:o=Be.MIXED;break;case t.PS:s=o,o=Be.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Be.ALPHA}break;case Be.LOWER:if(u<26)l=String.fromCharCode(97+u);else switch(u){case 26:l=" ";break;case t.AS:s=o,o=Be.ALPHA_SHIFT;break;case t.ML:o=Be.MIXED;break;case t.PS:s=o,o=Be.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Be.ALPHA}break;case Be.MIXED:if(u<t.PL)l=t.MIXED_CHARS[u];else switch(u){case t.PL:o=Be.PUNCT;break;case 26:l=" ";break;case t.LL:o=Be.LOWER;break;case t.AL:o=Be.ALPHA;break;case t.PS:s=o,o=Be.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Be.ALPHA}break;case Be.PUNCT:if(u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Be.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Be.ALPHA}break;case Be.ALPHA_SHIFT:if(o=s,u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=Be.ALPHA}break;case Be.PUNCT_SHIFT:if(o=s,u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Be.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Be.ALPHA}}l!==""&&i.append(l),a++}},t.byteCompaction=function(e,n,r,i,o){var s=new TW,a=0,u=0,l=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),h=n[i++];i<n[0]&&!l;)switch(c[a++]=h,u=900*u+h,h=n[i++]){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(a%5==0&&a>0){for(var d=0;d<6;++d)s.write(Number(xi(u)>>xi(8*(5-d))));u=0,a=0}}i===n[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(c[a++]=h);for(var p=0;p<a;p++)s.write(c[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!l;){var m=n[i++];if(m<t.TEXT_COMPACTION_MODE_LATCH)a++,u=900*u+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0}if(a%5==0&&a>0){for(d=0;d<6;++d)s.write(Number(xi(u)>>xi(8*(5-d))));u=0,a=0}}}return o.append(di.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,o=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!o;){var a=e[n++];if(n===e[0]&&(o=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0}(i%t.MAX_NUMERIC_CODEWORDS==0||a===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=xi(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*xi(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new X;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=R8()?function(){var e=[];e[0]=xi(1);var n=xi(900);e[1]=n;for(var r=2;r<16;r++)e[r]=e[r-1]*n;return e}():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Lu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bW=function(){function t(){}return t.decode=function(e,n,r,i,o,s,a){for(var u,l=new qg(e,n,r,i,o),c=null,h=null,d=!0;;d=!1){if(n!=null&&(c=t.getRowIndicatorColumn(e,l,n,!0,s,a)),i!=null&&(h=t.getRowIndicatorColumn(e,l,i,!1,s,a)),(u=t.merge(c,h))==null)throw j.getNotFoundInstance();var p=u.getBoundingBox();if(!d||p==null||!(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))break;l=p}u.setBoundingBox(l);var m=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,c),u.setDetectionResultColumn(m,h);for(var y=c!=null,w=1;w<=m;w++){var _=y?w:m-w;if(u.getDetectionResultColumn(_)===void 0){var v=void 0;v=_===0||_===m?new YA(l,_===0):new b8(l),u.setDetectionResultColumn(_,v);for(var A=-1,S=A,x=l.getMinY();x<=l.getMaxY();x++){if((A=t.getStartColumn(u,_,x,y))<0||A>l.getMaxX()){if(S===-1)continue;A=S}var M=t.detectCodeword(e,l.getMinX(),l.getMaxX(),y,A,x,s,a);M!=null&&(v.setCodeword(x,M),S=A,s=Math.min(s,M.getWidth()),a=Math.max(a,M.getWidth()))}}}return t.createDecoderResult(u)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=qg.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new mW(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),s=0;try{for(var a=Lu(i),u=a.next();!u.done;u=a.next()){var l=u.value;if(s+=o-l,l>0)break}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var c=e.getCodewords(),h=0;s>0&&c[h]==null;h++)s--;var d=0;for(h=i.length-1;h>=0&&(d+=o-i[h],!(i[h]>0));h--);for(h=c.length-1;d>0&&c[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var o=Lu(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r,i;return e==null||(r=e.getBarcodeMetadata())==null?n==null?null:n.getBarcodeMetadata():n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,o,s){for(var a=new YA(n,i),u=0;u<2;u++)for(var l=u===0?1:-1,c=Math.trunc(Math.trunc(r.getX())),h=Math.trunc(Math.trunc(r.getY()));h<=n.getMaxY()&&h>=n.getMinY();h+=l){var d=t.detectCodeword(e,0,e.getWidth(),i,c,h,o,s);d!=null&&(a.setCodeword(h,d),c=i?d.getStartX():d.getEndX())}return a},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Ie.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var u=0;u<e.getBarcodeColumnCount();u++){var l=n[a][u+1].getValue(),c=a*e.getBarcodeColumnCount()+u;l.length===0?r.push(c):l.length===1?i[c]=l[0]:(s.push(c),o.push(l))}for(var h=new Array(o.length),d=0;d<h.length;d++)h[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ie.toIntArray(r),Ie.toIntArray(s),h)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var u=0;u<s.length;u++)n[i[u]]=o[u][s[u]];try{return t.decodeCodewords(n,e,r)}catch(l){if(!(l instanceof Mt))throw l}if(s.length===0)throw Mt.getChecksumInstance();for(u=0;u<s.length;u++){if(s[u]<o[u].length-1){s[u]++;break}if(s[u]=0,u===s.length-1)throw Mt.getChecksumInstance()}}throw Mt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var u=0;u<s[a].length;u++)s[a][u]=new Qu;var l=0;try{for(var c=Lu(e.getDetectionResultColumns()),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,Lu(d.getCodewords())),m=p.next();!m.done;m=p.next()){var y=m.value;if(y!=null){var w=y.getRowNumber();if(w>=0){if(w>=s.length)continue;s[w][l].setValue(y.getValue())}}}}catch(_){i={error:_}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}l++}}catch(_){n={error:_}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var o,s,a=i?1:-1,u=null;if(t.isValidBarcodeColumn(e,n-a)&&(u=e.getDetectionResultColumn(n-a).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if((u=e.getDetectionResultColumn(n).getCodewordNearby(r))!=null)return i?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,n-a)&&(u=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var l=0;t.isValidBarcodeColumn(e,n-a);){n-=a;try{for(var c=(o=void 0,Lu(e.getDetectionResultColumn(n).getCodewords())),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*l*(d.getEndX()-d.getStartX())}}catch(p){o={error:p}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}l++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,o,s,a,u){o=t.adjustCodewordStartColumn(e,n,r,i,o,s);var l,c=t.getModuleBitCount(e,n,r,i,o,s);if(c==null)return null;var h=be.sum(c);if(i)l=o+h;else{for(var d=0;d<c.length/2;d++){var p=c[d];c[d]=c[c.length-1-d],c[c.length-1-d]=p}o=(l=o)-h}if(!t.checkCodewordSkew(h,a,u))return null;var m=yW.getDecodedValue(c),y=Ie.getCodeword(m);return y===-1?null:new gW(o,l,t.getCodewordBucketNumber(m),y)},t.getModuleBitCount=function(e,n,r,i,o,s){for(var a=o,u=new Int32Array(8),l=0,c=i?1:-1,h=i;(i?a<r:a>=n)&&l<u.length;)e.get(a,s)===h?(u[l]++,a+=c):(l++,h=!h);return l===u.length||a===(i?r:n)&&l===u.length-1?u:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,o,s){for(var a=o,u=i?-1:1,l=0;l<2;l++){for(;(i?a>=n:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>t.CODEWORD_SKEW_SIZE)return o;a+=u}u=-u,i=!i}return a},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw X.getFormatInstance();var i=1<<n+1,o=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=SW.decode(e,""+n);return s.setErrorsCorrected(o),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw Mt.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw X.getFormatInstance();var r=e[0];if(r>e.length)throw X.getFormatInstance();if(r===0){if(!(n<e.length))throw X.getFormatInstance();e[0]=e.length-n}},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((1&e)!==r&&(r=1&e,--i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Bv,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new uW,t}(),RW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qg=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw j.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof X||r instanceof Mt?j.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,o,s=new Array,a=nW.detectMultiple(e,n,r);try{for(var u=RW(a.getPoints()),l=u.next();!l.done;l=u.next()){var c=l.value,h=bW.decode(a.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new cn(h.getText(),h.getRawBytes(),void 0,c,oe.PDF_417);d.putMetadata(Gt.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(Gt.PDF417_EXTRA_METADATA,p),s.push(d)}}catch(m){i={error:m}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return s.map(function(m){return m})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?mt.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),PW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QA=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return PW(e,t),e.kind="ReaderException",e}(xn),ZA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OW=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return this.readers!==null&&this.readers!==void 0||this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(ot.TRY_HARDER)!==void 0,r=e==null?null:e.get(ot.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===oe.UPC_A||s===oe.UPC_E||s===oe.EAN_13||s===oe.EAN_8||s===oe.CODABAR||s===oe.CODE_39||s===oe.CODE_93||s===oe.CODE_128||s===oe.ITF||s===oe.RSS_14||s===oe.RSS_EXPANDED});o&&!n&&i.push(new qu(e)),r.includes(oe.QR_CODE)&&i.push(new Yg),r.includes(oe.DATA_MATRIX)&&i.push(new Kg),r.includes(oe.AZTEC)&&i.push(new Gg),r.includes(oe.PDF_417)&&i.push(new Qg),o&&n&&i.push(new qu(e))}i.length===0&&(n||i.push(new qu(e)),i.push(new Yg),i.push(new Kg),i.push(new Gg),i.push(new Qg),n&&i.push(new qu(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=ZA(this.readers),i=r.next();!i.done;i=r.next())i.value.reset()}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new QA("No readers where selected, nothing can be read.");try{for(var i=ZA(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof QA)continue}}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new j("No MultiFormat Readers were able to detect the code.")},t}(),NW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DW=function(t){function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=new OW;return i.setHints(n),t.call(this,i,r)||this}return NW(e,t),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(nu),xW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n){return n===void 0&&(n=500),t.call(this,new Qg,n)||this}xW(e,t)})(nu);var JA,kW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n){return n===void 0&&(n=500),t.call(this,new Yg,n)||this}kW(e,t)})(nu),function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"}(JA||(JA={}));var MW=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],u=0;u<i-1;u++){var l=a[u];l===a[u+1]&&l===r[s+1][u]&&l===r[s+1][u+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var u=r[s];a+6<i&&u[a]===1&&u[a+1]===0&&u[a+2]===1&&u[a+3]===1&&u[a+4]===1&&u[a+5]===0&&u[a+6]===1&&(t.isWhiteHorizontal(u,a-4,a)||t.isWhiteHorizontal(u,a+7,a+11))&&n++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(t.isWhiteVertical(r,a,s-4,s)||t.isWhiteVertical(r,a,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],u=0;u<i;u++)a[u]===1&&n++;var l=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*n-l)/l)*t.N4},t.getDataMaskBit=function(e,n,r){var i,o;switch(e){case 0:i=r+n&1;break;case 1:i=1&r;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:i=(1&(o=r*n))+o%3;break;case 6:i=(1&(o=r*n))+o%3&1;break;case 7:i=(o=r*n)%3+(r+n&1)&1;break;default:throw new ce("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),o=n?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var u=0,l=-1,c=0;c<o;c++){var h=n?s[a][c]:s[c][a];h===l?u++:(u>=5&&(r+=t.N1+(u-5)),u=1,l=h)}u>=5&&(r+=t.N1+(u-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),LW=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ye;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),VW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xo=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return VW(e,t),e.kind="WriterException",e}(xn);(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,o){t.clearMatrix(o),t.embedBasicPatterns(r,o),t.embedTypeInfo(n,i,o),t.maybeEmbedVersionInfo(r,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new kr;t.makeTypeInfoBits(e,n,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),u=t.TYPE_INFO_COORDINATES[o],l=u[0],c=u[1];if(r.setBoolean(l,c,a),o<8){var h=r.getWidth()-o-1,d=8;r.setBoolean(h,d,a)}else h=8,d=r.getHeight()-7+(o-8),r.setBoolean(h,d,a)}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new kr;t.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+s,a),n.setBoolean(n.getHeight()-11+s,o,a)}}},t.embedDataBits=function(e,n,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var u=0;u<2;++u){var l=s-u;if(t.isEmpty(r.get(l,a))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,n!==255&&MW.getDataMaskBit(n,l,a)&&(c=!c),r.setBoolean(l,a,c)}}a+=o}a+=o=-o,s-=2}if(i!==e.getSize())throw new Xo("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-mt.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new ce("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!LW.isValidMaskPattern(n))throw new Xo("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(o,10);var s=new kr;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Xo("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Xo("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Xo;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new Xo;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new Xo;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e),t.embedHorizontalSeparationPattern(0,7,e),t.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),t.embedVerticalSeparationPattern(7,0,e),t.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),t.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var u=0;u!==s;u++){var l=i[u];l>=0&&t.isEmpty(n.get(l,a))&&t.embedPositionAdjustmentPattern(l-2,a-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})();(function(){Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),yn.UTF8.getName()})();var BW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n,r,i,o,s,a,u,l){var c=t.call(this,a,u)||this;if(c.yuvData=n,c.dataWidth=r,c.dataHeight=i,c.left=o,c.top=s,o+a>r||s+u>i)throw new ce("Crop rectangle does not fit within image data.");return l&&c.reverseHorizontal(a,u),c}BW(e,t),e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new ce("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Je.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Je.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var u=a*n;Je.arraycopy(this.yuvData,s,o,u,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var u=a*n,l=0;l<n;l++){var c=255&o[s+l*e.THUMBNAIL_SCALE_FACTOR];i[u+l]=4278190080|65793*c}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+n/2,u=s,l=s+n-1;u<a;u++,l--){var c=i[u];i[u]=i[l],i[l]=c}},e.prototype.invert=function(){return new kv(this)},e.THUMBNAIL_SCALE_FACTOR=2})(Ip);var FW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n,r,i,o,s,a,u){var l=t.call(this,r,i)||this;if(l.dataWidth=o,l.dataHeight=s,l.left=a,l.top=u,n.BYTES_PER_ELEMENT===4){for(var c=r*i,h=new Uint8ClampedArray(c),d=0;d<c;d++){var p=n[d],m=p>>16&255,y=p>>7&510,w=255&p;h[d]=(m+y+w)/4&255}l.luminances=h}else l.luminances=n;if(o===void 0&&(l.dataWidth=r),s===void 0&&(l.dataHeight=i),a===void 0&&(l.left=0),u===void 0&&(l.top=0),l.left+r>l.dataWidth||l.top+i>l.dataHeight)throw new ce("Crop rectangle does not fit within image data.");return l}FW(e,t),e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new ce("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Je.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Je.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var u=a*n;Je.arraycopy(this.luminances,s,o,u,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new kv(this)}})(Ip);var eC,tC,jW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UW=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return jW(e,t),e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(yn),HW=function(){function t(){}return t.ISO_8859_1=yn.ISO8859_1,t}();(eC=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,(n*=2)>=256&&(n^=301);return{LOG:t,ALOG:e}}([],[])).LOG,eC.ALOG,function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(tC||(tC={}));var nC,zW="[)>05",WW="[)>06",$W=function(){function t(){}return t.prototype.getEncodingMode=function(){return 0},t.prototype.encode=function(e){if(mr.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),r=mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(r!==this.getEncodingMode())switch(r){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+r)}else mr.isExtendedASCII(n)?(e.writeCodeword(235),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(mr.isDigit(e)&&mr.isDigit(n))return 10*(e-48)+(n-48)+130;throw new Error("not digits: "+e+n)},t}(),GW=function(){function t(){}return t.prototype.getEncodingMode=function(){return 5},t.prototype.encode=function(e){var n=new ye;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();if(n.append(r),e.pos++,mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var i=n.length()-1,o=e.getCodewordCount()+i+1;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||s)if(i<=249)n.setCharAt(0,He.getCharAt(i));else{if(!(i<=1555))throw new Error("Message length not in valid ranges: "+i);n.setCharAt(0,He.getCharAt(Math.floor(i/250)+249)),n.insert(1,He.getCharAt(i%250))}var a=0;for(r=n.length();a<r;a++)e.writeCodeword(this.randomize255State(n.charAt(a).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=e+(149*n%255+1);return r<=255?r:r-256},t}(),Fv=function(){function t(){}return t.prototype.getEncodingMode=function(){return 1},t.prototype.encodeMaximal=function(e){for(var n=new ye,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3==0&&(i=e.pos,o=n.length())}if(o!==n.length()){var a=Math.floor(n.length()/3*2),u=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(u);var l=e.getSymbolInfo().getDataCapacity()-u,c=Math.floor(n.length()%3);(c===2&&l!==2||c===1&&(r>3||l!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(230),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new ye;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),o=2*Math.floor(n.length()/3),s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var u=new ye;for(n.length()%3==2&&a!==2&&(i=this.backtrackOneCharacter(e,n,u,i));n.length()%3==1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,n,u,i);break}if(n.length()%3==0&&mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var o=n.length(),s=n.toString().substring(0,o-i);n.setLengthToZero(),n.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(i!==0)throw new Error("Unexpected case. Please report!");for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n)},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,o=new ye;return o.append(r),o.append(i),o.toString()},t}(),XW=function(){function t(){}return t.prototype.getEncodingMode=function(){return 4},t.prototype.encode=function(e){for(var n=new ye;e.hasMoreCharacters();){var r=e.getCurrentChar();if(this.encodeChar(r,n),e.pos++,n.length()>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var i=n.toString().substring(4);if(n.setLengthToZero(),n.append(i),mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}n.append(He.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(n.toString()),u=!e.hasMoreCharacters()&&s<=2;s<=2&&(e.updateSymbolInfo(e.getCodewordCount()+s),(i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))),u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(0)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(He.getCharAt(e-64)):mr.illegalCharacter(He.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=(e.charAt(0).charCodeAt(0)<<18)+((n>=2?e.charAt(1).charCodeAt(0):0)<<12)+((n>=3?e.charAt(2).charCodeAt(0):0)<<6)+(n>=4?e.charAt(3).charCodeAt(0):0),i=r>>16&255,o=r>>8&255,s=255&r,a=new ye;return a.append(i),n>=2&&a.append(o),n>=3&&a.append(s),a.toString()},t}(),KW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ne=function(){function t(e,n,r,i,o,s,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=u}return t.lookup=function(e,n,r,i,o){var s,a;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var u=YW(QW),l=u.next();!l.done;l=u.next()){var c=l.value;if((n!==1||!c.rectangular)&&(n!==2||c.rectangular)&&(r==null||!(c.getSymbolWidth()<r.getWidth()||c.getSymbolHeight()<r.getHeight()))&&(i==null||!(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(h){s={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),qW=function(t){function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return KW(e,t),e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(Ne),QW=[new Ne(!1,3,5,8,8,1),new Ne(!1,5,7,10,10,1),new Ne(!0,5,7,16,6,1),new Ne(!1,8,10,12,12,1),new Ne(!0,10,11,14,6,2),new Ne(!1,12,12,14,14,1),new Ne(!0,16,14,24,10,1),new Ne(!1,18,14,16,16,1),new Ne(!1,22,18,18,18,1),new Ne(!0,22,18,16,10,2),new Ne(!1,30,20,20,20,1),new Ne(!0,32,24,16,14,2),new Ne(!1,36,24,22,22,1),new Ne(!1,44,28,24,24,1),new Ne(!0,49,28,22,14,2),new Ne(!1,62,36,14,14,4),new Ne(!1,86,42,16,16,4),new Ne(!1,114,48,18,18,4),new Ne(!1,144,56,20,20,4),new Ne(!1,174,68,22,22,4),new Ne(!1,204,84,24,24,4,102,42),new Ne(!1,280,112,14,14,16,140,56),new Ne(!1,368,144,16,16,16,92,36),new Ne(!1,456,192,18,18,16,114,48),new Ne(!1,576,224,20,20,16,144,56),new Ne(!1,696,272,22,22,16,174,68),new Ne(!1,816,336,24,24,16,136,56),new Ne(!1,1050,408,18,18,36,175,68),new Ne(!1,1304,496,20,20,36,163,62),new qW],ZW=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(a){return a.charCodeAt(0)}),r=new ye,i=0,o=n.length;i<o;i++){var s=String.fromCharCode(255&n[i]);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new ye,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ne.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),JW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e$=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return JW(e,t),e.prototype.getEncodingMode=function(){return 3},e.prototype.encode=function(n){for(var r=new ye;n.hasMoreCharacters();){var i=n.getCurrentChar();if(n.pos++,this.encodeChar(i,r),r.length()%3==0&&(this.writeNextTriplet(n,r),mr.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode())!==this.getEncodingMode())){n.signalEncoderChange(0);break}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):mr.illegalCharacter(He.getCharAt(n))}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),o=r.length();n.pos-=o,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(254),n.getNewEncoding()<0&&n.signalEncoderChange(0)},e}(Fv),t$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),n$=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return t$(e,t),e.prototype.getEncodingMode=function(){return 2},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r)},e}(Fv),r$=function(){function t(){}return t.randomize253State=function(e){var n=129+(149*e%253+1);return n<=254?n:n-254},t.encodeHighLevel=function(e,n,r,i,o){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Fv,a=[new $W,s,new n$,new e$,new XW,new GW],u=new ZW(e);u.setSymbolShape(n),u.setSizeConstraints(r,i),e.startsWith(zW)&&e.endsWith("")?(u.writeCodeword(236),u.setSkipAtEnd(2),u.pos+=7):e.startsWith(WW)&&e.endsWith("")&&(u.writeCodeword(237),u.setSkipAtEnd(2),u.pos+=7);var l=0;for(o&&(s.encodeMaximal(u),l=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)a[l].encode(u),u.getNewEncoding()>=0&&(l=u.getNewEncoding(),u.resetEncoderSignal());var c=u.getCodewordCount();u.updateSymbolInfo();var h=u.getSymbolInfo().getDataCapacity();c<h&&l!==0&&l!==5&&l!==4&&u.writeCodeword("þ");var d=u.getCodewords();for(d.length()<h&&d.append(129);d.length()<h;)d.append(this.randomize253State(d.length()+1));return u.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===3&&i===3){for(var o=Math.min(n+3,e.length),s=n;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return 0}else if(r===4&&i===4){for(o=Math.min(n+4,e.length),s=n;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return 0}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===0?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25])[r]=0;for(var o=0,s=new Uint8Array(6),a=[];;){if(n+o===e.length){Lt.fill(s,0),Lt.fill(a,0);var u=this.findMinimums(i,a,mt.MAX_VALUE,s),l=this.getMinimumCount(s);if(a[0]===u)return 0;if(l===1){if(s[5]>0)return 5;if(s[4]>0)return 4;if(s[2]>0)return 2;if(s[3]>0)return 3}return 1}var c=e.charCodeAt(n+o);if(o++,this.isDigit(c)?i[0]+=.5:this.isExtendedASCII(c)?(i[0]=Math.ceil(i[0]),i[0]+=2):(i[0]=Math.ceil(i[0]),i[0]++),this.isNativeC40(c)?i[1]+=2/3:this.isExtendedASCII(c)?i[1]+=8/3:i[1]+=4/3,this.isNativeText(c)?i[2]+=2/3:this.isExtendedASCII(c)?i[2]+=8/3:i[2]+=4/3,this.isNativeX12(c)?i[3]+=2/3:this.isExtendedASCII(c)?i[3]+=13/3:i[3]+=10/3,this.isNativeEDIFACT(c)?i[4]+=3/4:this.isExtendedASCII(c)?i[4]+=4.25:i[4]+=3.25,this.isSpecialB256(c)?i[5]+=4:i[5]++,o>=4){if(Lt.fill(s,0),Lt.fill(a,0),this.findMinimums(i,a,mt.MAX_VALUE,s),a[0]<this.min(a[5],a[1],a[2],a[3],a[4]))return 0;if(a[5]<a[0]||a[5]+1<this.min(a[1],a[2],a[3],a[4]))return 5;if(a[4]+1<this.min(a[5],a[1],a[2],a[3],a[0]))return 4;if(a[2]+1<this.min(a[5],a[1],a[4],a[3],a[0]))return 2;if(a[3]+1<this.min(a[5],a[1],a[4],a[2],a[0]))return 3;if(a[1]+1<this.min(a[0],a[5],a[4],a[2])){if(a[1]<a[3])return 1;if(a[1]===a[3]){for(var h=n+o+1;h<e.length;){var d=e.charCodeAt(h);if(this.isX12TermSep(d))return 3;if(!this.isNativeX12(d))break;h++}return 1}}}}},t.min=function(e,n,r,i,o){var s=Math.min(e,Math.min(n,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},t.findMinimums=function(e,n,r,i){for(var o=0;o<6;o++){var s=n[o]=Math.ceil(e[o]);r>s&&(r=s,Lt.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=mt.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}(),mr=r$,$1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rC=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return di.encode(e,this.charset)!=null}catch{return!1}},t}(),i$=function(){function t(e,n,r){var i,o,s,a,u,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new rC(UW.forName(I))}),this.encoders=[];var c=[];c.push(new rC(HW.ISO_8859_1));for(var h=n!=null&&n.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var m=(i=void 0,$1(c)),y=m.next();!y.done;y=m.next()){var w=y.value,_=e.charAt(d);if(_.charCodeAt(0)===r||w.canEncode(_)){p=!0;break}}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var v=(s=void 0,$1(this.ENCODERS)),A=v.next();!A.done;A=v.next())if((w=A.value).canEncode(e.charAt(d))){c.push(w),p=!0;break}}catch(I){s={error:I}}finally{try{A&&!A.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}p||(h=!0)}if(c.length!==1||h){this.encoders=[];var S=0;try{for(var x=$1(c),M=x.next();!M.done;M=x.next())w=M.value,this.encoders[S++]=w}catch(I){u={error:I}}finally{try{M&&!M.done&&(l=x.return)&&l.call(x)}finally{if(u)throw u.error}}}else this.encoders=[c[0]];var T=-1;if(n!=null){for(d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&n.name===this.encoders[d].name){T=d;break}}this.priorityEncoderIndex=T}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return di.encode(He.getCharAt(e),this.encoders[n].name)},t}(),o$=function(){function t(e,n,r){this.fnc1=r;var i=new i$(e,n,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new ye,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,o,s){var a=e.charAt(i).charCodeAt(0),u=0,l=n.length();n.getPriorityEncoderIndex()>=0&&(a===s||n.canEncode(a,n.getPriorityEncoderIndex()))&&(l=(u=n.getPriorityEncoderIndex())+1);for(var c=u;c<l;c++)(a===s||n.canEncode(a,c))&&this.addEdge(r,i+1,new iC(a,n,c,o,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,o=new iC[i+1][n.length()];this.addEdges(e,n,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<n.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,n,o,s,o[s][a],r);for(a=0;a<n.length();a++)o[s-1][a]=null}var u=-1,l=mt.MAX_VALUE;for(a=0;a<n.length();a++)if(o[i][a]!=null){var c=o[i][a];c.cachedTotalSize<l&&(l=c.cachedTotalSize,u=a)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],d=o[i][u];d!=null;){if(d.isFNC1())h.unshift(1e3);else{var p=n.encode(d.c,d.encoderIndex);for(s=p.length-1;s>=0;s--)h.unshift(255&p[s])}(d.previous===null?0:d.previous.encoderIndex)!==d.encoderIndex&&h.unshift(256+n.getECIValue(d.encoderIndex)),d=d.previous}var m=[];for(s=0;s<m.length;s++)m[s]=h[s];return m},t}(),iC=function(){function t(e,n,r,i,o){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length;(i===null?0:i.encoderIndex)!==r&&(s+=3),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),s$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(nC||(nC={})),function(t){function e(n,r,i,o,s){var a=t.call(this,n,r,i)||this;return a.shape=o,a.macroId=s,a}s$(e,t),e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape}}(o$);var a$=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),u$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),P8=function(t){function e(n,r,i){var o=t.call(this,n)||this;return o.value=r,o.bitCount=i,o}return u$(e,t),e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+mt.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(a$),l$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){function e(n,r,i){var o=t.call(this,n,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return l$(e,t),e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(P8);new P8(null,0,0);Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0]);var c$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(t){var e,n;try{for(var r=c$(t),i=r.next();!i.done;i=r.next()){var o=i.value;Lt.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t})(Lt.createInt32Array(6,6));(function(t){var e=He.getCharCode(" "),n=He.getCharCode("."),r=He.getCharCode(",");t[0][e]=1;for(var i=He.getCharCode("Z"),o=He.getCharCode("A"),s=o;s<=i;s++)t[0][s]=s-o+2;t[1][e]=1;var a=He.getCharCode("z"),u=He.getCharCode("a");for(s=u;s<=a;s++)t[1][s]=s-u+2;t[2][e]=1;var l=He.getCharCode("9"),c=He.getCharCode("0");for(s=c;s<=l;s++)t[2][s]=s-c+2;t[2][r]=12,t[2][n]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)t[3][He.getCharCode(h[d])]=d;var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(d=0;d<p.length;d++)He.getCharCode(p[d])>0&&(t[4][He.getCharCode(p[d])]=d);return t})(Lt.createInt32Array(5,256));(function(){Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12])})();var Zu=function(t){return t instanceof Date},O8=function(t){return t==null},N8=function(t){return typeof t=="object"},oC=function(t){return!O8(t)&&!Array.isArray(t)&&N8(t)&&!Zu(t)},sC=function(t){return O8(t)||!N8(t)};function D8(t,e){if(sC(t)||sC(e))return t===e;if(Zu(t)&&Zu(e))return t.getTime()===e.getTime();var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0,o=n;i<o.length;i++){var s=o[i],a=t[s];if(!r.includes(s))return!1;if(s!=="ref"){var u=e[s];if(Zu(a)&&Zu(u)||oC(a)&&oC(u)||Array.isArray(a)&&Array.isArray(u)?!D8(a,u):a!==u)return!1}}return!0}var h$=new URL("/barberia-turnos/assets/scanner-beep-hQk9Q5dh.mp3",import.meta.url),f$=function(t){var e=t.onResult,n=t.onError,r=t.scanDelay,i=t.hints,o=t.deviceId,s=t.stopDecoding,a=t.audio,u=a===void 0||a,l=N.useRef(!1),c=N.useRef(e),h=N.useRef(n),d=N.useRef(null),p=N.useRef(new Audio(h$.href)),m=N.useState(t.constraints),y=m[0],w=m[1],_=N.useMemo(function(){return new DW(i,r)},[]),v=N.useCallback(function(M,T){if(M&&(c.current(M),u&&p.current&&p.current.paused&&p.current.play().catch(function(I){return console.error("Error playing the sound",I)})),T){if(T instanceof j||T instanceof DOMException&&T.name==="IndexSizeError")return;h.current(T)}},[]),A=N.useCallback(function(){_.reset()},[_]),S=N.useCallback(function(){_.stopAsyncDecode()},[_]),x=N.useCallback(function(){return Fg(void 0,void 0,void 0,function(){var M,T;return jg(this,function(I){switch(I.label){case 0:if(!d.current)return[2];I.label=1;case 1:return I.trys.push([1,6,,7]),o?[4,_.decodeFromVideoDevice(o,d.current,v)]:[3,3];case 2:return I.sent(),[3,5];case 3:return M={audio:!1,video:y},[4,_.decodeFromConstraints(M,d.current,v)];case 4:I.sent(),I.label=5;case 5:return[3,7];case 6:return T=I.sent(),h.current(T),[3,7];case 7:return[2]}})})},[_,o,y,v]);return N.useEffect(function(){if(l.current=!0,!s)return Fg(void 0,void 0,void 0,function(){return jg(this,function(M){switch(M.label){case 0:return[4,x()];case 1:return M.sent(),l.current||A(),[2]}})}),function(){l.current=!1,A()};S()},[x,A,s]),N.useEffect(function(){D8(t.constraints,y)||w(t.constraints)},[t.constraints]),N.useEffect(function(){c.current=e},[e]),N.useEffect(function(){h.current=n},[n]),{ref:d,start:x,stop:s}},d$={width:"100%",paddingTop:"100%",overflow:"hidden",position:"relative"},p$={top:0,left:0,width:"100%",height:"100%",display:"block",overflow:"hidden",position:"absolute"},m$=function(t){var e=t.containerStyle,n=t.videoStyle,r=t.constraints,i=r===void 0?v8:r,o=t.onResult,s=t.onDecode,a=t.onError,u=t.viewFinder,l=t.hideCount,c=l===void 0||l,h=t.tracker,d=h!==void 0&&h,p=t.viewFinderBorder,m=t.deviceId,y=t.scanDelay,w=y===void 0?100:y,_=t.audio,v=_===void 0||_,A=function(k,L){var D={};for(var ne in k)Object.prototype.hasOwnProperty.call(k,ne)&&L.indexOf(ne)<0&&(D[ne]=k[ne]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var ge=0;for(ne=Object.getOwnPropertySymbols(k);ge<ne.length;ge++)L.indexOf(ne[ge])<0&&Object.prototype.propertyIsEnumerable.call(k,ne[ge])&&(D[ne[ge]]=k[ne[ge]])}return D}(t,["containerStyle","videoStyle","constraints","onResult","onDecode","onError","viewFinder","hideCount","tracker","viewFinderBorder","deviceId","scanDelay","audio"]),S=N.useState(0),x=S[0],M=S[1],T=N.useState(),I=T[0],R=T[1],O=f$(es({onResult:function(k){return Fg(this,void 0,void 0,function(){return jg(this,function(L){return R(k),o==null||o(k),s==null||s(k.getText()),M(function(D){return D+1}),[2]})})},onError:function(k){a==null||a(k)},constraints:i,deviceId:m,scanDelay:w,audio:v},A)).ref;return Y.createElement("div",{style:es(es({},d$),e)},u?Y.createElement(u,null):Y.createElement(YU,{video:O.current,result:I,scanCount:x,hideCount:c,tracker:d,border:p,constraints:i,deviceId:m,scanDelay:w}),Y.createElement("video",{ref:O,muted:!0,playsInline:!0,style:es(es({},p$),n)}))};function g$(){const[t,e]=N.useState(""),n=async r=>{if(!r)return;const i=(r==null?void 0:r.text)||r;try{await Ec(Cr(me,"turnos",i),{estado:"atendido"}),e("Turno confirmado")}catch{e("Error al actualizar")}};return C.jsxs("div",{className:"space-y-4",children:[C.jsx("h2",{className:"text-2xl font-bold",children:"Escanear turno"}),C.jsx(m$,{onDecode:n,onError:()=>{}}),t&&C.jsx("div",{role:"alert",className:"alert alert-success",children:C.jsx("span",{children:t})})]})}function y$(){return C.jsx("div",{className:"p-4",children:C.jsx(g$,{})})}function v$(){return C.jsx(T5,{children:C.jsxs(y5,{children:[C.jsx(qn,{path:"/",element:C.jsx(lF,{})}),C.jsx(qn,{path:"/login",element:C.jsx(Qk,{})}),C.jsx(qn,{path:"/servicios",element:C.jsx(gF,{})}),C.jsx(qn,{path:"/barberos",element:C.jsx(yF,{})}),C.jsx(qn,{path:"/barberos/:id",element:C.jsx(vF,{})}),C.jsx(qn,{path:"/agendar",element:C.jsx(jU,{})}),C.jsx(qn,{path:"/barbero",element:C.jsx(WU,{})}),C.jsx(qn,{path:"/scanner",element:C.jsx(y$,{})}),C.jsx(qn,{path:"/admin",element:C.jsx(FU,{})}),C.jsx(qn,{path:"/admin/servicios",element:C.jsx(fF,{})}),C.jsx(qn,{path:"/admin/barberos",element:C.jsx(mF,{})})]})})}function _$(){return C.jsx(v$,{})}G1.createRoot(document.getElementById("root")).render(C.jsx(Y.StrictMode,{children:C.jsx(_$,{})}));
